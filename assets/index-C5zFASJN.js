(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var _g={exports:{}},gu={};var Qv;function aw(){if(Qv)return gu;Qv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:c,ref:o!==void 0?o:null,props:u}}return gu.Fragment=e,gu.jsx=t,gu.jsxs=t,gu}var Yv;function ow(){return Yv||(Yv=1,_g.exports=aw()),_g.exports}var T=ow(),vg={exports:{}},Ae={};var $v;function lw(){if($v)return Ae;$v=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function O(k){return k===null||typeof k!="object"?null:(k=A&&k[A]||k["@@iterator"],typeof k=="function"?k:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,Z={};function ue(k,W,ae){this.props=k,this.context=W,this.refs=Z,this.updater=ae||j}ue.prototype.isReactComponent={},ue.prototype.setState=function(k,W){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,W,"setState")},ue.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ne(){}ne.prototype=ue.prototype;function le(k,W,ae){this.props=k,this.context=W,this.refs=Z,this.updater=ae||j}var te=le.prototype=new ne;te.constructor=le,K(te,ue.prototype),te.isPureReactComponent=!0;var _e=Array.isArray;function Te(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(k,W,ae){var ce=ae.ref;return{$$typeof:r,type:k,key:W,ref:ce!==void 0?ce:null,props:ae}}function V(k,W){return I(k.type,W,k.props)}function N(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function P(k){var W={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ae){return W[ae]})}var C=/\/+/g;function Ze(k,W){return typeof k=="object"&&k!==null&&k.key!=null?P(""+k.key):W.toString(36)}function yt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Te,Te):(k.status="pending",k.then(function(W){k.status==="pending"&&(k.status="fulfilled",k.value=W)},function(W){k.status==="pending"&&(k.status="rejected",k.reason=W)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Q(k,W,ae,ce,Se){var Ce=typeof k;(Ce==="undefined"||Ce==="boolean")&&(k=null);var Ue=!1;if(k===null)Ue=!0;else switch(Ce){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(k.$$typeof){case r:case e:Ue=!0;break;case _:return Ue=k._init,Q(Ue(k._payload),W,ae,ce,Se)}}if(Ue)return Se=Se(k),Ue=ce===""?"."+Ze(k,0):ce,_e(Se)?(ae="",Ue!=null&&(ae=Ue.replace(C,"$&/")+"/"),Q(Se,W,ae,"",function(Cr){return Cr})):Se!=null&&(N(Se)&&(Se=V(Se,ae+(Se.key==null||k&&k.key===Se.key?"":(""+Se.key).replace(C,"$&/")+"/")+Ue)),W.push(Se)),1;Ue=0;var Pt=ce===""?".":ce+":";if(_e(k))for(var ut=0;ut<k.length;ut++)ce=k[ut],Ce=Pt+Ze(ce,ut),Ue+=Q(ce,W,ae,Ce,Se);else if(ut=O(k),typeof ut=="function")for(k=ut.call(k),ut=0;!(ce=k.next()).done;)ce=ce.value,Ce=Pt+Ze(ce,ut++),Ue+=Q(ce,W,ae,Ce,Se);else if(Ce==="object"){if(typeof k.then=="function")return Q(yt(k),W,ae,ce,Se);throw W=String(k),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function re(k,W,ae){if(k==null)return k;var ce=[],Se=0;return Q(k,ce,"","",function(Ce){return W.call(ae,Ce,Se++)}),ce}function ve(k){if(k._status===-1){var W=k._result;W=W(),W.then(function(ae){(k._status===0||k._status===-1)&&(k._status=1,k._result=ae)},function(ae){(k._status===0||k._status===-1)&&(k._status=2,k._result=ae)}),k._status===-1&&(k._status=0,k._result=W)}if(k._status===1)return k._result.default;throw k._result}var Be=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Qe={map:re,forEach:function(k,W,ae){re(k,function(){W.apply(this,arguments)},ae)},count:function(k){var W=0;return re(k,function(){W++}),W},toArray:function(k){return re(k,function(W){return W})||[]},only:function(k){if(!N(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ae.Activity=b,Ae.Children=Qe,Ae.Component=ue,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=le,Ae.StrictMode=s,Ae.Suspense=g,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(k){return R.H.useMemoCache(k)}},Ae.cache=function(k){return function(){return k.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(k,W,ae){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ce=K({},k.props),Se=k.key;if(W!=null)for(Ce in W.key!==void 0&&(Se=""+W.key),W)!w.call(W,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&W.ref===void 0||(ce[Ce]=W[Ce]);var Ce=arguments.length-2;if(Ce===1)ce.children=ae;else if(1<Ce){for(var Ue=Array(Ce),Pt=0;Pt<Ce;Pt++)Ue[Pt]=arguments[Pt+2];ce.children=Ue}return I(k.type,Se,ce)},Ae.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Ae.createElement=function(k,W,ae){var ce,Se={},Ce=null;if(W!=null)for(ce in W.key!==void 0&&(Ce=""+W.key),W)w.call(W,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Se[ce]=W[ce]);var Ue=arguments.length-2;if(Ue===1)Se.children=ae;else if(1<Ue){for(var Pt=Array(Ue),ut=0;ut<Ue;ut++)Pt[ut]=arguments[ut+2];Se.children=Pt}if(k&&k.defaultProps)for(ce in Ue=k.defaultProps,Ue)Se[ce]===void 0&&(Se[ce]=Ue[ce]);return I(k,Ce,Se)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(k){return{$$typeof:m,render:k}},Ae.isValidElement=N,Ae.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:ve}},Ae.memo=function(k,W){return{$$typeof:p,type:k,compare:W===void 0?null:W}},Ae.startTransition=function(k){var W=R.T,ae={};R.T=ae;try{var ce=k(),Se=R.S;Se!==null&&Se(ae,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Te,Be)}catch(Ce){Be(Ce)}finally{W!==null&&ae.types!==null&&(W.types=ae.types),R.T=W}},Ae.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ae.use=function(k){return R.H.use(k)},Ae.useActionState=function(k,W,ae){return R.H.useActionState(k,W,ae)},Ae.useCallback=function(k,W){return R.H.useCallback(k,W)},Ae.useContext=function(k){return R.H.useContext(k)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(k,W){return R.H.useDeferredValue(k,W)},Ae.useEffect=function(k,W){return R.H.useEffect(k,W)},Ae.useEffectEvent=function(k){return R.H.useEffectEvent(k)},Ae.useId=function(){return R.H.useId()},Ae.useImperativeHandle=function(k,W,ae){return R.H.useImperativeHandle(k,W,ae)},Ae.useInsertionEffect=function(k,W){return R.H.useInsertionEffect(k,W)},Ae.useLayoutEffect=function(k,W){return R.H.useLayoutEffect(k,W)},Ae.useMemo=function(k,W){return R.H.useMemo(k,W)},Ae.useOptimistic=function(k,W){return R.H.useOptimistic(k,W)},Ae.useReducer=function(k,W,ae){return R.H.useReducer(k,W,ae)},Ae.useRef=function(k){return R.H.useRef(k)},Ae.useState=function(k){return R.H.useState(k)},Ae.useSyncExternalStore=function(k,W,ae){return R.H.useSyncExternalStore(k,W,ae)},Ae.useTransition=function(){return R.H.useTransition()},Ae.version="19.2.4",Ae}var Xv;function Sp(){return Xv||(Xv=1,vg.exports=lw()),vg.exports}var we=Sp(),Tg={exports:{}},pu={},Eg={exports:{}},bg={};var Jv;function uw(){return Jv||(Jv=1,(function(r){function e(Q,re){var ve=Q.length;Q.push(re);e:for(;0<ve;){var Be=ve-1>>>1,Qe=Q[Be];if(0<o(Qe,re))Q[Be]=re,Q[ve]=Qe,ve=Be;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var re=Q[0],ve=Q.pop();if(ve!==re){Q[0]=ve;e:for(var Be=0,Qe=Q.length,k=Qe>>>1;Be<k;){var W=2*(Be+1)-1,ae=Q[W],ce=W+1,Se=Q[ce];if(0>o(ae,ve))ce<Qe&&0>o(Se,ae)?(Q[Be]=Se,Q[ce]=ve,Be=ce):(Q[Be]=ae,Q[W]=ve,Be=W);else if(ce<Qe&&0>o(Se,ve))Q[Be]=Se,Q[ce]=ve,Be=ce;else break e}}return re}function o(Q,re){var ve=Q.sortIndex-re.sortIndex;return ve!==0?ve:Q.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var g=[],p=[],_=1,b=null,A=3,O=!1,j=!1,K=!1,Z=!1,ue=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function te(Q){for(var re=t(p);re!==null;){if(re.callback===null)s(p);else if(re.startTime<=Q)s(p),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(p)}}function _e(Q){if(K=!1,te(Q),!j)if(t(g)!==null)j=!0,Te||(Te=!0,P());else{var re=t(p);re!==null&&yt(_e,re.startTime-Q)}}var Te=!1,R=-1,w=5,I=-1;function V(){return Z?!0:!(r.unstable_now()-I<w)}function N(){if(Z=!1,Te){var Q=r.unstable_now();I=Q;var re=!0;try{e:{j=!1,K&&(K=!1,ne(R),R=-1),O=!0;var ve=A;try{t:{for(te(Q),b=t(g);b!==null&&!(b.expirationTime>Q&&V());){var Be=b.callback;if(typeof Be=="function"){b.callback=null,A=b.priorityLevel;var Qe=Be(b.expirationTime<=Q);if(Q=r.unstable_now(),typeof Qe=="function"){b.callback=Qe,te(Q),re=!0;break t}b===t(g)&&s(g),te(Q)}else s(g);b=t(g)}if(b!==null)re=!0;else{var k=t(p);k!==null&&yt(_e,k.startTime-Q),re=!1}}break e}finally{b=null,A=ve,O=!1}re=void 0}}finally{re?P():Te=!1}}}var P;if(typeof le=="function")P=function(){le(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ze=C.port2;C.port1.onmessage=N,P=function(){Ze.postMessage(null)}}else P=function(){ue(N,0)};function yt(Q,re){R=ue(function(){Q(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Q){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var ve=A;A=re;try{return Q()}finally{A=ve}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ve=A;A=Q;try{return re()}finally{A=ve}},r.unstable_scheduleCallback=function(Q,re,ve){var Be=r.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Be+ve:Be):ve=Be,Q){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ve+Qe,Q={id:_++,callback:re,priorityLevel:Q,startTime:ve,expirationTime:Qe,sortIndex:-1},ve>Be?(Q.sortIndex=ve,e(p,Q),t(g)===null&&Q===t(p)&&(K?(ne(R),R=-1):K=!0,yt(_e,ve-Be))):(Q.sortIndex=Qe,e(g,Q),j||O||(j=!0,Te||(Te=!0,P()))),Q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(Q){var re=A;return function(){var ve=A;A=re;try{return Q.apply(this,arguments)}finally{A=ve}}}})(bg)),bg}var Wv;function cw(){return Wv||(Wv=1,Eg.exports=uw()),Eg.exports}var Sg={exports:{}},nn={};var Zv;function hw(){if(Zv)return nn;Zv=1;var r=Sp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:p,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,_)},nn.flushSync=function(g){var p=c.T,_=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=_,s.d.f()}},nn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},nn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},nn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,b=m(_,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:O}):_==="script"&&s.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},nn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},nn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,b=m(_,p.crossOrigin);s.d.L(g,_,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},nn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},nn.requestFormReset=function(g){s.d.r(g)},nn.unstable_batchedUpdates=function(g,p){return g(p)},nn.useFormState=function(g,p,_){return c.H.useFormState(g,p,_)},nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},nn.version="19.2.4",nn}var eT;function fw(){if(eT)return Sg.exports;eT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sg.exports=hw(),Sg.exports}var tT;function dw(){if(tT)return pu;tT=1;var r=cw(),e=Sp(),t=fw();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,l=d;break}if(S===l){v=!0,l=f,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,l=f;break}if(S===l){v=!0,l=d,a=f;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function _(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=_(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),le=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ze(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case K:return"Fragment";case ue:return"Profiler";case Z:return"StrictMode";case _e:return"Suspense";case Te:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case j:return"Portal";case le:return n.displayName||"Context";case ne:return(n._context.displayName||"Context")+".Consumer";case te:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return i=n.displayName||null,i!==null?i:Ze(n.type)||"Memo";case w:i=n._payload,n=n._init;try{return Ze(n(i))}catch{}}return null}var yt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Be=[],Qe=-1;function k(n){return{current:n}}function W(n){0>Qe||(n.current=Be[Qe],Be[Qe]=null,Qe--)}function ae(n,i){Qe++,Be[Qe]=n.current,n.current=i}var ce=k(null),Se=k(null),Ce=k(null),Ue=k(null);function Pt(n,i){switch(ae(Ce,i),ae(Se,n),ae(ce,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?pv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=pv(i),n=yv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(ce),ae(ce,n)}function ut(){W(ce),W(Se),W(Ce)}function Cr(n){n.memoizedState!==null&&ae(Ue,n);var i=ce.current,a=yv(i,n.type);i!==a&&(ae(Se,n),ae(ce,a))}function Na(n){Se.current===n&&(W(ce),W(Se)),Ue.current===n&&(W(Ue),hu._currentValue=ve)}var Da,Va;function fi(n){if(Da===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Da=i&&i[1]||"",Va=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Da+n+Va}var hl=!1;function Nr(n,i){if(!n||hl)return"";hl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var F=G}Reflect.construct(n,[],J)}else{try{J.call()}catch(G){F=G}n.call(J.prototype)}}else{try{throw Error()}catch(G){F=G}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var D=v.split(`
`),q=S.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===q.length)for(l=D.length-1,f=q.length-1;1<=l&&0<=f&&D[l]!==q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==q[f]){var Y=`
`+D[l].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=l&&0<=f);break}}}finally{hl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?fi(a):""}function fl(n,i){switch(n.tag){case 26:case 27:case 5:return fi(n.type);case 16:return fi("Lazy");case 13:return n.child!==i&&i!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return Nr(n.type,!1);case 11:return Nr(n.type.render,!1);case 1:return Nr(n.type,!0);case 31:return fi("Activity");default:return""}}function dl(n){try{var i="",a=null;do i+=fl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var At=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,Ss=r.unstable_cancelCallback,Td=r.unstable_shouldYield,gc=r.unstable_requestPaint,ln=r.unstable_now,Dr=r.unstable_getCurrentPriorityLevel,ml=r.unstable_ImmediatePriority,gl=r.unstable_UserBlockingPriority,xs=r.unstable_NormalPriority,Ed=r.unstable_LowPriority,pc=r.unstable_IdlePriority,yc=r.log,_c=r.unstable_setDisableYieldValue,$n=null,Qt=null;function kn(n){if(typeof yc=="function"&&_c(n),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode($n,n)}catch{}}var _t=Math.clz32?Math.clz32:Tc,vc=Math.log,Ma=Math.LN2;function Tc(n){return n>>>=0,n===0?32:31-(vc(n)/Ma|0)|0}var di=256,Vr=262144,wt=4194304;function mi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function gi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=mi(l):(v&=S,v!==0?f=mi(v):a||(a=S&~n,a!==0&&(f=mi(a))))):(S=l&~d,S!==0?f=mi(S):v!==0?f=mi(v):a||(a=l&~n,a!==0&&(f=mi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Xn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function bd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ec(){var n=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),n}function pi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Mr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Sd(n,i,a,l,f,d){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var S=n.entanglements,D=n.expirationTimes,q=n.hiddenUpdates;for(a=v&~a;0<a;){var Y=31-_t(a),J=1<<Y;S[Y]=0,D[Y]=-1;var F=q[Y];if(F!==null)for(q[Y]=null,Y=0;Y<F.length;Y++){var G=F[Y];G!==null&&(G.lane&=-536870913)}a&=~J}l!==0&&Or(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(v&~i))}function Or(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-_t(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function pl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-_t(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function yl(n,i){var a=i&-i;return a=(a&42)!==0?1:kr(a),(a&(n.suspendedLanes|i))!==0?0:a}function kr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Hi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bc(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:zv(n.type))}function Jn(n,i){var a=re.p;try{return re.p=n,i()}finally{re.p=a}}var Wn=Math.random().toString(36).slice(2),It="__reactFiber$"+Wn,Bt="__reactProps$"+Wn,yi="__reactContainer$"+Wn,Oa="__reactEvents$"+Wn,xd="__reactListeners$"+Wn,Sc="__reactHandles$"+Wn,xc="__reactResources$"+Wn,_i="__reactMarker$"+Wn;function ka(n){delete n[It],delete n[Bt],delete n[Oa],delete n[xd],delete n[Sc]}function vi(n){var i=n[It];if(i)return i;for(var a=n.parentNode;a;){if(i=a[yi]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=xv(n);n!==null;){if(a=n[It])return a;n=xv(n)}return i}n=a,a=n.parentNode}return null}function Pn(n){if(n=n[It]||n[yi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function En(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Ti(n){var i=n[xc];return i||(i=n[xc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(n){n[_i]=!0}var _l=new Set,vl={};function Ei(n,i){bi(n,i),bi(n+"Capture",i)}function bi(n,i){for(vl[n]=i,n=0;n<i.length;n++)_l.add(i[n])}var Tl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),El={},bl={};function Ac(n){return At.call(bl,n)?!0:At.call(El,n)?!1:Tl.test(n)?bl[n]=!0:(El[n]=!0,!1)}function Pa(n,i,a){if(Ac(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function bn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Ct(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function As(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ye(n){if(!n._valueTracker){var i=As(n)?"checked":"value";n._valueTracker=Sl(n,i,""+n[i])}}function Pr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=As(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Si(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var jr=/[\n"\\]/g;function fn(n){return n.replace(jr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ja(n,i,a,l,f,d,v,S){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+qt(i)):n.value!==""+qt(i)&&(n.value=""+qt(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?xl(n,v,qt(i)):a!=null?xl(n,v,qt(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+qt(S):n.removeAttribute("name")}function wc(n,i,a,l,f,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ye(n);return}a=a!=null?""+qt(a):"",i=i!=null?""+qt(i):a,S||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=S?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ye(n)}function xl(n,i,a){i==="number"&&Si(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ws(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+qt(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Ic(n,i,a){if(i!=null&&(i=""+qt(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+qt(a):""}function Is(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(yt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=qt(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Ye(n)}function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Al(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Rc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function wl(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Al(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Al(n,d,i[d])}function La(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(n){return Rs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zn(){}var Il=null;function jn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Cs=null,xi=null;function Lr(n){var i=Pn(n);if(i&&(n=i.stateNode)){var a=n[Bt]||null;e:switch(n=i.stateNode,i.type){case"input":if(ja(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Bt]||null;if(!f)throw Error(s(90));ja(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Pr(l)}break e;case"textarea":Ic(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ws(n,!!a.multiple,i,!1)}}}var za=!1;function Ns(n,i,a){if(za)return n(i,a);za=!0;try{var l=n(i);return l}finally{if(za=!1,(Cs!==null||xi!==null)&&(bh(),Cs&&(i=Cs,n=xi,xi=Cs=null,Lr(i),n)))for(i=0;i<n.length;i++)Lr(n[i])}}function ei(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Bt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ur=!1;if(Ln)try{var et={};Object.defineProperty(et,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Ur=!1}var Ai=null,Rl=null,zr=null;function Cl(){if(zr)return zr;var n,i=Rl,a=i.length,l,f="value"in Ai?Ai.value:Ai.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return zr=f.slice(n,1<l?1-l:void 0)}function Br(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Gi(){return!0}function ti(){return!1}function Yt(n){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Gi:ti,this.isPropagationStopped=ti,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),i}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=Yt(Ki),Ds=b({},Ki,{view:0,detail:0}),Nl=Yt(Ds),Vs,Ba,Ii,qa=b({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ii&&(Ii&&n.type==="mousemove"?(Vs=n.screenX-Ii.screenX,Ba=n.screenY-Ii.screenY):Ba=Vs=0,Ii=n),Vs)},movementY:function(n){return"movementY"in n?n.movementY:Ba}}),Dl=Yt(qa),qr=b({},qa,{dataTransfer:0}),Nc=Yt(qr),Dc=b({},Ds,{relatedTarget:0}),Fr=Yt(Dc),Vl=b({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Vc=Yt(Vl),Fa=b({},Ki,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Mc=Yt(Fa),Oc=b({},Ki,{data:0}),Ri=Yt(Oc),kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=jc[n])?!!i[n]:!1}function Ms(){return Lc}var un=b({},Ds,{key:function(n){if(n.key){var i=kc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Br(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Pc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(n){return n.type==="keypress"?Br(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Br(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Uc=Yt(un),zc=b({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Yt(zc),h=b({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),y=Yt(h),E=b({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=Yt(E),z=b({},qa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Yt(z),ie=b({},Ki,{newState:0,oldState:0}),Ie=Yt(ie),vt=[9,13,27,32],He=Ln&&"CompositionEvent"in window,ct=null;Ln&&"documentMode"in document&&(ct=document.documentMode);var Un=Ln&&"TextEvent"in window&&!ct,Ci=Ln&&(!He||ct&&8<ct&&11>=ct),ni=" ",ii=!1;function Hr(n,i){switch(n){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ga=!1;function Nx(n,i){switch(n){case"compositionend":return Ha(i);case"keypress":return i.which!==32?null:(ii=!0,ni);case"textInput":return n=i.data,n===ni&&ii?null:n;default:return null}}function Dx(n,i){if(Ga)return n==="compositionend"||!He&&Hr(n,i)?(n=Cl(),zr=Rl=Ai=null,Ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ci&&i.locale!=="ko"?null:i.data;default:return null}}var Vx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Vx[n.type]:i==="textarea"}function Ry(n,i,a,l){Cs?xi?xi.push(l):xi=[l]:Cs=l,i=Ch(i,"onChange"),0<i.length&&(a=new wi("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ml=null,Ol=null;function Mx(n){cv(n,0)}function Bc(n){var i=En(n);if(Pr(i))return n}function Cy(n,i){if(n==="change")return i}var Ny=!1;if(Ln){var Ad;if(Ln){var wd="oninput"in document;if(!wd){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),wd=typeof Dy.oninput=="function"}Ad=wd}else Ad=!1;Ny=Ad&&(!document.documentMode||9<document.documentMode)}function Vy(){Ml&&(Ml.detachEvent("onpropertychange",My),Ol=Ml=null)}function My(n){if(n.propertyName==="value"&&Bc(Ol)){var i=[];Ry(i,Ol,n,jn(n)),Ns(Mx,i)}}function Ox(n,i,a){n==="focusin"?(Vy(),Ml=i,Ol=a,Ml.attachEvent("onpropertychange",My)):n==="focusout"&&Vy()}function kx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bc(Ol)}function Px(n,i){if(n==="click")return Bc(i)}function jx(n,i){if(n==="input"||n==="change")return Bc(i)}function Lx(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:Lx;function kl(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!At.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function Oy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ky(n,i){var a=Oy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Oy(a)}}function Py(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Py(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function jy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Si(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Si(n.document)}return i}function Id(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Ux=Ln&&"documentMode"in document&&11>=document.documentMode,Ka=null,Rd=null,Pl=null,Cd=!1;function Ly(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cd||Ka==null||Ka!==Si(l)||(l=Ka,"selectionStart"in l&&Id(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Pl&&kl(Pl,l)||(Pl=l,l=Ch(Rd,"onSelect"),0<l.length&&(i=new wi("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ka)))}function Gr(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Qa={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionrun:Gr("Transition","TransitionRun"),transitionstart:Gr("Transition","TransitionStart"),transitioncancel:Gr("Transition","TransitionCancel"),transitionend:Gr("Transition","TransitionEnd")},Nd={},Uy={};Ln&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Kr(n){if(Nd[n])return Nd[n];if(!Qa[n])return n;var i=Qa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Uy)return Nd[n]=i[a];return n}var zy=Kr("animationend"),By=Kr("animationiteration"),qy=Kr("animationstart"),zx=Kr("transitionrun"),Bx=Kr("transitionstart"),qx=Kr("transitioncancel"),Fy=Kr("transitionend"),Hy=new Map,Dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dd.push("scrollEnd");function si(n,i){Hy.set(n,i),Ei(i,[n])}var qc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],Ya=0,Vd=0;function Fc(){for(var n=Ya,i=Vd=Ya=0;i<n;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var d=zn[i];if(zn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&Gy(a,f,d)}}function Hc(n,i,a,l){zn[Ya++]=n,zn[Ya++]=i,zn[Ya++]=a,zn[Ya++]=l,Vd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Md(n,i,a,l){return Hc(n,i,a,l),Gc(n)}function Qr(n,i){return Hc(n,null,null,i),Gc(n)}function Gy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-_t(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Gc(n){if(50<su)throw su=0,qm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var $a={};function Fx(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,i,a,l){return new Fx(n,i,a,l)}function Od(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Yi(n,i){var a=n.alternate;return a===null?(a=xn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Ky(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Kc(n,i,a,l,f,d){var v=0;if(l=n,typeof n=="function")Od(n)&&(v=1);else if(typeof n=="string")v=YA(n,a,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=xn(31,a,i,f),n.elementType=I,n.lanes=d,n;case K:return Yr(a.children,f,d,i);case Z:v=8,f|=24;break;case ue:return n=xn(12,a,i,f|2),n.elementType=ue,n.lanes=d,n;case _e:return n=xn(13,a,i,f),n.elementType=_e,n.lanes=d,n;case Te:return n=xn(19,a,i,f),n.elementType=Te,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:v=10;break e;case ne:v=9;break e;case te:v=11;break e;case R:v=14;break e;case w:v=16,l=null;break e}v=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return i=xn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Yr(n,i,a,l){return n=xn(7,n,l,i),n.lanes=a,n}function kd(n,i,a){return n=xn(6,n,null,i),n.lanes=a,n}function Qy(n){var i=xn(18,null,null,0);return i.stateNode=n,i}function Pd(n,i,a){return i=xn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Yy=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var a=Yy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:dl(i)},Yy.set(n,i),i)}return{value:n,source:i,stack:dl(i)}}var Xa=[],Ja=0,Qc=null,jl=0,qn=[],Fn=0,Os=null,Ni=1,Di="";function $i(n,i){Xa[Ja++]=jl,Xa[Ja++]=Qc,Qc=n,jl=i}function $y(n,i,a){qn[Fn++]=Ni,qn[Fn++]=Di,qn[Fn++]=Os,Os=n;var l=Ni;n=Di;var f=32-_t(l)-1;l&=~(1<<f),a+=1;var d=32-_t(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Ni=1<<32-_t(i)+f|a<<f|l,Di=d+n}else Ni=1<<d|a<<f|l,Di=n}function jd(n){n.return!==null&&($i(n,1),$y(n,1,0))}function Ld(n){for(;n===Qc;)Qc=Xa[--Ja],Xa[Ja]=null,jl=Xa[--Ja],Xa[Ja]=null;for(;n===Os;)Os=qn[--Fn],qn[Fn]=null,Di=qn[--Fn],qn[Fn]=null,Ni=qn[--Fn],qn[Fn]=null}function Xy(n,i){qn[Fn++]=Ni,qn[Fn++]=Di,qn[Fn++]=Os,Ni=i.id,Di=i.overflow,Os=n}var $t=null,ot=null,je=!1,ks=null,Hn=!1,Ud=Error(s(519));function Ps(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ll(Bn(i,n)),Ud}function Jy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[It]=n,i[Bt]=l,a){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(a=0;a<au.length;a++)Me(au[a],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),wc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),Is(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||mv(i.textContent,a)?(l.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),l.onScroll!=null&&Me("scroll",i),l.onScrollEnd!=null&&Me("scrollend",i),l.onClick!=null&&(i.onclick=Zn),i=!0):i=!1,i||Ps(n,!0)}function Wy(n){for($t=n.return;$t;)switch($t.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:$t=$t.return}}function Wa(n){if(n!==$t)return!1;if(!je)return Wy(n),je=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||ig(n.type,n.memoizedProps)),a=!a),a&&ot&&Ps(n),Wy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ot=Sv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ot=Sv(n)}else i===27?(i=ot,Xs(n.type)?(n=lg,lg=null,ot=n):ot=i):ot=$t?Kn(n.stateNode.nextSibling):null;return!0}function $r(){ot=$t=null,je=!1}function zd(){var n=ks;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),ks=null),n}function Ll(n){ks===null?ks=[n]:ks.push(n)}var Bd=k(null),Xr=null,Xi=null;function js(n,i,a){ae(Bd,i._currentValue),i._currentValue=a}function Ji(n){n._currentValue=Bd.current,W(Bd)}function qd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Fd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=f;for(var D=0;D<i.length;D++)if(S.context===i[D]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),qd(d.return,a,n),l||(v=null);break e}d=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),qd(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Za(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=f.type;Sn(f.pendingProps.value,v.value)||(n!==null?n.push(S):n=[S])}}else if(f===Ue.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(hu):n=[hu])}f=f.return}n!==null&&Fd(i,n,a,l),i.flags|=262144}function Yc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Jr(n){Xr=n,Xi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return Zy(Xr,n)}function $c(n,i){return Xr===null&&Jr(n),Zy(n,i)}function Zy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Xi===null){if(n===null)throw Error(s(308));Xi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Xi=Xi.next=i;return a}var Hx=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},Gx=r.unstable_scheduleCallback,Kx=r.unstable_NormalPriority,Nt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hd(){return{controller:new Hx,data:new Map,refCount:0}}function Ul(n){n.refCount--,n.refCount===0&&Gx(Kx,function(){n.controller.abort()})}var zl=null,Gd=0,eo=0,to=null;function Qx(n,i){if(zl===null){var a=zl=[];Gd=0,eo=Ym(),to={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Gd++,i.then(e_,e_),i}function e_(){if(--Gd===0&&zl!==null){to!==null&&(to.status="fulfilled");var n=zl;zl=null,eo=0,to=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Yx(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var t_=Q.S;Q.S=function(n,i){L0=ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Qx(n,i),t_!==null&&t_(n,i)};var Wr=k(null);function Kd(){var n=Wr.current;return n!==null?n:rt.pooledCache}function Xc(n,i){i===null?ae(Wr,Wr.current):ae(Wr,i.pool)}function n_(){var n=Kd();return n===null?null:{parent:Nt._currentValue,pool:n}}var no=Error(s(460)),Qd=Error(s(474)),Jc=Error(s(542)),Wc={then:function(){}};function i_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function s_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Zn,Zn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,a_(n),n;default:if(typeof i.status=="string")i.then(Zn,Zn);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,a_(n),n}throw ea=i,no}}function Zr(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ea=a,no):a}}var ea=null;function r_(){if(ea===null)throw Error(s(459));var n=ea;return ea=null,n}function a_(n){if(n===no||n===Jc)throw Error(s(483))}var io=null,Bl=0;function Zc(n){var i=Bl;return Bl+=1,io===null&&(io=[]),s_(io,n,i)}function ql(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function eh(n,i){throw i.$$typeof===A?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function o_(n){function i(L,M){if(n){var B=L.deletions;B===null?(L.deletions=[M],L.flags|=16):B.push(M)}}function a(L,M){if(!n)return null;for(;M!==null;)i(L,M),M=M.sibling;return null}function l(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function f(L,M){return L=Yi(L,M),L.index=0,L.sibling=null,L}function d(L,M,B){return L.index=B,n?(B=L.alternate,B!==null?(B=B.index,B<M?(L.flags|=67108866,M):B):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function v(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function S(L,M,B,$){return M===null||M.tag!==6?(M=kd(B,L.mode,$),M.return=L,M):(M=f(M,B),M.return=L,M)}function D(L,M,B,$){var pe=B.type;return pe===K?Y(L,M,B.props.children,$,B.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&Zr(pe)===M.type)?(M=f(M,B.props),ql(M,B),M.return=L,M):(M=Kc(B.type,B.key,B.props,null,L.mode,$),ql(M,B),M.return=L,M)}function q(L,M,B,$){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=Pd(B,L.mode,$),M.return=L,M):(M=f(M,B.children||[]),M.return=L,M)}function Y(L,M,B,$,pe){return M===null||M.tag!==7?(M=Yr(B,L.mode,$,pe),M.return=L,M):(M=f(M,B),M.return=L,M)}function J(L,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=kd(""+M,L.mode,B),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case O:return B=Kc(M.type,M.key,M.props,null,L.mode,B),ql(B,M),B.return=L,B;case j:return M=Pd(M,L.mode,B),M.return=L,M;case w:return M=Zr(M),J(L,M,B)}if(yt(M)||P(M))return M=Yr(M,L.mode,B,null),M.return=L,M;if(typeof M.then=="function")return J(L,Zc(M),B);if(M.$$typeof===le)return J(L,$c(L,M),B);eh(L,M)}return null}function F(L,M,B,$){var pe=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return pe!==null?null:S(L,M,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case O:return B.key===pe?D(L,M,B,$):null;case j:return B.key===pe?q(L,M,B,$):null;case w:return B=Zr(B),F(L,M,B,$)}if(yt(B)||P(B))return pe!==null?null:Y(L,M,B,$,null);if(typeof B.then=="function")return F(L,M,Zc(B),$);if(B.$$typeof===le)return F(L,M,$c(L,B),$);eh(L,B)}return null}function G(L,M,B,$,pe){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return L=L.get(B)||null,S(M,L,""+$,pe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case O:return L=L.get($.key===null?B:$.key)||null,D(M,L,$,pe);case j:return L=L.get($.key===null?B:$.key)||null,q(M,L,$,pe);case w:return $=Zr($),G(L,M,B,$,pe)}if(yt($)||P($))return L=L.get(B)||null,Y(M,L,$,pe,null);if(typeof $.then=="function")return G(L,M,B,Zc($),pe);if($.$$typeof===le)return G(L,M,B,$c(M,$),pe);eh(M,$)}return null}function fe(L,M,B,$){for(var pe=null,qe=null,me=M,Ne=M=0,ke=null;me!==null&&Ne<B.length;Ne++){me.index>Ne?(ke=me,me=null):ke=me.sibling;var Fe=F(L,me,B[Ne],$);if(Fe===null){me===null&&(me=ke);break}n&&me&&Fe.alternate===null&&i(L,me),M=d(Fe,M,Ne),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe,me=ke}if(Ne===B.length)return a(L,me),je&&$i(L,Ne),pe;if(me===null){for(;Ne<B.length;Ne++)me=J(L,B[Ne],$),me!==null&&(M=d(me,M,Ne),qe===null?pe=me:qe.sibling=me,qe=me);return je&&$i(L,Ne),pe}for(me=l(me);Ne<B.length;Ne++)ke=G(me,L,Ne,B[Ne],$),ke!==null&&(n&&ke.alternate!==null&&me.delete(ke.key===null?Ne:ke.key),M=d(ke,M,Ne),qe===null?pe=ke:qe.sibling=ke,qe=ke);return n&&me.forEach(function(tr){return i(L,tr)}),je&&$i(L,Ne),pe}function Ee(L,M,B,$){if(B==null)throw Error(s(151));for(var pe=null,qe=null,me=M,Ne=M=0,ke=null,Fe=B.next();me!==null&&!Fe.done;Ne++,Fe=B.next()){me.index>Ne?(ke=me,me=null):ke=me.sibling;var tr=F(L,me,Fe.value,$);if(tr===null){me===null&&(me=ke);break}n&&me&&tr.alternate===null&&i(L,me),M=d(tr,M,Ne),qe===null?pe=tr:qe.sibling=tr,qe=tr,me=ke}if(Fe.done)return a(L,me),je&&$i(L,Ne),pe;if(me===null){for(;!Fe.done;Ne++,Fe=B.next())Fe=J(L,Fe.value,$),Fe!==null&&(M=d(Fe,M,Ne),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe);return je&&$i(L,Ne),pe}for(me=l(me);!Fe.done;Ne++,Fe=B.next())Fe=G(me,L,Ne,Fe.value,$),Fe!==null&&(n&&Fe.alternate!==null&&me.delete(Fe.key===null?Ne:Fe.key),M=d(Fe,M,Ne),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe);return n&&me.forEach(function(rw){return i(L,rw)}),je&&$i(L,Ne),pe}function it(L,M,B,$){if(typeof B=="object"&&B!==null&&B.type===K&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case O:e:{for(var pe=B.key;M!==null;){if(M.key===pe){if(pe=B.type,pe===K){if(M.tag===7){a(L,M.sibling),$=f(M,B.props.children),$.return=L,L=$;break e}}else if(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&Zr(pe)===M.type){a(L,M.sibling),$=f(M,B.props),ql($,B),$.return=L,L=$;break e}a(L,M);break}else i(L,M);M=M.sibling}B.type===K?($=Yr(B.props.children,L.mode,$,B.key),$.return=L,L=$):($=Kc(B.type,B.key,B.props,null,L.mode,$),ql($,B),$.return=L,L=$)}return v(L);case j:e:{for(pe=B.key;M!==null;){if(M.key===pe)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){a(L,M.sibling),$=f(M,B.children||[]),$.return=L,L=$;break e}else{a(L,M);break}else i(L,M);M=M.sibling}$=Pd(B,L.mode,$),$.return=L,L=$}return v(L);case w:return B=Zr(B),it(L,M,B,$)}if(yt(B))return fe(L,M,B,$);if(P(B)){if(pe=P(B),typeof pe!="function")throw Error(s(150));return B=pe.call(B),Ee(L,M,B,$)}if(typeof B.then=="function")return it(L,M,Zc(B),$);if(B.$$typeof===le)return it(L,M,$c(L,B),$);eh(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(a(L,M.sibling),$=f(M,B),$.return=L,L=$):(a(L,M),$=kd(B,L.mode,$),$.return=L,L=$),v(L)):a(L,M)}return function(L,M,B,$){try{Bl=0;var pe=it(L,M,B,$);return io=null,pe}catch(me){if(me===no||me===Jc)throw me;var qe=xn(29,me,null,L.mode);return qe.lanes=$,qe.return=L,qe}}}var ta=o_(!0),l_=o_(!1),Ls=!1;function Yd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Us(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function zs(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Gc(n),Gy(n,null,a),i}return Hc(n,l,i,a),Gc(n)}function Fl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,pl(n,a)}}function Xd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Jd=!1;function Hl(){if(Jd){var n=to;if(n!==null)throw n}}function Gl(n,i,a,l){Jd=!1;var f=n.updateQueue;Ls=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var D=S,q=D.next;D.next=null,v===null?d=q:v.next=q,v=D;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==v&&(S===null?Y.firstBaseUpdate=q:S.next=q,Y.lastBaseUpdate=D))}if(d!==null){var J=f.baseState;v=0,Y=q=D=null,S=d;do{var F=S.lane&-536870913,G=F!==S.lane;if(G?(Oe&F)===F:(l&F)===F){F!==0&&F===eo&&(Jd=!0),Y!==null&&(Y=Y.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var fe=n,Ee=S;F=i;var it=a;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){J=fe.call(it,J,F);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,F=typeof fe=="function"?fe.call(it,J,F):fe,F==null)break e;J=b({},J,F);break e;case 2:Ls=!0}}F=S.callback,F!==null&&(n.flags|=64,G&&(n.flags|=8192),G=f.callbacks,G===null?f.callbacks=[F]:G.push(F))}else G={lane:F,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?(q=Y=G,D=J):Y=Y.next=G,v|=F;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;G=S,S=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Y===null&&(D=J),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=Y,d===null&&(f.shared.lanes=0),Gs|=v,n.lanes=v,n.memoizedState=J}}function u_(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function c_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)u_(a[n],i)}var so=k(null),th=k(0);function h_(n,i){n=as,ae(th,n),ae(so,i),as=n|i.baseLanes}function Wd(){ae(th,as),ae(so,so.current)}function Zd(){as=th.current,W(so),W(th)}var An=k(null),Gn=null;function Bs(n){var i=n.alternate;ae(Tt,Tt.current&1),ae(An,n),Gn===null&&(i===null||so.current!==null||i.memoizedState!==null)&&(Gn=n)}function em(n){ae(Tt,Tt.current),ae(An,n),Gn===null&&(Gn=n)}function f_(n){n.tag===22?(ae(Tt,Tt.current),ae(An,n),Gn===null&&(Gn=n)):qs()}function qs(){ae(Tt,Tt.current),ae(An,An.current)}function wn(n){W(An),Gn===n&&(Gn=null),W(Tt)}var Tt=k(0);function nh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ag(a)||og(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,Re=null,tt=null,Dt=null,ih=!1,ro=!1,na=!1,sh=0,Kl=0,ao=null,$x=0;function mt(){throw Error(s(321))}function tm(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function nm(n,i,a,l,f,d){return Wi=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=n===null||n.memoizedState===null?$_:ym,na=!1,d=a(l,f),na=!1,ro&&(d=m_(i,a,l,f)),d_(n),d}function d_(n){Q.H=$l;var i=tt!==null&&tt.next!==null;if(Wi=0,Dt=tt=Re=null,ih=!1,Kl=0,ao=null,i)throw Error(s(300));n===null||Vt||(n=n.dependencies,n!==null&&Yc(n)&&(Vt=!0))}function m_(n,i,a,l){Re=n;var f=0;do{if(ro&&(ao=null),Kl=0,ro=!1,25<=f)throw Error(s(301));if(f+=1,Dt=tt=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=X_,d=i(a,l)}while(ro);return d}function Xx(){var n=Q.H,i=n.useState()[0];return i=typeof i.then=="function"?Ql(i):i,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Re.flags|=1024),i}function im(){var n=sh!==0;return sh=0,n}function sm(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function rm(n){if(ih){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ih=!1}Wi=0,Dt=tt=Re=null,ro=!1,Kl=sh=0,ao=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Re.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Et(){if(tt===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=Dt===null?Re.memoizedState:Dt.next;if(i!==null)Dt=i,tt=n;else{if(n===null)throw Re.alternate===null?Error(s(467)):Error(s(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Dt===null?Re.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function rh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(n){var i=Kl;return Kl+=1,ao===null&&(ao=[]),n=s_(ao,n,i),i=Re,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?$_:ym),n}function ah(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ql(n);if(n.$$typeof===le)return Xt(n)}throw Error(s(438,String(n)))}function am(n){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=rh(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=V;return i.index++,a}function Zi(n,i){return typeof i=="function"?i(n):i}function oh(n){var i=Et();return om(i,tt,n)}function om(n,i,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var S=v=null,D=null,q=i,Y=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(Oe&J)===J:(Wi&J)===J){var F=q.revertLane;if(F===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===eo&&(Y=!0);else if((Wi&F)===F){q=q.next,F===eo&&(Y=!0);continue}else J={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=J,v=d):D=D.next=J,Re.lanes|=F,Gs|=F;J=q.action,na&&a(d,J),d=q.hasEagerState?q.eagerState:a(d,J)}else F={lane:J,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=F,v=d):D=D.next=F,Re.lanes|=J,Gs|=J;q=q.next}while(q!==null&&q!==i);if(D===null?v=d:D.next=S,!Sn(d,n.memoizedState)&&(Vt=!0,Y&&(a=to,a!==null)))throw a;n.memoizedState=d,n.baseState=v,n.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function lm(n){var i=Et(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=n(d,v.action),v=v.next;while(v!==f);Sn(d,i.memoizedState)||(Vt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function g_(n,i,a){var l=Re,f=Et(),d=je;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Sn((tt||f).memoizedState,a);if(v&&(f.memoizedState=a,Vt=!0),f=f.queue,hm(__.bind(null,l,f,n),[n]),f.getSnapshot!==i||v||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,oo(9,{destroy:void 0},y_.bind(null,l,f,a,i),null),rt===null)throw Error(s(349));d||(Wi&127)!==0||p_(l,i,a)}return a}function p_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=rh(),Re.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function y_(n,i,a,l){i.value=a,i.getSnapshot=l,v_(i)&&T_(n)}function __(n,i,a){return a(function(){v_(i)&&T_(n)})}function v_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function T_(n){var i=Qr(n,2);i!==null&&_n(i,n,2)}function um(n){var i=cn();if(typeof n=="function"){var a=n;if(n=a(),na){kn(!0);try{a()}finally{kn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},i}function E_(n,i,a,l){return n.baseState=a,om(n,tt,typeof l=="function"?l:Zi)}function Jx(n,i,a,l,f){if(ch(n))throw Error(s(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};Q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,b_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function b_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=Q.T,v={};Q.T=v;try{var S=a(f,l),D=Q.S;D!==null&&D(v,S),S_(n,i,S)}catch(q){cm(n,i,q)}finally{d!==null&&v.types!==null&&(d.types=v.types),Q.T=d}}else try{d=a(f,l),S_(n,i,d)}catch(q){cm(n,i,q)}}function S_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){x_(n,i,l)},function(l){return cm(n,i,l)}):x_(n,i,a)}function x_(n,i,a){i.status="fulfilled",i.value=a,A_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,b_(n,a)))}function cm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,A_(i),i=i.next;while(i!==l)}n.action=null}function A_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function w_(n,i){return i}function I_(n,i){if(je){var a=rt.formState;if(a!==null){e:{var l=Re;if(je){if(ot){t:{for(var f=ot,d=Hn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Kn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ot=Kn(f.nextSibling),l=f.data==="F!";break e}}Ps(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w_,lastRenderedState:i},a.queue=l,a=K_.bind(null,Re,l),l.dispatch=a,l=um(!1),d=pm.bind(null,Re,!1,l.queue),l=cn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=Jx.bind(null,Re,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function R_(n){var i=Et();return C_(i,tt,n)}function C_(n,i,a){if(i=om(n,i,w_)[0],n=oh(Zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ql(i)}catch(v){throw v===no?Jc:v}else l=i;i=Et();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,oo(9,{destroy:void 0},Wx.bind(null,f,a),null)),[l,d,n]}function Wx(n,i){n.action=i}function N_(n){var i=Et(),a=tt;if(a!==null)return C_(i,a,n);Et(),i=i.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function oo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=rh(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function D_(){return Et().memoizedState}function lh(n,i,a,l){var f=cn();Re.flags|=n,f.memoizedState=oo(1|i,{destroy:void 0},a,l===void 0?null:l)}function uh(n,i,a,l){var f=Et();l=l===void 0?null:l;var d=f.memoizedState.inst;tt!==null&&l!==null&&tm(l,tt.memoizedState.deps)?f.memoizedState=oo(i,d,a,l):(Re.flags|=n,f.memoizedState=oo(1|i,d,a,l))}function V_(n,i){lh(8390656,8,n,i)}function hm(n,i){uh(2048,8,n,i)}function Zx(n){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=rh(),Re.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function M_(n){var i=Et().memoizedState;return Zx({ref:i,nextImpl:n}),function(){if((Ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function O_(n,i){return uh(4,2,n,i)}function k_(n,i){return uh(4,4,n,i)}function P_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function j_(n,i,a){a=a!=null?a.concat([n]):null,uh(4,4,P_.bind(null,i,n),a)}function fm(){}function L_(n,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&tm(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function U_(n,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&tm(i,l[1]))return l[0];if(l=n(),na){kn(!0);try{n()}finally{kn(!1)}}return a.memoizedState=[l,i],l}function dm(n,i,a){return a===void 0||(Wi&1073741824)!==0&&(Oe&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=z0(),Re.lanes|=n,Gs|=n,a)}function z_(n,i,a,l){return Sn(a,i)?a:so.current!==null?(n=dm(n,a,l),Sn(n,i)||(Vt=!0),n):(Wi&42)===0||(Wi&1073741824)!==0&&(Oe&261930)===0?(Vt=!0,n.memoizedState=a):(n=z0(),Re.lanes|=n,Gs|=n,i)}function B_(n,i,a,l,f){var d=re.p;re.p=d!==0&&8>d?d:8;var v=Q.T,S={};Q.T=S,pm(n,!1,i,a);try{var D=f(),q=Q.S;if(q!==null&&q(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Y=Yx(D,l);Yl(n,i,Y,Cn(n))}else Yl(n,i,l,Cn(n))}catch(J){Yl(n,i,{then:function(){},status:"rejected",reason:J},Cn())}finally{re.p=d,v!==null&&S.types!==null&&(v.types=S.types),Q.T=v}}function eA(){}function mm(n,i,a,l){if(n.tag!==5)throw Error(s(476));var f=q_(n).queue;B_(n,f,i,ve,a===null?eA:function(){return F_(n),a(l)})}function q_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:ve},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function F_(n){var i=q_(n);i.next===null&&(i=n.alternate.memoizedState),Yl(n,i.next.queue,{},Cn())}function gm(){return Xt(hu)}function H_(){return Et().memoizedState}function G_(){return Et().memoizedState}function tA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Cn();n=Us(a);var l=zs(i,n,a);l!==null&&(_n(l,i,a),Fl(l,i,a)),i={cache:Hd()},n.payload=i;return}i=i.return}}function nA(n,i,a){var l=Cn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ch(n)?Q_(i,a):(a=Md(n,i,a,l),a!==null&&(_n(a,n,l),Y_(a,i,l)))}function K_(n,i,a){var l=Cn();Yl(n,i,a,l)}function Yl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ch(n))Q_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,S=d(v,a);if(f.hasEagerState=!0,f.eagerState=S,Sn(S,v))return Hc(n,i,f,0),rt===null&&Fc(),!1}catch{}if(a=Md(n,i,f,l),a!==null)return _n(a,n,l),Y_(a,i,l),!0}return!1}function pm(n,i,a,l){if(l={lane:2,revertLane:Ym(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ch(n)){if(i)throw Error(s(479))}else i=Md(n,a,l,2),i!==null&&_n(i,n,2)}function ch(n){var i=n.alternate;return n===Re||i!==null&&i===Re}function Q_(n,i){ro=ih=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Y_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,pl(n,a)}}var $l={readContext:Xt,use:ah,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};$l.useEffectEvent=mt;var $_={readContext:Xt,use:ah,useCallback:function(n,i){return cn().memoizedState=[n,i===void 0?null:i],n},useContext:Xt,useEffect:V_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,lh(4194308,4,P_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return lh(4194308,4,n,i)},useInsertionEffect:function(n,i){lh(4,2,n,i)},useMemo:function(n,i){var a=cn();i=i===void 0?null:i;var l=n();if(na){kn(!0);try{n()}finally{kn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=cn();if(a!==void 0){var f=a(i);if(na){kn(!0);try{a(i)}finally{kn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=nA.bind(null,Re,n),[l.memoizedState,n]},useRef:function(n){var i=cn();return n={current:n},i.memoizedState=n},useState:function(n){n=um(n);var i=n.queue,a=K_.bind(null,Re,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:fm,useDeferredValue:function(n,i){var a=cn();return dm(a,n,i)},useTransition:function(){var n=um(!1);return n=B_.bind(null,Re,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Re,f=cn();if(je){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),rt===null)throw Error(s(349));(Oe&127)!==0||p_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,V_(__.bind(null,l,d,n),[n]),l.flags|=2048,oo(9,{destroy:void 0},y_.bind(null,l,d,a,i),null),a},useId:function(){var n=cn(),i=rt.identifierPrefix;if(je){var a=Di,l=Ni;a=(l&~(1<<32-_t(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=sh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=$x++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:gm,useFormState:I_,useActionState:I_,useOptimistic:function(n){var i=cn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=pm.bind(null,Re,!0,a),a.dispatch=i,[n,i]},useMemoCache:am,useCacheRefresh:function(){return cn().memoizedState=tA.bind(null,Re)},useEffectEvent:function(n){var i=cn(),a={impl:n};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},ym={readContext:Xt,use:ah,useCallback:L_,useContext:Xt,useEffect:hm,useImperativeHandle:j_,useInsertionEffect:O_,useLayoutEffect:k_,useMemo:U_,useReducer:oh,useRef:D_,useState:function(){return oh(Zi)},useDebugValue:fm,useDeferredValue:function(n,i){var a=Et();return z_(a,tt.memoizedState,n,i)},useTransition:function(){var n=oh(Zi)[0],i=Et().memoizedState;return[typeof n=="boolean"?n:Ql(n),i]},useSyncExternalStore:g_,useId:H_,useHostTransitionStatus:gm,useFormState:R_,useActionState:R_,useOptimistic:function(n,i){var a=Et();return E_(a,tt,n,i)},useMemoCache:am,useCacheRefresh:G_};ym.useEffectEvent=M_;var X_={readContext:Xt,use:ah,useCallback:L_,useContext:Xt,useEffect:hm,useImperativeHandle:j_,useInsertionEffect:O_,useLayoutEffect:k_,useMemo:U_,useReducer:lm,useRef:D_,useState:function(){return lm(Zi)},useDebugValue:fm,useDeferredValue:function(n,i){var a=Et();return tt===null?dm(a,n,i):z_(a,tt.memoizedState,n,i)},useTransition:function(){var n=lm(Zi)[0],i=Et().memoizedState;return[typeof n=="boolean"?n:Ql(n),i]},useSyncExternalStore:g_,useId:H_,useHostTransitionStatus:gm,useFormState:N_,useActionState:N_,useOptimistic:function(n,i){var a=Et();return tt!==null?E_(a,tt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:am,useCacheRefresh:G_};X_.useEffectEvent=M_;function _m(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var vm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Cn(),f=Us(l);f.payload=i,a!=null&&(f.callback=a),i=zs(n,f,l),i!==null&&(_n(i,n,l),Fl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Cn(),f=Us(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=zs(n,f,l),i!==null&&(_n(i,n,l),Fl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Cn(),l=Us(a);l.tag=2,i!=null&&(l.callback=i),i=zs(n,l,a),i!==null&&(_n(i,n,a),Fl(i,n,a))}};function J_(n,i,a,l,f,d,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!kl(a,l)||!kl(f,d):!0}function W_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&vm.enqueueReplaceState(i,i.state,null)}function ia(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=b({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function Z_(n){qc(n)}function e0(n){console.error(n)}function t0(n){qc(n)}function hh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function n0(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Tm(n,i,a){return a=Us(a),a.tag=3,a.payload={element:null},a.callback=function(){hh(n,i)},a}function i0(n){return n=Us(n),n.tag=3,n}function s0(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){n0(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){n0(i,a,l),typeof f!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function iA(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Za(i,a,f,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?Sh():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Wc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Gm(n,l,f)),!1;case 22:return a.flags|=65536,l===Wc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Gm(n,l,f)),!1}throw Error(s(435,a.tag))}return Gm(n,l,f),Sh(),!1}if(je)return i=An.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Ud&&(n=Error(s(422),{cause:l}),Ll(Bn(n,a)))):(l!==Ud&&(i=Error(s(423),{cause:l}),Ll(Bn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Bn(l,a),f=Tm(n.stateNode,l,f),Xd(n,f),gt!==4&&(gt=2)),!1;var d=Error(s(520),{cause:l});if(d=Bn(d,a),iu===null?iu=[d]:iu.push(d),gt!==4&&(gt=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Tm(a.stateNode,l,n),Xd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ks===null||!Ks.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=i0(f),s0(f,n,a,l),Xd(a,f),!1}a=a.return}while(a!==null);return!1}var Em=Error(s(461)),Vt=!1;function Jt(n,i,a,l){i.child=n===null?l_(i,null,a,l):ta(i,n.child,a,l)}function r0(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return Jr(i),l=nm(n,i,a,v,d,f),S=im(),n!==null&&!Vt?(sm(n,i,f),es(n,i,f)):(je&&S&&jd(i),i.flags|=1,Jt(n,i,l,f),i.child)}function a0(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Od(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,o0(n,i,d,l,f)):(n=Kc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Cm(n,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:kl,a(v,l)&&n.ref===i.ref)return es(n,i,f)}return i.flags|=1,n=Yi(d,l),n.ref=i.ref,n.return=i,i.child=n}function o0(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(kl(d,l)&&n.ref===i.ref)if(Vt=!1,i.pendingProps=l=d,Cm(n,f))(n.flags&131072)!==0&&(Vt=!0);else return i.lanes=n.lanes,es(n,i,f)}return bm(n,i,a,l,f)}function l0(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return u0(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Xc(i,d!==null?d.cachePool:null),d!==null?h_(i,d):Wd(),f_(i);else return l=i.lanes=536870912,u0(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Xc(i,d.cachePool),h_(i,d),qs(),i.memoizedState=null):(n!==null&&Xc(i,null),Wd(),qs());return Jt(n,i,f,a),i.child}function Xl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function u0(n,i,a,l,f){var d=Kd();return d=d===null?null:{parent:Nt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Xc(i,null),Wd(),f_(i),n!==null&&Za(n,i,l,!0),i.childLanes=f,null}function fh(n,i){return i=mh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function c0(n,i,a){return ta(i,n.child,null,a),n=fh(i,i.pendingProps),n.flags|=2,wn(i),i.memoizedState=null,n}function sA(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(je){if(l.mode==="hidden")return n=fh(i,l),i.lanes=536870912,Xl(null,n);if(em(i),(n=ot)?(n=bv(n,Hn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Os!==null?{id:Ni,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=Qy(n),a.return=i,i.child=a,$t=i,ot=null)):n=null,n===null)throw Ps(i);return i.lanes=536870912,null}return fh(i,l)}var d=n.memoizedState;if(d!==null){var v=d.dehydrated;if(em(i),f)if(i.flags&256)i.flags&=-257,i=c0(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Vt||Za(n,i,a,!1),f=(a&n.childLanes)!==0,Vt||f){if(l=rt,l!==null&&(v=yl(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Qr(n,v),_n(l,n,v),Em;Sh(),i=c0(n,i,a)}else n=d.treeContext,ot=Kn(v.nextSibling),$t=i,je=!0,ks=null,Hn=!1,n!==null&&Xy(i,n),i=fh(i,l),i.flags|=4096;return i}return n=Yi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function dh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function bm(n,i,a,l,f){return Jr(i),a=nm(n,i,a,l,void 0,f),l=im(),n!==null&&!Vt?(sm(n,i,f),es(n,i,f)):(je&&l&&jd(i),i.flags|=1,Jt(n,i,a,f),i.child)}function h0(n,i,a,l,f,d){return Jr(i),i.updateQueue=null,a=m_(i,l,a,f),d_(n),l=im(),n!==null&&!Vt?(sm(n,i,d),es(n,i,d)):(je&&l&&jd(i),i.flags|=1,Jt(n,i,a,d),i.child)}function f0(n,i,a,l,f){if(Jr(i),i.stateNode===null){var d=$a,v=a.contextType;typeof v=="object"&&v!==null&&(d=Xt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=vm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Yd(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Xt(v):$a,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(_m(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&vm.enqueueReplaceState(d,d.state,null),Gl(i,l,d,f),Hl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var S=i.memoizedProps,D=ia(a,S);d.props=D;var q=d.context,Y=a.contextType;v=$a,typeof Y=="object"&&Y!==null&&(v=Xt(Y));var J=a.getDerivedStateFromProps;Y=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||q!==v)&&W_(i,d,l,v),Ls=!1;var F=i.memoizedState;d.state=F,Gl(i,l,d,f),Hl(),q=i.memoizedState,S||F!==q||Ls?(typeof J=="function"&&(_m(i,a,J,l),q=i.memoizedState),(D=Ls||J_(i,a,D,l,F,q,v))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=v,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,$d(n,i),v=i.memoizedProps,Y=ia(a,v),d.props=Y,J=i.pendingProps,F=d.context,q=a.contextType,D=$a,typeof q=="object"&&q!==null&&(D=Xt(q)),S=a.getDerivedStateFromProps,(q=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==J||F!==D)&&W_(i,d,l,D),Ls=!1,F=i.memoizedState,d.state=F,Gl(i,l,d,f),Hl();var G=i.memoizedState;v!==J||F!==G||Ls||n!==null&&n.dependencies!==null&&Yc(n.dependencies)?(typeof S=="function"&&(_m(i,a,S,l),G=i.memoizedState),(Y=Ls||J_(i,a,Y,l,F,G,D)||n!==null&&n.dependencies!==null&&Yc(n.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=D,l=Y):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,dh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=ta(i,n.child,null,f),i.child=ta(i,null,a,f)):Jt(n,i,a,f),i.memoizedState=d.state,n=i.child):n=es(n,i,f),n}function d0(n,i,a,l){return $r(),i.flags|=256,Jt(n,i,a,l),i.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(n){return{baseLanes:n,cachePool:n_()}}function Am(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Rn),n}function m0(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=n!==null&&n.memoizedState===null?!1:(Tt.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(je){if(f?Bs(i):qs(),(n=ot)?(n=bv(n,Hn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Os!==null?{id:Ni,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=Qy(n),a.return=i,i.child=a,$t=i,ot=null)):n=null,n===null)throw Ps(i);return og(n)?i.lanes=32:i.lanes=536870912,null}var S=l.children;return l=l.fallback,f?(qs(),f=i.mode,S=mh({mode:"hidden",children:S},f),l=Yr(l,f,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,l=i.child,l.memoizedState=xm(a),l.childLanes=Am(n,v,a),i.memoizedState=Sm,Xl(null,l)):(Bs(i),wm(i,S))}var D=n.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(d)i.flags&256?(Bs(i),i.flags&=-257,i=Im(n,i,a)):i.memoizedState!==null?(qs(),i.child=n.child,i.flags|=128,i=null):(qs(),S=l.fallback,f=i.mode,l=mh({mode:"visible",children:l.children},f),S=Yr(S,f,a,null),S.flags|=2,l.return=i,S.return=i,l.sibling=S,i.child=l,ta(i,n.child,null,a),l=i.child,l.memoizedState=xm(a),l.childLanes=Am(n,v,a),i.memoizedState=Sm,i=Xl(null,l));else if(Bs(i),og(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(s(419)),l.stack="",l.digest=v,Ll({value:l,source:null,stack:null}),i=Im(n,i,a)}else if(Vt||Za(n,i,a,!1),v=(a&n.childLanes)!==0,Vt||v){if(v=rt,v!==null&&(l=yl(v,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Qr(n,l),_n(v,n,l),Em;ag(S)||Sh(),i=Im(n,i,a)}else ag(S)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,ot=Kn(S.nextSibling),$t=i,je=!0,ks=null,Hn=!1,n!==null&&Xy(i,n),i=wm(i,l.children),i.flags|=4096);return i}return f?(qs(),S=l.fallback,f=i.mode,D=n.child,q=D.sibling,l=Yi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?S=Yi(q,S):(S=Yr(S,f,a,null),S.flags|=2),S.return=i,l.return=i,l.sibling=S,i.child=l,Xl(null,l),l=i.child,S=n.child.memoizedState,S===null?S=xm(a):(f=S.cachePool,f!==null?(D=Nt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=n_(),S={baseLanes:S.baseLanes|a,cachePool:f}),l.memoizedState=S,l.childLanes=Am(n,v,a),i.memoizedState=Sm,Xl(n.child,l)):(Bs(i),a=n.child,n=a.sibling,a=Yi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function wm(n,i){return i=mh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function mh(n,i){return n=xn(22,n,null,i),n.lanes=0,n}function Im(n,i,a){return ta(i,n.child,null,a),n=wm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function g0(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),qd(n.return,i,a)}function Rm(n,i,a,l,f,d){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=f,v.treeForkCount=d)}function p0(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var v=Tt.current,S=(v&2)!==0;if(S?(v=v&1|2,i.flags|=128):v&=1,ae(Tt,v),Jt(n,i,l,a),l=je?jl:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&g0(n,a,i);else if(n.tag===19)g0(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&nh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Rm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&nh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Rm(i,!0,a,null,d,l);break;case"together":Rm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function es(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Gs|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Za(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=Yi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Yi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Cm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Yc(n)))}function rA(n,i,a){switch(i.tag){case 3:Pt(i,i.stateNode.containerInfo),js(i,Nt,n.memoizedState.cache),$r();break;case 27:case 5:Cr(i);break;case 4:Pt(i,i.stateNode.containerInfo);break;case 10:js(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,em(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Bs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?m0(n,i,a):(Bs(i),n=es(n,i,a),n!==null?n.sibling:null);Bs(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Za(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return p0(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Tt,Tt.current),l)break;return null;case 22:return i.lanes=0,l0(n,i,a,i.pendingProps);case 24:js(i,Nt,n.memoizedState.cache)}return es(n,i,a)}function y0(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Vt=!0;else{if(!Cm(n,a)&&(i.flags&128)===0)return Vt=!1,rA(n,i,a);Vt=(n.flags&131072)!==0}else Vt=!1,je&&(i.flags&1048576)!==0&&$y(i,jl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Zr(i.elementType),i.type=n,typeof n=="function")Od(n)?(l=ia(n,l),i.tag=1,i=f0(null,i,n,l,a)):(i.tag=0,i=bm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===te){i.tag=11,i=r0(null,i,n,l,a);break e}else if(f===R){i.tag=14,i=a0(null,i,n,l,a);break e}}throw i=Ze(n)||n,Error(s(306,i,""))}}return i;case 0:return bm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ia(l,i.pendingProps),f0(n,i,l,f,a);case 3:e:{if(Pt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,$d(n,i),Gl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,js(i,Nt,l),l!==d.cache&&Fd(i,[Nt],a,!0),Hl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=d0(n,i,l,a);break e}else if(l!==f){f=Bn(Error(s(424)),i),Ll(f),i=d0(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ot=Kn(n.firstChild),$t=i,je=!0,ks=null,Hn=!0,a=l_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if($r(),l===f){i=es(n,i,a);break e}Jt(n,i,l,a)}i=i.child}return i;case 26:return dh(n,i),n===null?(a=Rv(i.type,null,i.pendingProps,null))?i.memoizedState=a:je||(a=i.type,n=i.pendingProps,l=Nh(Ce.current).createElement(a),l[It]=i,l[Bt]=n,Wt(l,a,n),Rt(l),i.stateNode=l):i.memoizedState=Rv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Cr(i),n===null&&je&&(l=i.stateNode=Av(i.type,i.pendingProps,Ce.current),$t=i,Hn=!0,f=ot,Xs(i.type)?(lg=f,ot=Kn(l.firstChild)):ot=f),Jt(n,i,i.pendingProps.children,a),dh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&je&&((f=l=ot)&&(l=kA(l,i.type,i.pendingProps,Hn),l!==null?(i.stateNode=l,$t=i,ot=Kn(l.firstChild),Hn=!1,f=!0):f=!1),f||Ps(i)),Cr(i),f=i.type,d=i.pendingProps,v=n!==null?n.memoizedProps:null,l=d.children,ig(f,d)?l=null:v!==null&&ig(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=nm(n,i,Xx,null,null,a),hu._currentValue=f),dh(n,i),Jt(n,i,l,a),i.child;case 6:return n===null&&je&&((n=a=ot)&&(a=PA(a,i.pendingProps,Hn),a!==null?(i.stateNode=a,$t=i,ot=null,n=!0):n=!1),n||Ps(i)),null;case 13:return m0(n,i,a);case 4:return Pt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=ta(i,null,l,a):Jt(n,i,l,a),i.child;case 11:return r0(n,i,i.type,i.pendingProps,a);case 7:return Jt(n,i,i.pendingProps,a),i.child;case 8:return Jt(n,i,i.pendingProps.children,a),i.child;case 12:return Jt(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,js(i,i.type,l.value),Jt(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Jr(i),f=Xt(f),l=l(f),i.flags|=1,Jt(n,i,l,a),i.child;case 14:return a0(n,i,i.type,i.pendingProps,a);case 15:return o0(n,i,i.type,i.pendingProps,a);case 19:return p0(n,i,a);case 31:return sA(n,i,a);case 22:return l0(n,i,a,i.pendingProps);case 24:return Jr(i),l=Xt(Nt),n===null?(f=Kd(),f===null&&(f=rt,d=Hd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Yd(i),js(i,Nt,f)):((n.lanes&a)!==0&&($d(n,i),Gl(i,null,null,a),Hl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),js(i,Nt,l)):(l=d.cache,js(i,Nt,l),l!==f.cache&&Fd(i,[Nt],a,!0))),Jt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ts(n){n.flags|=4}function Nm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(H0())n.flags|=8192;else throw ea=Wc,Qd}else n.flags&=-16777217}function _0(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Mv(i))if(H0())n.flags|=8192;else throw ea=Wc,Qd}function gh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ec():536870912,n.lanes|=i,ho|=i)}function Jl(n,i){if(!je)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function aA(n,i,a){var l=i.pendingProps;switch(Ld(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(Nt),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Wa(i)?ts(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,zd())),lt(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(ts(i),d!==null?(lt(i),_0(i,d)):(lt(i),Nm(i,f,null,l,a))):d?d!==n.memoizedState?(ts(i),lt(i),_0(i,d)):(lt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&ts(i),lt(i),Nm(i,f,n,l,a)),null;case 27:if(Na(i),a=Ce.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ts(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return lt(i),null}n=ce.current,Wa(i)?Jy(i):(n=Av(f,l,a),i.stateNode=n,ts(i))}return lt(i),null;case 5:if(Na(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ts(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(d=ce.current,Wa(i))Jy(i);else{var v=Nh(Ce.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}d[It]=i,d[Bt]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(Wt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ts(i)}}return lt(i),Nm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ts(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ce.current,Wa(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=$t,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[It]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||mv(n.nodeValue,a)),n||Ps(i,!0)}else n=Nh(n).createTextNode(l),n[It]=i,i.stateNode=n}return lt(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=Wa(i),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[It]=i}else $r(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),n=!1}else a=zd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(wn(i),i):(wn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return lt(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Wa(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[It]=i}else $r(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),f=!1}else f=zd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(wn(i),i):(wn(i),null)}return wn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),gh(i,i.updateQueue),lt(i),null);case 4:return ut(),n===null&&Wm(i.stateNode.containerInfo),lt(i),null;case 10:return Ji(i.type),lt(i),null;case 19:if(W(Tt),l=i.memoizedState,l===null)return lt(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Jl(l,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=nh(n),d!==null){for(i.flags|=128,Jl(l,!1),n=d.updateQueue,i.updateQueue=n,gh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Ky(a,n),a=a.sibling;return ae(Tt,Tt.current&1|2),je&&$i(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&ln()>Th&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304)}else{if(!f)if(n=nh(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,gh(i,n),Jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!je)return lt(i),null}else 2*ln()-l.renderingStartTime>Th&&a!==536870912&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=ln(),n.sibling=null,a=Tt.current,ae(Tt,f?a&1|2:a&1),je&&$i(i,l.treeForkCount),n):(lt(i),null);case 22:case 23:return wn(i),Zd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&gh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&W(Wr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(Nt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function oA(n,i){switch(Ld(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ji(Nt),ut(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Na(i),null;case 31:if(i.memoizedState!==null){if(wn(i),i.alternate===null)throw Error(s(340));$r()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(wn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));$r()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(Tt),null;case 4:return ut(),null;case 10:return Ji(i.type),null;case 22:case 23:return wn(i),Zd(),n!==null&&W(Wr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ji(Nt),null;case 25:return null;default:return null}}function v0(n,i){switch(Ld(i),i.tag){case 3:Ji(Nt),ut();break;case 26:case 27:case 5:Na(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&wn(i);break;case 13:wn(i);break;case 19:W(Tt);break;case 10:Ji(i.type);break;case 22:case 23:wn(i),Zd(),n!==null&&W(Wr);break;case 24:Ji(Nt)}}function Wl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(S){Xe(i,i.return,S)}}function Fs(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=i;var D=a,q=S;try{q()}catch(Y){Xe(f,D,Y)}}}l=l.next}while(l!==d)}}catch(Y){Xe(i,i.return,Y)}}function T0(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{c_(i,a)}catch(l){Xe(n,n.return,l)}}}function E0(n,i,a){a.props=ia(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(n,i,l)}}function Zl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Xe(n,i,f)}}function Vi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Xe(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Xe(n,i,f)}else a.current=null}function b0(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Xe(n,n.return,f)}}function Dm(n,i,a){try{var l=n.stateNode;CA(l,n.type,a,i),l[Bt]=i}catch(f){Xe(n,n.return,f)}}function S0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xs(n.type)||n.tag===4}function Vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||S0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Zn));else if(l!==4&&(l===27&&Xs(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Mm(n,i,a),n=n.sibling;n!==null;)Mm(n,i,a),n=n.sibling}function ph(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Xs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ph(n,i,a),n=n.sibling;n!==null;)ph(n,i,a),n=n.sibling}function x0(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Wt(i,l,a),i[It]=n,i[Bt]=a}catch(d){Xe(n,n.return,d)}}var ns=!1,Mt=!1,Om=!1,A0=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function lA(n,i){if(n=n.containerInfo,tg=jh,n=jy(n),Id(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,D=-1,q=0,Y=0,J=n,F=null;t:for(;;){for(var G;J!==a||f!==0&&J.nodeType!==3||(S=v+f),J!==d||l!==0&&J.nodeType!==3||(D=v+l),J.nodeType===3&&(v+=J.nodeValue.length),(G=J.firstChild)!==null;)F=J,J=G;for(;;){if(J===n)break t;if(F===a&&++q===f&&(S=v),F===d&&++Y===l&&(D=v),(G=J.nextSibling)!==null)break;J=F,F=J.parentNode}J=G}a=S===-1||D===-1?null:{start:S,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(ng={focusedElem:n,selectionRange:a},jh=!1,Ft=i;Ft!==null;)if(i=Ft,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ft=n;else for(;Ft!==null;){switch(i=Ft,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=ia(a.type,f);n=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){Xe(a,a.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)rg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":rg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Ft=n;break}Ft=i.return}}function w0(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ss(n,a),l&4&&Wl(5,a);break;case 1:if(ss(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(v){Xe(a,a.return,v)}else{var f=ia(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Xe(a,a.return,v)}}l&64&&T0(a),l&512&&Zl(a,a.return);break;case 3:if(ss(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{c_(n,i)}catch(v){Xe(a,a.return,v)}}break;case 27:i===null&&l&4&&x0(a);case 26:case 5:ss(n,a),i===null&&l&4&&b0(a),l&512&&Zl(a,a.return);break;case 12:ss(n,a);break;case 31:ss(n,a),l&4&&C0(n,a);break;case 13:ss(n,a),l&4&&N0(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=yA.bind(null,a),jA(n,a))));break;case 22:if(l=a.memoizedState!==null||ns,!l){i=i!==null&&i.memoizedState!==null||Mt,f=ns;var d=Mt;ns=l,(Mt=i)&&!d?rs(n,a,(a.subtreeFlags&8772)!==0):ss(n,a),ns=f,Mt=d}break;case 30:break;default:ss(n,a)}}function I0(n){var i=n.alternate;i!==null&&(n.alternate=null,I0(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ka(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,mn=!1;function is(n,i,a){for(a=a.child;a!==null;)R0(n,i,a),a=a.sibling}function R0(n,i,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:Mt||Vi(a,i),is(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Vi(a,i);var l=ht,f=mn;Xs(a.type)&&(ht=a.stateNode,mn=!1),is(n,i,a),lu(a.stateNode),ht=l,mn=f;break;case 5:Mt||Vi(a,i);case 6:if(l=ht,f=mn,ht=null,is(n,i,a),ht=l,mn=f,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(d){Xe(a,i,d)}else try{ht.removeChild(a.stateNode)}catch(d){Xe(a,i,d)}break;case 18:ht!==null&&(mn?(n=ht,Tv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),To(n)):Tv(ht,a.stateNode));break;case 4:l=ht,f=mn,ht=a.stateNode.containerInfo,mn=!0,is(n,i,a),ht=l,mn=f;break;case 0:case 11:case 14:case 15:Fs(2,a,i),Mt||Fs(4,a,i),is(n,i,a);break;case 1:Mt||(Vi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&E0(a,i,l)),is(n,i,a);break;case 21:is(n,i,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,is(n,i,a),Mt=l;break;default:is(n,i,a)}}function C0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{To(n)}catch(a){Xe(i,i.return,a)}}}function N0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{To(n)}catch(a){Xe(i,i.return,a)}}function uA(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new A0),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new A0),i;default:throw Error(s(435,n.tag))}}function yh(n,i){var a=uA(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=_A.bind(null,n,l);l.then(f,f)}})}function gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Xs(S.type)){ht=S.stateNode,mn=!1;break e}break;case 5:ht=S.stateNode,mn=!1;break e;case 3:case 4:ht=S.stateNode.containerInfo,mn=!0;break e}S=S.return}if(ht===null)throw Error(s(160));R0(d,v,f),ht=null,mn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)D0(i,n),i=i.sibling}var ri=null;function D0(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),l&4&&(Fs(3,n,n.return),Wl(3,n),Fs(5,n,n.return));break;case 1:gn(i,n),pn(n),l&512&&(Mt||a===null||Vi(a,a.return)),l&64&&ns&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ri;if(gn(i,n),pn(n),l&512&&(Mt||a===null||Vi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[_i]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Wt(d,l,a),d[It]=n,Rt(d),l=d;break e;case"link":var v=Dv("link","href",f).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=f.createElement(l),Wt(d,l,a),f.head.appendChild(d);break;case"meta":if(v=Dv("meta","content",f).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=f.createElement(l),Wt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[It]=n,Rt(d),l=d}n.stateNode=l}else Vv(f,n.type,n.stateNode);else n.stateNode=Nv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Vv(f,n.type,n.stateNode):Nv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Dm(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(i,n),pn(n),l&512&&(Mt||a===null||Vi(a,a.return)),a!==null&&l&4&&Dm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,n),pn(n),l&512&&(Mt||a===null||Vi(a,a.return)),n.flags&32){f=n.stateNode;try{dn(f,"")}catch(fe){Xe(n,n.return,fe)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Dm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Om=!0);break;case 6:if(gn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(fe){Xe(n,n.return,fe)}}break;case 3:if(Mh=null,f=ri,ri=Dh(i.containerInfo),gn(i,n),ri=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{To(i.containerInfo)}catch(fe){Xe(n,n.return,fe)}Om&&(Om=!1,V0(n));break;case 4:l=ri,ri=Dh(n.stateNode.containerInfo),gn(i,n),pn(n),ri=l;break;case 12:gn(i,n),pn(n);break;case 31:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(vh=ln()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 22:f=n.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=ns,Y=Mt;if(ns=q||f,Mt=Y||D,gn(i,n),Mt=Y,ns=q,pn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||D||ns||Mt||sa(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(d=D.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=D.stateNode;var J=D.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null;S.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(fe){Xe(D,D.return,fe)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(fe){Xe(D,D.return,fe)}}}else if(i.tag===18){if(a===null){D=i;try{var G=D.stateNode;f?Ev(G,!0):Ev(D.stateNode,!1)}catch(fe){Xe(D,D.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,yh(n,a))));break;case 19:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(S0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Vm(n);ph(n,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(dn(v,""),a.flags&=-33);var S=Vm(n);ph(n,S,v);break;case 3:case 4:var D=a.stateNode.containerInfo,q=Vm(n);Mm(n,q,D);break;default:throw Error(s(161))}}catch(Y){Xe(n,n.return,Y)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function V0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;V0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ss(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)w0(n,i.alternate,i),i=i.sibling}function sa(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Fs(4,i,i.return),sa(i);break;case 1:Vi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&E0(i,i.return,a),sa(i);break;case 27:lu(i.stateNode);case 26:case 5:Vi(i,i.return),sa(i);break;case 22:i.memoizedState===null&&sa(i);break;case 30:sa(i);break;default:sa(i)}n=n.sibling}}function rs(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:rs(f,d,a),Wl(4,d);break;case 1:if(rs(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Xe(l,l.return,q)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)u_(D[f],S)}catch(q){Xe(l,l.return,q)}}a&&v&64&&T0(d),Zl(d,d.return);break;case 27:x0(d);case 26:case 5:rs(f,d,a),a&&l===null&&v&4&&b0(d),Zl(d,d.return);break;case 12:rs(f,d,a);break;case 31:rs(f,d,a),a&&v&4&&C0(f,d);break;case 13:rs(f,d,a),a&&v&4&&N0(f,d);break;case 22:d.memoizedState===null&&rs(f,d,a),Zl(d,d.return);break;case 30:break;default:rs(f,d,a)}i=i.sibling}}function km(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ul(a))}function Pm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ul(n))}function ai(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)M0(n,i,a,l),i=i.sibling}function M0(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ai(n,i,a,l),f&2048&&Wl(9,i);break;case 1:ai(n,i,a,l);break;case 3:ai(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ul(n)));break;case 12:if(f&2048){ai(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Xe(i,i.return,D)}}else ai(n,i,a,l);break;case 31:ai(n,i,a,l);break;case 13:ai(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ai(n,i,a,l):eu(n,i):d._visibility&2?ai(n,i,a,l):(d._visibility|=2,lo(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&km(v,i);break;case 24:ai(n,i,a,l),f&2048&&Pm(i.alternate,i);break;default:ai(n,i,a,l)}}function lo(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,v=i,S=a,D=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:lo(d,v,S,D,f),Wl(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?lo(d,v,S,D,f):eu(d,v):(Y._visibility|=2,lo(d,v,S,D,f)),f&&q&2048&&km(v.alternate,v);break;case 24:lo(d,v,S,D,f),f&&q&2048&&Pm(v.alternate,v);break;default:lo(d,v,S,D,f)}i=i.sibling}}function eu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:eu(a,l),f&2048&&km(l.alternate,l);break;case 24:eu(a,l),f&2048&&Pm(l.alternate,l);break;default:eu(a,l)}i=i.sibling}}var tu=8192;function uo(n,i,a){if(n.subtreeFlags&tu)for(n=n.child;n!==null;)O0(n,i,a),n=n.sibling}function O0(n,i,a){switch(n.tag){case 26:uo(n,i,a),n.flags&tu&&n.memoizedState!==null&&$A(a,ri,n.memoizedState,n.memoizedProps);break;case 5:uo(n,i,a);break;case 3:case 4:var l=ri;ri=Dh(n.stateNode.containerInfo),uo(n,i,a),ri=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=tu,tu=16777216,uo(n,i,a),tu=l):uo(n,i,a));break;default:uo(n,i,a)}}function k0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function nu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,j0(l,n)}k0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P0(n),n=n.sibling}function P0(n){switch(n.tag){case 0:case 11:case 15:nu(n),n.flags&2048&&Fs(9,n,n.return);break;case 3:nu(n);break;case 12:nu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,_h(n)):nu(n);break;default:nu(n)}}function _h(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,j0(l,n)}k0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Fs(8,i,i.return),_h(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,_h(i));break;default:_h(i)}n=n.sibling}}function j0(n,i){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Fs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=n;Ft!==null;){l=Ft;var f=l.sibling,d=l.return;if(I0(l),l===a){Ft=null;break e}if(f!==null){f.return=d,Ft=f;break e}Ft=d}}}var cA={getCacheForType:function(n){var i=Xt(Nt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Xt(Nt).controller.signal}},hA=typeof WeakMap=="function"?WeakMap:Map,Ge=0,rt=null,Ve=null,Oe=0,$e=0,In=null,Hs=!1,co=!1,jm=!1,as=0,gt=0,Gs=0,ra=0,Lm=0,Rn=0,ho=0,iu=null,yn=null,Um=!1,vh=0,L0=0,Th=1/0,Eh=null,Ks=null,Lt=0,Qs=null,fo=null,os=0,zm=0,Bm=null,U0=null,su=0,qm=null;function Cn(){return(Ge&2)!==0&&Oe!==0?Oe&-Oe:Q.T!==null?Ym():bc()}function z0(){if(Rn===0)if((Oe&536870912)===0||je){var n=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),Rn=n}else Rn=536870912;return n=An.current,n!==null&&(n.flags|=32),Rn}function _n(n,i,a){(n===rt&&($e===2||$e===9)||n.cancelPendingCommit!==null)&&(mo(n,0),Ys(n,Oe,Rn,!1)),Mr(n,a),((Ge&2)===0||n!==rt)&&(n===rt&&((Ge&2)===0&&(ra|=a),gt===4&&Ys(n,Oe,Rn,!1)),Mi(n))}function B0(n,i,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Xn(n,i),f=l?mA(n,i):Hm(n,i,!0),d=l;do{if(f===0){co&&!l&&Ys(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!fA(a)){f=Hm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var S=n;f=iu;var D=S.current.memoizedState.isDehydrated;if(D&&(mo(S,v).flags|=256),v=Hm(S,v,!1),v!==2){if(jm&&!D){S.errorRecoveryDisabledLanes|=d,ra|=d,f=4;break e}d=yn,yn=f,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){mo(n,0),Ys(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ys(l,i,Rn,!Hs);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=vh+300-ln(),10<f)){if(Ys(l,i,Rn,!Hs),gi(l,0,!0)!==0)break e;os=i,l.timeoutHandle=_v(q0.bind(null,l,a,yn,Eh,Um,i,Rn,ra,ho,Hs,d,"Throttled",-0,0),f);break e}q0(l,a,yn,Eh,Um,i,Rn,ra,ho,Hs,d,null,-0,0)}}break}while(!0);Mi(n)}function q0(n,i,a,l,f,d,v,S,D,q,Y,J,F,G){if(n.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},O0(i,d,J);var fe=(d&62914560)===d?vh-ln():(d&4194048)===d?L0-ln():0;if(fe=XA(J,fe),fe!==null){os=d,n.cancelPendingCommit=fe(X0.bind(null,n,i,d,a,l,f,v,S,D,Y,J,null,F,G)),Ys(n,d,v,!q);return}}X0(n,i,d,a,l,f,v,S,D)}function fA(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ys(n,i,a,l){i&=~Lm,i&=~ra,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-_t(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&Or(n,a,i)}function bh(){return(Ge&6)===0?(ru(0),!1):!0}function Fm(){if(Ve!==null){if($e===0)var n=Ve.return;else n=Ve,Xi=Xr=null,rm(n),io=null,Bl=0,n=Ve;for(;n!==null;)v0(n.alternate,n),n=n.return;Ve=null}}function mo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,VA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),os=0,Fm(),rt=n,Ve=a=Yi(n.current,null),Oe=i,$e=0,In=null,Hs=!1,co=Xn(n,i),jm=!1,ho=Rn=Lm=ra=Gs=gt=0,yn=iu=null,Um=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-_t(l),d=1<<f;i|=n[f],l&=~d}return as=i,Fc(),a}function F0(n,i){Re=null,Q.H=$l,i===no||i===Jc?(i=r_(),$e=3):i===Qd?(i=r_(),$e=4):$e=i===Em?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,In=i,Ve===null&&(gt=1,hh(n,Bn(i,n.current)))}function H0(){var n=An.current;return n===null?!0:(Oe&4194048)===Oe?Gn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?n===Gn:!1}function G0(){var n=Q.H;return Q.H=$l,n===null?$l:n}function K0(){var n=Q.A;return Q.A=cA,n}function Sh(){gt=4,Hs||(Oe&4194048)!==Oe&&An.current!==null||(co=!0),(Gs&134217727)===0&&(ra&134217727)===0||rt===null||Ys(rt,Oe,Rn,!1)}function Hm(n,i,a){var l=Ge;Ge|=2;var f=G0(),d=K0();(rt!==n||Oe!==i)&&(Eh=null,mo(n,i)),i=!1;var v=gt;e:do try{if($e!==0&&Ve!==null){var S=Ve,D=In;switch($e){case 8:Fm(),v=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(i=!0);var q=$e;if($e=0,In=null,go(n,S,D,q),a&&co){v=0;break e}break;default:q=$e,$e=0,In=null,go(n,S,D,q)}}dA(),v=gt;break}catch(Y){F0(n,Y)}while(!0);return i&&n.shellSuspendCounter++,Xi=Xr=null,Ge=l,Q.H=f,Q.A=d,Ve===null&&(rt=null,Oe=0,Fc()),v}function dA(){for(;Ve!==null;)Q0(Ve)}function mA(n,i){var a=Ge;Ge|=2;var l=G0(),f=K0();rt!==n||Oe!==i?(Eh=null,Th=ln()+500,mo(n,i)):co=Xn(n,i);e:do try{if($e!==0&&Ve!==null){i=Ve;var d=In;t:switch($e){case 1:$e=0,In=null,go(n,i,d,1);break;case 2:case 9:if(i_(d)){$e=0,In=null,Y0(i);break}i=function(){$e!==2&&$e!==9||rt!==n||($e=7),Mi(n)},d.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:i_(d)?($e=0,In=null,Y0(i)):($e=0,In=null,go(n,i,d,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var S=Ve;if(v?Mv(v):S.stateNode.complete){$e=0,In=null;var D=S.sibling;if(D!==null)Ve=D;else{var q=S.return;q!==null?(Ve=q,xh(q)):Ve=null}break t}}$e=0,In=null,go(n,i,d,5);break;case 6:$e=0,In=null,go(n,i,d,6);break;case 8:Fm(),gt=6;break e;default:throw Error(s(462))}}gA();break}catch(Y){F0(n,Y)}while(!0);return Xi=Xr=null,Q.H=l,Q.A=f,Ge=a,Ve!==null?0:(rt=null,Oe=0,Fc(),gt)}function gA(){for(;Ve!==null&&!Td();)Q0(Ve)}function Q0(n){var i=y0(n.alternate,n,as);n.memoizedProps=n.pendingProps,i===null?xh(n):Ve=i}function Y0(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=h0(a,i,i.pendingProps,i.type,void 0,Oe);break;case 11:i=h0(a,i,i.pendingProps,i.type.render,i.ref,Oe);break;case 5:rm(i);default:v0(a,i),i=Ve=Ky(i,as),i=y0(a,i,as)}n.memoizedProps=n.pendingProps,i===null?xh(n):Ve=i}function go(n,i,a,l){Xi=Xr=null,rm(i),io=null,Bl=0;var f=i.return;try{if(iA(n,f,i,a,Oe)){gt=1,hh(n,Bn(a,n.current)),Ve=null;return}}catch(d){if(f!==null)throw Ve=f,d;gt=1,hh(n,Bn(a,n.current)),Ve=null;return}i.flags&32768?(je||l===1?n=!0:co||(Oe&536870912)!==0?n=!1:(Hs=n=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),$0(i,n)):xh(i)}function xh(n){var i=n;do{if((i.flags&32768)!==0){$0(i,Hs);return}n=i.return;var a=aA(i.alternate,i,as);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=n}while(i!==null);gt===0&&(gt=5)}function $0(n,i){do{var a=oA(n.alternate,n);if(a!==null){a.flags&=32767,Ve=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ve=n;return}Ve=n=a}while(n!==null);gt=6,Ve=null}function X0(n,i,a,l,f,d,v,S,D){n.cancelPendingCommit=null;do Ah();while(Lt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Vd,Sd(n,a,d,v,S,D),n===rt&&(Ve=rt=null,Oe=0),fo=i,Qs=n,os=a,zm=d,Bm=f,U0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,vA(xs,function(){return tv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,f=re.p,re.p=2,v=Ge,Ge|=4;try{lA(n,i,a)}finally{Ge=v,re.p=f,Q.T=l}}Lt=1,J0(),W0(),Z0()}}function J0(){if(Lt===1){Lt=0;var n=Qs,i=fo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var f=Ge;Ge|=4;try{D0(i,n);var d=ng,v=jy(n.containerInfo),S=d.focusedElem,D=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&Py(S.ownerDocument.documentElement,S)){if(D!==null&&Id(S)){var q=D.start,Y=D.end;if(Y===void 0&&(Y=q),"selectionStart"in S)S.selectionStart=q,S.selectionEnd=Math.min(Y,S.value.length);else{var J=S.ownerDocument||document,F=J&&J.defaultView||window;if(F.getSelection){var G=F.getSelection(),fe=S.textContent.length,Ee=Math.min(D.start,fe),it=D.end===void 0?Ee:Math.min(D.end,fe);!G.extend&&Ee>it&&(v=it,it=Ee,Ee=v);var L=ky(S,Ee),M=ky(S,it);if(L&&M&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var B=J.createRange();B.setStart(L.node,L.offset),G.removeAllRanges(),Ee>it?(G.addRange(B),G.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),G.addRange(B))}}}}for(J=[],G=S;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<J.length;S++){var $=J[S];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}jh=!!tg,ng=tg=null}finally{Ge=f,re.p=l,Q.T=a}}n.current=i,Lt=2}}function W0(){if(Lt===2){Lt=0;var n=Qs,i=fo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var f=Ge;Ge|=4;try{w0(n,i.alternate,i)}finally{Ge=f,re.p=l,Q.T=a}}Lt=3}}function Z0(){if(Lt===4||Lt===3){Lt=0,gc();var n=Qs,i=fo,a=os,l=U0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Lt=5:(Lt=0,fo=Qs=null,ev(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ks=null),Hi(a),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot($n,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,f=re.p,re.p=2,Q.T=null;try{for(var d=n.onRecoverableError,v=0;v<l.length;v++){var S=l[v];d(S.value,{componentStack:S.stack})}}finally{Q.T=i,re.p=f}}(os&3)!==0&&Ah(),Mi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===qm?su++:(su=0,qm=n):su=0,ru(0)}}function ev(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ul(i)))}function Ah(){return J0(),W0(),Z0(),tv()}function tv(){if(Lt!==5)return!1;var n=Qs,i=zm;zm=0;var a=Hi(os),l=Q.T,f=re.p;try{re.p=32>a?32:a,Q.T=null,a=Bm,Bm=null;var d=Qs,v=os;if(Lt=0,fo=Qs=null,os=0,(Ge&6)!==0)throw Error(s(331));var S=Ge;if(Ge|=4,P0(d.current),M0(d,d.current,v,a),Ge=S,ru(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot($n,d)}catch{}return!0}finally{re.p=f,Q.T=l,ev(n,i)}}function nv(n,i,a){i=Bn(a,i),i=Tm(n.stateNode,i,2),n=zs(n,i,2),n!==null&&(Mr(n,2),Mi(n))}function Xe(n,i,a){if(n.tag===3)nv(n,n,a);else for(;i!==null;){if(i.tag===3){nv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ks===null||!Ks.has(l))){n=Bn(a,n),a=i0(2),l=zs(i,a,2),l!==null&&(s0(a,l,i,n),Mr(l,2),Mi(l));break}}i=i.return}}function Gm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new hA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(jm=!0,f.add(a),n=pA.bind(null,n,i,a),i.then(n,n))}function pA(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,rt===n&&(Oe&a)===a&&(gt===4||gt===3&&(Oe&62914560)===Oe&&300>ln()-vh?(Ge&2)===0&&mo(n,0):Lm|=a,ho===Oe&&(ho=0)),Mi(n)}function iv(n,i){i===0&&(i=Ec()),n=Qr(n,i),n!==null&&(Mr(n,i),Mi(n))}function yA(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),iv(n,a)}function _A(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),iv(n,a)}function vA(n,i){return jt(n,i)}var wh=null,po=null,Km=!1,Ih=!1,Qm=!1,$s=0;function Mi(n){n!==po&&n.next===null&&(po===null?wh=po=n:po=po.next=n),Ih=!0,Km||(Km=!0,EA())}function ru(n,i){if(!Qm&&Ih){Qm=!0;do for(var a=!1,l=wh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-_t(42|n)+1)-1,d&=f&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,ov(l,d))}else d=Oe,d=gi(l,l===rt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Xn(l,d)||(a=!0,ov(l,d));l=l.next}while(a);Qm=!1}}function TA(){sv()}function sv(){Ih=Km=!1;var n=0;$s!==0&&DA()&&(n=$s);for(var i=ln(),a=null,l=wh;l!==null;){var f=l.next,d=rv(l,i);d===0?(l.next=null,a===null?wh=f:a.next=f,f===null&&(po=a)):(a=l,(n!==0||(d&3)!==0)&&(Ih=!0)),l=f}Lt!==0&&Lt!==5||ru(n),$s!==0&&($s=0)}function rv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var v=31-_t(d),S=1<<v,D=f[v];D===-1?((S&a)===0||(S&l)!==0)&&(f[v]=bd(S,i)):D<=i&&(n.expiredLanes|=S),d&=~S}if(i=rt,a=Oe,a=gi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&($e===2||$e===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ss(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Xn(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Ss(l),Hi(a)){case 2:case 8:a=gl;break;case 32:a=xs;break;case 268435456:a=pc;break;default:a=xs}return l=av.bind(null,n),a=jt(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Ss(l),n.callbackPriority=2,n.callbackNode=null,2}function av(n,i){if(Lt!==0&&Lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ah()&&n.callbackNode!==a)return null;var l=Oe;return l=gi(n,n===rt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(B0(n,l,i),rv(n,ln()),n.callbackNode!=null&&n.callbackNode===a?av.bind(null,n):null)}function ov(n,i){if(Ah())return null;B0(n,i,!0)}function EA(){MA(function(){(Ge&6)!==0?jt(ml,TA):sv()})}function Ym(){if($s===0){var n=eo;n===0&&(n=di,di<<=1,(di&261888)===0&&(di=256)),$s=n}return $s}function lv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ua(""+n)}function uv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function bA(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=lv((f[Bt]||null).action),v=l.submitter;v&&(i=(i=v[Bt]||null)?lv(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var S=new wi("action","action",null,l,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($s!==0){var D=v?uv(f,v):new FormData(f);mm(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(S.preventDefault(),D=v?uv(f,v):new FormData(f),mm(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var $m=0;$m<Dd.length;$m++){var Xm=Dd[$m],SA=Xm.toLowerCase(),xA=Xm[0].toUpperCase()+Xm.slice(1);si(SA,"on"+xA)}si(zy,"onAnimationEnd"),si(By,"onAnimationIteration"),si(qy,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(zx,"onTransitionRun"),si(Bx,"onTransitionStart"),si(qx,"onTransitionCancel"),si(Fy,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(au));function cv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var S=l[v],D=S.instance,q=S.currentTarget;if(S=S.listener,D!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=q;try{d(f)}catch(Y){qc(Y)}f.currentTarget=null,d=D}else for(v=0;v<l.length;v++){if(S=l[v],D=S.instance,q=S.currentTarget,S=S.listener,D!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=q;try{d(f)}catch(Y){qc(Y)}f.currentTarget=null,d=D}}}}function Me(n,i){var a=i[Oa];a===void 0&&(a=i[Oa]=new Set);var l=n+"__bubble";a.has(l)||(hv(i,n,2,!1),a.add(l))}function Jm(n,i,a){var l=0;i&&(l|=4),hv(a,n,l,i)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Wm(n){if(!n[Rh]){n[Rh]=!0,_l.forEach(function(a){a!=="selectionchange"&&(AA.has(a)||Jm(a,!1,n),Jm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Rh]||(i[Rh]=!0,Jm("selectionchange",!1,i))}}function hv(n,i,a,l){switch(zv(i)){case 2:var f=ZA;break;case 8:f=ew;break;default:f=dg}a=f.bind(null,i,a,n),f=void 0,!Ur||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Zm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=vi(S),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=d=v;continue e}S=S.parentNode}}l=l.return}Ns(function(){var q=d,Y=jn(a),J=[];e:{var F=Hy.get(n);if(F!==void 0){var G=wi,fe=n;switch(n){case"keypress":if(Br(a)===0)break e;case"keydown":case"keyup":G=Uc;break;case"focusin":fe="focus",G=Fr;break;case"focusout":fe="blur",G=Fr;break;case"beforeblur":case"afterblur":G=Fr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=y;break;case zy:case By:case qy:G=Vc;break;case Fy:G=x;break;case"scroll":case"scrollend":G=Nl;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=Mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Qi;break;case"toggle":case"beforetoggle":G=Ie}var Ee=(i&4)!==0,it=!Ee&&(n==="scroll"||n==="scrollend"),L=Ee?F!==null?F+"Capture":null:F;Ee=[];for(var M=q,B;M!==null;){var $=M;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||L===null||($=ei(M,L),$!=null&&Ee.push(ou(M,$,B))),it)break;M=M.return}0<Ee.length&&(F=new G(F,fe,null,a,Y),J.push({event:F,listeners:Ee}))}}if((i&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",F&&a!==Il&&(fe=a.relatedTarget||a.fromElement)&&(vi(fe)||fe[yi]))break e;if((G||F)&&(F=Y.window===Y?Y:(F=Y.ownerDocument)?F.defaultView||F.parentWindow:window,G?(fe=a.relatedTarget||a.toElement,G=q,fe=fe?vi(fe):null,fe!==null&&(it=u(fe),Ee=fe.tag,fe!==it||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(G=null,fe=q),G!==fe)){if(Ee=Dl,$="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=Qi,$="onPointerLeave",L="onPointerEnter",M="pointer"),it=G==null?F:En(G),B=fe==null?F:En(fe),F=new Ee($,M+"leave",G,a,Y),F.target=it,F.relatedTarget=B,$=null,vi(Y)===q&&(Ee=new Ee(L,M+"enter",fe,a,Y),Ee.target=B,Ee.relatedTarget=it,$=Ee),it=$,G&&fe)t:{for(Ee=wA,L=G,M=fe,B=0,$=L;$;$=Ee($))B++;$=0;for(var pe=M;pe;pe=Ee(pe))$++;for(;0<B-$;)L=Ee(L),B--;for(;0<$-B;)M=Ee(M),$--;for(;B--;){if(L===M||M!==null&&L===M.alternate){Ee=L;break t}L=Ee(L),M=Ee(M)}Ee=null}else Ee=null;G!==null&&fv(J,F,G,Ee,!1),fe!==null&&it!==null&&fv(J,it,fe,Ee,!0)}}e:{if(F=q?En(q):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var qe=Cy;else if(Iy(F))if(Ny)qe=jx;else{qe=kx;var me=Ox}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&La(q.elementType)&&(qe=Cy):qe=Px;if(qe&&(qe=qe(n,q))){Ry(J,qe,a,Y);break e}me&&me(n,F,q),n==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&xl(F,"number",F.value)}switch(me=q?En(q):window,n){case"focusin":(Iy(me)||me.contentEditable==="true")&&(Ka=me,Rd=q,Pl=null);break;case"focusout":Pl=Rd=Ka=null;break;case"mousedown":Cd=!0;break;case"contextmenu":case"mouseup":case"dragend":Cd=!1,Ly(J,a,Y);break;case"selectionchange":if(Ux)break;case"keydown":case"keyup":Ly(J,a,Y)}var Ne;if(He)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ga?Hr(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Ci&&a.locale!=="ko"&&(Ga||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ga&&(Ne=Cl()):(Ai=Y,Rl="value"in Ai?Ai.value:Ai.textContent,Ga=!0)),me=Ch(q,ke),0<me.length&&(ke=new Ri(ke,n,null,a,Y),J.push({event:ke,listeners:me}),Ne?ke.data=Ne:(Ne=Ha(a),Ne!==null&&(ke.data=Ne)))),(Ne=Un?Nx(n,a):Dx(n,a))&&(ke=Ch(q,"onBeforeInput"),0<ke.length&&(me=new Ri("onBeforeInput","beforeinput",null,a,Y),J.push({event:me,listeners:ke}),me.data=Ne)),bA(J,n,q,a,Y)}cv(J,i)})}function ou(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Ch(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ei(n,a),f!=null&&l.unshift(ou(n,f,d)),f=ei(n,i),f!=null&&l.push(ou(n,f,d))),n.tag===3)return l;n=n.return}return[]}function wA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function fv(n,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var S=a,D=S.alternate,q=S.stateNode;if(S=S.tag,D!==null&&D===l)break;S!==5&&S!==26&&S!==27||q===null||(D=q,f?(q=ei(a,d),q!=null&&v.unshift(ou(a,q,D))):f||(q=ei(a,d),q!=null&&v.push(ou(a,q,D)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var IA=/\r\n?/g,RA=/\u0000|\uFFFD/g;function dv(n){return(typeof n=="string"?n:""+n).replace(IA,`
`).replace(RA,"")}function mv(n,i){return i=dv(i),dv(n)===i}function nt(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||dn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&dn(n,""+l);break;case"className":bn(n,"class",l);break;case"tabIndex":bn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(n,a,l);break;case"style":wl(n,l,d);break;case"data":if(i!=="object"){bn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&nt(n,i,"name",f.name,f,null),nt(n,i,"formEncType",f.formEncType,f,null),nt(n,i,"formMethod",f.formMethod,f,null),nt(n,i,"formTarget",f.formTarget,f,null)):(nt(n,i,"encType",f.encType,f,null),nt(n,i,"method",f.method,f,null),nt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Zn);break;case"onScroll":l!=null&&Me("scroll",n);break;case"onScrollEnd":l!=null&&Me("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ua(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Me("beforetoggle",n),Me("toggle",n),Pa(n,"popover",l);break;case"xlinkActuate":Ct(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ct(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ct(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ct(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ct(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ct(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pa(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cc.get(a)||a,Pa(n,a,l))}}function eg(n,i,a,l,f,d){switch(a){case"style":wl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?dn(n,l):(typeof l=="number"||typeof l=="bigint")&&dn(n,""+l);break;case"onScroll":l!=null&&Me("scroll",n);break;case"onScrollEnd":l!=null&&Me("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Bt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Pa(n,a,l)}}}function Wt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",n),Me("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,d,v,a,null)}}f&&nt(n,i,"srcSet",a.srcSet,a,null),l&&nt(n,i,"src",a.src,a,null);return;case"input":Me("invalid",n);var S=d=v=f=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":f=Y;break;case"type":v=Y;break;case"checked":D=Y;break;case"defaultChecked":q=Y;break;case"value":d=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:nt(n,i,l,Y,a,null)}}wc(n,d,S,D,q,v,f,!1);return;case"select":Me("invalid",n),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:nt(n,i,f,S,a,null)}i=d,a=v,n.multiple=!!l,i!=null?ws(n,!!l,i,!1):a!=null&&ws(n,!!l,a,!0);return;case"textarea":Me("invalid",n),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:nt(n,i,v,S,a,null)}Is(n,l,f,d);return;case"option":for(D in a)a.hasOwnProperty(D)&&(l=a[D],l!=null)&&(D==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":nt(n,i,D,l,a,null));return;case"dialog":Me("beforetoggle",n),Me("toggle",n),Me("cancel",n),Me("close",n);break;case"iframe":case"object":Me("load",n);break;case"video":case"audio":for(l=0;l<au.length;l++)Me(au[l],n);break;case"image":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"embed":case"source":case"link":Me("error",n),Me("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,q,l,a,null)}return;default:if(La(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&eg(n,i,Y,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&nt(n,i,S,l,a,null))}function CA(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,S=null,D=null,q=null,Y=null;for(G in a){var J=a[G];if(a.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=J;default:l.hasOwnProperty(G)||nt(n,i,G,null,l,J)}}for(var F in l){var G=l[F];if(J=a[F],l.hasOwnProperty(F)&&(G!=null||J!=null))switch(F){case"type":d=G;break;case"name":f=G;break;case"checked":q=G;break;case"defaultChecked":Y=G;break;case"value":v=G;break;case"defaultValue":S=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==J&&nt(n,i,F,G,l,J)}}ja(n,v,S,D,q,Y,d,f);return;case"select":G=v=S=F=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":G=D;default:l.hasOwnProperty(d)||nt(n,i,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":F=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==D&&nt(n,i,f,d,l,D)}i=S,a=v,l=G,F!=null?ws(n,!!a,F,!1):!!l!=!!a&&(i!=null?ws(n,!!a,i,!0):ws(n,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:nt(n,i,S,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":F=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&nt(n,i,v,f,l,d)}Ic(n,F,G);return;case"option":for(var fe in a)F=a[fe],a.hasOwnProperty(fe)&&F!=null&&!l.hasOwnProperty(fe)&&(fe==="selected"?n.selected=!1:nt(n,i,fe,null,l,F));for(D in l)F=l[D],G=a[D],l.hasOwnProperty(D)&&F!==G&&(F!=null||G!=null)&&(D==="selected"?n.selected=F&&typeof F!="function"&&typeof F!="symbol":nt(n,i,D,F,l,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)F=a[Ee],a.hasOwnProperty(Ee)&&F!=null&&!l.hasOwnProperty(Ee)&&nt(n,i,Ee,null,l,F);for(q in l)if(F=l[q],G=a[q],l.hasOwnProperty(q)&&F!==G&&(F!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:nt(n,i,q,F,l,G)}return;default:if(La(i)){for(var it in a)F=a[it],a.hasOwnProperty(it)&&F!==void 0&&!l.hasOwnProperty(it)&&eg(n,i,it,void 0,l,F);for(Y in l)F=l[Y],G=a[Y],!l.hasOwnProperty(Y)||F===G||F===void 0&&G===void 0||eg(n,i,Y,F,l,G);return}}for(var L in a)F=a[L],a.hasOwnProperty(L)&&F!=null&&!l.hasOwnProperty(L)&&nt(n,i,L,null,l,F);for(J in l)F=l[J],G=a[J],!l.hasOwnProperty(J)||F===G||F==null&&G==null||nt(n,i,J,F,l,G)}function gv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,v=f.initiatorType,S=f.duration;if(d&&S&&gv(v)){for(v=0,S=f.responseEnd,l+=1;l<a.length;l++){var D=a[l],q=D.startTime;if(q>S)break;var Y=D.transferSize,J=D.initiatorType;Y&&gv(J)&&(D=D.responseEnd,v+=Y*(D<S?1:(S-q)/(D-q)))}if(--l,i+=8*(d+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var tg=null,ng=null;function Nh(n){return n.nodeType===9?n:n.ownerDocument}function pv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ig(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sg=null;function DA(){var n=window.event;return n&&n.type==="popstate"?n===sg?!1:(sg=n,!0):(sg=null,!1)}var _v=typeof setTimeout=="function"?setTimeout:void 0,VA=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(n){return vv.resolve(null).then(n).catch(OA)}:_v;function OA(n){setTimeout(function(){throw n})}function Xs(n){return n==="head"}function Tv(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),To(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")lu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,lu(a);for(var d=a.firstChild;d;){var v=d.nextSibling,S=d.nodeName;d[_i]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&lu(n.ownerDocument.body);a=f}while(a);To(i)}function Ev(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function rg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rg(a),ka(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function kA(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[_i])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function PA(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Kn(n.nextSibling),n===null))return null;return n}function bv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Kn(n.nextSibling),n===null))return null;return n}function ag(n){return n.data==="$?"||n.data==="$~"}function og(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function jA(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Kn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var lg=null;function Sv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Kn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function xv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function Av(n,i,a){switch(i=Nh(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function lu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ka(n)}var Qn=new Map,wv=new Set;function Dh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ls=re.d;re.d={f:LA,r:UA,D:zA,C:BA,L:qA,m:FA,X:GA,S:HA,M:KA};function LA(){var n=ls.f(),i=bh();return n||i}function UA(n){var i=Pn(n);i!==null&&i.tag===5&&i.type==="form"?F_(i):ls.r(n)}var yo=typeof document>"u"?null:document;function Iv(n,i,a){var l=yo;if(l&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),wv.has(f)||(wv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Wt(i,"link",n),Rt(i),l.head.appendChild(i)))}}function zA(n){ls.D(n),Iv("dns-prefetch",n,null)}function BA(n,i){ls.C(n,i),Iv("preconnect",n,i)}function qA(n,i,a){ls.L(n,i,a);var l=yo;if(l&&n&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(n)+'"]';var d=f;switch(i){case"style":d=_o(n);break;case"script":d=vo(n)}Qn.has(d)||(n=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Qn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(uu(d))||i==="script"&&l.querySelector(cu(d))||(i=l.createElement("link"),Wt(i,"link",n),Rt(i),l.head.appendChild(i)))}}function FA(n,i){ls.m(n,i);var a=yo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=vo(n)}if(!Qn.has(d)&&(n=b({rel:"modulepreload",href:n},i),Qn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cu(d)))return}l=a.createElement("link"),Wt(l,"link",n),Rt(l),a.head.appendChild(l)}}}function HA(n,i,a){ls.S(n,i,a);var l=yo;if(l&&n){var f=Ti(l).hoistableStyles,d=_o(n);i=i||"default";var v=f.get(d);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(uu(d)))S.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Qn.get(d))&&ug(n,a);var D=v=l.createElement("link");Rt(D),Wt(D,"link",n),D._p=new Promise(function(q,Y){D.onload=q,D.onerror=Y}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Vh(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(d,v)}}}function GA(n,i){ls.X(n,i);var a=yo;if(a&&n){var l=Ti(a).hoistableScripts,f=vo(n),d=l.get(f);d||(d=a.querySelector(cu(f)),d||(n=b({src:n,async:!0},i),(i=Qn.get(f))&&cg(n,i),d=a.createElement("script"),Rt(d),Wt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function KA(n,i){ls.M(n,i);var a=yo;if(a&&n){var l=Ti(a).hoistableScripts,f=vo(n),d=l.get(f);d||(d=a.querySelector(cu(f)),d||(n=b({src:n,async:!0,type:"module"},i),(i=Qn.get(f))&&cg(n,i),d=a.createElement("script"),Rt(d),Wt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Rv(n,i,a,l){var f=(f=Ce.current)?Dh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=_o(a.href),a=Ti(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=_o(a.href);var d=Ti(f).hoistableStyles,v=d.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,v),(d=f.querySelector(uu(n)))&&!d._p&&(v.instance=d,v.state.loading=5),Qn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(n,a),d||QA(f,n,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vo(a),a=Ti(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function _o(n){return'href="'+fn(n)+'"'}function uu(n){return'link[rel="stylesheet"]['+n+"]"}function Cv(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function QA(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Wt(i,"link",a),Rt(i),n.head.appendChild(i))}function vo(n){return'[src="'+fn(n)+'"]'}function cu(n){return"script[async]"+n}function Nv(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,Rt(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Rt(l),Wt(l,"style",f),Vh(l,a.precedence,n),i.instance=l;case"stylesheet":f=_o(a.href);var d=n.querySelector(uu(f));if(d)return i.state.loading|=4,i.instance=d,Rt(d),d;l=Cv(a),(f=Qn.get(f))&&ug(l,f),d=(n.ownerDocument||n).createElement("link"),Rt(d);var v=d;return v._p=new Promise(function(S,D){v.onload=S,v.onerror=D}),Wt(d,"link",l),i.state.loading|=4,Vh(d,a.precedence,n),i.instance=d;case"script":return d=vo(a.src),(f=n.querySelector(cu(d)))?(i.instance=f,Rt(f),f):(l=a,(f=Qn.get(d))&&(l=b({},a),cg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Rt(f),Wt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Vh(l,a.precedence,n));return i.instance}function Vh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===i)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function ug(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function cg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Mh=null;function Dv(n,i,a){if(Mh===null){var l=new Map,f=Mh=new Map;f.set(a,l)}else f=Mh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[_i]||d[It]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=n+v;var S=l.get(v);S?S.push(d):l.set(v,[d])}}return l}function Vv(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function YA(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Mv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function $A(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=_o(l.href),d=i.querySelector(uu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Oh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Rt(d);return}d=i.ownerDocument||i,l=Cv(l),(f=Qn.get(f))&&ug(l,f),d=d.createElement("link"),Rt(d);var v=d;v._p=new Promise(function(S,D){v.onload=S,v.onerror=D}),Wt(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Oh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var hg=0;function XA(n,i){return n.stylesheets&&n.count===0&&Ph(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Ph(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&hg===0&&(hg=62500*NA());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ph(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>hg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var kh=null;function Ph(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,kh=new Map,i.forEach(JA,n),kh=null,Oh.call(n))}function JA(n,i){if(!(i.state.loading&4)){var a=kh.get(n);if(a)var l=a.get(null);else{a=new Map,kh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=Oh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var hu={$$typeof:le,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function WA(n,i,a,l,f,d,v,S,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Ov(n,i,a,l,f,d,v,S,D,q,Y,J){return n=new WA(n,i,a,v,D,q,Y,J,S),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),n.current=d,d.stateNode=n,i=Hd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Yd(d),n}function kv(n){return n?(n=$a,n):$a}function Pv(n,i,a,l,f,d){f=kv(f),l.context===null?l.context=f:l.pendingContext=f,l=Us(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=zs(n,l,i),a!==null&&(_n(a,n,i),Fl(a,n,i))}function jv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function fg(n,i){jv(n,i),(n=n.alternate)&&jv(n,i)}function Lv(n){if(n.tag===13||n.tag===31){var i=Qr(n,67108864);i!==null&&_n(i,n,67108864),fg(n,67108864)}}function Uv(n){if(n.tag===13||n.tag===31){var i=Cn();i=kr(i);var a=Qr(n,i);a!==null&&_n(a,n,i),fg(n,i)}}var jh=!0;function ZA(n,i,a,l){var f=Q.T;Q.T=null;var d=re.p;try{re.p=2,dg(n,i,a,l)}finally{re.p=d,Q.T=f}}function ew(n,i,a,l){var f=Q.T;Q.T=null;var d=re.p;try{re.p=8,dg(n,i,a,l)}finally{re.p=d,Q.T=f}}function dg(n,i,a,l){if(jh){var f=mg(l);if(f===null)Zm(n,i,l,Lh,a),Bv(n,l);else if(nw(f,n,i,a,l))l.stopPropagation();else if(Bv(n,l),i&4&&-1<tw.indexOf(n)){for(;f!==null;){var d=Pn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=mi(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var D=1<<31-_t(v);S.entanglements[1]|=D,v&=~D}Mi(d),(Ge&6)===0&&(Th=ln()+500,ru(0))}}break;case 31:case 13:S=Qr(d,2),S!==null&&_n(S,d,2),bh(),fg(d,2)}if(d=mg(l),d===null&&Zm(n,i,l,Lh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Zm(n,i,l,null,a)}}function mg(n){return n=jn(n),gg(n)}var Lh=null;function gg(n){if(Lh=null,n=vi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Lh=n,null}function zv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dr()){case ml:return 2;case gl:return 8;case xs:case Ed:return 32;case pc:return 268435456;default:return 32}default:return 32}}var pg=!1,Js=null,Ws=null,Zs=null,fu=new Map,du=new Map,er=[],tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(n,i){switch(n){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":fu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(i.pointerId)}}function mu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Pn(i),i!==null&&Lv(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function nw(n,i,a,l,f){switch(i){case"focusin":return Js=mu(Js,n,i,a,l,f),!0;case"dragenter":return Ws=mu(Ws,n,i,a,l,f),!0;case"mouseover":return Zs=mu(Zs,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return fu.set(d,mu(fu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,du.set(d,mu(du.get(d)||null,n,i,a,l,f)),!0}return!1}function qv(n){var i=vi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){Uv(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){Uv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Uh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=mg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Il=l,a.target.dispatchEvent(l),Il=null}else return i=Pn(a),i!==null&&Lv(i),n.blockedOn=a,!1;i.shift()}return!0}function Fv(n,i,a){Uh(n)&&a.delete(i)}function iw(){pg=!1,Js!==null&&Uh(Js)&&(Js=null),Ws!==null&&Uh(Ws)&&(Ws=null),Zs!==null&&Uh(Zs)&&(Zs=null),fu.forEach(Fv),du.forEach(Fv)}function zh(n,i){n.blockedOn===i&&(n.blockedOn=null,pg||(pg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,iw)))}var Bh=null;function Hv(n){Bh!==n&&(Bh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Bh===n&&(Bh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(gg(l||a)===null)continue;break}var d=Pn(a);d!==null&&(n.splice(i,3),i-=3,mm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function To(n){function i(D){return zh(D,n)}Js!==null&&zh(Js,n),Ws!==null&&zh(Ws,n),Zs!==null&&zh(Zs,n),fu.forEach(i),du.forEach(i);for(var a=0;a<er.length;a++){var l=er[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<er.length&&(a=er[0],a.blockedOn===null);)qv(a),a.blockedOn===null&&er.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[Bt]||null;if(typeof d=="function")v||Hv(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[Bt]||null)S=v.formAction;else if(gg(f)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),Hv(a)}}}function Gv(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function yg(n){this._internalRoot=n}qh.prototype.render=yg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Cn();Pv(a,l,n,i,null,null)},qh.prototype.unmount=yg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Pv(n.current,2,null,n,null,null),bh(),i[yi]=null}};function qh(n){this._internalRoot=n}qh.prototype.unstable_scheduleHydration=function(n){if(n){var i=bc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<er.length&&i!==0&&i<er[a].priority;a++);er.splice(a,0,n),a===0&&qv(n)}};var Kv=e.version;if(Kv!=="19.2.4")throw Error(s(527,Kv,"19.2.4"));re.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var sw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{$n=Fh.inject(sw),Qt=Fh}catch{}}return pu.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,l="",f=Z_,d=e0,v=t0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=Ov(n,1,!1,null,null,a,l,null,f,d,v,Gv),n[yi]=i.current,Wm(n),new yg(i)},pu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=Z_,v=e0,S=t0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),i=Ov(n,1,!0,i,a??null,l,f,D,d,v,S,Gv),i.context=kv(null),a=i.current,l=Cn(),l=kr(l),f=Us(l),f.callback=null,zs(a,f,l),a=l,i.current.lanes=a,Mr(i,a),Mi(i),n[yi]=i.current,Wm(n),new qh(i)},pu.version="19.2.4",pu}var nT;function mw(){if(nT)return Tg.exports;nT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Tg.exports=dw(),Tg.exports}var gw=mw();function iT(r=new Date){const e=new Date(r);e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);const t=new Date(e.getFullYear(),0,4),s=1+Math.round(((e-t)/864e5-3+(t.getDay()+6)%7)/7);return`${e.getFullYear()}-W${String(s).padStart(2,"0")}`}function pw(r=new Date){const e=new Date(r);e.setHours(0,0,0,0);const t=e.getDay(),s=e.getDate()-((t===0?7:t)-1),o=new Date(e);o.setDate(s);const u=o.getFullYear()%100,c=o.getMonth()+1,m=o.getDate();return`${u}${c}${m}`}function yw(r){const e=r.match(/^(\d{4})-W(\d{2})$/);if(!e)return r;const t=parseInt(e[1],10),s=parseInt(e[2],10),o=new Date(t,0,4),u=o.getDay()||7,c=new Date(o);c.setDate(o.getDate()-(u-1)+(s-1)*7);const m=c.getFullYear()%100,g=c.getMonth()+1,p=c.getDate();return`${m}${g}${p}`}function _w(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}const vw=()=>{};var sT={};const tb=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Tw=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],c=r[t++],m=r[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[t++],c=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},nb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],c=o+1<r.length,m=c?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,_=u>>2,b=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,O=p&63;g||(O=64,c||(A=64)),s.push(t[_],t[b],t[A],t[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Tw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const p=o<r.length?t[r.charAt(o)]:64;++o;const b=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||b==null)throw new Ew;const A=u<<2|m>>4;if(s.push(A),p!==64){const O=m<<4&240|p>>2;if(s.push(O),b!==64){const j=p<<6&192|b;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Ew extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bw=function(r){const e=tb(r);return nb.encodeByteArray(e,!0)},gf=function(r){return bw(r).replace(/\./g,"")},ib=function(r){try{return nb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Sw=()=>sb().__FIREBASE_DEFAULTS__,xw=()=>{if(typeof process>"u"||typeof sT>"u")return;const r=sT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Aw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ib(r[1]);return e&&JSON.parse(e)},Ff=()=>{try{return vw()||Sw()||xw()||Aw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},rb=r=>Ff()?.emulatorHosts?.[r],ww=r=>{const e=rb(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ab=()=>Ff()?.config,ob=r=>Ff()?.[`_${r}`];class Iw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function il(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lb(r){return(await fetch(r,{credentials:"include"})).ok}function Rw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gf(JSON.stringify(t)),gf(JSON.stringify(c)),""].join(".")}const Ru={};function Cw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ru))Ru[e]?r.emulator.push(e):r.prod.push(e);return r}function Nw(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let rT=!1;function ub(r,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||Ru[r]===e||Ru[r]||rT)return;Ru[r]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=Cw().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,O){A.setAttribute("width","24"),A.setAttribute("id",O),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{rT=!0,c()},A}function _(A,O){A.setAttribute("id",O),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=Nw(s),O=t("text"),j=document.getElementById(O)||document.createElement("span"),K=t("learnmore"),Z=document.getElementById(K)||document.createElement("a"),ue=t("preprendIcon"),ne=document.getElementById(ue)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const le=A.element;m(le),_(Z,K);const te=p();g(ne,ue),le.append(ne,j,Z,te),document.body.appendChild(le)}u?(j.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function cb(){const r=Ff()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Ow(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kw(){const r=Ut();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function hb(){return!cb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fb(){return!cb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function db(){try{return typeof indexedDB=="object"}catch{return!1}}function Pw(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const jw="FirebaseError";class Ts extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=jw,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?Lw(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Ts(o,m,s)}}function Lw(r,e){return r.replace(Uw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Uw=/\{\$([^}]+)}/g;function zw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function va(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],c=e[o];if(aT(u)&&aT(c)){if(!va(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function aT(r){return r!==null&&typeof r=="object"}function tc(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Bw(r,e){const t=new qw(r,e);return t.subscribe.bind(t)}class qw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Fw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=xg),o.error===void 0&&(o.error=xg),o.complete===void 0&&(o.complete=xg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fw(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function xg(){}function en(r){return r&&r._delegate?r._delegate:r}class Ta{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oa="[DEFAULT]";class Hw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Iw;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kw(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Gw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gw(r){return r===oa?void 0:r}function Kw(r){return r.instantiationMode==="EAGER"}class Qw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const Yw={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},$w=Pe.INFO,Xw={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},Jw=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Xw[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xp{constructor(e){this.name=e,this._logLevel=$w,this._logHandler=Jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const Ww=(r,e)=>e.some(t=>r instanceof t);let oT,lT;function Zw(){return oT||(oT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eI(){return lT||(lT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mb=new WeakMap,Bg=new WeakMap,gb=new WeakMap,Ag=new WeakMap,Ap=new WeakMap;function tI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",c)},u=()=>{t(fr(r.result)),o()},c=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&mb.set(t,r)}).catch(()=>{}),Ap.set(e,r),e}function nI(r){if(Bg.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",c),r.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",c),r.addEventListener("abort",c)});Bg.set(r,e)}let qg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||gb.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fr(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function iI(r){qg=r(qg)}function sI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(wg(this),e,...t);return gb.set(s,e.sort?e.sort():[e]),fr(s)}:eI().includes(r)?function(...e){return r.apply(wg(this),e),fr(mb.get(this))}:function(...e){return fr(r.apply(wg(this),e))}}function rI(r){return typeof r=="function"?sI(r):(r instanceof IDBTransaction&&nI(r),Ww(r,Zw())?new Proxy(r,qg):r)}function fr(r){if(r instanceof IDBRequest)return tI(r);if(Ag.has(r))return Ag.get(r);const e=rI(r);return e!==r&&(Ag.set(r,e),Ap.set(e,r)),e}const wg=r=>Ap.get(r);function aI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(r,e),m=fr(c);return s&&c.addEventListener("upgradeneeded",g=>{s(fr(c.result),g.oldVersion,g.newVersion,fr(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const oI=["get","getKey","getAll","getAllKeys","count"],lI=["put","add","delete","clear"],Ig=new Map;function uT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=lI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||oI.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Ig.set(e,u),u}iI(r=>({...r,get:(e,t,s)=>uT(e,t)||r.get(e,t,s),has:(e,t)=>!!uT(e,t)||r.has(e,t)}));class uI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function cI(r){return r.getComponent()?.type==="VERSION"}const Fg="@firebase/app",cT="0.14.8";const ds=new xp("@firebase/app"),hI="@firebase/app-compat",fI="@firebase/analytics-compat",dI="@firebase/analytics",mI="@firebase/app-check-compat",gI="@firebase/app-check",pI="@firebase/auth",yI="@firebase/auth-compat",_I="@firebase/database",vI="@firebase/data-connect",TI="@firebase/database-compat",EI="@firebase/functions",bI="@firebase/functions-compat",SI="@firebase/installations",xI="@firebase/installations-compat",AI="@firebase/messaging",wI="@firebase/messaging-compat",II="@firebase/performance",RI="@firebase/performance-compat",CI="@firebase/remote-config",NI="@firebase/remote-config-compat",DI="@firebase/storage",VI="@firebase/storage-compat",MI="@firebase/firestore",OI="@firebase/ai",kI="@firebase/firestore-compat",PI="firebase",jI="12.9.0";const Hg="[DEFAULT]",LI={[Fg]:"fire-core",[hI]:"fire-core-compat",[dI]:"fire-analytics",[fI]:"fire-analytics-compat",[gI]:"fire-app-check",[mI]:"fire-app-check-compat",[pI]:"fire-auth",[yI]:"fire-auth-compat",[_I]:"fire-rtdb",[vI]:"fire-data-connect",[TI]:"fire-rtdb-compat",[EI]:"fire-fn",[bI]:"fire-fn-compat",[SI]:"fire-iid",[xI]:"fire-iid-compat",[AI]:"fire-fcm",[wI]:"fire-fcm-compat",[II]:"fire-perf",[RI]:"fire-perf-compat",[CI]:"fire-rc",[NI]:"fire-rc-compat",[DI]:"fire-gcs",[VI]:"fire-gcs-compat",[MI]:"fire-fst",[kI]:"fire-fst-compat",[OI]:"fire-vertex","fire-js":"fire-js",[PI]:"fire-js-all"};const pf=new Map,UI=new Map,Gg=new Map;function hT(r,e){try{r.container.addComponent(e)}catch(t){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Uo(r){const e=r.name;if(Gg.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Gg.set(e,r);for(const t of pf.values())hT(t,r);for(const t of UI.values())hT(t,r);return!0}function wp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function li(r){return r==null?!1:r.settings!==void 0}const zI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new ec("app","Firebase",zI);class BI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}const sl=jI;function pb(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Hg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw dr.create("bad-app-name",{appName:String(o)});if(t||(t=ab()),!t)throw dr.create("no-options");const u=pf.get(o);if(u){if(va(t,u.options)&&va(s,u.config))return u;throw dr.create("duplicate-app",{appName:o})}const c=new Qw(o);for(const g of Gg.values())c.addComponent(g);const m=new BI(t,s,c);return pf.set(o,m),m}function yb(r=Hg){const e=pf.get(r);if(!e&&r===Hg&&ab())return pb();if(!e)throw dr.create("no-app",{appName:r});return e}function mr(r,e,t){let s=LI[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(c.join(" "));return}Uo(new Ta(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const qI="firebase-heartbeat-database",FI=1,Uu="firebase-heartbeat-store";let Rg=null;function _b(){return Rg||(Rg=aI(qI,FI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Uu)}catch(t){console.warn(t)}}}}).catch(r=>{throw dr.create("idb-open",{originalErrorMessage:r.message})})),Rg}async function HI(r){try{const t=(await _b()).transaction(Uu),s=await t.objectStore(Uu).get(vb(r));return await t.done,s}catch(e){if(e instanceof Ts)ds.warn(e.message);else{const t=dr.create("idb-get",{originalErrorMessage:e?.message});ds.warn(t.message)}}}async function fT(r,e){try{const s=(await _b()).transaction(Uu,"readwrite");await s.objectStore(Uu).put(e,vb(r)),await s.done}catch(t){if(t instanceof Ts)ds.warn(t.message);else{const s=dr.create("idb-set",{originalErrorMessage:t?.message});ds.warn(s.message)}}}function vb(r){return`${r.name}!${r.options.appId}`}const GI=1024,KI=30;class QI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $I(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>KI){const o=XI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ds.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dT(),{heartbeatsToSend:t,unsentEntries:s}=YI(this._heartbeatsCache.heartbeats),o=gf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ds.warn(e),""}}}function dT(){return new Date().toISOString().substring(0,10)}function YI(r,e=GI){const t=[];let s=r.slice();for(const o of r){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),mT(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),mT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class $I{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return db()?Pw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return fT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return fT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mT(r){return gf(JSON.stringify({version:2,heartbeats:r})).length}function XI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function JI(r){Uo(new Ta("platform-logger",e=>new uI(e),"PRIVATE")),Uo(new Ta("heartbeat",e=>new QI(e),"PRIVATE")),mr(Fg,cT,r),mr(Fg,cT,"esm2020"),mr("fire-js","")}JI("");var WI="firebase",ZI="12.9.0";mr(WI,ZI,"app");var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var gr,Tb;(function(){var r;function e(R,w){function I(){}I.prototype=w.prototype,R.F=w.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(V,N,P){for(var C=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)C[Ze-2]=arguments[Ze];return w.prototype[N].apply(V,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,I){I||(I=0);const V=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)V[N]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(N=0;N<16;++N)V[N]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=R.g[0],I=R.g[1],N=R.g[2];let P=R.g[3],C;C=w+(P^I&(N^P))+V[0]+3614090360&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(N^w&(I^N))+V[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(I^P&(w^I))+V[2]+606105819&4294967295,N=P+(C<<17&4294967295|C>>>15),C=I+(w^N&(P^w))+V[3]+3250441966&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(P^I&(N^P))+V[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(N^w&(I^N))+V[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(I^P&(w^I))+V[6]+2821735955&4294967295,N=P+(C<<17&4294967295|C>>>15),C=I+(w^N&(P^w))+V[7]+4249261313&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(P^I&(N^P))+V[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(N^w&(I^N))+V[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(I^P&(w^I))+V[10]+4294925233&4294967295,N=P+(C<<17&4294967295|C>>>15),C=I+(w^N&(P^w))+V[11]+2304563134&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(P^I&(N^P))+V[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(N^w&(I^N))+V[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(I^P&(w^I))+V[14]+2792965006&4294967295,N=P+(C<<17&4294967295|C>>>15),C=I+(w^N&(P^w))+V[15]+1236535329&4294967295,I=N+(C<<22&4294967295|C>>>10),C=w+(N^P&(I^N))+V[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^N&(w^I))+V[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(P^w))+V[11]+643717713&4294967295,N=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(N^P))+V[0]+3921069994&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(N^P&(I^N))+V[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^N&(w^I))+V[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(P^w))+V[15]+3634488961&4294967295,N=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(N^P))+V[4]+3889429448&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(N^P&(I^N))+V[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^N&(w^I))+V[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(P^w))+V[3]+4107603335&4294967295,N=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(N^P))+V[8]+1163531501&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(N^P&(I^N))+V[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^N&(w^I))+V[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^I&(P^w))+V[7]+1735328473&4294967295,N=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(N^P))+V[12]+2368359562&4294967295,I=N+(C<<20&4294967295|C>>>12),C=w+(I^N^P)+V[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^N)+V[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^I)+V[11]+1839030562&4294967295,N=P+(C<<16&4294967295|C>>>16),C=I+(N^P^w)+V[14]+4259657740&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(I^N^P)+V[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^N)+V[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^I)+V[7]+4139469664&4294967295,N=P+(C<<16&4294967295|C>>>16),C=I+(N^P^w)+V[10]+3200236656&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(I^N^P)+V[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^N)+V[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^I)+V[3]+3572445317&4294967295,N=P+(C<<16&4294967295|C>>>16),C=I+(N^P^w)+V[6]+76029189&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(I^N^P)+V[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^N)+V[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^I)+V[15]+530742520&4294967295,N=P+(C<<16&4294967295|C>>>16),C=I+(N^P^w)+V[2]+3299628645&4294967295,I=N+(C<<23&4294967295|C>>>9),C=w+(N^(I|~P))+V[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~N))+V[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~I))+V[14]+2878612391&4294967295,N=P+(C<<15&4294967295|C>>>17),C=I+(P^(N|~w))+V[5]+4237533241&4294967295,I=N+(C<<21&4294967295|C>>>11),C=w+(N^(I|~P))+V[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~N))+V[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~I))+V[10]+4293915773&4294967295,N=P+(C<<15&4294967295|C>>>17),C=I+(P^(N|~w))+V[1]+2240044497&4294967295,I=N+(C<<21&4294967295|C>>>11),C=w+(N^(I|~P))+V[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~N))+V[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~I))+V[6]+2734768916&4294967295,N=P+(C<<15&4294967295|C>>>17),C=I+(P^(N|~w))+V[13]+1309151649&4294967295,I=N+(C<<21&4294967295|C>>>11),C=w+(N^(I|~P))+V[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~N))+V[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~I))+V[2]+718787259&4294967295,N=P+(C<<15&4294967295|C>>>17),C=I+(P^(N|~w))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+P&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const I=w-this.blockSize,V=this.C;let N=this.h,P=0;for(;P<w;){if(N==0)for(;P<=I;)o(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<w;)if(V[N++]=R.charCodeAt(P++),N==this.blockSize){o(this,V),N=0;break}}else for(;P<w;)if(V[N++]=R[P++],N==this.blockSize){o(this,V),N=0;break}}this.h=N,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)R[w++]=this.g[I]>>>V&255;return R};function u(R,w){var I=m;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=w(R)}function c(R,w){this.h=w;const I=[];let V=!0;for(let N=R.length-1;N>=0;N--){const P=R[N]|0;V&&P==w||(I[N]=P,V=!1)}this.g=I}var m={};function g(R){return-128<=R&&R<128?u(R,function(w){return new c([w|0],w<0?-1:0)}):new c([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return b;if(R<0)return Z(p(-R));const w=[];let I=1;for(let V=0;R>=I;V++)w[V]=R/I|0,I*=4294967296;return new c(w,0)}function _(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return Z(_(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(w,8));let V=b;for(let P=0;P<R.length;P+=8){var N=Math.min(8,R.length-P);const C=parseInt(R.substring(P,P+N),w);N<8?(N=p(Math.pow(w,N)),V=V.j(N).add(p(C))):(V=V.j(I),V=V.add(p(C)))}return V}var b=g(0),A=g(1),O=g(16777216);r=c.prototype,r.m=function(){if(K(this))return-Z(this).m();let R=0,w=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);R+=(V>=0?V:4294967296+V)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(j(this))return"0";if(K(this))return"-"+Z(this).toString(R);const w=p(Math.pow(R,6));var I=this;let V="";for(;;){const N=te(I,w).g;I=ue(I,N.j(w));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=N,j(I))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function j(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function K(R){return R.h==-1}r.l=function(R){return R=ue(this,R),K(R)?-1:j(R)?0:1};function Z(R){const w=R.g.length,I=[];for(let V=0;V<w;V++)I[V]=~R.g[V];return new c(I,~R.h).add(A)}r.abs=function(){return K(this)?Z(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),I=[];let V=0;for(let N=0;N<=w;N++){let P=V+(this.i(N)&65535)+(R.i(N)&65535),C=(P>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);V=C>>>16,P&=65535,C&=65535,I[N]=C<<16|P}return new c(I,I[I.length-1]&-2147483648?-1:0)};function ue(R,w){return R.add(Z(w))}r.j=function(R){if(j(this)||j(R))return b;if(K(this))return K(R)?Z(this).j(Z(R)):Z(Z(this).j(R));if(K(R))return Z(this.j(Z(R)));if(this.l(O)<0&&R.l(O)<0)return p(this.m()*R.m());const w=this.g.length+R.g.length,I=[];for(var V=0;V<2*w;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<R.g.length;N++){const P=this.i(V)>>>16,C=this.i(V)&65535,Ze=R.i(N)>>>16,yt=R.i(N)&65535;I[2*V+2*N]+=C*yt,ne(I,2*V+2*N),I[2*V+2*N+1]+=P*yt,ne(I,2*V+2*N+1),I[2*V+2*N+1]+=C*Ze,ne(I,2*V+2*N+1),I[2*V+2*N+2]+=P*Ze,ne(I,2*V+2*N+2)}for(R=0;R<w;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=w;R<2*w;R++)I[R]=0;return new c(I,0)};function ne(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function le(R,w){this.g=R,this.h=w}function te(R,w){if(j(w))throw Error("division by zero");if(j(R))return new le(b,b);if(K(R))return w=te(Z(R),w),new le(Z(w.g),Z(w.h));if(K(w))return w=te(R,Z(w)),new le(Z(w.g),w.h);if(R.g.length>30){if(K(R)||K(w))throw Error("slowDivide_ only works with positive integers.");for(var I=A,V=w;V.l(R)<=0;)I=_e(I),V=_e(V);var N=Te(I,1),P=Te(V,1);for(V=Te(V,2),I=Te(I,2);!j(V);){var C=P.add(V);C.l(R)<=0&&(N=N.add(I),P=C),V=Te(V,1),I=Te(I,1)}return w=ue(R,N.j(w)),new le(N,w)}for(N=b;R.l(w)>=0;){for(I=Math.max(1,Math.floor(R.m()/w.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=p(I),C=P.j(w);K(C)||C.l(R)>0;)I-=V,P=p(I),C=P.j(w);j(P)&&(P=A),N=N.add(P),R=ue(R,C)}return new le(N,R)}r.B=function(R){return te(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<w;V++)I[V]=this.i(V)&R.i(V);return new c(I,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<w;V++)I[V]=this.i(V)|R.i(V);return new c(I,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<w;V++)I[V]=this.i(V)^R.i(V);return new c(I,this.h^R.h)};function _e(R){const w=R.g.length+1,I=[];for(let V=0;V<w;V++)I[V]=R.i(V)<<1|R.i(V-1)>>>31;return new c(I,R.h)}function Te(R,w){const I=w>>5;w%=32;const V=R.g.length-I,N=[];for(let P=0;P<V;P++)N[P]=w>0?R.i(P+I)>>>w|R.i(P+I+1)<<32-w:R.i(P+I);return new c(N,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Tb=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,gr=c}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Eb,Su,bb,Wh,Kg,Sb,xb,Ab;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var E=s;h=h.split(".");for(var x=0;x<h.length-1;x++){var z=h[x];if(!(z in E))break e;E=E[z]}h=h[h.length-1],x=E[h],y=y(x),y!=x&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var E=[],x;for(x in y)Object.prototype.hasOwnProperty.call(y,x)&&E.push([x,y[x]]);return E}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,E){return h.call.apply(h.bind,arguments)}function p(h,y,E){return p=g,p.apply(null,arguments)}function _(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var x=E.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function b(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(x,z,H){for(var ie=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)ie[Ie-2]=arguments[Ie];return y.prototype[z].apply(x,ie)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const E=Array(y);for(let x=0;x<y;x++)E[x]=h[x];return E}return[]}function j(h,y){for(let x=1;x<arguments.length;x++){const z=arguments[x];var E=typeof z;if(E=E!="object"?E:z?Array.isArray(z)?"array":E:"null",E=="array"||E=="object"&&typeof z.length=="number"){E=h.length||0;const H=z.length||0;h.length=E+H;for(let ie=0;ie<H;ie++)h[E+ie]=z[ie]}else h.push(z)}}class K{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Z(h){c.setTimeout(()=>{throw h},0)}function ue(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ne{constructor(){this.h=this.g=null}add(y,E){const x=le.get();x.set(y,E),this.h?this.h.next=x:this.g=x,this.h=x}}var le=new K(()=>new te,h=>h.reset());class te{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,Te=!1,R=new ne,w=()=>{const h=Promise.resolve(void 0);_e=()=>{h.then(I)}};function I(){for(var h;h=ue();){try{h.h.call(h.g)}catch(E){Z(E)}var y=le;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Te=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Ze(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(Ze,N),Ze.prototype.init=function(h,y){const E=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function re(h,y,E,x,z){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!x,this.ha=z,this.key=++Q,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,y,E){for(const x in h)y.call(E,h[x],x,h)}function Qe(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function k(h){const y={};for(const E in h)y[E]=h[E];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,y){let E,x;for(let z=1;z<arguments.length;z++){x=arguments[z];for(E in x)h[E]=x[E];for(let H=0;H<W.length;H++)E=W[H],Object.prototype.hasOwnProperty.call(x,E)&&(h[E]=x[E])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,E,x,z){const H=h.toString();h=this.g[H],h||(h=this.g[H]=[],this.h++);const ie=Ce(h,y,x,z);return ie>-1?(y=h[ie],E||(y.fa=!1)):(y=new re(y,this.src,H,!!x,z),y.fa=E,h.push(y)),y};function Se(h,y){const E=y.type;if(E in h.g){var x=h.g[E],z=Array.prototype.indexOf.call(x,y,void 0),H;(H=z>=0)&&Array.prototype.splice.call(x,z,1),H&&(ve(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ce(h,y,E,x){for(let z=0;z<h.length;++z){const H=h[z];if(!H.da&&H.listener==y&&H.capture==!!E&&H.ha==x)return z}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Pt={};function ut(h,y,E,x,z){if(Array.isArray(y)){for(let H=0;H<y.length;H++)ut(h,y[H],E,x,z);return null}return E=dl(E),h&&h[yt]?h.J(y,E,m(x)?!!x.capture:!1,z):Cr(h,y,E,!1,x,z)}function Cr(h,y,E,x,z,H){if(!y)throw Error("Invalid event type");const ie=m(z)?!!z.capture:!!z;let Ie=Nr(h);if(Ie||(h[Ue]=Ie=new ce(h)),E=Ie.add(y,E,x,ie,H),E.proxy)return E;if(x=Na(),E.proxy=x,x.src=h,x.listener=E,h.addEventListener)P||(z=ie),z===void 0&&(z=!1),h.addEventListener(y.toString(),x,z);else if(h.attachEvent)h.attachEvent(fi(y.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Na(){function h(E){return y.call(h.src,h.listener,E)}const y=hl;return h}function Da(h,y,E,x,z){if(Array.isArray(y))for(var H=0;H<y.length;H++)Da(h,y[H],E,x,z);else x=m(x)?!!x.capture:!!x,E=dl(E),h&&h[yt]?(h=h.i,H=String(y).toString(),H in h.g&&(y=h.g[H],E=Ce(y,E,x,z),E>-1&&(ve(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[H],h.h--)))):h&&(h=Nr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ce(y,E,x,z)),(E=h>-1?y[h]:null)&&Va(E))}function Va(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[yt])Se(y.i,h);else{var E=h.type,x=h.proxy;y.removeEventListener?y.removeEventListener(E,x,h.capture):y.detachEvent?y.detachEvent(fi(E),x):y.addListener&&y.removeListener&&y.removeListener(x),(E=Nr(y))?(Se(E,h),E.h==0&&(E.src=null,y[Ue]=null)):ve(h)}}}function fi(h){return h in Pt?Pt[h]:Pt[h]="on"+h}function hl(h,y){if(h.da)h=!0;else{y=new Ze(y,this);const E=h.listener,x=h.ha||h.src;h.fa&&Va(h),h=E.call(x,y)}return h}function Nr(h){return h=h[Ue],h instanceof ce?h:null}var fl="__closure_events_fn_"+(Math.random()*1e9>>>0);function dl(h){return typeof h=="function"?h:(h[fl]||(h[fl]=function(y){return h.handleEvent(y)}),h[fl])}function At(){V.call(this),this.i=new ce(this),this.M=this,this.G=null}b(At,V),At.prototype[yt]=!0,At.prototype.removeEventListener=function(h,y,E,x){Da(this,h,y,E,x)};function jt(h,y){var E,x=h.G;if(x)for(E=[];x;x=x.G)E.push(x);if(h=h.M,x=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var z=y;y=new N(x,h),ae(y,z)}z=!0;let H,ie;if(E)for(ie=E.length-1;ie>=0;ie--)H=y.g=E[ie],z=Ss(H,x,!0,y)&&z;if(H=y.g=h,z=Ss(H,x,!0,y)&&z,z=Ss(H,x,!1,y)&&z,E)for(ie=0;ie<E.length;ie++)H=y.g=E[ie],z=Ss(H,x,!1,y)&&z}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let x=0;x<E.length;x++)ve(E[x]);delete h.g[y],h.h--}}this.G=null},At.prototype.J=function(h,y,E,x){return this.i.add(String(h),y,!1,E,x)},At.prototype.K=function(h,y,E,x){return this.i.add(String(h),y,!0,E,x)};function Ss(h,y,E,x){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let H=0;H<y.length;++H){const ie=y[H];if(ie&&!ie.da&&ie.capture==E){const Ie=ie.listener,vt=ie.ha||ie.src;ie.fa&&Se(h.i,ie),z=Ie.call(vt,x)!==!1&&z}}return z&&!x.defaultPrevented}function Td(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function gc(h){h.g=Td(()=>{h.g=null,h.i&&(h.i=!1,gc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends V{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:gc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(h){V.call(this),this.h=h,this.g={}}b(Dr,V);var ml=[];function gl(h){Be(h.g,function(y,E){this.g.hasOwnProperty(E)&&Va(y)},h),h.g={}}Dr.prototype.N=function(){Dr.Z.N.call(this),gl(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=c.JSON.stringify,Ed=c.JSON.parse,pc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function yc(){}function _c(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){N.call(this,"d")}b(Qt,N);function kn(){N.call(this,"c")}b(kn,N);var _t={},vc=null;function Ma(){return vc=vc||new At}_t.Ia="serverreachability";function Tc(h){N.call(this,_t.Ia,h)}b(Tc,N);function di(h){const y=Ma();jt(y,new Tc(y))}_t.STAT_EVENT="statevent";function Vr(h,y){N.call(this,_t.STAT_EVENT,h),this.stat=y}b(Vr,N);function wt(h){const y=Ma();jt(y,new Vr(y,h))}_t.Ja="timingevent";function mi(h,y){N.call(this,_t.Ja,h),this.size=y}b(mi,N);function gi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function bd(h,y,E,x,z,H){h.info(function(){if(h.g)if(H){var ie="",Ie=H.split("&");for(let He=0;He<Ie.length;He++){var vt=Ie[He].split("=");if(vt.length>1){const ct=vt[0];vt=vt[1];const Un=ct.split("_");ie=Un.length>=2&&Un[1]=="type"?ie+(ct+"="+vt+"&"):ie+(ct+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+x+") [attempt "+z+"]: "+y+`
`+E+`
`+ie})}function Ec(h,y,E,x,z,H,ie){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+z+"]: "+y+`
`+E+`
`+H+" "+ie})}function pi(h,y,E,x){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Sd(h,E)+(x?" "+x:"")})}function Mr(h,y){h.info(function(){return"TIMEOUT: "+y})}Xn.prototype.info=function(){};function Sd(h,y){if(!h.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(h=0;h<H.length;h++)if(Array.isArray(H[h])){var E=H[h];if(!(E.length<2)){var x=E[1];if(Array.isArray(x)&&!(x.length<1)){var z=x[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ie=1;ie<x.length;ie++)x[ie]=""}}}}return xs(H)}catch{return y}}var Or={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yl;function kr(){}b(kr,yc),kr.prototype.g=function(){return new XMLHttpRequest},yl=new kr;function Hi(h){return encodeURIComponent(String(h))}function bc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function Jn(h,y,E,x){this.j=h,this.i=y,this.l=E,this.S=x||1,this.V=new Dr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}var It={},Bt={};function yi(h,y,E){h.M=1,h.A=Pr(Ct(y)),h.u=E,h.R=!0,Oa(h,null)}function Oa(h,y){h.F=Date.now(),_i(h),h.B=Ct(h.A);var E=h.B,x=h.S;Array.isArray(x)||(x=[String(x)]),La(E.i,"t",x),h.C=0,E=h.j.L,h.h=new Wn,h.g=jc(h.j,E?y:null,!h.u),h.P>0&&(h.O=new ln(p(h.Y,h,h.g),h.P)),y=h.V,E=h.g,x=h.ba;var z="readystatechange";Array.isArray(z)||(z&&(ml[0]=z.toString()),z=ml);for(let H=0;H<z.length;H++){const ie=ut(E,z[H],x||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),di(),bd(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ti(h)==3?y.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=ti(this.g),vt=this.g.ya(),He=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Ie!=4||vt==7||(vt==8||He<=0?di(3):di(2)),vi(this);var y=this.g.ca();this.X=y;var E=xd(this);if(this.o=y==200,Ec(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var x,z=this.g;if((x=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(x)){var H=x;break t}}H=null}if(h=H)pi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,h);else{this.o=!1,this.m=3,wt(12),En(this),Pn(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<E.length;)if(ct=xc(this,E),ct==Bt){Ie==4&&(this.m=4,wt(14),h=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==It){this.m=4,wt(15),pi(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else pi(this.i,this.l,ct,null),Ti(this,ct);if(Sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||E.length!=0||this.h.h||(this.m=1,wt(16),h=!1),this.o=this.o&&h,!h)pi(this.i,this.l,E,"[Invalid Chunked Response]"),En(this),Pn(this);else if(E.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Vl(ie),ie.P=!0,wt(11))}}else pi(this.i,this.l,E,null),Ti(this,E);Ie==4&&En(this),this.o&&!this.K&&(Ie==4?Mc(this.j,this):(this.o=!1,_i(this)))}else Ki(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),En(this),Pn(this)}}}catch{}};function xd(h){if(!Sc(h))return h.g.la();const y=Yt(h.g);if(y==="")return"";let E="";const x=y.length,z=ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return En(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let H=0;H<x;H++)h.h.h=!0,E+=h.h.i.decode(y[H],{stream:!(z&&H==x-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Sc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function xc(h,y){var E=h.C,x=y.indexOf(`
`,E);return x==-1?Bt:(E=Number(y.substring(E,x)),isNaN(E)?It:(x+=1,x+E>y.length?Bt:(y=y.slice(x,x+E),h.C=x+E,y)))}Jn.prototype.cancel=function(){this.K=!0,En(this)};function _i(h){h.T=Date.now()+h.H,ka(h,h.H)}function ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=gi(p(h.aa,h),y)}function vi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Mr(this.i,this.B),this.M!=2&&(di(),wt(17)),En(this),this.m=2,Pn(this)):ka(this,this.T-h)};function Pn(h){h.j.I==0||h.K||Mc(h.j,h)}function En(h){vi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,gl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ti(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||bi(E.h,h))){if(!h.L&&bi(E.h,h)&&E.I==3){try{var x=E.Ba.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var z=x;if(z[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Fa(E),Vs(E);else break e;Fr(E),wt(18)}}else E.xa=z[1],0<E.xa-E.K&&z[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=gi(p(E.Va,E),6e3));Ei(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ri(E,11)}else if((h.L||E.g==h)&&Fa(E),!C(y))for(z=E.Ba.g.parse(y),y=0;y<z.length;y++){let He=z[y];const ct=He[0];if(!(ct<=E.K))if(E.K=ct,He=He[1],E.I==2)if(He[0]=="c"){E.M=He[1],E.ba=He[2];const Un=He[3];Un!=null&&(E.ka=Un,E.j.info("VER="+E.ka));const Ci=He[4];Ci!=null&&(E.za=Ci,E.j.info("SVER="+E.za));const ni=He[5];ni!=null&&typeof ni=="number"&&ni>0&&(x=1.5*ni,E.O=x,E.j.info("backChannelRequestTimeoutMs_="+x)),x=E;const ii=h.g;if(ii){const Hr=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var H=x.h;H.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Tl(H,H.h),H.h=null))}if(x.G){const Ha=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(x.wa=Ha,Ye(x.J,x.G,Ha))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),x=E;var ie=h;if(x.na=Pc(x,x.L?x.ba:null,x.W),ie.L){El(x.h,ie);var Ie=ie,vt=x.O;vt&&(Ie.H=vt),Ie.D&&(vi(Ie),_i(Ie)),x.g=ie}else Dc(x);E.i.length>0&&Ii(E)}else He[0]!="stop"&&He[0]!="close"||Ri(E,7);else E.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ri(E,7):Nl(E):He[0]!="noop"&&E.l&&E.l.qa(He),E.A=0)}}di(4)}catch{}}var Rt=class{constructor(h,y){this.g=h,this.map=y}};function _l(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ei(h){return h.h?1:h.g?h.g.size:0}function bi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Tl(h,y){h.g?h.g.add(y):h.h=y}function El(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}_l.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return O(h.i)}var Ac=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const x=h[E].indexOf("=");let z,H=null;x>=0?(z=h[E].substring(0,x),H=h[E].substring(x+1)):z=h[E],y(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof bn?(this.l=h.l,qt(this,h.j),this.o=h.o,this.g=h.g,As(this,h.u),this.h=h.h,Sl(this,Cc(h.i)),this.m=h.m):h&&(y=String(h).match(Ac))?(this.l=!1,qt(this,y[1]||"",!0),this.o=Si(y[2]||""),this.g=Si(y[3]||"",!0),As(this,y[4]),this.h=Si(y[5]||"",!0),Sl(this,y[6]||"",!0),this.m=Si(y[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}bn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(jr(y,ja,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(jr(y,ja,!0),"@"),h.push(Hi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(jr(E,E.charAt(0)=="/"?xl:wc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",jr(E,Ic)),h.join("")},bn.prototype.resolve=function(h){const y=Ct(this);let E=!!h.j;E?qt(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var x=h.h;if(E)As(y,h.u);else if(E=!!h.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var z=y.h.lastIndexOf("/");z!=-1&&(x=y.h.slice(0,z+1)+x)}if(z=x,z==".."||z==".")x="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){x=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let ie=0;ie<z.length;){const Ie=z[ie++];Ie=="."?x&&ie==z.length&&H.push(""):Ie==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),x&&ie==z.length&&H.push("")):(H.push(Ie),x=!0)}x=H.join("/")}else x=z}return E?y.h=x:E=h.i.toString()!=="",E?Sl(y,Cc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function Ct(h){return new bn(h)}function qt(h,y,E){h.j=E?Si(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function As(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Sl(h,y,E){y instanceof Is?(h.i=y,Ua(h.i,h.l)):(E||(y=jr(y,ws)),h.i=new Is(y,h.l))}function Ye(h,y,E){h.i.set(y,E)}function Pr(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Si(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function jr(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,fn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ja=/[#\/\?@]/g,wc=/[#\?:]/g,xl=/[#\?]/g,ws=/[#\?@]/g,Ic=/#/g;function Is(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&Pa(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=Is.prototype,r.add=function(h,y){dn(this),this.i=null,h=Rs(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Rc(h,y){dn(h),y=Rs(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Al(h,y){return dn(h),y=Rs(h,y),h.g.has(y)}r.forEach=function(h,y){dn(this),this.g.forEach(function(E,x){E.forEach(function(z){h.call(y,z,x,this)},this)},this)};function wl(h,y){dn(h);let E=[];if(typeof y=="string")Al(h,y)&&(E=E.concat(h.g.get(Rs(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}r.set=function(h,y){return dn(this),this.i=null,h=Rs(this,h),Al(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=wl(this,h),h.length>0?String(h[0]):y):y};function La(h,y,E){Rc(h,y),E.length>0&&(h.i=null,h.g.set(Rs(h,y),O(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let x=0;x<y.length;x++){var E=y[x];const z=Hi(E);E=wl(this,E);for(let H=0;H<E.length;H++){let ie=z;E[H]!==""&&(ie+="="+Hi(E[H])),h.push(ie)}}return this.i=h.join("&")};function Cc(h){const y=new Is;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Rs(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ua(h,y){y&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(E,x){const z=x.toLowerCase();x!=z&&(Rc(this,x),La(this,z,E))},h)),h.j=y}function Zn(h,y){const E=new Xn;if(c.Image){const x=new Image;x.onload=_(jn,E,"TestLoadImage: loaded",!0,y,x),x.onerror=_(jn,E,"TestLoadImage: error",!1,y,x),x.onabort=_(jn,E,"TestLoadImage: abort",!1,y,x),x.ontimeout=_(jn,E,"TestLoadImage: timeout",!1,y,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else y(!1)}function Il(h,y){const E=new Xn,x=new AbortController,z=setTimeout(()=>{x.abort(),jn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:x.signal}).then(H=>{clearTimeout(z),H.ok?jn(E,"TestPingServer: ok",!0,y):jn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),jn(E,"TestPingServer: error",!1,y)})}function jn(h,y,E,x,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),x(E)}catch{}}function Cs(){this.g=new pc}function xi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(xi,yc),xi.prototype.g=function(){return new Lr(this.i,this.h)};function Lr(h,y){At.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Lr,At),r=Lr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ei(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;za(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function za(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ns(this):ei(this),this.readyState==3&&za(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Ns(this))},r.Na=function(h){this.g&&(this.response=h,Ns(this))},r.ga=function(){this.g&&Ns(this)};function Ns(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ei(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Be(h,function(E,x){y+=x,y+=":",y+=E,y+=`\r
`}),y}function Ur(h,y,E){e:{for(x in E){var x=!1;break e}x=!0}x||(E=Ln(E),typeof h=="string"?E!=null&&Hi(E):Ye(h,y,E))}function et(h){At.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(et,At);var Ai=/^https?$/i,Rl=["POST","PUT"];r=et.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,E,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yl.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(H){zr(this,H);return}if(h=E||"",E=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var z in x)E.set(z,x[z]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const H of x.keys())E.set(H,x.get(H));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(E.keys()).find(H=>H.toLowerCase()=="content-type"),z=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Rl,y,void 0)>=0)||x||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of E)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(H){zr(this,H)}};function zr(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Cl(h),Gi(h)}function Cl(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Br(this):this.Xa())},r.Xa=function(){Br(this)};function Br(h){if(h.h&&typeof u<"u"){if(h.v&&ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),ti(h)==4){h.h=!1;try{const H=h.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var x;if(x=H===0){let ie=String(h.D).match(Ac)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),x=!Ai.test(ie?ie.toLowerCase():"")}E=x}if(E)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var z=ti(h)>2?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.ca()+"]",Cl(h)}}finally{Gi(h)}}}}function Gi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||jt(h,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ti(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ed(y)}};function Yt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(h){const y={};h=(h.g&&ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(C(h[x]))continue;var E=bc(h[x]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const H=y[z]||[];y[z]=H,H.push(E)}Qe(y,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Ds(h){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,h),this.Za=wi("retryDelaySeedMs",1e4,h),this.Ta=wi("forwardChannelMaxRetries",2,h),this.va=wi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new _l(h&&h.concurrentRequestLimit),this.Ba=new Cs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ds.prototype,r.ka=8,r.I=1,r.connect=function(h,y,E,x){wt(0),this.W=h,this.H=y||{},E&&x!==void 0&&(this.H.OSID=E,this.H.OAID=x),this.F=this.X,this.J=Pc(this,null,this.W),Ii(this)};function Nl(h){if(Ba(h),h.I==3){var y=h.V++,E=Ct(h.J);if(Ye(E,"SID",h.M),Ye(E,"RID",y),Ye(E,"TYPE","terminate"),qr(h,E),y=new Jn(h,h.j,y),y.M=2,y.A=Pr(Ct(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=jc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),_i(y)}kc(h)}function Vs(h){h.g&&(Vl(h),h.g.cancel(),h.g=null)}function Ba(h){Vs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Fa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ii(h){if(!vl(h.h)&&!h.m){h.m=!0;var y=h.Ea;_e||w(),Te||(_e(),Te=!0),R.add(y,h),h.D=0}}function qa(h,y){return Ei(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=gi(p(h.Ea,h,y),Oc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const z=new Jn(this,this.j,h);let H=this.o;if(this.U&&(H?(H=k(H),ae(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var x=this.i[E];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Nc(this,z,y),E=Ct(this.J),Ye(E,"RID",h),Ye(E,"CVER",22),this.G&&Ye(E,"X-HTTP-Session-Id",this.G),qr(this,E),H&&(this.R?y="headers="+Hi(Ln(H))+"&"+y:this.u&&Ur(E,this.u,H)),Tl(this.h,z),this.Ra&&Ye(E,"TYPE","init"),this.S?(Ye(E,"$req",y),Ye(E,"SID","null"),z.U=!0,yi(z,E,null)):yi(z,E,y),this.I=2}}else this.I==3&&(h?Dl(this,h):this.i.length==0||vl(this.h)||Dl(this))};function Dl(h,y){var E;y?E=y.l:E=h.V++;const x=Ct(h.J);Ye(x,"SID",h.M),Ye(x,"RID",E),Ye(x,"AID",h.K),qr(h,x),h.u&&h.o&&Ur(x,h.u,h.o),E=new Jn(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Nc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Tl(h.h,E),yi(E,x,y)}function qr(h,y){h.H&&Be(h.H,function(E,x){Ye(y,x,E)}),h.l&&Be({},function(E,x){Ye(y,x,E)})}function Nc(h,y,E){E=Math.min(h.i.length,E);const x=h.l?p(h.l.Ka,h.l,h):null;e:{var z=h.i;let Ie=-1;for(;;){const vt=["count="+E];Ie==-1?E>0?(Ie=z[0].g,vt.push("ofs="+Ie)):Ie=0:vt.push("ofs="+Ie);let He=!0;for(let ct=0;ct<E;ct++){var H=z[ct].g;const Un=z[ct].map;if(H-=Ie,H<0)Ie=Math.max(0,z[ct].g-100),He=!1;else try{H="req"+H+"_"||"";try{var ie=Un instanceof Map?Un:Object.entries(Un);for(const[Ci,ni]of ie){let ii=ni;m(ni)&&(ii=xs(ni)),vt.push(H+Ci+"="+encodeURIComponent(ii))}}catch(Ci){throw vt.push(H+"type="+encodeURIComponent("_badmap")),Ci}}catch{x&&x(Un)}}if(He){ie=vt.join("&");break e}}ie=void 0}return h=h.i.splice(0,E),y.G=h,ie}function Dc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;_e||w(),Te||(_e(),Te=!0),R.add(y,h),h.A=0}}function Fr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=gi(p(h.Da,h),Oc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Vc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=gi(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Vs(this),Vc(this))};function Vl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Vc(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ct(h.na);Ye(y,"RID","rpc"),Ye(y,"SID",h.M),Ye(y,"AID",h.K),Ye(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(y,"TO",h.ia),Ye(y,"TYPE","xmlhttp"),qr(h,y),h.u&&h.o&&Ur(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Pr(Ct(y)),E.u=null,E.R=!0,Oa(E,h)}r.Va=function(){this.C!=null&&(this.C=null,Vs(this),Fr(this),wt(19))};function Fa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Mc(h,y){var E=null;if(h.g==y){Fa(h),Vl(h),h.g=null;var x=2}else if(bi(h.h,y))E=y.G,El(h.h,y),x=1;else return;if(h.I!=0){if(y.o)if(x==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var z=h.D;x=Ma(),jt(x,new mi(x,E)),Ii(h)}else Dc(h);else if(z=y.m,z==3||z==0&&y.X>0||!(x==1&&qa(h,y)||x==2&&Fr(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),z){case 1:Ri(h,5);break;case 4:Ri(h,10);break;case 3:Ri(h,6);break;default:Ri(h,2)}}}function Oc(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Ri(h,y){if(h.j.info("Error code "+y),y==2){var E=p(h.bb,h),x=h.Ua;const z=!x;x=new bn(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qt(x,"https"),Pr(x),z?Zn(x.toString(),E):Il(x.toString(),E)}else wt(2);h.I=0,h.l&&h.l.pa(y),kc(h),Ba(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function kc(h){if(h.I=0,h.ja=[],h.l){const y=bl(h.h);(y.length!=0||h.i.length!=0)&&(j(h.ja,y),j(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function Pc(h,y,E){var x=E instanceof bn?Ct(E):new bn(E);if(x.g!="")y&&(x.g=y+"."+x.g),As(x,x.u);else{var z=c.location;x=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const H=new bn(null);x&&qt(H,x),y&&(H.g=y),z&&As(H,z),E&&(H.h=E),x=H}return E=h.G,y=h.wa,E&&y&&Ye(x,E,y),Ye(x,"VER",h.ka),qr(h,x),x}function jc(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new et(new xi({ab:E})):new et(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lc(){}r=Lc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ms(){}Ms.prototype.g=function(h,y){return new un(h,y)};function un(h,y){At.call(this),this.g=new Ds(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Qi(this)}b(un,At),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Nl(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=xs(h),h=E);y.i.push(new Rt(y.Ya++,h)),y.I==3&&Ii(y)},un.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,un.Z.N.call(this)};function Uc(h){Qt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(Uc,Qt);function zc(){kn.call(this),this.status=1}b(zc,kn);function Qi(h){this.g=h}b(Qi,Lc),Qi.prototype.ra=function(){jt(this.g,"a")},Qi.prototype.qa=function(h){jt(this.g,new Uc(h))},Qi.prototype.pa=function(h){jt(this.g,new zc)},Qi.prototype.oa=function(){jt(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Ab=function(){return new Ms},xb=function(){return Ma()},Sb=_t,Kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Or.NO_ERROR=0,Or.TIMEOUT=8,Or.HTTP_ERROR=6,Wh=Or,pl.COMPLETE="complete",bb=pl,_c.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",At.prototype.listen=At.prototype.J,Su=_c,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,Eb=et}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let rl="12.9.0";function e2(r){rl=r}const Ea=new xp("@firebase/firestore");function Io(){return Ea.logLevel}function ee(r,...e){if(Ea.logLevel<=Pe.DEBUG){const t=e.map(Ip);Ea.debug(`Firestore (${rl}): ${r}`,...t)}}function bt(r,...e){if(Ea.logLevel<=Pe.ERROR){const t=e.map(Ip);Ea.error(`Firestore (${rl}): ${r}`,...t)}}function vr(r,...e){if(Ea.logLevel<=Pe.WARN){const t=e.map(Ip);Ea.warn(`Firestore (${rl}): ${r}`,...t)}}function Ip(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function he(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,wb(r,s,t)}function wb(r,e,t){let s=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw bt(s),new Error(s)}function ge(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||wb(e,o,s)}function de(r,e){return r}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ib{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class n2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class i2{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ge(typeof s.accessToken=="string",31837,{l:s}),new Ib(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class s2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class r2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new s2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const s=u=>{u.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function o2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=o2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function xe(r,e){return r<e?-1:r>e?1:0}function Qg(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Cg(o)===Cg(u)?xe(o,u):Cg(o)?1:-1}return xe(r.length,e.length)}const l2=55296,u2=57343;function Cg(r){const e=r.charCodeAt(0);return e>=l2&&e<=u2}function zo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}function Rb(r){return r+"\0"}const yT="__name__";class Oi{constructor(e,t,s){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&he(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Oi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return xe(e.length,t.length)}static compareSegments(e,t){const s=Oi.isNumericId(e),o=Oi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):Qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gr.fromString(e.substring(4,e.length-2))}}class Ke extends Oi{construct(e,t,s){return new Ke(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ke(t)}static emptyPath(){return new Ke([])}}const c2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Oi{construct(e,t,s){return new dt(e,t,s)}static isValidIdentifier(e){return c2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yT}static keyField(){return new dt([yT])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new se(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new se(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new se(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ke.fromString(e))}static fromName(e){return new oe(Ke.fromString(e).popFirst(5))}static empty(){return new oe(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ke(e.slice()))}}function Cb(r,e,t){if(!t)throw new se(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function h2(r,e,t,s){if(e===!0&&s===!0)throw new se(X.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function _T(r){if(!oe.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vT(r){if(oe.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Nb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Cp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":he(12329,{type:typeof r})}function Vn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cp(r);throw new se(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function nc(r,e){if(!Nb(r))throw new se(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const c=r[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new se(X.INVALID_ARGUMENT,t);return!0}const TT=-62135596800,ET=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*ET);return new Je(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<TT)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ET}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-TT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:kt("string",Je._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Je(0,0))}static max(){return new ye(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Bo=-1;class yf{constructor(e,t,s,o){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=o}}function Yg(r){return r.fields.find((e=>e.kind===2))}function la(r){return r.fields.filter((e=>e.kind!==2))}yf.UNKNOWN_ID=-1;class Zh{constructor(e,t){this.fieldPath=e,this.kind=t}}class zu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zu(0,On.min())}}function Db(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=ye.fromTimestamp(s===1e9?new Je(t+1,0):new Je(t,s));return new On(o,oe.empty(),e)}function Vb(r){return new On(r.readTime,r.key,Bo)}class On{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new On(ye.min(),oe.empty(),Bo)}static max(){return new On(ye.max(),oe.empty(),Bo)}}function Np(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(r.documentKey,e.documentKey),t!==0?t:xe(r.largestBatchId,e.largestBatchId))}const Mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ob{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ar(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==Mb)throw r;ee("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,s)=>{t(e)}))}static reject(e){return new U(((t,s)=>{s(e)}))}static waitFor(e){return new U(((t,s)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>s(g)))})),c=!0,u===o&&t()}))}static or(e){let t=U.resolve(!1);for(const s of e)t=t.next((o=>o?U.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new U(((s,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((_=>{c[p]=_,++m,m===u&&s(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new U(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}const Nn="SimpleDb";class Hf{static open(e,t,s,o){try{return new Hf(t,e.transaction(o,s))}catch(u){throw new Cu(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new fs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Cu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const o=Dp(s.target.error);this.S.reject(new Cu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new d2(t)}}class pr{static delete(e){return ee(Nn,"Removing database:",e),ca(sb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!db())return!1;if(pr.F())return!0;const e=Ut(),t=pr.M(e),s=0<t&&t<10,o=kb(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,pr.M(Ut())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Nn,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{s(new Cu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?s(new se(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?s(new se(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):s(new Cu(e,c))},o.onupgradeneeded=u=>{ee(Nn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ee(Nn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=Hf.open(this.db,e,u?"readonly":"readwrite",s),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),U.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ee(Nn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kb(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class f2{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ca(this.U.delete())}}class Cu extends se{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wr(r){return r.name==="IndexedDbTransactionError"}class d2{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(ee(Nn,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(ee(Nn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ca(s)}add(e){return ee(Nn,"ADD",this.store.name,e,e),ca(this.store.add(e))}get(e){return ca(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(Nn,"GET",this.store.name,e,t),t)))}delete(e){return ee(Nn,"DELETE",this.store.name,e),ca(this.store.delete(e))}count(){return ee(Nn,"COUNT",this.store.name),ca(this.store.count())}H(e,t){const s=this.options(e,t),o=s.index?this.store.index(s.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(s.range);return new U(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(s),c=[];return this.J(u,((m,g)=>{c.push(g)})).next((()=>c))}}Z(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new U(((o,u)=>{s.onerror=c=>{u(c.target.error)},s.onsuccess=c=>{o(c.target.result)}}))}X(e,t){ee(Nn,"DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const o=this.cursor(s);return this.J(o,((u,c,m)=>m.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const o=this.cursor(s);return this.J(o,t)}te(e){const t=this.cursor({});return new U(((s,o)=>{t.onerror=u=>{const c=Dp(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():s()})):s()}}))}J(e,t){const s=[];return new U(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new f2(m),p=t(m.primaryKey,m.value,g);if(p instanceof U){const _=p.catch((b=>(g.done(),U.reject(b))));s.push(_)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>U.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ca(r){return new U(((e,t)=>{r.onsuccess=s=>{const o=s.target.result;e(o)},r.onerror=s=>{const o=Dp(s.target.error);t(o)}}))}let bT=!1;function Dp(r){const e=pr.M(Ut());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bT||(bT=!0,setTimeout((()=>{throw s}),0)),s}}return r}const Nu="IndexBackfiller";class m2{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(Nu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ee(Nu,`Documents written: ${t}`)}catch(t){wr(t)?ee(Nu,"Ignoring IndexedDB error during index backfill: ",t):await Ar(t)}await this.re(6e4)}))}}class g2{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let o=t,u=!0;return U.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!s.has(c))return ee(Nu,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,s.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,s).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ee(Nu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((o,u)=>{const c=Vb(u);Np(c,s)>0&&(s=c)})),new On(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vn.ce=-1;const ga=-1;function Gf(r){return r==null}function Bu(r){return r===0&&1/r==-1/0}function Pb(r){return typeof r=="number"&&Number.isInteger(r)&&!Bu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const _f="";function on(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ST(e)),e=p2(r.get(t),e);return ST(e)}function p2(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case _f:t+="";break;default:t+=u}}return t}function ST(r){return r+_f+""}function Pi(r){const e=r.length;if(ge(e>=2,64408,{path:r}),e===2)return ge(r.charAt(0)===_f&&r.charAt(1)==="",56145,{path:r}),Ke.emptyPath();const t=e-2,s=[];let o="";for(let u=0;u<e;){const c=r.indexOf(_f,u);switch((c<0||c>t)&&he(50515,{path:r}),r.charAt(c+1)){case"":const m=r.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),s.push(g);break;case"":o+=r.substring(u,c),o+="\0";break;case"":o+=r.substring(u,c+1);break;default:he(61167,{path:r})}u=c+2}return new Ke(s)}const ua="remoteDocuments",ic="owner",Eo="owner",qu="mutationQueues",y2="userId",oi="mutations",xT="batchId",ma="userMutationsIndex",AT=["userId","batchId"];function ef(r,e){return[r,on(e)]}function jb(r,e,t){return[r,on(e),t]}const _2={},qo="documentMutations",vf="remoteDocumentsV14",v2=["prefixPath","collectionGroup","readTime","documentId"],tf="documentKeyIndex",T2=["prefixPath","collectionGroup","documentId"],Lb="collectionGroupIndex",E2=["collectionGroup","readTime","prefixPath","documentId"],Fu="remoteDocumentGlobal",$g="remoteDocumentGlobalKey",Fo="targets",Ub="queryTargetsIndex",b2=["canonicalId","targetId"],Ho="targetDocuments",S2=["targetId","path"],Vp="documentTargetsIndex",x2=["path","targetId"],Tf="targetGlobalKey",pa="targetGlobal",Hu="collectionParents",A2=["collectionId","parent"],Go="clientMetadata",w2="clientId",Kf="bundles",I2="bundleId",Qf="namedQueries",R2="name",Mp="indexConfiguration",C2="indexId",Xg="collectionGroupIndex",N2="collectionGroup",Du="indexState",D2=["indexId","uid"],zb="sequenceNumberIndex",V2=["uid","sequenceNumber"],Vu="indexEntries",M2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bb="documentKeyIndex",O2=["indexId","uid","orderedDocumentKey"],Yf="documentOverlays",k2=["userId","collectionPath","documentId"],Jg="collectionPathOverlayIndex",P2=["userId","collectionPath","largestBatchId"],qb="collectionGroupOverlayIndex",j2=["userId","collectionGroup","largestBatchId"],Op="globals",L2="name",Fb=[qu,oi,qo,ua,Fo,ic,pa,Ho,Go,Fu,Hu,Kf,Qf],U2=[...Fb,Yf],Hb=[qu,oi,qo,vf,Fo,ic,pa,Ho,Go,Fu,Hu,Kf,Qf,Yf],Gb=Hb,kp=[...Gb,Mp,Du,Vu],z2=kp,Kb=[...kp,Op],B2=Kb;class Wg extends Ob{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function zt(r,e){const t=de(r);return pr.O(t.le,e)}function wT(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ir(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Qb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class at{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Zt.RED,this.left=o??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Zt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class We{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IT(this.data.getIterator())}getIteratorFrom(e){return new IT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new We(this.comparator);return t.data=e,t}}class IT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bo(r){return r.hasNext()?r.getNext():void 0}class Tn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Tn([])}unionWith(e){let t=new We(dt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Yb("Invalid base64 string: "+u):u}})(e);return new xt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const q2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(r){if(ge(!!r,39018),typeof r=="string"){let e=0;const t=q2.exec(r);if(ge(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function gs(r){return typeof r=="string"?xt.fromBase64String(r):xt.fromUint8Array(r)}const $b="server_timestamp",Xb="__type__",Jb="__previous_value__",Wb="__local_write_time__";function Pp(r){return(r?.mapValue?.fields||{})[Xb]?.stringValue===$b}function $f(r){const e=r.mapValue.fields[Jb];return Pp(e)?$f(e):e}function Gu(r){const e=ms(r.mapValue.fields[Wb].timestampValue);return new Je(e.seconds,e.nanos)}class F2{constructor(e,t,s,o,u,c,m,g,p,_,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_,this.apiKey=b}}const Ef="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||Ef}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}function H2(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new se(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(r.options.projectId,e)}const jp="__type__",Zb="__max__",hr={mapValue:{fields:{__type__:{stringValue:Zb}}}},Lp="__vector__",Ko="value",nf={nullValue:"NULL_VALUE"};function Tr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Pp(r)?4:e1(r)?9007199254740991:Xf(r)?10:11:he(28295,{value:r})}function Bi(r,e){if(r===e)return!0;const t=Tr(r);if(t!==Tr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Gu(r).isEqual(Gu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=ms(o.timestampValue),m=ms(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return gs(o.bytesValue).isEqual(gs(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return ft(o.geoPointValue.latitude)===ft(u.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ft(o.integerValue)===ft(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=ft(o.doubleValue),m=ft(u.doubleValue);return c===m?Bu(c)===Bu(m):isNaN(c)&&isNaN(m)}return!1})(r,e);case 9:return zo(r.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(wT(c)!==wT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Bi(c[g],m[g])))return!1;return!0})(r,e);default:return he(52216,{left:r})}}function Ku(r,e){return(r.values||[]).find((t=>Bi(t,e)))!==void 0}function Er(r,e){if(r===e)return 0;const t=Tr(r),s=Tr(e);if(t!==s)return xe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(r.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=ft(u.integerValue||u.doubleValue),g=ft(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return RT(r.timestampValue,e.timestampValue);case 4:return RT(Gu(r),Gu(e));case 5:return Qg(r.stringValue,e.stringValue);case 6:return(function(u,c){const m=gs(u),g=gs(c);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const _=xe(m[p],g[p]);if(_!==0)return _}return xe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=xe(ft(u.latitude),ft(c.latitude));return m!==0?m:xe(ft(u.longitude),ft(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return CT(r.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[Ko]?.arrayValue,_=g[Ko]?.arrayValue,b=xe(p?.values?.length||0,_?.values?.length||0);return b!==0?b:CT(p,_)})(r.mapValue,e.mapValue);case 11:return(function(u,c){if(u===hr.mapValue&&c===hr.mapValue)return 0;if(u===hr.mapValue)return 1;if(c===hr.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let b=0;b<g.length&&b<_.length;++b){const A=Qg(g[b],_[b]);if(A!==0)return A;const O=Er(m[g[b]],p[_[b]]);if(O!==0)return O}return xe(g.length,_.length)})(r.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function RT(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return xe(r,e);const t=ms(r),s=ms(e),o=xe(t.seconds,s.seconds);return o!==0?o:xe(t.nanos,s.nanos)}function CT(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=Er(t[o],s[o]);if(u)return u}return xe(t.length,s.length)}function Qo(r){return Zg(r)}function Zg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ms(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return gs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return oe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=Zg(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${Zg(t.fields[c])}`;return o+"}"})(r.mapValue):he(61005,{value:r})}function sf(r){switch(Tr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$f(r);return e?16+sf(e):16;case 5:return 2*r.stringValue.length;case 6:return gs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+sf(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ir(s.fields,((u,c)=>{o+=u.length+sf(c)})),o})(r.mapValue);default:throw he(13486,{value:r})}}function Up(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ep(r){return!!r&&"integerValue"in r}function Qu(r){return!!r&&"arrayValue"in r}function NT(r){return!!r&&"nullValue"in r}function DT(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rf(r){return!!r&&"mapValue"in r}function Xf(r){return(r?.mapValue?.fields||{})[jp]?.stringValue===Lp}function Mu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ir(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Mu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mu(r.arrayValue.values[t]);return e}return{...r}}function e1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Zb}const t1={mapValue:{fields:{[jp]:{stringValue:Lp},[Ko]:{arrayValue:{}}}}};function G2(r){return"nullValue"in r?nf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Up(ba.empty(),oe.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Xf(r)?t1:{mapValue:{}}:he(35942,{value:r})}function K2(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Up(ba.empty(),oe.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?t1:"mapValue"in r?Xf(r)?{mapValue:{}}:hr:he(61959,{value:r})}function VT(r,e){const t=Er(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function MT(r,e){const t=Er(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(t)}setAll(e){let t=dt.emptyPath(),s={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}c?s[m.lastSegment()]=Mu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];rf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ir(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new an(Mu(this.value))}}function n1(r){const e=[];return Ir(r.fields,((t,s)=>{const o=new dt([t]);if(rf(s)){const u=n1(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new Tn(e)}class pt{constructor(e,t,s,o,u,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new pt(e,0,ye.min(),ye.min(),ye.min(),an.empty(),0)}static newFoundDocument(e,t,s,o){return new pt(e,1,t,ye.min(),s,o,0)}static newNoDocument(e,t){return new pt(e,2,t,ye.min(),ye.min(),an.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,ye.min(),ye.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yo{constructor(e,t){this.position=e,this.inclusive=t}}function OT(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],c=r.position[o];if(u.field.isKeyField()?s=oe.comparator(oe.fromName(c.referenceValue),t.key):s=Er(c,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function kT(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Bi(r.position[t],e.position[t]))return!1;return!0}class bf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class i1{}class Le extends i1{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Y2(e,t,s):t==="array-contains"?new J2(e,s):t==="in"?new u1(e,s):t==="not-in"?new W2(e,s):t==="array-contains-any"?new Z2(e,s):new Le(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new $2(e,s):new X2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Er(t,this.value)):t!==null&&Tr(this.value)===Tr(t)&&this.matchesComparison(Er(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends i1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new st(e,t)}matches(e){return $o(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $o(r){return r.op==="and"}function tp(r){return r.op==="or"}function zp(r){return s1(r)&&$o(r)}function s1(r){for(const e of r.filters)if(e instanceof st)return!1;return!0}function np(r){if(r instanceof Le)return r.field.canonicalString()+r.op.toString()+Qo(r.value);if(zp(r))return r.filters.map((e=>np(e))).join(",");{const e=r.filters.map((t=>np(t))).join(",");return`${r.op}(${e})`}}function r1(r,e){return r instanceof Le?(function(s,o){return o instanceof Le&&s.op===o.op&&s.field.isEqual(o.field)&&Bi(s.value,o.value)})(r,e):r instanceof st?(function(s,o){return o instanceof st&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&r1(c,o.filters[m])),!0):!1})(r,e):void he(19439)}function a1(r,e){const t=r.filters.concat(e);return st.create(t,r.op)}function o1(r){return r instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(r):r instanceof st?(function(t){return t.op.toString()+" {"+t.getFilters().map(o1).join(" ,")+"}"})(r):"Filter"}class Y2 extends Le{constructor(e,t,s){super(e,t,s),this.key=oe.fromName(s.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class $2 extends Le{constructor(e,t){super(e,"in",t),this.keys=l1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class X2 extends Le{constructor(e,t){super(e,"not-in",t),this.keys=l1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function l1(r,e){return(e.arrayValue?.values||[]).map((t=>oe.fromName(t.referenceValue)))}class J2 extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qu(t)&&Ku(t.arrayValue,this.value)}}class u1 extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ku(this.value.arrayValue,t)}}class W2 extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ku(this.value.arrayValue,t)}}class Z2 extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ku(this.value.arrayValue,s)))}}class eR{constructor(e,t=null,s=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function ip(r,e=null,t=[],s=[],o=null,u=null,c=null){return new eR(r,e,t,s,o,u,c)}function Sa(r){const e=de(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>np(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Qo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Qo(s))).join(",")),e.Te=t}return e.Te}function sc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Q2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!r1(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!kT(r.startAt,e.startAt)&&kT(r.endAt,e.endAt)}function Sf(r){return oe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function xf(r,e){return r.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function PT(r,e,t){let s=nf,o=!0;for(const u of xf(r,e)){let c=nf,m=!0;switch(u.op){case"<":case"<=":c=G2(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=nf}VT({value:s,inclusive:o},{value:c,inclusive:m})<0&&(s=c,o=m)}if(t!==null){for(let u=0;u<r.orderBy.length;++u)if(r.orderBy[u].field.isEqual(e)){const c=t.position[u];VT({value:s,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(s=c,o=t.inclusive);break}}return{value:s,inclusive:o}}function jT(r,e,t){let s=hr,o=!0;for(const u of xf(r,e)){let c=hr,m=!0;switch(u.op){case">=":case">":c=K2(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=hr}MT({value:s,inclusive:o},{value:c,inclusive:m})>0&&(s=c,o=m)}if(t!==null){for(let u=0;u<r.orderBy.length;++u)if(r.orderBy[u].field.isEqual(e)){const c=t.position[u];MT({value:s,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(s=c,o=t.inclusive);break}}return{value:s,inclusive:o}}class Jf{constructor(e,t=null,s=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function c1(r,e,t,s,o,u,c,m){return new Jf(r,e,t,s,o,u,c,m)}function rc(r){return new Jf(r)}function LT(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function tR(r){return oe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function nR(r){return r.collectionGroup!==null}function Ou(r){const e=de(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new We(dt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new bf(u,s))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new bf(dt.keyField(),s))}return e.Ie}function Mn(r){const e=de(r);return e.Ee||(e.Ee=iR(e,Ou(r))),e.Ee}function iR(r,e){if(r.limitType==="F")return ip(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new bf(o.field,u)}));const t=r.endAt?new Yo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yo(r.startAt.position,r.startAt.inclusive):null;return ip(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function sp(r,e,t){return new Jf(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wf(r,e){return sc(Mn(r),Mn(e))&&r.limitType===e.limitType}function h1(r){return`${Sa(Mn(r))}|lt:${r.limitType}`}function Ro(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>o1(o))).join(", ")}]`),Gf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Qo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Qo(o))).join(",")),`Target(${s})`})(Mn(r))}; limitType=${r.limitType})`}function ac(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):oe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Ou(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(c,m,g){const p=OT(c,m,g);return c.inclusive?p<=0:p<0})(s.startAt,Ou(s),o)||s.endAt&&!(function(c,m,g){const p=OT(c,m,g);return c.inclusive?p>=0:p>0})(s.endAt,Ou(s),o))})(r,e)}function f1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function d1(r){return(e,t)=>{let s=!1;for(const o of Ou(r)){const u=sR(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function sR(r,e,t){const s=r.field.isKeyField()?oe.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Er(g,p):he(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return he(19790,{direction:r.dir})}}class Es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return Qb(this.inner)}size(){return this.innerSize}}const rR=new at(oe.comparator);function Dn(){return rR}const m1=new at(oe.comparator);function xu(...r){let e=m1;for(const t of r)e=e.insert(t.key,t);return e}function g1(r){let e=m1;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ji(){return ku()}function p1(){return ku()}function ku(){return new Es((r=>r.toString()),((r,e)=>r.isEqual(e)))}const aR=new at(oe.comparator),oR=new We(oe.comparator);function De(...r){let e=oR;for(const t of r)e=e.add(t);return e}const lR=new We(xe);function Bp(){return lR}function qp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function y1(r){return{integerValue:""+r}}function uR(r,e){return Pb(e)?y1(e):qp(r,e)}class Zf{constructor(){this._=void 0}}function cR(r,e,t){return r instanceof Yu?(function(o,u){const c={fields:{[Xb]:{stringValue:$b},[Wb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Pp(u)&&(u=$f(u)),u&&(c.fields[Jb]=u),{mapValue:c}})(t,e):r instanceof Xo?v1(r,e):r instanceof Jo?T1(r,e):(function(o,u){const c=_1(o,u),m=UT(c)+UT(o.Ae);return ep(c)&&ep(o.Ae)?y1(m):qp(o.serializer,m)})(r,e)}function hR(r,e,t){return r instanceof Xo?v1(r,e):r instanceof Jo?T1(r,e):t}function _1(r,e){return r instanceof $u?(function(s){return ep(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Yu extends Zf{}class Xo extends Zf{constructor(e){super(),this.elements=e}}function v1(r,e){const t=E1(e);for(const s of r.elements)t.some((o=>Bi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Jo extends Zf{constructor(e){super(),this.elements=e}}function T1(r,e){let t=E1(e);for(const s of r.elements)t=t.filter((o=>!Bi(o,s)));return{arrayValue:{values:t}}}class $u extends Zf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function UT(r){return ft(r.integerValue||r.doubleValue)}function E1(r){return Qu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class fR{constructor(e,t){this.field=e,this.transform=t}}function dR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Xo&&o instanceof Xo||s instanceof Jo&&o instanceof Jo?zo(s.elements,o.elements,Bi):s instanceof $u&&o instanceof $u?Bi(s.Ae,o.Ae):s instanceof Yu&&o instanceof Yu})(r.transform,e.transform)}class mR{constructor(e,t){this.version=e,this.transformResults=t}}class Kt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function af(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ed{}function b1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new oc(r.key,Kt.none()):new al(r.key,r.data,Kt.none());{const t=r.data,s=an.empty();let o=new We(dt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new bs(r.key,s,new Tn(o.toArray()),Kt.none())}}function gR(r,e,t){r instanceof al?(function(o,u,c){const m=o.value.clone(),g=BT(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):r instanceof bs?(function(o,u,c){if(!af(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=BT(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(S1(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Pu(r,e,t,s){return r instanceof al?(function(u,c,m,g){if(!af(u.precondition,c))return m;const p=u.value.clone(),_=qT(u.fieldTransforms,g,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof bs?(function(u,c,m,g){if(!af(u.precondition,c))return m;const p=qT(u.fieldTransforms,g,c),_=c.data;return _.setAll(S1(u)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(r,e,t,s):(function(u,c,m){return af(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,e,t)}function pR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=_1(s.transform,o||null);u!=null&&(t===null&&(t=an.empty()),t.set(s.field,u))}return t||null}function zT(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&zo(s,o,((u,c)=>dR(u,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class al extends ed{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bs extends ed{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function S1(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function BT(r,e,t){const s=new Map;ge(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const u=r[o],c=u.transform,m=e.data.field(u.field);s.set(u.field,hR(c,m,t[o]))}return s}function qT(r,e,t){const s=new Map;for(const o of r){const u=o.transform,c=t.data.field(o.field);s.set(o.field,cR(u,c,e))}return s}class oc extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x1 extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fp{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&gR(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Pu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Pu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=p1();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=b1(c,m);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(ye.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,s)=>zT(t,s)))&&zo(this.baseMutations,e.baseMutations,((t,s)=>zT(t,s)))}}class Hp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ge(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return aR})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new Hp(e,t,s,o)}}class Gp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yR{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ot,ze;function _R(r){switch(r){case X.OK:return he(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return he(15467,{code:r})}}function A1(r){if(r===void 0)return bt("GRPC error has no .code"),X.UNKNOWN;switch(r){case Ot.OK:return X.OK;case Ot.CANCELLED:return X.CANCELLED;case Ot.UNKNOWN:return X.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return X.INTERNAL;case Ot.UNAVAILABLE:return X.UNAVAILABLE;case Ot.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ot.NOT_FOUND:return X.NOT_FOUND;case Ot.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ot.ABORTED:return X.ABORTED;case Ot.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ot.DATA_LOSS:return X.DATA_LOSS;default:return he(39323,{code:r})}}(ze=Ot||(Ot={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";function vR(){return new TextEncoder}const TR=new gr([4294967295,4294967295],0);function FT(r){const e=vR().encode(r),t=new Tb;return t.update(e),new Uint8Array(t.digest())}function HT(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new gr([t,s],0),new gr([o,u],0)]}class Kp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Au(`Invalid padding: ${t}`);if(s<0)throw new Au(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Au(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=gr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(gr.fromNumber(s)));return o.compare(TR)===1&&(o=new gr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=FT(e),[s,o]=HT(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Kp(u,o,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=FT(e),[s,o]=HT(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.be(c)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lc{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lc(ye.min(),o,new at(xe),Dn(),De())}}class uc{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new uc(s,t,De(),De(),De())}}class of{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class w1{constructor(e,t){this.targetId=e,this.Ce=t}}class I1{constructor(e,t,s=xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class GT{constructor(){this.ve=0,this.Fe=KT(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),s=De();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:he(38017,{changeType:u})}})),new uc(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=KT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ER{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dn(),this.He=Kh(),this.Je=Kh(),this.Ze=new at(xe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Sf(u))if(s===0){const c=new oe(u.path);this.et(t,c,pt.newNoDocument(c,ye.min()))}else ge(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=gs(s).toUint8Array()}catch(g){if(g instanceof Yb)return vr("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Kp(c,o,u)}catch(g){return vr(g instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Sf(m.target)){const g=new oe(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,pt.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.Ke())}}));let s=De();this.Je.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new lc(e,t,this.Ze,this.je,s);return this.je=Dn(),this.He=Kh(),this.Je=Kh(),this.Ze=new at(xe),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new GT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new We(xe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new We(xe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kh(){return new at(oe.comparator)}function KT(){return new at(oe.comparator)}const bR={asc:"ASCENDING",desc:"DESCENDING"},SR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xR={and:"AND",or:"OR"};class AR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rp(r,e){return r.useProto3Json||Gf(e)?e:{value:e}}function Wo(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R1(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function wR(r,e){return Wo(r,e.toTimestamp())}function hn(r){return ge(!!r,49232),ye.fromTimestamp((function(t){const s=ms(t);return new Je(s.seconds,s.nanos)})(r))}function Qp(r,e){return ap(r,e).canonicalString()}function ap(r,e){const t=(function(o){return new Ke(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function C1(r){const e=Ke.fromString(r);return ge(L1(e),10190,{key:e.toString()}),e}function Af(r,e){return Qp(r.databaseId,e.path)}function ya(r,e){const t=C1(e);if(t.get(1)!==r.databaseId.projectId)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new oe(V1(t))}function N1(r,e){return Qp(r.databaseId,e)}function D1(r){const e=C1(r);return e.length===4?Ke.emptyPath():V1(e)}function op(r){return new Ke(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function V1(r){return ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function QT(r,e,t){return{name:Af(r,e),fields:t.value.mapValue.fields}}function IR(r,e,t){const s=ya(r,e.name),o=hn(e.updateTime),u=e.createTime?hn(e.createTime):ye.min(),c=new an({mapValue:{fields:e.fields}}),m=pt.newFoundDocument(s,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function RR(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:he(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,_){return p.useProto3Json?(ge(_===void 0||typeof _=="string",58123),xt.fromBase64String(_||"")):(ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),xt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const _=p.code===void 0?X.UNKNOWN:A1(p.code);return new se(_,p.message||"")})(c);t=new I1(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=ya(r,s.document.name),u=hn(s.document.updateTime),c=s.document.createTime?hn(s.document.createTime):ye.min(),m=new an({mapValue:{fields:s.document.fields}}),g=pt.newFoundDocument(o,u,c,m),p=s.targetIds||[],_=s.removedTargetIds||[];t=new of(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=ya(r,s.document),u=s.readTime?hn(s.readTime):ye.min(),c=pt.newNoDocument(o,u),m=s.removedTargetIds||[];t=new of([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=ya(r,s.document),u=s.removedTargetIds||[];t=new of([],u,o,null)}else{if(!("filter"in e))return he(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new yR(o,u),m=s.targetId;t=new w1(m,c)}}return t}function wf(r,e){let t;if(e instanceof al)t={update:QT(r,e.key,e.value)};else if(e instanceof oc)t={delete:Af(r,e.key)};else if(e instanceof bs)t={update:QT(r,e.key,e.data),updateMask:OR(e.fieldMask)};else{if(!(e instanceof x1))return he(16599,{dt:e.type});t={verify:Af(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof Yu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Xo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Jo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $u)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw he(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:wR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:he(27497)})(r,e.precondition)),t}function lp(r,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?Kt.updateTime(hn(u.updateTime)):u.exists!==void 0?Kt.exists(u.exists):Kt.none()})(e.currentDocument):Kt.none(),s=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)ge(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Yu;else if("appendMissingElements"in m){const _=m.appendMissingElements.values||[];g=new Xo(_)}else if("removeAllFromArray"in m){const _=m.removeAllFromArray.values||[];g=new Jo(_)}else"increment"in m?g=new $u(c,m.increment):he(16584,{proto:m});const p=dt.fromServerFormat(m.fieldPath);return new fR(p,g)})(r,o))):[];if(e.update){e.update.name;const o=ya(r,e.update.name),u=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new Tn(p.map((_=>dt.fromServerFormat(_))))})(e.updateMask);return new bs(o,u,c,t,s)}return new al(o,u,t,s)}if(e.delete){const o=ya(r,e.delete);return new oc(o,t)}if(e.verify){const o=ya(r,e.verify);return new x1(o,t)}return he(1463,{proto:e})}function CR(r,e){return r&&r.length>0?(ge(e!==void 0,14353),r.map((t=>(function(o,u){let c=o.updateTime?hn(o.updateTime):hn(u);return c.isEqual(ye.min())&&(c=hn(u)),new mR(c,o.transformResults||[])})(t,e)))):[]}function M1(r,e){return{documents:[N1(r,e.path)]}}function O1(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=N1(r,o);const u=(function(p){if(p.length!==0)return j1(st.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((_=>(function(A){return{field:Co(A.field),direction:DR(A.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=rp(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function k1(r){let e=D1(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ge(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];t.where&&(u=(function(b){const A=P1(b);return A instanceof st&&zp(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((A=>(function(j){return new bf(No(j.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,Gf(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(b){const A=!!b.before,O=b.values||[];return new Yo(O,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const A=!b.before,O=b.values||[];return new Yo(O,A)})(t.endAt)),c1(e,o,c,u,m,"F",g,p)}function NR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function P1(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=No(t.unaryFilter.field);return Le.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return Le.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=No(t.unaryFilter.field);return Le.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Le.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return st.create(t.compositeFilter.filters.map((s=>P1(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(r):he(30097,{filter:r})}function DR(r){return bR[r]}function VR(r){return SR[r]}function MR(r){return xR[r]}function Co(r){return{fieldPath:r.canonicalString()}}function No(r){return dt.fromServerFormat(r.fieldPath)}function j1(r){return r instanceof Le?(function(t){if(t.op==="=="){if(DT(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(NT(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(DT(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(NT(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:VR(t.op),value:t.value}}})(r):r instanceof st?(function(t){const s=t.getFilters().map((o=>j1(o)));return s.length===1?s[0]:{compositeFilter:{op:MR(t.op),filters:s}}})(r):he(54877,{filter:r})}function OR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function L1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function U1(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class us{constructor(e,t,s,o,u=ye.min(),c=ye.min(),m=xt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class z1{constructor(e){this.yt=e}}function kR(r,e){let t;if(e.document)t=IR(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=oe.fromSegments(e.noDocument.path),o=Aa(e.noDocument.readTime);t=pt.newNoDocument(s,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const s=oe.fromSegments(e.unknownDocument.path),o=Aa(e.unknownDocument.version);t=pt.newUnknownDocument(s,o)}}return e.readTime&&t.setReadTime((function(o){const u=new Je(o[0],o[1]);return ye.fromTimestamp(u)})(e.readTime)),t}function YT(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:If(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(u,c){return{name:Af(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Wo(u,c.version.toTimestamp()),createTime:Wo(u,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:xa(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:xa(e.version)}}return s}function If(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function xa(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Aa(r){const e=new Je(r.seconds,r.nanoseconds);return ye.fromTimestamp(e)}function ha(r,e){const t=(e.baseMutations||[]).map((u=>lp(r.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const s=e.mutations.map((u=>lp(r.yt,u))),o=Je.fromMillis(e.localWriteTimeMs);return new Fp(e.batchId,o,t,s)}function wu(r){const e=Aa(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Aa(r.lastLimboFreeSnapshotVersion):ye.min();let s;return s=(function(u){return u.documents!==void 0})(r.query)?(function(u){const c=u.documents.length;return ge(c===1,1966,{count:c}),Mn(rc(D1(u.documents[0])))})(r.query):(function(u){return Mn(k1(u))})(r.query),new us(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,xt.fromBase64String(r.resumeToken))}function B1(r,e){const t=xa(e.snapshotVersion),s=xa(e.lastLimboFreeSnapshotVersion);let o;o=Sf(e.target)?M1(r.yt,e.target):O1(r.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sa(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:o}}function q1(r){const e=k1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?sp(e,e.limit,"L"):e}function Ng(r,e){return new Gp(e.largestBatchId,lp(r.yt,e.overlayMutation))}function $T(r,e){const t=e.path.lastSegment();return[r,on(e.path.popLast()),t]}function XT(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:xa(s.readTime),documentKey:on(s.documentKey.path),largestBatchId:s.largestBatchId}}class PR{getBundleMetadata(e,t){return JT(e).get(t).next((s=>{if(s)return(function(u){return{id:u.bundleId,createTime:Aa(u.createTime),version:u.version}})(s)}))}saveBundleMetadata(e,t){return JT(e).put((function(o){return{bundleId:o.id,createTime:xa(hn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return WT(e).get(t).next((s=>{if(s)return(function(u){return{name:u.name,query:q1(u.bundledQuery),readTime:Aa(u.readTime)}})(s)}))}saveNamedQuery(e,t){return WT(e).put((function(o){return{name:o.name,readTime:xa(hn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function JT(r){return zt(r,Kf)}function WT(r){return zt(r,Qf)}class td{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new td(e,s)}getOverlay(e,t){return yu(e).get($T(this.userId,t)).next((s=>s?Ng(this.serializer,s):null))}getOverlays(e,t){const s=ji();return U.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){const o=[];return s.forEach(((u,c)=>{const m=new Gp(t,c);o.push(this.bt(e,m))})),U.waitFor(o)}removeOverlaysForBatchId(e,t,s){const o=new Set;t.forEach((c=>o.add(on(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,s+1],!1,!0);u.push(yu(e).X(Jg,m))})),U.waitFor(u)}getOverlaysForCollection(e,t,s){const o=ji(),u=on(t),c=IDBKeyRange.bound([this.userId,u,s],[this.userId,u,Number.POSITIVE_INFINITY],!0);return yu(e).H(Jg,c).next((m=>{for(const g of m){const p=Ng(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,s,o){const u=ji();let c;const m=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yu(e).ee({index:qb,range:m},((g,p,_)=>{const b=Ng(this.serializer,p);u.size()<o||b.largestBatchId===c?(u.set(b.getKey(),b),c=b.largestBatchId):_.done()})).next((()=>u))}bt(e,t){return yu(e).put((function(o,u,c){const[m,g,p]=$T(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:wf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function yu(r){return zt(r,Yf)}class jR{St(e){return zt(e,Op)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const s=t?.value;return s?xt.fromUint8Array(s):xt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const s=ft(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Bu(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=ms(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(gs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?e1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Xf(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):he(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const s=e.fields||{};this.Ft(t,55);for(const o of Object.keys(s))this.Ot(o,t),this.Ct(s[o],t)}kt(e,t){const s=e.fields||{};this.Ft(t,53);const o=Ko,u=s[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ft(u)),this.Ot(o,t),this.Ct(s[o],t)}qt(e,t){const s=e.values||[];this.Ft(t,50);for(const o of s)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((s=>{this.Ft(t,60),this.$t(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}fa.Wt=new fa;const So=255;function LR(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function ZT(r){const e=64-(function(s){let o=0;for(let u=0;u<8;++u){const c=LR(255&s[u]);if(o+=c,c!==8)break}return o})(r);return Math.ceil(e/8)}class UR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ht(s.value),s=t.next();this.Jt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Xt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ht(s);else if(s<2048)this.Ht(960|s>>>6),this.Ht(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s);else{const o=t.codePointAt(0);this.Ht(240|o>>>18),this.Ht(128|63&o>>>12),this.Ht(128|63&o>>>6),this.Ht(128|63&o)}}this.Jt()}Yt(e){const t=this.en(e),s=ZT(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let o=t.length-s;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),s=ZT(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let o=t.length-s;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(So),this.sn(255)}_n(){this.an(So),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let o=1;o<t.length;++o)t[o]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===So?(this.sn(So),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===So?(this.an(So),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const o=new Uint8Array(s);o.set(this.buffer),this.buffer=o}}class zR{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class BR{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class _u{constructor(){this.cn=new UR,this.ascending=new zR(this.cn),this.descending=new BR(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class da{constructor(e,t,s,o){this.hn=e,this.Pn=t,this.Tn=s,this.In=o}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.In,0),t!==e?s.set([0],this.In.length):++s[s.length-1],new da(this.hn,this.Pn,this.Tn,s)}Rn(e,t,s){return{indexId:this.hn,uid:e,arrayValue:lf(this.Tn),directionalValue:lf(this.In),orderedDocumentKey:lf(t),documentKey:s.path.toArray()}}An(e,t,s){const o=this.Rn(e,t,s);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function nr(r,e){let t=r.hn-e.hn;return t!==0?t:(t=eE(r.Tn,e.Tn),t!==0?t:(t=eE(r.In,e.In),t!==0?t:oe.comparator(r.Pn,e.Pn)))}function eE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function lf(r){return fb()?(function(t){let s="";for(let o=0;o<t.length;o++)s+=String.fromCharCode(t[o]);return s})(r):r}function tE(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(r)}class nE{constructor(e){this.Vn=new We(((t,s)=>dt.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const s=t;s.isInequality()?this.Vn=this.Vn.add(s):this.mn.push(s)}}get fn(){return this.Vn.size>1}gn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Yg(e);if(t!==void 0&&!this.pn(t))return!1;const s=la(e);let o=new Set,u=0,c=0;for(;u<s.length&&this.pn(s[u]);++u)o=o.add(s[u].fieldPath.canonicalString());if(u===s.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=s[u];if(!this.yn(m,g)||!this.wn(this.dn[c++],g))return!1}++u}for(;u<s.length;++u){const m=s[u];if(c>=this.dn.length||!this.wn(this.dn[c++],m))return!1}return!0}bn(){if(this.fn)return null;let e=new We(dt.comparator);const t=[];for(const s of this.mn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new Zh(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new Zh(s.field,0))}for(const s of this.dn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new Zh(s.field,s.dir==="asc"?0:1)));return new yf(yf.UNKNOWN_ID,this.collectionId,t,zu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function F1(r){if(ge(r instanceof Le||r instanceof st,20012),r instanceof Le){if(r instanceof u1){const t=r.value.arrayValue?.values?.map((s=>Le.create(r.field,"==",s)))||[];return st.create(t,"or")}return r}const e=r.filters.map((t=>F1(t)));return st.create(e,r.op)}function qR(r){if(r.getFilters().length===0)return[];const e=hp(F1(r));return ge(H1(e),7391),up(e)||cp(e)?[e]:e.getFilters()}function up(r){return r instanceof Le}function cp(r){return r instanceof st&&zp(r)}function H1(r){return up(r)||cp(r)||(function(t){if(t instanceof st&&tp(t)){for(const s of t.getFilters())if(!up(s)&&!cp(s))return!1;return!0}return!1})(r)}function hp(r){if(ge(r instanceof Le||r instanceof st,34018),r instanceof Le)return r;if(r.filters.length===1)return hp(r.filters[0]);const e=r.filters.map((s=>hp(s)));let t=st.create(e,r.op);return t=Rf(t),H1(t)?t:(ge(t instanceof st,64498),ge($o(t),40251),ge(t.filters.length>1,57927),t.filters.reduce(((s,o)=>Yp(s,o))))}function Yp(r,e){let t;return ge(r instanceof Le||r instanceof st,38388),ge(e instanceof Le||e instanceof st,25473),t=r instanceof Le?e instanceof Le?(function(o,u){return st.create([o,u],"and")})(r,e):iE(r,e):e instanceof Le?iE(e,r):(function(o,u){if(ge(o.filters.length>0&&u.filters.length>0,48005),$o(o)&&$o(u))return a1(o,u.getFilters());const c=tp(o)?o:u,m=tp(o)?u:o,g=c.filters.map((p=>Yp(p,m)));return st.create(g,"or")})(r,e),Rf(t)}function iE(r,e){if($o(e))return a1(e,r.getFilters());{const t=e.filters.map((s=>Yp(r,s)));return st.create(t,"or")}}function Rf(r){if(ge(r instanceof Le||r instanceof st,11850),r instanceof Le)return r;const e=r.getFilters();if(e.length===1)return Rf(e[0]);if(s1(r))return r;const t=e.map((o=>Rf(o))),s=[];return t.forEach((o=>{o instanceof Le?s.push(o):o instanceof st&&(o.op===r.op?s.push(...o.filters):s.push(o))})),s.length===1?s[0]:st.create(s,r.op)}class FR{constructor(){this.Sn=new $p}addToCollectionParentIndex(e,t){return this.Sn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(On.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(On.min())}updateCollectionGroup(e,t,s){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class $p{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new We(Ke.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new We(Ke.comparator)).toArray()}}const sE="IndexedDbIndexManager",Qh=new Uint8Array(0);class HR{constructor(e,t){this.databaseId=t,this.Dn=new $p,this.Cn=new Es((s=>Sa(s)),((s,o)=>sc(s,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const s=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const u={collectionId:s,parent:on(o)};return rE(e).put(u)}return U.resolve()}getCollectionParents(e,t){const s=[],o=IDBKeyRange.bound([t,""],[Rb(t),""],!1,!0);return rE(e).H(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;s.push(Pi(c.parent))}return s}))}addFieldIndex(e,t){const s=vu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=s.add(o);if(t.indexState){const c=Ao(e);return u.next((m=>{c.put(XT(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const s=vu(e),o=Ao(e),u=xo(e);return s.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=vu(e),s=xo(e),o=Ao(e);return t.X().next((()=>s.X())).next((()=>o.X()))}createTargetIndexes(e,t){return U.forEach(this.vn(t),(s=>this.getIndexType(e,s).next((o=>{if(o===0||o===1){const u=new nE(s).bn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const s=xo(e);let o=!0;const u=new Map;return U.forEach(this.vn(t),(c=>this.Fn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=De();const m=[];return U.forEach(u,((g,p)=>{ee(sE,`Using index ${(function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map((te=>`${te.fieldPath}:${te.kind}`)).join(",")}`})(g)} to execute ${Sa(t)}`);const _=(function(le,te){const _e=Yg(te);if(_e===void 0)return null;for(const Te of xf(le,_e.fieldPath))switch(Te.op){case"array-contains-any":return Te.value.arrayValue.values||[];case"array-contains":return[Te.value]}return null})(p,g),b=(function(le,te){const _e=new Map;for(const Te of la(te))for(const R of xf(le,Te.fieldPath))switch(R.op){case"==":case"in":_e.set(Te.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return _e.set(Te.fieldPath.canonicalString(),R.value),Array.from(_e.values())}return null})(p,g),A=(function(le,te){const _e=[];let Te=!0;for(const R of la(te)){const w=R.kind===0?PT(le,R.fieldPath,le.startAt):jT(le,R.fieldPath,le.startAt);_e.push(w.value),Te&&(Te=w.inclusive)}return new Yo(_e,Te)})(p,g),O=(function(le,te){const _e=[];let Te=!0;for(const R of la(te)){const w=R.kind===0?jT(le,R.fieldPath,le.endAt):PT(le,R.fieldPath,le.endAt);_e.push(w.value),Te&&(Te=w.inclusive)}return new Yo(_e,Te)})(p,g),j=this.Mn(g,p,A),K=this.Mn(g,p,O),Z=this.xn(g,p,b),ue=this.On(g.indexId,_,j,A.inclusive,K,O.inclusive,Z);return U.forEach(ue,(ne=>s.Z(ne,t.limit).next((le=>{le.forEach((te=>{const _e=oe.fromSegments(te.documentKey);c.has(_e)||(c=c.add(_e),m.push(_e))}))}))))})).next((()=>m))}return U.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=qR(st.create(e.filters,"and")).map((s=>ip(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,s,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(s.length,u.length),p=g/(t!=null?t.length:1),_=[];for(let b=0;b<g;++b){const A=t?this.Nn(t[b/p]):Qh,O=this.Bn(e,A,s[b%p],o),j=this.Ln(e,A,u[b%p],c),K=m.map((Z=>this.Bn(e,A,Z,!0)));_.push(...this.createRange(O,j,K))}return _}Bn(e,t,s,o){const u=new da(e,oe.empty(),t,s);return o?u:u.En()}Ln(e,t,s,o){const u=new da(e,oe.empty(),t,s);return o?u.En():u}Fn(e,t){const s=new nE(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)s.gn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let s=2;const o=this.vn(t);return U.forEach(o,(u=>this.Fn(e,u).next((c=>{c?s!==0&&c.fields.length<(function(g){let p=new We(dt.comparator),_=!1;for(const b of g.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?_=!0:p=p.add(A.field));for(const b of g.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)})(u)&&(s=1):s=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&s===2?1:s))}kn(e,t){const s=new _u;for(const o of la(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=s.ln(o.kind);fa.Wt.Dt(u,c)}return s.un()}Nn(e){const t=new _u;return fa.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const s=new _u;return fa.Wt.Dt(Up(this.databaseId,t),s.ln((function(u){const c=la(u);return c.length===0?0:c[c.length-1].kind})(e))),s.un()}xn(e,t,s){if(s===null)return[];let o=[];o.push(new _u);let u=0;for(const c of la(e)){const m=s[u++];for(const g of o)if(this.qn(t,c.fieldPath)&&Qu(m))o=this.Un(o,c,m);else{const p=g.ln(c.kind);fa.Wt.Dt(m,p)}}return this.$n(o)}Mn(e,t,s){return this.xn(e,t,s.position)}$n(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Un(e,t,s){const o=[...e],u=[];for(const c of s.arrayValue.values||[])for(const m of o){const g=new _u;g.seed(m.un()),fa.Wt.Dt(c,g.ln(t.kind)),u.push(g)}return u}qn(e,t){return!!e.filters.find((s=>s instanceof Le&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=vu(e),o=Ao(e);return(t?s.H(Xg,IDBKeyRange.bound(t,t)):s.H()).next((u=>{const c=[];return U.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(_,b){const A=b?new zu(b.sequenceNumber,new On(Aa(b.readTime),new oe(Pi(b.documentKey)),b.largestBatchId)):zu.empty(),O=_.fields.map((([j,K])=>new Zh(dt.fromServerFormat(j),K)));return new yf(_.indexId,_.collectionGroup,O,A)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,o)=>{const u=s.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:xe(s.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const o=vu(e),u=Ao(e);return this.Wn(e).next((c=>o.H(Xg,IDBKeyRange.bound(t,t)).next((m=>U.forEach(m,(g=>u.put(XT(g.indexId,this.uid,c,s))))))))}updateIndexEntries(e,t){const s=new Map;return U.forEach(t,((o,u)=>{const c=s.get(o.collectionGroup);return(c?U.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(s.set(o.collectionGroup,m),U.forEach(m,(g=>this.Qn(e,o,g).next((p=>{const _=this.Gn(u,g);return p.isEqual(_)?U.resolve():this.zn(e,u,g,p,_)})))))))}))}jn(e,t,s,o){return xo(e).put(o.Rn(this.uid,this.Kn(s,t.key),t.key))}Hn(e,t,s,o){return xo(e).delete(o.An(this.uid,this.Kn(s,t.key),t.key))}Qn(e,t,s){const o=xo(e);let u=new We(nr);return o.ee({index:Bb,range:IDBKeyRange.only([s.indexId,this.uid,lf(this.Kn(s,t))])},((c,m)=>{u=u.add(new da(s.indexId,t,tE(m.arrayValue),tE(m.directionalValue)))})).next((()=>u))}Gn(e,t){let s=new We(nr);const o=this.kn(t,e);if(o==null)return s;const u=Yg(t);if(u!=null){const c=e.data.field(u.fieldPath);if(Qu(c))for(const m of c.arrayValue.values||[])s=s.add(new da(t.indexId,e.key,this.Nn(m),o))}else s=s.add(new da(t.indexId,e.key,Qh,o));return s}zn(e,t,s,o,u){ee(sE,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,_,b,A){const O=g.getIterator(),j=p.getIterator();let K=bo(O),Z=bo(j);for(;K||Z;){let ue=!1,ne=!1;if(K&&Z){const le=_(K,Z);le<0?ne=!0:le>0&&(ue=!0)}else K!=null?ne=!0:ue=!0;ue?(b(Z),Z=bo(j)):ne?(A(K),K=bo(O)):(K=bo(O),Z=bo(j))}})(o,u,nr,(m=>{c.push(this.jn(e,t,s,m))}),(m=>{c.push(this.Hn(e,t,s,m))})),U.waitFor(c)}Wn(e){let t=1;return Ao(e).ee({index:zb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((c,m)=>nr(c,m))).filter(((c,m,g)=>!m||nr(c,g[m-1])!==0));const o=[];o.push(e);for(const c of s){const m=nr(c,e),g=nr(c,t);if(m===0)o[0]=e.En();else if(m>0&&g<0)o.push(c),o.push(c.En());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Jn(o[c],o[c+1]))return[];const m=o[c].An(this.uid,Qh,oe.empty()),g=o[c+1].An(this.uid,Qh,oe.empty());u.push(IDBKeyRange.bound(m,g))}return u}Jn(e,t){return nr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aE)}getMinOffset(e,t){return U.mapArray(this.vn(t),(s=>this.Fn(e,s).next((o=>o||he(44426))))).next(aE)}}function rE(r){return zt(r,Hu)}function xo(r){return zt(r,Vu)}function vu(r){return zt(r,Mp)}function Ao(r){return zt(r,Du)}function aE(r){ge(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const o=r[s].indexState.offset;Np(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new On(e.readTime,e.documentKey,t)}const oE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G1=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}function K1(r,e,t){const s=r.store(oi),o=r.store(qo),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=s.ee({range:c},((_,b,A)=>(m++,A.delete())));u.push(g.next((()=>{ge(m===1,47070,{batchId:t.batchId})})));const p=[];for(const _ of t.mutations){const b=jb(e,_.key.path,t.batchId);u.push(o.delete(b)),p.push(_.key)}return U.waitFor(u).next((()=>p))}function Cf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw he(14731);e=r.noDocument}return JSON.stringify(e).length}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(G1,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class nd{constructor(e,t,s,o){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=o,this.Zn={}}static wt(e,t,s,o){ge(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new nd(u,t,s,o)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).ee({index:ma,range:s},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,s,o){const u=Do(e),c=ir(e);return c.add({}).next((m=>{ge(typeof m=="number",49019);const g=new Fp(m,t,s,o),p=(function(O,j,K){const Z=K.baseMutations.map((ne=>wf(O.yt,ne))),ue=K.mutations.map((ne=>wf(O.yt,ne)));return{userId:j,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:Z,mutations:ue}})(this.serializer,this.userId,g),_=[];let b=new We(((A,O)=>xe(A.canonicalString(),O.canonicalString())));for(const A of o){const O=jb(this.userId,A.key.path,m);b=b.add(A.key.path.popLast()),_.push(c.put(p)),_.push(u.put(O,_2))}return b.forEach((A=>{_.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Zn[m]=g.keys()})),U.waitFor(_).next((()=>g))}))}lookupMutationBatch(e,t){return ir(e).get(t).next((s=>s?(ge(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),ha(this.serializer,s)):null))}Xn(e,t){return this.Zn[t]?U.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const o=s.keys();return this.Zn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=IDBKeyRange.lowerBound([this.userId,s]);let u=null;return ir(e).ee({index:ma,range:o},((c,m,g)=>{m.userId===this.userId&&(ge(m.batchId>=s,47524,{Yn:s}),u=ha(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=ga;return ir(e).ee({index:ma,range:t,reverse:!0},((o,u,c)=>{s=u.batchId,c.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ga],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).H(ma,t).next((s=>s.map((o=>ha(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ef(this.userId,t.path),o=IDBKeyRange.lowerBound(s),u=[];return Do(e).ee({range:o},((c,m,g)=>{const[p,_,b]=c,A=Pi(_);if(p===this.userId&&t.path.isEqual(A))return ir(e).get(b).next((O=>{if(!O)throw he(61480,{er:c,batchId:b});ge(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:b}),u.push(ha(this.serializer,O))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new We(xe);const o=[];return t.forEach((u=>{const c=ef(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Do(e).ee({range:m},((p,_,b)=>{const[A,O,j]=p,K=Pi(O);A===this.userId&&u.path.isEqual(K)?s=s.add(j):b.done()}));o.push(g)})),U.waitFor(o).next((()=>this.tr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1,u=ef(this.userId,s),c=IDBKeyRange.lowerBound(u);let m=new We(xe);return Do(e).ee({range:c},((g,p,_)=>{const[b,A,O]=g,j=Pi(A);b===this.userId&&s.isPrefixOf(j)?j.length===o&&(m=m.add(O)):_.done()})).next((()=>this.tr(e,m)))}tr(e,t){const s=[],o=[];return t.forEach((u=>{o.push(ir(e).get(u).next((c=>{if(c===null)throw he(35274,{batchId:u});ge(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),s.push(ha(this.serializer,c))})))})),U.waitFor(o).next((()=>s))}removeMutationBatch(e,t){return K1(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),U.forEach(s,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const s=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Do(e).ee({range:s},((u,c,m)=>{if(u[0]===this.userId){const g=Pi(u[1]);o.push(g)}else m.done()})).next((()=>{ge(o.length===0,56720,{rr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return Q1(e,this.userId,t)}ir(e){return Y1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ga,lastStreamToken:""}))}}function Q1(r,e,t){const s=ef(e,t.path),o=s[1],u=IDBKeyRange.lowerBound(s);let c=!1;return Do(r).ee({range:u,Y:!0},((m,g,p)=>{const[_,b,A]=m;_===e&&b===o&&(c=!0),p.done()})).next((()=>c))}function ir(r){return zt(r,oi)}function Do(r){return zt(r,qo)}function Y1(r){return zt(r,qu)}class wa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wa(0)}static ar(){return new wa(-1)}}class GR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const s=new wa(t.highestTargetId);return t.highestTargetId=s.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>ye.fromTimestamp(new Je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.ur(e).next((o=>(o.highestListenSequenceNumber=t,s&&(o.lastRemoteSnapshotVersion=s.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.cr(e,o))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((s=>(s.targetCount+=1,this.hr(t,s),this.cr(e,s))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>wo(e).delete(t.targetId))).next((()=>this.ur(e))).next((s=>(ge(s.targetCount>0,8065),s.targetCount-=1,this.cr(e,s))))}removeTargets(e,t,s){let o=0;const u=[];return wo(e).ee(((c,m)=>{const g=wu(m);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>U.waitFor(u))).next((()=>o))}forEachTarget(e,t){return wo(e).ee(((s,o)=>{const u=wu(o);t(u)}))}ur(e){return lE(e).get(Tf).next((t=>(ge(t!==null,2888),t)))}cr(e,t){return lE(e).put(Tf,t)}lr(e,t){return wo(e).put(B1(this.serializer,t))}hr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Sa(t),o=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let u=null;return wo(e).ee({range:o,index:Ub},((c,m,g)=>{const p=wu(m);sc(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,s){const o=[],u=ar(e);return t.forEach((c=>{const m=on(c.path);o.push(u.put({targetId:s,path:m})),o.push(this.referenceDelegate.addReference(e,s,c))})),U.waitFor(o)}removeMatchingKeys(e,t,s){const o=ar(e);return U.forEach(t,(u=>{const c=on(u.path);return U.waitFor([o.delete([s,c]),this.referenceDelegate.removeReference(e,s,u)])}))}removeMatchingKeysForTargetId(e,t){const s=ar(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(o)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),o=ar(e);let u=De();return o.ee({range:s,Y:!0},((c,m,g)=>{const p=Pi(c[1]),_=new oe(p);u=u.add(_)})).next((()=>u))}containsKey(e,t){const s=on(t.path),o=IDBKeyRange.bound([s],[Rb(s)],!1,!0);let u=0;return ar(e).ee({index:Vp,Y:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return wo(e).get(t).next((s=>s?wu(s):null))}}function wo(r){return zt(r,Fo)}function lE(r){return zt(r,pa)}function ar(r){return zt(r,Ho)}const uE="LruGarbageCollector",KR=1048576;function cE([r,e],[t,s]){const o=xe(r,t);return o===0?xe(e,s):o}class QR{constructor(e){this.Pr=e,this.buffer=new We(cE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();cE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ee(uE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wr(t)?ee(uE,"Ignoring IndexedDB error during garbage collection: ",t):await Ar(t)}await this.Ar(3e5)}))}}class YR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(vn.ce);const s=new QR(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(oE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,u,c,m,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,c=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,m=Date.now(),this.removeTargets(e,s,t)))).next((b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(p=Date.now(),Io()<=Pe.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function X1(r,e){return new YR(r,e)}class $R{constructor(e,t){this.db=e,this.garbageCollector=X1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((s,o)=>t(o)))}addReference(e,t,s){return Yh(e,s)}removeReference(e,t,s){return Yh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Yh(e,t)}wr(e,t){return(function(o,u){let c=!1;return Y1(o).te((m=>Q1(o,m,u).next((g=>(g&&(c=!0),U.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.yr(e,((c,m)=>{if(m<=t){const g=this.wr(e,c).next((p=>{if(!p)return u++,s.getEntry(e,c).next((()=>(s.removeEntry(c,ye.min()),ar(e).delete((function(b){return[0,on(b.path)]})(c)))))}));o.push(g)}})).next((()=>U.waitFor(o))).next((()=>s.apply(e))).next((()=>u))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Yh(e,t)}yr(e,t){const s=ar(e);let o,u=vn.ce;return s.ee({index:Vp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==vn.ce&&t(new oe(Pi(o)),u),u=p,o=g):u=vn.ce})).next((()=>{u!==vn.ce&&t(new oe(Pi(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yh(r,e){return ar(r).put((function(s,o){return{targetId:0,path:on(s.path),sequenceNumber:o}})(e,r.currentSequenceNumber))}class J1{constructor(){this.changes=new Es((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?U.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return aa(e).put(s)}removeEntry(e,t,s){return aa(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],If(c),m[m.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.br(e,s))))}getEntry(e,t){let s=pt.newInvalidDocument(t);return aa(e).ee({index:tf,range:IDBKeyRange.only(Tu(t))},((o,u)=>{s=this.Sr(t,u)})).next((()=>s))}Dr(e,t){let s={size:0,document:pt.newInvalidDocument(t)};return aa(e).ee({index:tf,range:IDBKeyRange.only(Tu(t))},((o,u)=>{s={document:this.Sr(t,u),size:Cf(u)}})).next((()=>s))}getEntries(e,t){let s=Dn();return this.Cr(e,t,((o,u)=>{const c=this.Sr(o,u);s=s.insert(o,c)})).next((()=>s))}vr(e,t){let s=Dn(),o=new at(oe.comparator);return this.Cr(e,t,((u,c)=>{const m=this.Sr(u,c);s=s.insert(u,m),o=o.insert(u,Cf(c))})).next((()=>({documents:s,Fr:o})))}Cr(e,t,s){if(t.isEmpty())return U.resolve();let o=new We(dE);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Tu(o.first()),Tu(o.last())),c=o.getIterator();let m=c.getNext();return aa(e).ee({index:tf,range:u},((g,p,_)=>{const b=oe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&dE(m,b)<0;)s(m,null),m=c.getNext();m&&m.isEqual(b)&&(s(m,p),m=c.hasNext()?c.getNext():null),m?_.j(Tu(m)):_.done()})).next((()=>{for(;m;)s(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,s,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),If(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return aa(e).H(IDBKeyRange.bound(m,g,!0)).next((p=>{u?.incrementDocumentReadCount(p.length);let _=Dn();for(const b of p){const A=this.Sr(oe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(ac(t,A)||o.has(A.key))&&(_=_.insert(A.key,A))}return _}))}getAllFromCollectionGroup(e,t,s,o){let u=Dn();const c=fE(t,s),m=fE(t,On.max());return aa(e).ee({index:Lb,range:IDBKeyRange.bound(c,m,!0)},((g,p,_)=>{const b=this.Sr(oe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(b.key,b),u.size===o&&_.done()})).next((()=>u))}newChangeBuffer(e){return new JR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return hE(e).get($g).next((t=>(ge(!!t,20021),t)))}br(e,t){return hE(e).put($g,t)}Sr(e,t){if(t){const s=kR(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(ye.min())))return s}return pt.newInvalidDocument(e)}}function W1(r){return new XR(r)}class JR extends J1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Es((s=>s.toString()),((s,o)=>s.isEqual(o)))}applyChanges(e){const t=[];let s=0,o=new We(((u,c)=>xe(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Or.get(u);if(t.push(this.Mr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=YT(this.Mr.serializer,c);o=o.add(u.path.popLast());const p=Cf(g);s+=p-m.size,t.push(this.Mr.addEntry(e,u,g))}else if(s-=m.size,this.trackRemovals){const g=YT(this.Mr.serializer,c.convertToNoDocument(ye.min()));t.push(this.Mr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Mr.updateMetadata(e,s)),U.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((s=>(this.Or.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:s,Fr:o})=>(o.forEach(((u,c)=>{this.Or.set(u,{size:c,readTime:s.get(u).readTime})})),s)))}}function hE(r){return zt(r,Fu)}function aa(r){return zt(r,vf)}function Tu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fE(r,e){const t=e.documentKey.path.toArray();return[r,If(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function dE(r,e){const t=r.path.toArray(),s=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<s.length-2;++u)if(o=xe(t[u],s[u]),o)return o;return o=xe(t.length,s.length),o||(o=xe(t[t.length-2],s[s.length-2]),o||xe(t[t.length-1],s[s.length-1]))}class WR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Z1{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Pu(s.mutation,o,Tn.empty(),Je.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,De()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=De()){const o=ji();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let c=xu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=ji();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,De())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,o){let u=Dn();const c=ku(),m=(function(){return ku()})();return t.forEach(((g,p)=>{const _=s.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof bs)?u=u.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Pu(_.mutation,p,_.mutation.getFieldMask(),Je.now())):c.set(p.key,Tn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,_)=>c.set(p,_))),t.forEach(((p,_)=>m.set(p,new WR(_,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=ku();let o=new at(((c,m)=>c-m)),u=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let _=s.get(g)||Tn.empty();_=m.applyToLocalView(p,_),s.set(g,_);const b=(o.get(m.batchId)||De()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,_=g.value,b=p1();_.forEach((A=>{if(!u.has(A)){const O=b1(t.get(A),s.get(A));O!==null&&b.set(A,O),u=u.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return U.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return tR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):U.resolve(ji());let m=Bo,g=u;return c.next((p=>U.forEach(p,((_,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(_)?U.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{g=g.insert(_,A)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,De()))).next((_=>({batchId:m,changes:g1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((s=>{let o=xu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let c=xu();return this.indexManager.getCollectionParents(e,u).next((m=>U.forEach(m,(g=>{const p=(function(b,A){return new Jf(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((_=>{_.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((c=>{u.forEach(((g,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,pt.newInvalidDocument(_)))}));let m=xu();return c.forEach(((g,p)=>{const _=u.get(g);_!==void 0&&Pu(_.mutation,p,Tn.empty(),Je.now()),ac(t,p)&&(m=m.insert(g,p))})),m}))}}class ZR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return U.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:q1(o.bundledQuery),readTime:hn(o.readTime)}})(t)),U.resolve()}}class eC{constructor(){this.overlays=new at(oe.comparator),this.Lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ji();return U.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.bt(e,t,u)})),U.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),U.resolve()}getOverlaysForCollection(e,t,s){const o=ji(),u=t.length+1,c=new oe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return U.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new at(((p,_)=>p-_));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let _=u.get(p.largestBatchId);_===null&&(_=ji(),u=u.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const m=ji(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>m.set(p,_))),!(m.size()>=o)););return U.resolve(m)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new Gp(t,s));let u=this.Lr.get(t);u===void 0&&(u=De(),this.Lr.set(t,u)),this.Lr.set(t,u.add(s.key))}}class tC{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}class Xp{constructor(){this.kr=new We(Ht.Kr),this.qr=new We(Ht.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Ht(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new oe(new Ke([])),s=new Ht(t,e),o=new Ht(t,e+1),u=[];return this.qr.forEachInRange([s,o],(c=>{this.Wr(c),u.push(c.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new oe(new Ke([])),s=new Ht(t,e),o=new Ht(t,e+1);let u=De();return this.qr.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Ht(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return oe.comparator(e.key,t.key)||xe(e.Hr,t.Hr)}static Ur(e,t){return xe(e.Hr,t.Hr)||oe.comparator(e.key,t.key)}}class nC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new We(Ht.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Fp(u,t,s,o);this.mutationQueue.push(c);for(const m of o)this.Jr=this.Jr.add(new Ht(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return U.resolve(c)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),u=o<0?0:o;return U.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ga:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,o],(c=>{const m=this.Zr(c.Hr);u.push(m)})),U.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new We(xe);return t.forEach((o=>{const u=new Ht(o,0),c=new Ht(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,c],(m=>{s=s.add(m.Hr)}))})),U.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;oe.isDocumentKey(u)||(u=u.child(""));const c=new Ht(new oe(u),0);let m=new We(xe);return this.Jr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Hr)),!0)}),c),U.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ge(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return U.forEach(t.mutations,(o=>{const u=new Ht(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Ht(t,0),o=this.Jr.firstAfterOrEqual(s);return U.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iC{constructor(e){this.ti=e,this.docs=(function(){return new at(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,c=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return U.resolve(s?s.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let s=Dn();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():pt.newInvalidDocument(o))})),U.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Dn();const c=t.path,m=new oe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Np(Vb(_),s)<=0||(o.has(_.key)||ac(t,_))&&(u=u.insert(_.key,_.mutableCopy()))}return U.resolve(u)}getAllFromCollectionGroup(e,t,s,o){he(9500)}ni(e,t){return U.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new sC(this)}getSize(e){return U.resolve(this.size)}}class sC extends J1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),U.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class rC{constructor(e){this.persistence=e,this.ri=new Es((t=>Sa(t)),sc),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.ii=0,this.si=new Xp,this.targetCount=0,this.oi=wa._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),U.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.lr(t),U.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.ri.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ri.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),U.waitFor(u).next((()=>o))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return U.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),U.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),U.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return U.resolve(s)}containsKey(e,t){return U.resolve(this.si.containsKey(t))}}class Jp{constructor(e,t){this._i={},this.overlays={},this.ai=new vn(0),this.ui=!1,this.ui=!0,this.ci=new tC,this.referenceDelegate=e(this),this.li=new rC(this),this.indexManager=new FR,this.remoteDocumentCache=(function(o){return new iC(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new z1(t),this.Pi=new ZR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new nC(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){ee("MemoryPersistence","Starting transaction:",e);const o=new aC(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,t){return U.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class aC extends Ob{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Ri=new Xp,this.Ai=null}static Vi(e){return new id(e)}get di(){if(this.Ai)return this.Ai;throw he(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),U.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,(s=>{const o=oe.fromPath(s);return this.mi(e,o).next((u=>{u||t.removeEntry(o,ye.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Nf{constructor(e,t){this.persistence=e,this.fi=new Es((s=>on(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=X1(this,t)}static Vi(e,t){return new Nf(e,t)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return U.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((u=>u?U.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,t).next((m=>{m||(s++,u.removeEntry(c,ye.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),U.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sf(e.data.value)),t}wr(e,t,s){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return U.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class oC{constructor(e){this.serializer=e}k(e,t,s,o){const u=new Hf("createOrUpgrade",t);s<1&&o>=1&&((function(g){g.createObjectStore(ic)})(e),(function(g){g.createObjectStore(qu,{keyPath:y2}),g.createObjectStore(oi,{keyPath:xT,autoIncrement:!0}).createIndex(ma,AT,{unique:!0}),g.createObjectStore(qo)})(e),mE(e),(function(g){g.createObjectStore(ua)})(e));let c=U.resolve();return s<3&&o>=3&&(s!==0&&((function(g){g.deleteObjectStore(Ho),g.deleteObjectStore(Fo),g.deleteObjectStore(pa)})(e),mE(e)),c=c.next((()=>(function(g){const p=g.store(pa),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return p.put(Tf,_)})(u)))),s<4&&o>=4&&(s!==0&&(c=c.next((()=>(function(g,p){return p.store(oi).H().next((b=>{g.deleteObjectStore(oi),g.createObjectStore(oi,{keyPath:xT,autoIncrement:!0}).createIndex(ma,AT,{unique:!0});const A=p.store(oi),O=b.map((j=>A.put(j)));return U.waitFor(O)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Go,{keyPath:w2})})(e)}))),s<5&&o>=5&&(c=c.next((()=>this.gi(u)))),s<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Fu)})(e),this.pi(u))))),s<7&&o>=7&&(c=c.next((()=>this.yi(u)))),s<8&&o>=8&&(c=c.next((()=>this.wi(e,u)))),s<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&o>=10&&(c=c.next((()=>this.bi(u)))),s<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Kf,{keyPath:I2})})(e),(function(g){g.createObjectStore(Qf,{keyPath:R2})})(e)}))),s<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Yf,{keyPath:k2});p.createIndex(Jg,P2,{unique:!1}),p.createIndex(qb,j2,{unique:!1})})(e)}))),s<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(vf,{keyPath:v2});p.createIndex(tf,T2),p.createIndex(Lb,E2)})(e))).next((()=>this.Si(e,u))).next((()=>e.deleteObjectStore(ua)))),s<14&&o>=14&&(c=c.next((()=>this.Di(e,u)))),s<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Mp,{keyPath:C2,autoIncrement:!0}).createIndex(Xg,N2,{unique:!1}),g.createObjectStore(Du,{keyPath:D2}).createIndex(zb,V2,{unique:!1}),g.createObjectStore(Vu,{keyPath:M2}).createIndex(Bb,O2,{unique:!1})})(e)))),s<16&&o>=16&&(c=c.next((()=>{t.objectStore(Du).clear()})).next((()=>{t.objectStore(Vu).clear()}))),s<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Op,{keyPath:L2})})(e)}))),s<18&&o>=18&&fb()&&(c=c.next((()=>{t.objectStore(Du).clear()})).next((()=>{t.objectStore(Vu).clear()}))),c}pi(e){let t=0;return e.store(ua).ee(((s,o)=>{t+=Cf(o)})).next((()=>{const s={byteSize:t};return e.store(Fu).put($g,s)}))}gi(e){const t=e.store(qu),s=e.store(oi);return t.H().next((o=>U.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ga],[u.userId,u.lastAcknowledgedBatchId]);return s.H(ma,c).next((m=>U.forEach(m,(g=>{ge(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=ha(this.serializer,g);return K1(e,u.userId,p).next((()=>{}))}))))}))))}yi(e){const t=e.store(Ho),s=e.store(ua);return e.store(pa).get(Tf).next((o=>{const u=[];return s.ee(((c,m)=>{const g=new Ke(c),p=(function(b){return[0,on(b)]})(g);u.push(t.get(p).next((_=>_?U.resolve():(b=>t.put({targetId:0,path:on(b),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>U.waitFor(u)))}))}wi(e,t){e.createObjectStore(Hu,{keyPath:A2});const s=t.store(Hu),o=new $p,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return s.put({collectionId:m,parent:on(g)})}};return t.store(ua).ee({Y:!0},((c,m)=>{const g=new Ke(c);return u(g.popLast())})).next((()=>t.store(qo).ee({Y:!0},(([c,m,g],p)=>{const _=Pi(m);return u(_.popLast())}))))}bi(e){const t=e.store(Fo);return t.ee(((s,o)=>{const u=wu(o),c=B1(this.serializer,u);return t.put(c)}))}Si(e,t){const s=t.store(ua),o=[];return s.ee(((u,c)=>{const m=t.store(vf),g=(function(b){return b.document?new oe(Ke.fromString(b.document.name).popFirst(5)):b.noDocument?oe.fromSegments(b.noDocument.path):b.unknownDocument?oe.fromSegments(b.unknownDocument.path):he(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>U.waitFor(o)))}Di(e,t){const s=t.store(oi),o=W1(this.serializer),u=new Jp(id.Vi,this.serializer.yt);return s.H().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??De();ha(this.serializer,g).keys().forEach((_=>p=p.add(_))),m.set(g.userId,p)})),U.forEach(m,((g,p)=>{const _=new Gt(p),b=td.wt(this.serializer,_),A=u.getIndexManager(_),O=nd.wt(_,this.serializer,A,u.referenceDelegate);return new Z1(o,O,b,A).recalculateAndSaveOverlaysForDocumentKeys(new Wg(t,vn.ce),g).next()}))}))}}function mE(r){r.createObjectStore(Ho,{keyPath:S2}).createIndex(Vp,x2,{unique:!0}),r.createObjectStore(Fo,{keyPath:"targetId"}).createIndex(Ub,b2,{unique:!0}),r.createObjectStore(pa)}const sr="IndexedDbPersistence",Dg=18e5,Vg=5e3,Mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lC="main";class Wp{constructor(e,t,s,o,u,c,m,g,p,_,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ci=u,this.window=c,this.document=m,this.Fi=p,this.Mi=_,this.xi=b,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=A=>Promise.resolve(),!Wp.v())throw new se(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $R(this,o),this.Ki=t+lC,this.serializer=new z1(g),this.qi=new pr(this.Ki,this.xi,new oC(this.serializer)),this.ci=new jR,this.li=new GR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=W1(this.serializer),this.Pi=new PR,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&bt(sr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(X.FAILED_PRECONDITION,Mg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new vn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$h(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(wr(e))return ee(sr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(sr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Eu(e).get(Eo).next((t=>U.resolve(this.Xi(t))))}Yi(e){return $h(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Dg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=zt(t,Go);return s.H().next((o=>{const u=this.ns(o,Dg),c=o.filter((m=>u.indexOf(m)===-1));return U.forEach(c,(m=>s.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?U.resolve(!0):Eu(e).get(Eo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Vg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new se(X.FAILED_PRECONDITION,Mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||$h(e).H().next((s=>this.ns(s,Vg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(sr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[ic,Go],(e=>{const t=new Wg(e,vn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((s=>this.ts(s.updateTimeMs,t)&&!this.ss(s.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>$h(e).H().next((t=>this.ns(t,Dg).map((s=>s.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return nd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HR(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return td.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,s){ee(sr,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?B2:g===17?Kb:g===16?z2:g===15?kp:g===14?Gb:g===13?Hb:g===12?U2:g===11?Fb:void he(60245)})(this.xi);let c;return this.qi.runTransaction(e,o,u,(m=>(c=new Wg(m,this.ai?this.ai.next():vn.ce),t==="readwrite-primary"?this.ji(c).next((g=>!!g||this.Hi(c))).next((g=>{if(!g)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new se(X.FAILED_PRECONDITION,Mb);return s(c)})).next((g=>this.Zi(c).next((()=>g)))):this.Ps(c).next((()=>s(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Ps(e){return Eu(e).get(Eo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Vg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(X.FAILED_PRECONDITION,Mg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Eu(e).put(Eo,t)}static v(){return pr.v()}Ji(e){const t=Eu(e);return t.get(Eo).next((s=>this.Xi(s)?(ee(sr,"Releasing primary lease."),t.delete(Eo)):U.resolve()))}ts(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(bt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;hb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ee(sr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return bt(sr,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Eu(r){return zt(r,ic)}function $h(r){return zt(r,Go)}function eS(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Zp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=De(),o=De();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zp(e,t.fromCache,s,o)}}class uC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tS{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return hb()?8:kb(Ut())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.gs(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ps(e,t,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new uC;return this.ys(e,t,c).next((m=>{if(u.result=m,this.As)return this.ws(e,t,c,m.size)}))})).next((()=>u.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(Io()<=Pe.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Io()<=Pe.DEBUG&&ee("QueryEngine","Query:",Ro(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Io()<=Pe.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(t))):U.resolve())}gs(e,t){if(LT(t))return U.resolve(null);let s=Mn(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=sp(t,null,"F"),s=Mn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const c=De(...u);return this.fs.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.bs(t,m);return this.Ss(t,p,c,g.readTime)?this.gs(e,sp(t,null,"F")):this.Ds(e,p,t,g)}))))})))))}ps(e,t,s,o){return LT(t)||o.isEqual(ye.min())?U.resolve(null):this.fs.getDocuments(e,s).next((u=>{const c=this.bs(t,u);return this.Ss(t,c,s,o)?U.resolve(null):(Io()<=Pe.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(t)),this.Ds(e,c,t,Db(o,Bo)).next((m=>m)))}))}bs(e,t){let s=new We(d1(e));return t.forEach(((o,u)=>{ac(e,u)&&(s=s.add(u))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,t,s){return Io()<=Pe.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.fs.getDocumentsMatchingQuery(e,t,On.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const ey="LocalStore",cC=3e8;class hC{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new at(xe),this.Fs=new Es((u=>Sa(u)),sc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function nS(r,e,t,s){return new hC(r,e,t,s)}async function iS(r,e){const t=de(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let g=De();for(const p of o){c.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of u){m.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function fC(r,e){const t=de(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,_){const b=p.batch,A=b.keys();let O=U.resolve();return A.forEach((j=>{O=O.next((()=>_.getEntry(g,j))).next((K=>{const Z=p.docVersions.get(j);ge(Z!==null,48541),K.version.compareTo(Z)<0&&(b.applyToRemoteDocument(K,p),K.isValidDocument()&&(K.setReadTime(p.commitVersion),_.addEntry(K)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=De();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function sS(r){const e=de(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function dC(r,e){const t=de(r),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((_,b)=>{const A=o.get(b);if(!A)return;m.push(t.li.removeMatchingKeys(u,_.removedDocuments,b).next((()=>t.li.addMatchingKeys(u,_.addedDocuments,b))));let O=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?O=O.withResumeToken(xt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,s)),o=o.insert(b,O),(function(K,Z,ue){return K.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=cC?!0:ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0})(A,O,_)&&m.push(t.li.updateTargetData(u,O))}));let g=Dn(),p=De();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,_))})),m.push(mC(u,c,e.documentUpdates).next((_=>{g=_.Bs,p=_.Ls}))),!s.isEqual(ye.min())){const _=t.li.getLastRemoteSnapshotVersion(u).next((b=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(_)}return U.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.vs=o,u)))}function mC(r,e,t){let s=De(),o=De();return t.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let c=Dn();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ye.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ee(ey,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{Bs:c,Ls:o}}))}function gC(r,e){const t=de(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ga),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Df(r,e){const t=de(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((u=>u?(o=u,U.resolve(o)):t.li.allocateTargetId(s).next((c=>(o=new us(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Zo(r,e,t){const s=de(r),o=s.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!wr(c))throw c;ee(ey,`Failed to update sequence numbers for target ${e}: ${c}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function fp(r,e,t){const s=de(r);let o=ye.min(),u=De();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,_){const b=de(g),A=b.Fs.get(_);return A!==void 0?U.resolve(b.vs.get(A)):b.li.getTargetData(p,_)})(s,c,Mn(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:ye.min(),t?u:De()))).next((m=>(oS(s,f1(e),m),{documents:m,ks:u})))))}function rS(r,e){const t=de(r),s=de(t.li),o=t.vs.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(u=>s.At(u,e).next((c=>c?c.target:null))))}function aS(r,e){const t=de(r),s=t.Ms.get(e)||ye.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.xs.getAllFromCollectionGroup(o,e,Db(s,Bo),Number.MAX_SAFE_INTEGER))).then((o=>(oS(t,e,o),o)))}function oS(r,e,t){let s=r.Ms.get(e)||ye.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Ms.set(e,s)}const lS="firestore_clients";function gE(r,e){return`${lS}_${r}_${e}`}const uS="firestore_mutations";function pE(r,e,t){let s=`${uS}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const cS="firestore_targets";function Og(r,e){return`${cS}_${r}_${e}`}const ki="SharedClientState";class Vf{constructor(e,t,s,o){this.user=e,this.batchId=t,this.state=s,this.error=o}static $s(e,t,s){const o=JSON.parse(s);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new se(o.error.code,o.error.message))),c?new Vf(e,t,o.state,u):(bt(ki,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static $s(e,t){const s=JSON.parse(t);let o,u=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new se(s.error.code,s.error.message))),u?new ju(e,s.state,o):(bt(ki,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const s=JSON.parse(t);let o=typeof s=="object"&&s.activeTargetIds instanceof Array,u=Bp();for(let c=0;o&&c<s.activeTargetIds.length;++c)o=Pb(s.activeTargetIds[c]),u=u.add(s.activeTargetIds[c]);return o?new Mf(e,u):(bt(ki,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ty{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ty(t.clientId,t.onlineState):(bt(ki,`Failed to parse online state: ${e}`),null)}}class dp{constructor(){this.activeTargetIds=Bp()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kg{constructor(e,t,s,o,u){this.window=e,this.Ci=t,this.persistenceKey=s,this.zs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new at(xe),this.started=!1,this.Zs=[];const c=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Xs=gE(this.persistenceKey,this.zs),this.Ys=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new dp),this.eo=new RegExp(`^${lS}_${c}_([^_]*)$`),this.no=new RegExp(`^${uS}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${cS}_${c}_(\\d+)$`),this.io=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this.so=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const s of e){if(s===this.zs)continue;const o=this.getItem(gE(this.persistenceKey,s));if(o){const u=Mf.$s(s,o);u&&(this.Js=this.Js.insert(u.clientId,u))}}this.oo();const t=this.storage.getItem(this.io);if(t){const s=this._o(t);s&&this.ao(s)}for(const s of this.Zs)this.Hs(s);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((s,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,s){this.co(e,t,s),this.lo(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Og(this.persistenceKey,e));if(o){const u=ju.$s(e,o);u&&(s=u.state)}}return t&&this.ho.Qs(e),this.oo(),s}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Og(this.persistenceKey,e))}updateQueryState(e,t,s){this.Po(e,t,s)}handleUserChange(e,t,s){t.forEach((o=>{this.lo(o)})),this.currentUser=e,s.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee(ki,"READ",e,t),t}setItem(e,t){ee(ki,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee(ki,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ee(ki,"EVENT",t.key,t.newValue),t.key===this.Xs)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const s=this.Eo(t.key);return this.Ro(s,null)}{const s=this.Ao(t.key,t.newValue);if(s)return this.Ro(s.clientId,s)}}else if(this.no.test(t.key)){if(t.newValue!==null){const s=this.Vo(t.key,t.newValue);if(s)return this.mo(s)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(t.key===this.io){if(t.newValue!==null){const s=this._o(t.newValue);if(s)return this.ao(s)}}else if(t.key===this.Ys){const s=(function(u){let c=vn.ce;if(u!=null)try{const m=JSON.parse(u);ge(typeof m=="number",30636,{yo:u}),c=m}catch(m){bt(ki,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);s!==vn.ce&&this.sequenceNumberHandler(s)}else if(t.key===this.so){const s=this.wo(t.newValue);await Promise.all(s.map((o=>this.syncEngine.bo(o))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,s){const o=new Vf(this.currentUser,e,t,s),u=pE(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Ws())}lo(e){const t=pE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,s){const o=Og(this.persistenceKey,e),u=new ju(e,t,s);this.setItem(o,u.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const s=this.Eo(e);return Mf.$s(s,t)}Vo(e,t){const s=this.no.exec(e),o=Number(s[1]),u=s[2]!==void 0?s[2]:null;return Vf.$s(new Gt(u),o,t)}fo(e,t){const s=this.ro.exec(e),o=Number(s[1]);return ju.$s(o,t)}_o(e){return ty.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ee(ki,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const s=t?this.Js.insert(e,t):this.Js.remove(e),o=this.uo(this.Js),u=this.uo(s),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Co(c,m).then((()=>{this.Js=s}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=Bp();return e.forEach(((s,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class hS{constructor(){this.vo=new dp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new dp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pC{Mo(e){}shutdown(){}}const yE="ConnectivityMonitor";class _E{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ee(yE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ee(yE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Xh=null;function mp(){return Xh===null?Xh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xh++,"0x"+Xh.toString(16)}const Pg="RestConnection",yC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _C{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Ef?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,u){const c=mp(),m=this.Qo(e,t.toUriEncodedString());ee(Pg,`Sending RPC '${e}' ${c}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:p}=new URL(m),_=il(p);return this.zo(e,m,g,s,_).then((b=>(ee(Pg,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw vr(Pg,`RPC '${e}' ${c} failed with error: `,b,"url: ",m,"request:",s),b}))}jo(e,t,s,o,u,c){return this.Wo(e,t,s,o,u)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Qo(e,t){const s=yC[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class vC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const sn="WebChannelConnection",bu=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Mo extends _C{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Mo.c_){const e=xb();bu(e,Sb.STAT_EVENT,(t=>{t.stat===Kg.PROXY?ee(sn,"STAT_EVENT: detected buffering proxy"):t.stat===Kg.NOPROXY&&ee(sn,"STAT_EVENT: detected no buffering proxy")})),Mo.c_=!0}}zo(e,t,s,o,u){const c=mp();return new Promise(((m,g)=>{const p=new Eb;p.setWithCredentials(!0),p.listenOnce(bb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Wh.NO_ERROR:const b=p.getResponseJson();ee(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),m(b);break;case Wh.TIMEOUT:ee(sn,`RPC '${e}' ${c} timed out`),g(new se(X.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const A=p.getStatus();if(ee(sn,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const j=O?.error;if(j&&j.status&&j.message){const K=(function(ue){const ne=ue.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ne)>=0?ne:X.UNKNOWN})(j.status);g(new se(K,j.message))}else g(new se(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new se(X.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ee(sn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);ee(sn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=mp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const p=u.join("");ee(sn,`Creating RPC '${e}' stream ${o}: ${p}`,m);const _=c.createWebChannel(p,m);this.I_(_);let b=!1,A=!1;const O=new vC({Ho:j=>{A?ee(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(b||(ee(sn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),b=!0),ee(sn,`RPC '${e}' stream ${o} sending:`,j),_.send(j))},Jo:()=>_.close()});return bu(_,Su.EventType.OPEN,(()=>{A||(ee(sn,`RPC '${e}' stream ${o} transport opened.`),O.i_())})),bu(_,Su.EventType.CLOSE,(()=>{A||(A=!0,ee(sn,`RPC '${e}' stream ${o} transport closed`),O.o_(),this.E_(_))})),bu(_,Su.EventType.ERROR,(j=>{A||(A=!0,vr(sn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),O.o_(new se(X.UNAVAILABLE,"The operation could not be completed")))})),bu(_,Su.EventType.MESSAGE,(j=>{if(!A){const K=j.data[0];ge(!!K,16349);const Z=K,ue=Z?.error||Z[0]?.error;if(ue){ee(sn,`RPC '${e}' stream ${o} received error:`,ue);const ne=ue.status;let le=(function(Te){const R=Ot[Te];if(R!==void 0)return A1(R)})(ne),te=ue.message;ne==="NOT_FOUND"&&te.includes("database")&&te.includes("does not exist")&&te.includes(this.databaseId.database)&&vr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),le===void 0&&(le=X.INTERNAL,te="Unknown error status: "+ne+" with message "+ue.message),A=!0,O.o_(new se(le,te)),_.close()}else ee(sn,`RPC '${e}' stream ${o} received:`,K),O.__(K)}})),Mo.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Ab()}}function TC(r){return new Mo(r)}function fS(){return typeof window<"u"?window:null}function uf(){return typeof document<"u"?document:null}function sd(r){return new AR(r,!0)}Mo.c_=!1;class dS{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const vE="PersistentStream";class mS{constructor(e,t,s,o,u,c,m,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new se(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ee(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EC extends mS{constructor(e,t,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RR(this.serializer,e),s=(function(u){if(!("targetChange"in u))return ye.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?ye.min():c.readTime?hn(c.readTime):ye.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=op(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Sf(g)?{documents:M1(u,g)}:{query:O1(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=R1(u,c.resumeToken);const p=rp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(ye.min())>0){m.readTime=Wo(u,c.snapshotVersion.toTimestamp());const p=rp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=NR(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=op(this.serializer),t.removeTarget=e,this.K_(t)}}class bC extends mS{constructor(e,t,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=CR(e.writeResults,e.commitTime),s=hn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=op(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>wf(this.serializer,s)))};this.K_(t)}}class SC{}class xC extends SC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Wo(e,ap(t,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new se(X.UNKNOWN,u.toString())}))}jo(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.jo(e,ap(t,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function AC(r,e,t,s){return new xC(r,e,t,s)}class wC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(t),this.aa=!1):ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ia="RemoteStore";class IC{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((c=>{s.enqueueAndForget((async()=>{Ca(this)&&(ee(Ia,"Restarting streams for network reachability change."),await(async function(g){const p=de(g);p.Ea.add(4),await cc(p),p.Va.set("Unknown"),p.Ea.delete(4),await rd(p)})(this))}))})),this.Va=new wC(s,o)}}async function rd(r){if(Ca(r))for(const e of r.Ra)await e(!0)}async function cc(r){for(const e of r.Ra)await e(!1)}function ad(r,e){const t=de(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sy(t)?iy(t):ll(t).O_()&&ny(t,e))}function el(r,e){const t=de(r),s=ll(t);t.Ia.delete(e),s.O_()&&gS(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ca(t)&&t.Va.set("Unknown"))}function ny(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ll(r).Z_(e)}function gS(r,e){r.da.$e(e),ll(r).X_(e)}function iy(r){r.da=new ER({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ll(r).start(),r.Va.ua()}function sy(r){return Ca(r)&&!ll(r).x_()&&r.Ia.size>0}function Ca(r){return de(r).Ea.size===0}function pS(r){r.da=void 0}async function RC(r){r.Va.set("Online")}async function CC(r){r.Ia.forEach(((e,t)=>{ny(r,e)}))}async function NC(r,e){pS(r),sy(r)?(r.Va.ha(e),iy(r)):r.Va.set("Unknown")}async function DC(r,e,t){if(r.Va.set("Online"),e instanceof I1&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(s){ee(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Of(r,s)}else if(e instanceof of?r.da.Xe(e):e instanceof w1?r.da.st(e):r.da.tt(e),!t.isEqual(ye.min()))try{const s=await sS(r.localStore);t.compareTo(s)>=0&&await(function(u,c){const m=u.da.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.Ia.get(p);_&&u.Ia.set(p,_.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const _=u.Ia.get(g);if(!_)return;u.Ia.set(g,_.withResumeToken(xt.EMPTY_BYTE_STRING,_.snapshotVersion)),gS(u,g);const b=new us(_.target,g,p,_.sequenceNumber);ny(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(s){ee(Ia,"Failed to raise snapshot:",s),await Of(r,s)}}async function Of(r,e,t){if(!wr(e))throw e;r.Ea.add(1),await cc(r),r.Va.set("Offline"),t||(t=()=>sS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ee(Ia,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await rd(r)}))}function yS(r,e){return e().catch((t=>Of(r,t,e)))}async function ol(r){const e=de(r),t=br(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ga;for(;VC(e);)try{const o=await gC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,MC(e,o)}catch(o){await Of(e,o)}_S(e)&&vS(e)}function VC(r){return Ca(r)&&r.Ta.length<10}function MC(r,e){r.Ta.push(e);const t=br(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function _S(r){return Ca(r)&&!br(r).x_()&&r.Ta.length>0}function vS(r){br(r).start()}async function OC(r){br(r).ra()}async function kC(r){const e=br(r);for(const t of r.Ta)e.ea(t.mutations)}async function PC(r,e,t){const s=r.Ta.shift(),o=Hp.from(s,e,t);await yS(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await ol(r)}async function jC(r,e){e&&br(r).Y_&&await(async function(s,o){if((function(c){return _R(c)&&c!==X.ABORTED})(o.code)){const u=s.Ta.shift();br(s).B_(),await yS(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ol(s)}})(r,e),_S(r)&&vS(r)}async function TE(r,e){const t=de(r);t.asyncQueue.verifyOperationInProgress(),ee(Ia,"RemoteStore received new credentials");const s=Ca(t);t.Ea.add(3),await cc(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rd(t)}async function gp(r,e){const t=de(r);e?(t.Ea.delete(2),await rd(t)):e||(t.Ea.add(2),await cc(t),t.Va.set("Unknown"))}function ll(r){return r.ma||(r.ma=(function(t,s,o){const u=de(t);return u.sa(),new EC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:RC.bind(null,r),Yo:CC.bind(null,r),t_:NC.bind(null,r),J_:DC.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),sy(r)?iy(r):r.Va.set("Unknown")):(await r.ma.stop(),pS(r))}))),r.ma}function br(r){return r.fa||(r.fa=(function(t,s,o){const u=de(t);return u.sa(),new bC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:OC.bind(null,r),t_:jC.bind(null,r),ta:kC.bind(null,r),na:PC.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await ol(r)):(await r.fa.stop(),r.Ta.length>0&&(ee(Ia,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class ry{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const c=Date.now()+s,m=new ry(e,t,c,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ay(r,e){if(bt("AsyncQueue",`${e}: ${r}`),wr(r))return new se(X.UNAVAILABLE,`${e}: ${r}`);throw r}class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||oe.comparator(t.key,s.key):(t,s)=>oe.comparator(t.key,s.key),this.keyedMap=xu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class EE{constructor(){this.ga=new at(oe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class tl{constructor(e,t,s,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new tl(e,t,Oo.emptySet(t),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class LC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class UC{constructor(){this.queries=bE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=de(t),u=o.queries;o.queries=bE(),u.forEach(((c,m)=>{for(const g of m.ba)g.onError(s)}))})(this,new se(X.ABORTED,"Firestore shutting down"))}}function bE(){return new Es((r=>h1(r)),Wf)}async function TS(r,e){const t=de(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.Sa()&&e.Da()&&(s=2):(u=new LC,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=ay(c,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&oy(t)}async function ES(r,e){const t=de(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const c=u.ba.indexOf(e);c>=0&&(u.ba.splice(c,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function zC(r,e){const t=de(r);let s=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.ba)m.Fa(o)&&(s=!0);c.wa=o}}s&&oy(t)}function BC(r,e,t){const s=de(r),o=s.queries.get(e);if(o)for(const u of o.ba)u.onError(t);s.queries.delete(e)}function oy(r){r.Ca.forEach((e=>{e.next()}))}var pp,SE;(SE=pp||(pp={})).Ma="default",SE.Cache="cache";class bS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new tl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pp.Cache}}class SS{constructor(e){this.key=e}}class xS{constructor(e){this.key=e}}class qC{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=De(),this.mutatedKeys=De(),this.eu=d1(e),this.tu=new Oo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new EE,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,b)=>{const A=o.get(_),O=ac(this.query,b)?b:null,j=!!A&&this.mutatedKeys.has(A.key),K=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let Z=!1;A&&O?A.data.isEqual(O.data)?j!==K&&(s.track({type:3,doc:O}),Z=!0):this.su(A,O)||(s.track({type:2,doc:O}),Z=!0,(g&&this.eu(O,g)>0||p&&this.eu(O,p)<0)&&(m=!0)):!A&&O?(s.track({type:0,doc:O}),Z=!0):A&&!O&&(s.track({type:1,doc:A}),Z=!0,(g||p)&&(m=!0)),Z&&(O?(c=c.add(O),u=K?u.add(_):u.delete(_)):(c=c.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Ss:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,b)=>(function(O,j){const K=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Vt:Z})}};return K(O)-K(j)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,p=g!==this.Xa;return this.Xa=g,c.length!==0||p?{snapshot:new tl(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=De(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new xS(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new SS(s))})),t}cu(e){this.Za=e.ks,this.Ya=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ul="SyncEngine";class FC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class HC{constructor(e){this.key=e,this.hu=!1}}class GC{constructor(e,t,s,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Es((m=>h1(m)),Wf),this.Iu=new Map,this.Eu=new Set,this.Ru=new at(oe.comparator),this.Au=new Map,this.Vu=new Xp,this.du={},this.mu=new Map,this.fu=wa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KC(r,e,t=!0){const s=od(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await AS(s,e,t,!0),o}async function QC(r,e){const t=od(r);await AS(t,e,!0,!1)}async function AS(r,e,t,s){const o=await Df(r.localStore,Mn(e)),u=o.targetId,c=r.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await ly(r,e,u,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&ad(r.remoteStore,o),m}async function ly(r,e,t,s,o){r.pu=(b,A,O)=>(async function(K,Z,ue,ne){let le=Z.view.ru(ue);le.Ss&&(le=await fp(K.localStore,Z.query,!1).then((({documents:R})=>Z.view.ru(R,le))));const te=ne&&ne.targetChanges.get(Z.targetId),_e=ne&&ne.targetMismatches.get(Z.targetId)!=null,Te=Z.view.applyChanges(le,K.isPrimaryClient,te,_e);return yp(K,Z.targetId,Te.au),Te.snapshot})(r,b,A,O);const u=await fp(r.localStore,e,!0),c=new qC(e,u.ks),m=c.ru(u.documents),g=uc.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),p=c.applyChanges(m,r.isPrimaryClient,g);yp(r,t,p.au);const _=new FC(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function YC(r,e,t){const s=de(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!Wf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Zo(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&el(s.remoteStore,o.targetId),nl(s,o.targetId)})).catch(Ar)):(nl(s,o.targetId),await Zo(s.localStore,o.targetId,!0))}async function $C(r,e){const t=de(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),el(t.remoteStore,s.targetId))}async function XC(r,e,t){const s=fy(r);try{const o=await(function(c,m){const g=de(c),p=Je.now(),_=m.reduce(((O,j)=>O.add(j.key)),De());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let j=Dn(),K=De();return g.xs.getEntries(O,_).next((Z=>{j=Z,j.forEach(((ue,ne)=>{ne.isValidDocument()||(K=K.add(ue))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,j))).next((Z=>{b=Z;const ue=[];for(const ne of m){const le=pR(ne,b.get(ne.key).overlayedDocument);le!=null&&ue.push(new bs(ne.key,le,n1(le.value.mapValue),Kt.exists(!0)))}return g.mutationQueue.addMutationBatch(O,p,ue,m)})).next((Z=>{A=Z;const ue=Z.applyToLocalDocumentSet(b,K);return g.documentOverlayCache.saveOverlays(O,Z.batchId,ue)}))})).then((()=>({batchId:A.batchId,changes:g1(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.du[c.currentUser.toKey()];p||(p=new at(xe)),p=p.insert(m,g),c.du[c.currentUser.toKey()]=p})(s,o.batchId,t),await Rr(s,o.changes),await ol(s.remoteStore)}catch(o){const u=ay(o,"Failed to persist write");t.reject(u)}}async function wS(r,e){const t=de(r);try{const s=await dC(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ge(c.hu,14607):o.removedDocuments.size>0&&(ge(c.hu,42227),c.hu=!1))})),await Rr(t,s,e)}catch(s){await Ar(s)}}function xE(r,e,t){const s=de(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=de(c);g.onlineState=m;let p=!1;g.queries.forEach(((_,b)=>{for(const A of b.ba)A.va(m)&&(p=!0)})),p&&oy(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function JC(r,e,t){const s=de(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let c=new at(oe.comparator);c=c.insert(u,pt.newNoDocument(u,ye.min()));const m=De().add(u),g=new lc(ye.min(),new Map,new at(xe),c,m);await wS(s,g),s.Ru=s.Ru.remove(u),s.Au.delete(e),hy(s)}else await Zo(s.localStore,e,!1).then((()=>nl(s,e,t))).catch(Ar)}async function WC(r,e){const t=de(r),s=e.batch.batchId;try{const o=await fC(t.localStore,e);cy(t,s,null),uy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Rr(t,o)}catch(o){await Ar(o)}}async function ZC(r,e,t){const s=de(r);try{const o=await(function(c,m){const g=de(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,m).next((b=>(ge(b!==null,37113),_=b.keys(),g.mutationQueue.removeMutationBatch(p,b)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(s.localStore,e);cy(s,e,t),uy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Rr(s,o)}catch(o){await Ar(o)}}function uy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function cy(r,e,t){const s=de(r);let o=s.du[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function nl(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||IS(r,s)}))}function IS(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(el(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),hy(r))}function yp(r,e,t){for(const s of t)s instanceof SS?(r.Vu.addReference(s.key,e),eN(r,s)):s instanceof xS?(ee(ul,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||IS(r,s.key)):he(19791,{wu:s})}function eN(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(ee(ul,"New document in limbo: "+t),r.Eu.add(s),hy(r))}function hy(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new oe(Ke.fromString(e)),s=r.fu.next();r.Au.set(s,new HC(t)),r.Ru=r.Ru.insert(t,s),ad(r.remoteStore,new us(Mn(rc(t.path)),s,"TargetPurposeLimboResolution",vn.ce))}}async function Rr(r,e,t){const s=de(r),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{c.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Zp.Es(g.targetId,p);u.push(_)}})))})),await Promise.all(c),s.Pu.J_(o),await(async function(g,p){const _=de(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>U.forEach(p,(A=>U.forEach(A.Ts,(O=>_.persistence.referenceDelegate.addReference(b,A.targetId,O))).next((()=>U.forEach(A.Is,(O=>_.persistence.referenceDelegate.removeReference(b,A.targetId,O)))))))))}catch(b){if(!wr(b))throw b;ee(ey,"Failed to update sequence numbers: "+b)}for(const b of p){const A=b.targetId;if(!b.fromCache){const O=_.vs.get(A),j=O.snapshotVersion,K=O.withLastLimboFreeSnapshotVersion(j);_.vs=_.vs.insert(A,K)}}})(s.localStore,u))}async function tN(r,e){const t=de(r);if(!t.currentUser.isEqual(e)){ee(ul,"User change. New user:",e.toKey());const s=await iS(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new se(X.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Rr(t,s.Ns)}}function nN(r,e){const t=de(r),s=t.Au.get(e);if(s&&s.hu)return De().add(s.key);{let o=De();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function iN(r,e){const t=de(r),s=await fp(t.localStore,e.query,!0),o=e.view.cu(s);return t.isPrimaryClient&&yp(t,e.targetId,o.au),o}async function sN(r,e){const t=de(r);return aS(t.localStore,e).then((s=>Rr(t,s)))}async function rN(r,e,t,s){const o=de(r),u=await(function(m,g){const p=de(m),_=de(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(b=>_.Xn(b,g).next((A=>A?p.localDocuments.getDocuments(b,A):U.resolve(null)))))})(o.localStore,e);u!==null?(t==="pending"?await ol(o.remoteStore):t==="acknowledged"||t==="rejected"?(cy(o,e,s||null),uy(o,e),(function(m,g){de(de(m).mutationQueue).nr(g)})(o.localStore,e)):he(6720,"Unknown batchState",{bu:t}),await Rr(o,u)):ee(ul,"Cannot apply mutation batch with id: "+e)}async function aN(r,e){const t=de(r);if(od(t),fy(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),o=await AE(t,s.toArray());t.gu=!0,await gp(t.remoteStore,!0);for(const u of o)ad(t.remoteStore,u)}else if(e===!1&&t.gu!==!1){const s=[];let o=Promise.resolve();t.Iu.forEach(((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?s.push(c):o=o.then((()=>(nl(t,c),Zo(t.localStore,c,!0)))),el(t.remoteStore,c)})),await o,await AE(t,s),(function(c){const m=de(c);m.Au.forEach(((g,p)=>{el(m.remoteStore,p)})),m.Vu.zr(),m.Au=new Map,m.Ru=new at(oe.comparator)})(t),t.gu=!1,await gp(t.remoteStore,!1)}}async function AE(r,e,t){const s=de(r),o=[],u=[];for(const c of e){let m;const g=s.Iu.get(c);if(g&&g.length!==0){m=await Df(s.localStore,Mn(g[0]));for(const p of g){const _=s.Tu.get(p),b=await iN(s,_);b.snapshot&&u.push(b.snapshot)}}else{const p=await rS(s.localStore,c);m=await Df(s.localStore,p),await ly(s,RS(p),c,!1,m.resumeToken)}o.push(m)}return s.Pu.J_(u),o}function RS(r){return c1(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function oN(r){return(function(t){return de(de(t).persistence).hs()})(de(r).localStore)}async function lN(r,e,t,s){const o=de(r);if(o.gu)return void ee(ul,"Ignoring unexpected query state notification.");const u=o.Iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await aS(o.localStore,f1(u[0])),m=lc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",xt.EMPTY_BYTE_STRING);await Rr(o,c,m);break}case"rejected":await Zo(o.localStore,e,!0),nl(o,e,s);break;default:he(64155,t)}}async function uN(r,e,t){const s=od(r);if(s.gu){for(const o of e){if(s.Iu.has(o)&&s.sharedClientState.isActiveQueryTarget(o)){ee(ul,"Adding an already active target "+o);continue}const u=await rS(s.localStore,o),c=await Df(s.localStore,u);await ly(s,RS(u),c.targetId,!1,c.resumeToken),ad(s.remoteStore,c)}for(const o of t)s.Iu.has(o)&&await Zo(s.localStore,o,!1).then((()=>{el(s.remoteStore,o),nl(s,o)})).catch(Ar)}}function od(r){const e=de(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=wS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JC.bind(null,e),e.Pu.J_=zC.bind(null,e.eventManager),e.Pu.yu=BC.bind(null,e.eventManager),e}function fy(r){const e=de(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZC.bind(null,e),e}class Xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nS(this.persistence,new tS,e.initialUser,this.serializer)}Cu(e){return new Jp(id.Vi,this.serializer)}Du(e){return new hS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xu.provider={build:()=>new Xu};class cN extends Xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof Nf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new $1(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Jp((s=>Nf.Vi(s,t)),this.serializer)}}class hN extends Xu{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await fy(this.xu.syncEngine),await ol(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return nS(this.persistence,new tS,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new $1(s,e.asyncQueue,t)}Mu(e,t){const s=new g2(t,this.persistence);return new m2(e.asyncQueue,s)}Cu(e){const t=eS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Wp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,fS(),uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new hS}}class fN extends hN{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof kg&&(this.sharedClientState.syncEngine={So:rN.bind(null,t),Do:lN.bind(null,t),Co:uN.bind(null,t),hs:oN.bind(null,t),bo:sN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async s=>{await aN(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=fS();if(!kg.v(t))throw new se(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=eS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kg(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tN.bind(null,this.syncEngine),await gp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UC})()}createDatastore(e){const t=sd(e.databaseInfo.databaseId),s=TC(e.databaseInfo);return AC(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,c,m){return new IC(s,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>xE(this.syncEngine,t,0)),(function(){return _E.v()?new _E:new pC})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,_){const b=new GC(o,u,c,m,g,p);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=de(t);ee(Ia,"RemoteStore shutting down."),s.Ea.add(5),await cc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kf.provider={build:()=>new kf};class CS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Sr="FirestoreClient";class dN{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=Rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{ee(Sr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ee(Sr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ay(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function jg(r,e){r.asyncQueue.verifyOperationInProgress(),ee(Sr,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await iS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function wE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await mN(r);ee(Sr,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>TE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>TE(e.remoteStore,o))),r._onlineComponents=e}async function mN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ee(Sr,"Using user provided OfflineComponentProvider");try{await jg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;vr("Error using user provided cache. Falling back to memory cache: "+t),await jg(r,new Xu)}}else ee(Sr,"Using default OfflineComponentProvider"),await jg(r,new cN(void 0));return r._offlineComponents}async function NS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ee(Sr,"Using user provided OnlineComponentProvider"),await wE(r,r._uninitializedComponentsProvider._online)):(ee(Sr,"Using default OnlineComponentProvider"),await wE(r,new kf))),r._onlineComponents}function gN(r){return NS(r).then((e=>e.syncEngine))}async function _p(r){const e=await NS(r),t=e.eventManager;return t.onListen=KC.bind(null,e.syncEngine),t.onUnlisten=YC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$C.bind(null,e.syncEngine),t}function pN(r,e,t,s){const o=new CS(s),u=new bS(e,o,t);return r.asyncQueue.enqueueAndForget((async()=>TS(await _p(r),u))),()=>{o.Nu(),r.asyncQueue.enqueueAndForget((async()=>ES(await _p(r),u)))}}function yN(r,e,t={}){const s=new fs;return r.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const _=new CS({next:A=>{_.Nu(),c.enqueueAndForget((()=>ES(u,b)));const O=A.docs.has(m);!O&&A.fromCache?p.reject(new se(X.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&g&&g.source==="server"?p.reject(new se(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new bS(rc(m.path),_,{includeMetadataChanges:!0,Ka:!0});return TS(u,b)})(await _p(r),r.asyncQueue,e,t,s))),s.promise}function _N(r,e){const t=new fs;return r.asyncQueue.enqueueAndForget((async()=>XC(await gN(r),e,t))),t.promise}function DS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const vN="ComponentProvider",IE=new Map;function TN(r,e,t,s,o){return new F2(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,DS(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const VS="firestore.googleapis.com",RE=!0;class CE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VS,this.ssl=RE}else this.host=e.host,this.ssl=e.ssl??RE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KR)throw new se(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ld{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new t2;switch(s.type){case"firstParty":return new r2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=IE.get(t);s&&(ee(vN,"Removing Datastore"),IE.delete(t),s.terminate())})(this),Promise.resolve()}}function EN(r,e,t,s={}){r=Vn(r,ld);const o=il(e),u=r._getSettings(),c={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(lb(`https://${m}`),ub("Firestore",!0)),u.host!==VS&&u.host!==m&&vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!va(g,c)&&(r._setSettings(g),s.mockUserToken)){let p,_;if(typeof s.mockUserToken=="string")p=s.mockUserToken,_=Gt.MOCK_USER;else{p=Rw(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new se(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Gt(b)}r._authCredentials=new n2(new Ib(p,_))}}class ud{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ud(this.firestore,e,this._query)}}class St{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(nc(t,St._jsonSchema))return new St(e,s||null,new oe(Ke.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:kt("string",St._jsonSchemaVersion),referencePath:kt("string")};class yr extends ud{constructor(e,t,s){super(e,t,rc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new oe(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function MS(r,e,...t){if(r=en(r),Cb("collection","path",e),r instanceof ld){const s=Ke.fromString(e,...t);return vT(s),new yr(r,null,s)}{if(!(r instanceof St||r instanceof yr))throw new se(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return vT(s),new yr(r.firestore,null,s)}}function hi(r,e,...t){if(r=en(r),arguments.length===1&&(e=Rp.newId()),Cb("doc","path",e),r instanceof ld){const s=Ke.fromString(e,...t);return _T(s),new St(r,null,new oe(s))}{if(!(r instanceof St||r instanceof yr))throw new se(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return _T(s),new St(r.firestore,r instanceof yr?r.converter:null,new oe(s))}}const NE="AsyncQueue";class DE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dS(this,"async_queue_retry"),this._c=()=>{const s=uf();s&&ee(NE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wr(e))throw e;ee(NE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",VE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ry.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&he(47125,{Pc:VE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function VE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ps extends ld{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new DE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DE(e),this._firestoreClient=void 0,await e}}}function bN(r,e){const t=typeof r=="object"?r:yb(),s=typeof r=="string"?r:Ef,o=wp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=ww("firestore");u&&EN(o,...u)}return o}function cd(r){if(r._terminated)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||OS(r),r._firestoreClient}function OS(r){const e=r._freezeSettings(),t=TN(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new dN(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}async function SN(r){vr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();xN(r,kf.provider,{build:t=>new fN(t,e.cacheSizeBytes)})}function xN(r,e,t){if((r=Vn(r,ps))._firestoreClient||r._terminated)throw new se(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new se(X.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},OS(r)}class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(xt.fromBase64String(e))}catch(t){throw new se(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:kt("string",Yn._jsonSchemaVersion),bytes:kt("string")};class hd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dy{constructor(e){this._methodName=e}}class Li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(nc(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:kt("string",Li._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};class ci{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ci(e.vectorValues);throw new se(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:kt("string",ci._jsonSchemaVersion),vectorValues:kt("object")};const AN=/^__.*__$/;class wN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new al(e,this.data,t,this.fieldTransforms)}}class kS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{dataSource:r})}}class my{constructor(e,t,s,o,u,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new my({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Pf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(PS(this.dataSource)&&AN.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class IN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||sd(e)}createContext(e,t,s,o=!1){return new my({dataSource:e,methodName:t,targetDoc:s,path:dt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gy(r){const e=r._freezeSettings(),t=sd(r._databaseId);return new IN(r._databaseId,!!e.ignoreUndefinedProperties,t)}function jS(r,e,t,s,o,u={}){const c=r.createContext(u.merge||u.mergeFields?2:0,e,t,o);py("Data must be an object, but it was:",c,s);const m=zS(s,c);let g,p;if(u.merge)g=new Tn(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const _=[];for(const b of u.mergeFields){const A=Ju(e,b,t);if(!c.contains(A))throw new se(X.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);FS(_,A)||_.push(A)}g=new Tn(_),p=c.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,p=c.fieldTransforms;return new wN(new an(m),g,p)}class fd extends dy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}function LS(r,e,t,s){const o=r.createContext(1,e,t);py("Data must be an object, but it was:",o,s);const u=[],c=an.empty();Ir(s,((g,p)=>{const _=qS(e,g,t);p=en(p);const b=o.childContextForFieldPath(_);if(p instanceof fd)u.push(_);else{const A=dd(p,b);A!=null&&(u.push(_),c.set(_,A))}}));const m=new Tn(u);return new kS(c,m,o.fieldTransforms)}function US(r,e,t,s,o,u){const c=r.createContext(1,e,t),m=[Ju(e,s,t)],g=[o];if(u.length%2!=0)throw new se(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(Ju(e,u[A])),g.push(u[A+1]);const p=[],_=an.empty();for(let A=m.length-1;A>=0;--A)if(!FS(p,m[A])){const O=m[A];let j=g[A];j=en(j);const K=c.childContextForFieldPath(O);if(j instanceof fd)p.push(O);else{const Z=dd(j,K);Z!=null&&(p.push(O),_.set(O,Z))}}const b=new Tn(p);return new kS(_,b,c.fieldTransforms)}function dd(r,e){if(BS(r=en(r)))return py("Unsupported field value:",e,r),zS(r,e);if(r instanceof dy)return(function(s,o){if(!PS(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let g=dd(m,o.childContextForArray(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=en(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Je.fromDate(s);return{timestampValue:Wo(o.serializer,u)}}if(s instanceof Je){const u=new Je(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wo(o.serializer,u)}}if(s instanceof Li)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:R1(o.serializer,s._byteString)};if(s instanceof St){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Qp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ci)return(function(c,m){const g=c instanceof ci?c.toArray():c;return{mapValue:{fields:{[jp]:{stringValue:Lp},[Ko]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw m.createError("VectorValues must only contain numeric values.");return qp(m.serializer,_)}))}}}}}})(s,o);if(U1(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Cp(s)}`)})(r,e)}function zS(r,e){const t={};return Qb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(r,((s,o)=>{const u=dd(o,e.childContextForField(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function BS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Je||r instanceof Li||r instanceof Yn||r instanceof St||r instanceof dy||r instanceof ci||U1(r))}function py(r,e,t){if(!BS(t)||!Nb(t)){const s=Cp(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function Ju(r,e,t){if((e=en(e))instanceof hd)return e._internalPath;if(typeof e=="string")return qS(r,e);throw Pf("Field path arguments must be of type string or ",r,!1,void 0,t)}const RN=new RegExp("[~\\*/\\[\\]]");function qS(r,e,t){if(e.search(RN)>=0)throw Pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw Pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Pf(r,e,t,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new se(X.INVALID_ARGUMENT,m+r+g)}function FS(r,e){return r.some((t=>t.isEqual(e)))}class CN{convertValue(e,t="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ir(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[Ko].arrayValue?.values?.map((s=>ft(s.doubleValue)));return new ci(t)}convertGeoPoint(e){return new Li(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$f(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const t=ms(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ke.fromString(e);ge(L1(s),9688,{name:e});const o=new ba(s.get(1),s.get(3)),u=new oe(s.popFirst(5));return o.isEqual(t)||bt(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class HS extends CN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}const ME="@firebase/firestore",OE="4.11.0";function kE(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class GS{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Ju("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NN extends GS{data(){return super.data()}}function DN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function KS(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _a extends GS{constructor(e,t,s,o,u,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ju("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_a._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_a._jsonSchemaVersion="firestore/documentSnapshot/1.0",_a._jsonSchema={type:kt("string",_a._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class cf extends _a{data(e={}){return super.data(e)}}class ko{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Iu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new cf(this._firestore,this._userDataWriter,s.key,s,new Iu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Iu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Iu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),_=c.indexOf(m.doc.key)),{type:VN(m.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function VN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:r})}}ko._jsonSchemaVersion="firestore/querySnapshot/1.0",ko._jsonSchema={type:kt("string",ko._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class MN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gy(e)}set(e,t,s){this._verifyNotCommitted();const o=Lg(e,this._firestore),u=KS(o.converter,t,s),c=jS(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(c.toMutation(o._key,Kt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const u=Lg(e,this._firestore);let c;return c=typeof(t=en(t))=="string"||t instanceof hd?US(this._dataReader,"WriteBatch.update",u._key,t,s,o):LS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Kt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lg(e,this._firestore);return this._mutations=this._mutations.concat(new oc(t._key,Kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lg(r,e){if((r=en(r)).firestore!==e)throw new se(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ON(r){r=Vn(r,St);const e=Vn(r.firestore,ps),t=cd(e);return yN(t,r._key).then((s=>YS(e,r,s)))}function yy(r,e,t){r=Vn(r,St);const s=Vn(r.firestore,ps),o=KS(r.converter,e,t),u=gy(s);return gd(s,[jS(u,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Kt.none())])}function md(r,e,t,...s){r=Vn(r,St);const o=Vn(r.firestore,ps),u=gy(o);let c;return c=typeof(e=en(e))=="string"||e instanceof hd?US(u,"updateDoc",r._key,e,t,s):LS(u,"updateDoc",r._key,e),gd(o,[c.toMutation(r._key,Kt.exists(!0))])}function kN(r){return gd(Vn(r.firestore,ps),[new oc(r._key,Kt.none())])}function QS(r,...e){r=en(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kE(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(kE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,c,m;if(r instanceof St)c=Vn(r.firestore,ps),m=rc(r._key.path),u={next:p=>{e[s]&&e[s](YS(c,r,p))},error:e[s+1],complete:e[s+2]};else{const p=Vn(r,ud);c=Vn(p.firestore,ps),m=p._query;const _=new HS(c);u={next:b=>{e[s]&&e[s](new ko(c,_,p,b))},error:e[s+1],complete:e[s+2]},DN(r._query)}const g=cd(c);return pN(g,m,o,u)}function gd(r,e){const t=cd(r);return _N(t,e)}function YS(r,e,t){const s=t.docs.get(e._key),o=new HS(r);return new _a(r,o,e._key,s,new Iu(t.hasPendingWrites,t.fromCache),e.converter)}function _y(r){return r=Vn(r,ps),cd(r),new MN(r,(e=>gd(r,e)))}(function(e,t=!0){e2(sl),Uo(new Ta("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new ps(new i2(s.getProvider("auth-internal")),new a2(c,s.getProvider("app-check-internal")),H2(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),mr(ME,OE,e),mr(ME,OE,"esm2020")})();function $S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PN=$S,XS=new ec("auth","Firebase",$S());const jf=new xp("@firebase/auth");function jN(r,...e){jf.logLevel<=Pe.WARN&&jf.warn(`Auth (${sl}): ${r}`,...e)}function hf(r,...e){jf.logLevel<=Pe.ERROR&&jf.error(`Auth (${sl}): ${r}`,...e)}function ys(r,...e){throw vy(r,...e)}function Ui(r,...e){return vy(r,...e)}function JS(r,e,t){const s={...PN(),[e]:t};return new ec("auth","Firebase",s).create(e,{appName:r.name})}function _r(r){return JS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vy(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return XS.create(r,...e)}function be(r,e,...t){if(!r)throw vy(e,...t)}function cs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw hf(e),new Error(e)}function _s(r,e){r||cs(e)}function vp(){return typeof self<"u"&&self.location?.href||""}function LN(){return PE()==="http:"||PE()==="https:"}function PE(){return typeof self<"u"&&self.location?.protocol||null}function UN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LN()||Mw()||"connection"in navigator)?navigator.onLine:!0}function zN(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class hc{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=Dw()||Ow()}get(){return UN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ty(r,e){_s(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class WS{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const BN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const qN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FN=new hc(3e4,6e4);function pd(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function cl(r,e,t,s,o={}){return ZS(r,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const m=tc({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...u};return Vw()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&il(r.emulatorConfig.host)&&(p.credentials="include"),WS.fetch()(await tx(r,r.config.apiHost,t,m),p)})}async function ZS(r,e,t){r._canInitEmulator=!1;const s={...BN,...e};try{const o=new HN(r),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Jh(r,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jh(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Jh(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw Jh(r,"user-disabled",c);const _=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw JS(r,_,p);ys(r,_)}}catch(o){if(o instanceof Ts)throw o;ys(r,"network-request-failed",{message:String(o)})}}async function ex(r,e,t,s,o={}){const u=await cl(r,e,t,s,o);return"mfaPendingCredential"in u&&ys(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function tx(r,e,t,s){const o=`${e}${t}?${s}`,u=r,c=u.config.emulator?Ty(r.config,o):`${r.config.apiScheme}://${o}`;return qN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class HN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ui(this.auth,"network-request-failed")),FN.get())})}}function Jh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ui(r,e,s);return o.customData._tokenResponse=t,o}async function GN(r,e){return cl(r,"POST","/v1/accounts:delete",e)}async function Lf(r,e){return cl(r,"POST","/v1/accounts:lookup",e)}function Lu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KN(r,e=!1){const t=en(r),s=await t.getIdToken(e),o=Ey(s);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:Lu(Ug(o.auth_time)),issuedAtTime:Lu(Ug(o.iat)),expirationTime:Lu(Ug(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Ug(r){return Number(r)*1e3}function Ey(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const o=ib(t);return o?JSON.parse(o):(hf("Failed to decode base64 JWT payload"),null)}catch(o){return hf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function jE(r){const e=Ey(r);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ts&&QN(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function QN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class YN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Tp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uf(r){const e=r.auth,t=await r.getIdToken(),s=await Wu(r,Lf(e,{idToken:t}));be(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?nx(o.providerUserInfo):[],c=XN(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!c?.length,p=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,_)}async function $N(r){const e=en(r);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XN(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function nx(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function JN(r,e){const t=await ZS(r,{},async()=>{const s=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,c=await tx(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&il(r.emulatorConfig.host)&&(g.credentials="include"),WS.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WN(r,e){return cl(r,"POST","/v2/accounts:revokeToken",pd(r,e))}class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=jE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await JN(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,c=new Po;return s&&(be(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return cs("not implemented")}}function rr(r,e){be(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new YN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Wu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KN(this,e)}reload(){return $N(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await Wu(this,GN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:O,providerData:j,stsTokenManager:K}=t;be(b&&K,e,"internal-error");const Z=Po.fromJSON(this.name,K);be(typeof b=="string",e,"internal-error"),rr(s,e.name),rr(o,e.name),be(typeof A=="boolean",e,"internal-error"),be(typeof O=="boolean",e,"internal-error"),rr(u,e.name),rr(c,e.name),rr(m,e.name),rr(g,e.name),rr(p,e.name),rr(_,e.name);const ue=new ui({uid:b,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:O,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:Z,createdAt:p,lastLoginAt:_});return j&&Array.isArray(j)&&(ue.providerData=j.map(ne=>({...ne}))),g&&(ue._redirectEventId=g),ue}static async _fromIdTokenResponse(e,t,s=!1){const o=new Po;o.updateFromServerResponse(t);const u=new ui({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Uf(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?nx(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Po;m.updateFromIdToken(s);const g=new ui({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const LE=new Map;function hs(r){_s(r instanceof Function,"Expected a class definition");let e=LE.get(r);return e?(_s(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,LE.set(r,e),e)}class ix{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ix.type="NONE";const UE=ix;function ff(r,e,t){return`firebase:${r}:${e}:${t}`}class jo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=ff(this.userKey,o.apiKey,u),this.fullPersistenceKey=ff("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lf(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new jo(hs(UE),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||hs(UE);const c=ff(s,e.config.apiKey,e.name);let m=null;for(const p of t)try{const _=await p._get(c);if(_){let b;if(typeof _=="string"){const A=await Lf(e,{idToken:_}).catch(()=>{});if(!A)break;b=await ui._fromGetAccountInfoResponse(e,A,_)}else b=ui._fromJSON(e,_);p!==u&&(m=b),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new jo(u,e,s):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new jo(u,e,s))}}function zE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ox(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ux(e))return"Blackberry";if(cx(e))return"Webos";if(rx(e))return"Safari";if((e.includes("chrome/")||ax(e))&&!e.includes("edge/"))return"Chrome";if(lx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function sx(r=Ut()){return/firefox\//i.test(r)}function rx(r=Ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ax(r=Ut()){return/crios\//i.test(r)}function ox(r=Ut()){return/iemobile/i.test(r)}function lx(r=Ut()){return/android/i.test(r)}function ux(r=Ut()){return/blackberry/i.test(r)}function cx(r=Ut()){return/webos/i.test(r)}function by(r=Ut()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ZN(r=Ut()){return by(r)&&!!window.navigator?.standalone}function eD(){return kw()&&document.documentMode===10}function hx(r=Ut()){return by(r)||lx(r)||cx(r)||ux(r)||/windows phone/i.test(r)||ox(r)}function fx(r,e=[]){let t;switch(r){case"Browser":t=zE(Ut());break;case"Worker":t=`${zE(Ut())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sl}/${s}`}class tD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function nD(r,e={}){return cl(r,"GET","/v2/passwordPolicy",pd(r,e))}const iD=6;class sD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class rD{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BE(this),this.idTokenSubscription=new BE(this),this.beforeStateQueue=new tD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lf(this,{idToken:e}),s=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(li(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(_r(this));const t=e?en(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nD(this),t=new sD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await WN(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hs(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&jN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function yd(r){return en(r)}class BE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bw(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aD(r){Sy=r}function oD(r){return Sy.loadJS(r)}function lD(){return Sy.gapiScript}function uD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function cD(r,e){const t=wp(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(va(u,e??{}))return o;ys(o,"already-initialized")}return t.initialize({options:e})}function hD(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(hs);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function fD(r,e,t){const s=yd(r);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=dx(e),{host:c,port:m}=dD(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},_=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(va(p,s.config.emulator)&&va(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,il(c)?(lb(`${u}//${c}${g}`),ub("Auth",!0)):mD()}function dx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function dD(r){const e=dx(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:qE(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:qE(c)}}}function qE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function mD(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class mx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,t){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}async function Lo(r,e){return ex(r,"POST","/v1/accounts:signInWithIdp",pd(r,e))}const gD="http://localhost";class Ra extends mx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ys("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const c=new Ra(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Lo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:gD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tc(t)}return e}}class gx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fc extends gx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class or extends fc{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";class lr extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return lr.credential(t,s)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";class ur extends fc{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";class cr extends fc{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return cr.credential(t,s)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";async function pD(r,e){return ex(r,"POST","/v1/accounts:signUp",pd(r,e))}class xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await ui._fromIdTokenResponse(e,s,o),c=FE(s);return new xr({user:u,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=FE(s);return new xr({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function FE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function yD(r){if(li(r.app))return Promise.reject(_r(r));const e=yd(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new xr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await pD(e,{returnSecureToken:!0}),s=await xr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}class zf extends Ts{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new zf(e,t,s,o)}}function px(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(r,u,e,s):u})}async function _D(r,e,t=!1){const s=await Wu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return xr._forOperation(r,"link",s)}async function vD(r,e,t=!1){const{auth:s}=r;if(li(s.app))return Promise.reject(_r(s));const o="reauthenticate";try{const u=await Wu(r,px(s,o,e,r),t);be(u.idToken,s,"internal-error");const c=Ey(u.idToken);be(c,s,"internal-error");const{sub:m}=c;return be(r.uid===m,s,"user-mismatch"),xr._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ys(s,"user-mismatch"),u}}async function TD(r,e,t=!1){if(li(r.app))return Promise.reject(_r(r));const s="signIn",o=await px(r,s,e),u=await xr._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(u.user),u}function ED(r,e,t,s){return en(r).onIdTokenChanged(e,t,s)}function bD(r,e,t){return en(r).beforeAuthStateChanged(e,t)}const Bf="__sak";class yx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bf,"1"),this.storage.removeItem(Bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const SD=1e3,xD=10;class _x extends yx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);eD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,xD):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},SD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_x.type="LOCAL";const AD=_x;class vx extends yx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vx.type="SESSION";const Tx=vx;function wD(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class _d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new _d(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await wD(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];function xy(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class ID{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=xy("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function zi(){return window}function RD(r){zi().location.href=r}function Ex(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function CD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ND(){return navigator?.serviceWorker?.controller||null}function DD(){return Ex()?self:null}const bx="firebaseLocalStorageDb",VD=1,qf="firebaseLocalStorage",Sx="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vd(r,e){return r.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function MD(){const r=indexedDB.deleteDatabase(bx);return new dc(r).toPromise()}function Ep(){const r=indexedDB.open(bx,VD);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(qf,{keyPath:Sx})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(qf)?e(s):(s.close(),await MD(),e(await Ep()))})})}async function HE(r,e,t){const s=vd(r,!0).put({[Sx]:e,value:t});return new dc(s).toPromise()}async function OD(r,e){const t=vd(r,!1).get(e),s=await new dc(t).toPromise();return s===void 0?null:s.value}function GE(r,e){const t=vd(r,!0).delete(e);return new dc(t).toPromise()}const kD=800,PD=3;class xx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>PD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ex()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance(DD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await CD(),!this.activeServiceWorker)return;this.sender=new ID(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ND()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await HE(e,Bf,"1"),await GE(e,Bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>HE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>OD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=vd(o,!1).getAll();return new dc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xx.type="LOCAL";const jD=xx;new hc(3e4,6e4);function LD(r,e){return e?hs(e):(be(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Ay extends mx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UD(r){return TD(r.auth,new Ay(r),r.bypassAuthState)}function zD(r){const{auth:e,user:t}=r;return be(t,e,"internal-error"),vD(t,new Ay(r),r.bypassAuthState)}async function BD(r){const{auth:e,user:t}=r;return be(t,e,"internal-error"),_D(t,new Ay(r),r.bypassAuthState)}class Ax{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UD;case"linkViaPopup":case"linkViaRedirect":return BD;case"reauthViaPopup":case"reauthViaRedirect":return zD;default:ys(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qD=new hc(2e3,1e4);class Vo extends Ax{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=xy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qD.get())};e()}}Vo.currentPopupAction=null;const FD="pendingRedirect",df=new Map;class HD extends Ax{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const s=await GD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GD(r,e){const t=YD(e),s=QD(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function KD(r,e){df.set(r._key(),e)}function QD(r){return hs(r._redirectPersistence)}function YD(r){return ff(FD,r.config.apiKey,r.name)}async function $D(r,e,t=!1){if(li(r.app))return Promise.reject(_r(r));const s=yd(r),o=LD(s,e),c=await new HD(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const XD=600*1e3;class JD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wx(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ui(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XD&&this.cachedEventUids.clear(),this.cachedEventUids.has(KE(e))}saveEventToCache(e){this.cachedEventUids.add(KE(e)),this.lastProcessedEventTime=Date.now()}}function KE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function wx({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function WD(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wx(r);default:return!1}}async function ZD(r,e={}){return cl(r,"GET","/v1/projects",e)}const e4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t4=/^https?/;async function n4(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ZD(r);for(const t of e)try{if(i4(t))return}catch{}ys(r,"unauthorized-domain")}function i4(r){const e=vp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!t4.test(t))return!1;if(e4.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const s4=new hc(3e4,6e4);function QE(){const r=zi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function r4(r){return new Promise((e,t)=>{function s(){QE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QE(),t(Ui(r,"network-request-failed"))},timeout:s4.get()})}if(zi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(zi().gapi?.load)s();else{const o=uD("iframefcb");return zi()[o]=()=>{gapi.load?s():t(Ui(r,"network-request-failed"))},oD(`${lD()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw mf=null,e})}let mf=null;function a4(r){return mf=mf||r4(r),mf}const o4=new hc(5e3,15e3),l4="__/auth/iframe",u4="emulator/auth/iframe",c4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f4(r){const e=r.config;be(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Ty(e,u4):`https://${r.config.authDomain}/${l4}`,s={apiKey:e.apiKey,appName:r.name,v:sl},o=h4.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${tc(s).slice(1)}`}async function d4(r){const e=await a4(r),t=zi().gapi;return be(t,r,"internal-error"),e.open({where:document.body,url:f4(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c4,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=Ui(r,"network-request-failed"),m=zi().setTimeout(()=>{u(c)},o4.get());function g(){zi().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(c)})}))}const m4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g4=500,p4=600,y4="_blank",_4="http://localhost";class YE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v4(r,e,t,s=g4,o=p4){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...m4,width:s.toString(),height:o.toString(),top:u,left:c},p=Ut().toLowerCase();t&&(m=ax(p)?y4:t),sx(p)&&(e=e||_4,g.scrollbars="yes");const _=Object.entries(g).reduce((A,[O,j])=>`${A}${O}=${j},`,"");if(ZN(p)&&m!=="_self")return T4(e||"",m),new YE(null);const b=window.open(e||"",m,_);be(b,r,"popup-blocked");try{b.focus()}catch{}return new YE(b)}function T4(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const E4="__/auth/handler",b4="emulator/auth/handler",S4=encodeURIComponent("fac");async function $E(r,e,t,s,o,u){be(r.config.authDomain,r,"auth-domain-config-required"),be(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:sl,eventId:o};if(e instanceof gx){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",zw(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))c[_]=b}if(e instanceof fc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await r._getAppCheckToken(),p=g?`#${S4}=${encodeURIComponent(g)}`:"";return`${x4(r)}?${tc(m).slice(1)}${p}`}function x4({config:r}){return r.emulator?Ty(r,b4):`https://${r.authDomain}/${E4}`}const zg="webStorageSupport";class A4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tx,this._completeRedirectFn=$D,this._overrideRedirectResult=KD}async _openPopup(e,t,s,o){_s(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await $E(e,t,s,vp(),o);return v4(e,u,xy())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await $E(e,t,s,vp(),o);return RD(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(_s(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await d4(e),s=new JD(e);return t.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zg,{type:zg},o=>{const u=o?.[0]?.[zg];u!==void 0&&t(!!u),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=n4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hx()||rx()||by()}}const w4=A4;var XE="@firebase/auth",JE="1.12.0";class I4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function R4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C4(r){Uo(new Ta("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fx(r)},p=new rD(s,o,u,g);return hD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Uo(new Ta("auth-internal",e=>{const t=yd(e.getProvider("auth").getImmediate());return(s=>new I4(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(XE,JE,R4(r)),mr(XE,JE,"esm2020")}const N4=300,D4=ob("authIdTokenMaxAge")||N4;let WE=null;const V4=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>D4)return;const o=t?.token;WE!==o&&(WE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function M4(r=yb()){const e=wp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=cD(r,{popupRedirectResolver:w4,persistence:[jD,AD,Tx]}),s=ob("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=V4(u.toString());bD(t,c,()=>c(t.currentUser)),ED(t,m=>c(m))}}const o=rb("auth");return o&&fD(t,`http://${o}`),t}function O4(){return document.getElementsByTagName("head")?.[0]??document}aD({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Ui("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",O4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C4("Browser");const k4={apiKey:"AIzaSyDGvL7gs3AMDRV3qxnYfo9msTBUS5rXmkU",authDomain:"weekly-task-manager-76f3f.firebaseapp.com",projectId:"weekly-task-manager-76f3f",storageBucket:"weekly-task-manager-76f3f.firebasestorage.app",messagingSenderId:"795879343853",appId:"1:795879343853:web:e5d538a14446d7502daee4"},Ix=pb(k4),tn=bN(Ix),P4=M4(Ix);SN(tn).catch(r=>{r.code==="failed-precondition"?console.warn("Firestore persistence: Multiple tabs open"):r.code==="unimplemented"&&console.warn("Firestore persistence: Browser not supported")});async function j4(){try{await yD(P4)}catch(r){console.error("Anonymous auth failed:",r)}}function L4(r){const e=MS(tn,"tasks");return QS(e,t=>{const s=t.docs.map(u=>({...u.data(),id:u.id})),o={fromCache:t.metadata.fromCache,hasPendingWrites:t.metadata.hasPendingWrites};r(s,o)})}function U4(r){const e=MS(tn,"weekSnapshots");return QS(e,t=>{const s={};t.docs.forEach(o=>{s[o.id]=o.data()}),r(s)})}async function z4(r){const e=hi(tn,"tasks",r.id);await yy(e,{...r,status:"active"})}async function B4(r,e){const t=hi(tn,"tasks",r);await md(t,{...e,updatedAt:new Date().toISOString()})}async function q4(r){const e=hi(tn,"tasks",r);await md(e,{status:"deleted",deletedAt:new Date().toISOString()})}async function F4(r){const e=hi(tn,"tasks",r);await md(e,{status:"archived",archivedAt:new Date().toISOString()})}async function ZE(r){const e=hi(tn,"tasks",r);await md(e,{status:"active",deletedAt:null,archivedAt:null,updatedAt:new Date().toISOString()})}async function H4(r){const e=hi(tn,"tasks",r);await kN(e)}async function G4(r){const e=_y(tn);r.forEach(t=>{const s=hi(tn,"tasks",t);e.delete(s)}),await e.commit()}async function bp(r,e,t){const s=hi(tn,"weekSnapshots",r);await yy(s,{...e,savedBy:t||"anonymous",savedAt:new Date().toISOString()})}async function K4(r){const e=_y(tn);r.forEach(({id:t,data:s})=>{const o=hi(tn,"tasks",t);e.update(o,{...s,updatedAt:new Date().toISOString()})}),await e.commit()}async function Rx(r){const e=_y(tn);r.forEach(t=>{const s=hi(tn,"tasks",t.id);e.set(s,t)}),await e.commit()}async function Q4(){try{const r=hi(tn,"metadata","migration"),e=await ON(r);if(e.exists())return console.log("Migration already completed:",e.data()),!1;const t=localStorage.getItem("wtm-tasks"),s=localStorage.getItem("wtm-deleted"),o=localStorage.getItem("wtm-archived"),u=localStorage.getItem("wtm-snapshots");if(!t&&!s&&!o&&!u)return console.log("No localStorage data found, skipping migration"),!1;const c=t?JSON.parse(t):[],m=s?JSON.parse(s):[],g=o?JSON.parse(o):[],p=u?JSON.parse(u):{},_=[...c.map(A=>({...A,status:"active"})),...m.map(A=>({...A,status:"deleted"})),...g.map(A=>({...A,status:"archived"}))];if(_.length>0)for(let O=0;O<_.length;O+=500){const j=_.slice(O,O+500);await Rx(j)}const b=Object.keys(p);for(const A of b)await bp(A,p[A],"migration");return await yy(r,{migratedAt:new Date().toISOString(),taskCount:_.length,snapshotCount:b.length,activeTasks:c.length,deletedTasks:m.length,archivedTasks:g.length}),console.log(`Migration complete: ${_.length} tasks, ${b.length} snapshots`),!0}catch(r){throw console.error("Migration failed:",r),r}}const Cx=we.createContext(null);function Y4({children:r}){const[e,t]=we.useState([]),[s,o]=we.useState({}),[u,c]=we.useState(!0),m=we.useMemo(()=>e.filter(w=>w.status==="active"),[e]),g=we.useMemo(()=>e.filter(w=>w.status==="deleted"),[e]),p=we.useMemo(()=>e.filter(w=>w.status==="archived"),[e]);we.useEffect(()=>{let w,I;async function V(){await j4(),await Q4(),w=L4(N=>{t(N),c(!1)}),I=U4(N=>{o(N)})}return V(),()=>{w?.(),I?.()}},[]);const _=we.useCallback(async w=>{const I=new Date().toISOString(),V={id:_w(),...w,progress:w.progress||0,weeklyHistory:{},status:"active",createdAt:I,updatedAt:I};return await z4(V),V},[]),b=we.useCallback(async(w,I)=>{await B4(w,I)},[]),A=we.useCallback(async w=>{await q4(w)},[]),O=we.useCallback(async w=>{await F4(w)},[]),j=we.useCallback(async w=>{await ZE(w)},[]),K=we.useCallback(async w=>{await ZE(w)},[]),Z=we.useCallback(async w=>{await H4(w)},[]),ue=we.useCallback(async()=>{const w=g.map(I=>I.id);await G4(w)},[g]),ne=we.useCallback(async w=>{const I=w||iT(),V={};m.forEach(P=>{V[P.id]={progress:P.progress,done:P.done,notDone:P.notDone,notDoneReason:P.notDoneReason,issues:P.issues,consultation:P.consultation}}),await bp(I,V);const N=m.map(P=>({id:P.id,data:{weeklyHistory:{...P.weeklyHistory,[I]:{progress:P.progress}}}}));N.length>0&&await K4(N)},[m]),le=we.useCallback(w=>{const I=iT(),V=w.weeklyHistory||{},N=Object.keys(V).sort(),P=N.indexOf(I);if(P<=0){const Ze=N.filter(Q=>Q<I);if(Ze.length===0)return null;const yt=Ze[Ze.length-1];return w.progress-(V[yt]?.progress||0)}const C=N[P-1];return w.progress-(V[C]?.progress||0)},[]),te=we.useCallback(w=>m.filter(I=>I.memberId===w),[m]),_e=we.useCallback(w=>m.filter(I=>I.category===w),[m]),Te=we.useCallback(async w=>{const I=new Date().toISOString(),V=[];if(w.tasks&&V.push(...w.tasks.map(N=>({...N,status:"active",updatedAt:N.updatedAt||I,createdAt:N.createdAt||I}))),w.deletedTasks&&V.push(...w.deletedTasks.map(N=>({...N,status:"deleted",deletedAt:N.deletedAt||I,updatedAt:N.updatedAt||I,createdAt:N.createdAt||I}))),w.archivedTasks&&V.push(...w.archivedTasks.map(N=>({...N,status:"archived",archivedAt:N.archivedAt||I,updatedAt:N.updatedAt||I,createdAt:N.createdAt||I}))),V.length>0)for(let P=0;P<V.length;P+=500)await Rx(V.slice(P,P+500));if(w.weekSnapshots)for(const[N,P]of Object.entries(w.weekSnapshots))await bp(N,P,"import")},[]),R=we.useCallback(()=>({tasks:m,weekSnapshots:s,deletedTasks:g,archivedTasks:p,exportedAt:new Date().toISOString()}),[m,s,g,p]);return T.jsx(Cx.Provider,{value:{tasks:m,weekSnapshots:s,deletedTasks:g,archivedTasks:p,addTask:_,updateTask:b,deleteTask:A,archiveTask:O,restoreFromTrash:j,restoreFromArchive:K,permanentlyDelete:Z,emptyTrash:ue,saveWeeklySnapshot:ne,getProgressDelta:le,getTasksByMember:te,getTasksByCategory:_e,importData:Te,exportData:R,isLoading:u},children:r})}function Fi(){const r=we.useContext(Cx);if(!r)throw new Error("useTaskContext must be used within TaskProvider");return r}function $4({onExport:r,onImport:e}){const{saveWeeklySnapshot:t}=Fi();return T.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-30",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center",children:T.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Weekly Task Manager"}),T.jsx("p",{className:"text-xs text-gray-500",children:pw()})]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>t(),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition cursor-pointer",children:""}),T.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:""}),T.jsxs("label",{className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:["",T.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:e})]})]})]})})}const qi=[{id:"tanaka_k",nameJa:"",nameEn:"Keisuke Tanaka",color:"#3b82f6",sfUserId:"0055h000005vdi3AAA",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvuN/T"},{id:"mochizuki",nameJa:"",nameEn:"Takashi Mochizuki",color:"#8b5cf6",sfUserId:"0055h000001USjaAAG",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h0000019WFm/T"},{id:"tanaka_j",nameJa:"",nameEn:"Jun Tanaka",color:"#06b6d4",sfUserId:"0055h000005vdTDAAY",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvuX/T"},{id:"tago",nameJa:"",nameEn:"Shoichiro Tago",color:"#f59e0b",sfUserId:"005J20000011BmCIAU",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/729J2000000kB3i/T"},{id:"tsubosaka",nameJa:"",nameEn:"Seiko Tsubosaka",color:"#ec4899",sfUserId:"0055h000005KHzPAAW",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvwO/T"},{id:"osawa",nameJa:"",nameEn:"Naoko Osawa",color:"#10b981",sfUserId:"0055h00000BPJdVAAX",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000USCE/T"}],vs=[{id:"oandm",label:"O&M",color:"#3b82f6"},{id:"power_gen",label:"",color:"#10b981"},{id:"estimate_report",label:"",color:"#f59e0b"},{id:"ai_asset",label:"AI",color:"#8b5cf6"},{id:"equipment",label:"",color:"#06b6d4"},{id:"operation",label:"",color:"#64748b"},{id:"smart_meter",label:"",color:"#ec4899"},{id:"transfer",label:"V1V2PPH",color:"#f97316"},{id:"other",label:"",color:"#94a3b8"}],mc=[{id:"project",label:"",color:"#3b82f6",icon:""},{id:"routine",label:"",color:"#10b981",icon:""}],X4=[{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""}];function wy({member:r,size:e="sm"}){const[t,s]=we.useState(!1),o={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-14 h-14 text-xl"},u=o[e]||o.sm;return r.sfPhotoUrl&&!t?T.jsx("img",{src:r.sfPhotoUrl,alt:r.nameJa,onError:()=>s(!0),className:`${u} rounded-full object-cover`}):T.jsx("div",{className:`${u} rounded-full flex items-center justify-center text-white font-bold`,style:{backgroundColor:r.color},children:r.nameJa.charAt(0)})}function J4({selectedMember:r,onSelectMember:e,showDashboard:t,onShowDashboard:s,activeView:o,onChangeView:u}){const{tasks:c,deletedTasks:m,archivedTasks:g}=Fi(),p=b=>c.filter(A=>A.memberId===b).length,_=b=>{const A=c.filter(O=>O.memberId===b);return A.length===0?0:Math.round(A.reduce((O,j)=>O+j.progress,0)/A.length)};return T.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 h-[calc(100vh-57px)] overflow-y-auto flex-shrink-0",children:T.jsxs("nav",{className:"p-3",children:[T.jsxs("button",{onClick:s,className:`w-full text-left px-3 py-2.5 rounded-lg mb-1 flex items-center gap-2 transition cursor-pointer ${o==="dashboard"?"bg-blue-50 text-blue-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),""]}),T.jsx("div",{className:"mt-4 mb-2 px-3",children:T.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:""})}),qi.map(b=>T.jsxs("button",{onClick:()=>e(b.id),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${o==="member"&&r===b.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(wy,{member:b,size:"sm"}),T.jsxs("div",{children:[T.jsx("div",{className:"text-sm font-medium",children:b.nameJa}),T.jsxs("div",{className:"text-xs text-gray-400",children:[p(b.id),""]})]})]}),T.jsxs("div",{className:"text-xs text-gray-500",children:[_(b.id),"%"]})]},b.id)),T.jsx("div",{className:"mt-4 mb-2 border-t border-gray-200 pt-3 px-3",children:T.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:""})}),T.jsxs("button",{onClick:()=>u("archive"),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${o==="archive"?"bg-emerald-50 text-emerald-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),T.jsx("span",{className:"text-sm",children:""})]}),g.length>0&&T.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-1.5 py-0.5 rounded-full",children:g.length})]}),T.jsxs("button",{onClick:()=>u("trash"),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${o==="trash"?"bg-red-50 text-red-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),T.jsx("span",{className:"text-sm",children:""})]}),m.length>0&&T.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-1.5 py-0.5 rounded-full",children:m.length})]})]})})}function Zu({progress:r,delta:e,size:t="md"}){const s=u=>u>=80?"bg-green-500":u>=50?"bg-blue-500":u>=25?"bg-yellow-500":"bg-red-400",o=t==="sm"?"h-2":t==="lg"?"h-5":"h-3";return T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`flex-1 ${o} bg-gray-200 rounded-full overflow-hidden`,children:T.jsx("div",{className:`${o} ${s(r)} progress-bar-fill rounded-full`,style:{width:`${Math.min(100,Math.max(0,r))}%`}})}),T.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[40px] text-right",children:[r,"%"]}),e!=null&&T.jsx("span",{className:`text-xs font-medium min-w-[42px] text-right ${e>0?"text-green-600":e<0?"text-red-600":"text-gray-400"}`,children:e>0?`+${e}%`:e<0?`${e}%`:"0%"})]})}function eb({onSelectMember:r}){const{tasks:e}=Fi(),t=_=>{const b=e.filter(ne=>ne.memberId===_),A=b.length,O=A>0?Math.round(b.reduce((ne,le)=>ne+le.progress,0)/A):0,j=b.filter(ne=>ne.progress>=100).length,K=b.filter(ne=>ne.issues).length,Z=b.filter(ne=>ne.consultation).length,ue=b.filter(ne=>ne.dueDate?new Date(ne.dueDate)<new Date&&ne.progress<100:!1).length;return{count:A,avg:O,completed:j,hasIssues:K,hasConsultation:Z,overdue:ue}},s=_=>{const b=e.filter(j=>j.category===_),A=b.length,O=A>0?Math.round(b.reduce((j,K)=>j+K.progress,0)/A):0;return{count:A,avg:O}},o=e.length,u=o>0?Math.round(e.reduce((_,b)=>_+b.progress,0)/o):0,c=e.filter(_=>_.progress>=100).length,m=e.filter(_=>_.dueDate?new Date(_.dueDate)<new Date&&_.progress<100:!1).length,g=e.filter(_=>_.taskType==="project").length,p=e.filter(_=>_.taskType==="routine").length;return T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:""}),T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-8",children:[T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[u,"%"]})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsx("p",{className:"text-2xl font-bold text-green-600",children:c})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsx("p",{className:`text-2xl font-bold ${m>0?"text-red-600":"text-gray-400"}`,children:m})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:" "}),T.jsx("p",{className:"text-2xl font-bold text-blue-500",children:g})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:" "}),T.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:p})]})]}),T.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:qi.map(_=>{const b=t(_.id);return T.jsxs("div",{onClick:()=>r(_.id),className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition cursor-pointer",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[T.jsx(wy,{member:_,size:"md"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-gray-900",children:_.nameJa}),T.jsx("p",{className:"text-xs text-gray-500",children:_.nameEn})]}),T.jsxs("div",{className:"ml-auto text-right",children:[T.jsxs("span",{className:"text-sm text-gray-500",children:[b.count,""]}),T.jsxs("span",{className:"text-xs text-gray-400 block",children:[b.completed,""]})]})]}),T.jsx(Zu,{progress:b.avg,delta:null}),T.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[b.hasIssues>0&&T.jsxs("span",{className:"text-xs text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded",children:[" : ",b.hasIssues,""]}),b.hasConsultation>0&&T.jsxs("span",{className:"text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:[" : ",b.hasConsultation,""]}),b.overdue>0&&T.jsxs("span",{className:"text-xs text-red-600 bg-red-50 px-1.5 py-0.5 rounded",children:[" : ",b.overdue,""]})]})]},_.id)})}),T.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),T.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:T.jsxs("div",{className:"space-y-3",children:[vs.map(_=>{const b=s(_.id);return b.count===0?null:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium min-w-[140px] text-center",style:{backgroundColor:_.color},children:_.label}),T.jsx("div",{className:"flex-1",children:T.jsx(Zu,{progress:b.avg,delta:null,size:"sm"})}),T.jsxs("span",{className:"text-xs text-gray-500 min-w-[30px] text-right",children:[b.count,""]})]},_.id)}),vs.every(_=>e.filter(b=>b.category===_.id).length===0)&&T.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:""})]})})]})}function W4({value:r}){return T.jsx("span",{className:"inline-flex items-center",title:`: ${r}/5`,children:[1,2,3,4,5].map(e=>T.jsx("span",{className:`text-xs ${e<=r?"text-yellow-400":"text-gray-300"}`,children:""},e))})}function Z4({dueDate:r}){if(!r)return null;const e=new Date(r),t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0);const s=Math.ceil((e-t)/(1e3*60*60*24));let o="text-gray-500 bg-gray-100";s<0?o="text-red-700 bg-red-100":s===0?o="text-orange-700 bg-orange-100":s<=3&&(o="text-yellow-700 bg-yellow-100");const u=`${e.getMonth()+1}/${e.getDate()}`,c=s<0?`${u} (${Math.abs(s)})`:s===0?`${u} ()`:s<=7?`${u} (${s})`:u;return T.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${o} flex items-center gap-0.5`,children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c]})}function eV({task:r,onEdit:e}){const{deleteTask:t,archiveTask:s,updateTask:o,getProgressDelta:u}=Fi(),[c,m]=we.useState(!1),g=vs.find(j=>j.id===r.category),p=mc.find(j=>j.id===r.taskType),_=r.taskType==="routine",b=r.progress>=100,A=u(r),O=j=>j?j<1024?j+" B":j<1024*1024?(j/1024).toFixed(1)+" KB":(j/(1024*1024)).toFixed(1)+" MB":"";return T.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition animate-fade-in",children:T.jsxs("div",{className:"p-4",children:[T.jsxs("div",{className:"flex items-start justify-between mb-2",children:[T.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap flex-1 min-w-0",children:[T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium whitespace-nowrap",style:{backgroundColor:g?.color||"#94a3b8"},children:g?.label||""}),p&&T.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full font-medium whitespace-nowrap",style:{backgroundColor:`${p.color}20`,color:p.color},children:[p.icon," ",p.label]}),r.priority&&T.jsx(W4,{value:r.priority})]}),T.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r.progress>=100&&T.jsx("button",{onClick:()=>{confirm("")&&s(r.id)},className:"p-1 text-gray-400 hover:text-emerald-600 transition cursor-pointer",title:"",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),T.jsx("button",{onClick:()=>e(r),className:"p-1 text-gray-400 hover:text-blue-600 transition cursor-pointer",title:"",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),T.jsx("button",{onClick:()=>{confirm("")&&t(r.id)},className:"p-1 text-gray-400 hover:text-red-600 transition cursor-pointer",title:"",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate flex-1",children:r.title||"()"}),T.jsx(Z4,{dueDate:r.dueDate})]}),T.jsx("div",{className:"mb-3",children:_?T.jsxs("button",{type:"button",onClick:()=>o(r.id,{progress:b?0:100}),className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition cursor-pointer ${b?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[b?T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),b?"":""]}):T.jsx(Zu,{progress:r.progress,delta:A})}),r.done&&T.jsxs("div",{className:"mb-2",children:[T.jsx("span",{className:"text-xs text-green-700 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5 line-clamp-2",children:r.done})]}),r.progress>=100&&r.completionNotes&&T.jsxs("div",{className:"mb-2 bg-emerald-50 rounded-lg px-2 py-1.5",children:[T.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:" :"}),T.jsx("p",{className:"text-xs text-emerald-600 mt-0.5",children:r.completionNotes})]}),T.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[r.issues&&T.jsx("span",{className:"text-xs text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded",children:" "}),r.consultation&&T.jsx("span",{className:"text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:" "}),r.relatedUrls?.length>0&&T.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:[" ",r.relatedUrls.length,""]}),r.attachments?.length>0&&T.jsxs("span",{className:"text-xs text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded",children:[" ",r.attachments.length,""]})]}),T.jsx("button",{onClick:()=>m(!c),className:"text-xs text-blue-600 hover:text-blue-800 cursor-pointer",children:c?" ":" "}),c&&T.jsxs("div",{className:"mt-3 space-y-2.5 border-t border-gray-100 pt-3",children:[r.notDone&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-red-600 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.notDone}),r.notDoneReason&&T.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 italic",children:[": ",r.notDoneReason]})]}),r.issues&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-orange-600 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.issues})]}),r.consultation&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-purple-600 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.consultation})]}),r.remarks&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.remarks})]}),r.relatedUrls?.length>0&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"URL:"}),T.jsx("div",{className:"mt-1 space-y-0.5",children:r.relatedUrls.map((j,K)=>T.jsxs("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),j.label||j.url]},K))})]}),r.attachments?.length>0&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),T.jsx("div",{className:"mt-1 space-y-1",children:r.attachments.map(j=>T.jsxs("a",{href:j.data,download:j.name,className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1 bg-gray-50 rounded px-2 py-1",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),j.name,T.jsxs("span",{className:"text-gray-400 ml-1",children:["(",O(j.size),")"]})]},j.id))})]}),Object.keys(r.weeklyHistory||{}).length>0&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),T.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:Object.entries(r.weeklyHistory).sort().slice(-6).map(([j,K])=>T.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:[yw(j),": ",_?K.progress>=100?"":"":`${K.progress}%`]},j))})]})]})]})})}function tV({value:r,onChange:e}){const[t,s]=we.useState(0);return T.jsxs("div",{className:"flex items-center gap-0.5",children:[[1,2,3,4,5].map(o=>T.jsx("button",{type:"button",onClick:()=>e(o),onMouseEnter:()=>s(o),onMouseLeave:()=>s(0),className:"text-xl cursor-pointer transition-transform hover:scale-110",children:T.jsx("span",{className:o<=(t||r)?"text-yellow-400":"text-gray-300",children:""})},o)),T.jsx("span",{className:"text-xs text-gray-500 ml-2",children:X4.find(o=>o.value===(t||r))?.label||""})]})}function nV({urls:r,onChange:e}){const t=()=>e([...r,{label:"",url:""}]),s=u=>e(r.filter((c,m)=>m!==u)),o=(u,c,m)=>{const g=r.map((p,_)=>_===u?{...p,[c]:m}:p);e(g)};return T.jsxs("div",{className:"space-y-2",children:[r.map((u,c)=>T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx("input",{type:"text",value:u.label,onChange:m=>o(c,"label",m.target.value),placeholder:"",className:"w-1/3 px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),T.jsx("input",{type:"url",value:u.url,onChange:m=>o(c,"url",m.target.value),placeholder:"https://...",className:"flex-1 px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),T.jsx("button",{type:"button",onClick:()=>s(c),className:"p-1 text-red-400 hover:text-red-600 cursor-pointer",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),T.jsxs("button",{type:"button",onClick:t,className:"text-xs text-blue-600 hover:text-blue-800 cursor-pointer flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"URL"]})]})}function iV({attachments:r,onChange:e}){const t=u=>{Array.from(u.target.files).forEach(m=>{if(m.size>2097152){alert(`${m.name} 2MB2MB`);return}const g=new FileReader;g.onload=()=>{const p={id:Date.now().toString(36)+Math.random().toString(36).substr(2,5),name:m.name,size:m.size,type:m.type,data:g.result,addedAt:new Date().toISOString()};e(_=>[..._,p])},g.readAsDataURL(m)}),u.target.value=""},s=u=>{e(c=>c.filter(m=>m.id!==u))},o=u=>u<1024?u+" B":u<1048576?(u/1024).toFixed(1)+" KB":(u/1048576).toFixed(1)+" MB";return T.jsxs("div",{className:"space-y-2",children:[r.map(u=>T.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2",children:[T.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),T.jsx("span",{className:"text-sm text-gray-700 truncate flex-1",children:u.name}),T.jsx("span",{className:"text-xs text-gray-400",children:o(u.size)}),T.jsx("button",{type:"button",onClick:()=>s(u.id),className:"p-0.5 text-red-400 hover:text-red-600 cursor-pointer",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},u.id)),T.jsxs("label",{className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 cursor-pointer",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"2MB",T.jsx("input",{type:"file",multiple:!0,onChange:t,className:"hidden"})]})]})}function sV({task:r,defaultMemberId:e,onClose:t}){const{addTask:s,updateTask:o}=Fi(),u=!!r,[c,m]=we.useState({memberId:r?.memberId||e||qi[0].id,category:r?.category||vs[0].id,taskType:r?.taskType||"project",title:r?.title||"",priority:r?.priority||3,dueDate:r?.dueDate||"",progress:r?.progress||0,done:r?.done||"",notDone:r?.notDone||"",notDoneReason:r?.notDoneReason||"",issues:r?.issues||"",consultation:r?.consultation||"",completionNotes:r?.completionNotes||"",remarks:r?.remarks||"",relatedUrls:r?.relatedUrls||[],attachments:r?.attachments||[]});we.useEffect(()=>{const _=b=>{b.key==="Escape"&&t()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[t]);const g=_=>{_.preventDefault(),u?o(r.id,c):s(c),t()},p=(_,b)=>m(A=>({...A,[_]:b}));return T.jsx("div",{className:"modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4",children:T.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto animate-fade-in",children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsx("h2",{className:"text-lg font-bold text-gray-900",children:u?"":""}),T.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 cursor-pointer",children:T.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),T.jsxs("form",{onSubmit:g,className:"space-y-5",children:[T.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),T.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("select",{value:c.memberId,onChange:_=>p("memberId",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:qi.map(_=>T.jsx("option",{value:_.id,children:_.nameJa},_.id))})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("select",{value:c.category,onChange:_=>p("category",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:vs.map(_=>T.jsx("option",{value:_.id,children:_.label},_.id))})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("div",{className:"flex gap-2",children:mc.map(_=>T.jsxs("button",{type:"button",onClick:()=>{p("taskType",_.id),_.id==="routine"&&m(b=>({...b,taskType:_.id,progress:b.progress>=50?100:0}))},className:`flex-1 px-3 py-2 text-sm rounded-lg border transition cursor-pointer ${c.taskType===_.id?"border-blue-500 bg-blue-50 text-blue-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[_.icon," ",_.label]},_.id))})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("input",{type:"text",value:c.title,onChange:_=>p("title",_.target.value),placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx(tV,{value:c.priority,onChange:_=>p("priority",_)})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("input",{type:"date",value:c.dueDate,onChange:_=>p("dueDate",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),c.taskType==="routine"?T.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4",children:[T.jsx("label",{className:"block text-sm font-medium text-emerald-800 mb-2",children:""}),T.jsxs("div",{className:"flex gap-3",children:[T.jsxs("button",{type:"button",onClick:()=>p("progress",100),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition cursor-pointer ${c.progress>=100?"bg-emerald-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]}),T.jsxs("button",{type:"button",onClick:()=>p("progress",0),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition cursor-pointer ${c.progress<100?"bg-gray-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),""]})]})]}):T.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[T.jsxs("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:[": ",T.jsxs("span",{className:"text-blue-600 font-bold text-lg",children:[c.progress,"%"]})]}),T.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:c.progress,onChange:_=>p("progress",Number(_.target.value)),className:"w-full accent-blue-600"}),T.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[T.jsx("span",{children:"0%"}),T.jsx("span",{children:"25%"}),T.jsx("span",{children:"50%"}),T.jsx("span",{children:"75%"}),T.jsx("span",{children:"100%"})]})]}),T.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),""]})}),T.jsx("textarea",{value:c.done,onChange:_=>p("done",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-red-600 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),""]})}),T.jsx("textarea",{value:c.notDone,onChange:_=>p("notDone",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-red-400 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-red-300"}),""]})}),T.jsx("textarea",{value:c.notDoneReason,onChange:_=>p("notDoneReason",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-400 focus:border-red-400"})]})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-orange-600 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),""]})}),T.jsx("textarea",{value:c.issues,onChange:_=>p("issues",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-purple-600 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),""]})}),T.jsx("textarea",{value:c.consultation,onChange:_=>p("consultation",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]})]}),T.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),c.progress>=100&&T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-emerald-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),""]})}),T.jsx("textarea",{value:c.completionNotes,onChange:_=>p("completionNotes",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-400"}),""]})}),T.jsx("textarea",{value:c.remarks,onChange:_=>p("remarks",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-400 focus:border-gray-400"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"URL"]})}),T.jsx(nV,{urls:c.relatedUrls,onChange:_=>p("relatedUrls",_)})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),""]})}),T.jsx(iV,{attachments:c.attachments,onChange:_=>{typeof _=="function"?m(b=>({...b,attachments:_(b.attachments)})):p("attachments",_)}})]})]}),T.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[T.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:""}),T.jsx("button",{type:"submit",className:"px-6 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition cursor-pointer",children:u?"":""})]})]})]})})})}function rV({memberId:r}){const{getTasksByMember:e}=Fi(),[t,s]=we.useState(!1),[o,u]=we.useState(null),[c,m]=we.useState("all"),[g,p]=we.useState("all"),[_,b]=we.useState("default"),A=qi.find(te=>te.id===r),O=e(r);let j=O;c!=="all"&&(j=j.filter(te=>te.category===c)),g!=="all"&&(j=j.filter(te=>te.taskType===g)),_==="priority"?j=[...j].sort((te,_e)=>(_e.priority||0)-(te.priority||0)):_==="dueDate"?j=[...j].sort((te,_e)=>te.dueDate?_e.dueDate?new Date(te.dueDate)-new Date(_e.dueDate):-1:1):_==="progress"&&(j=[...j].sort((te,_e)=>_e.progress-te.progress));const K=O.length>0?Math.round(O.reduce((te,_e)=>te+_e.progress,0)/O.length):0,Z=O.filter(te=>te.progress>=100).length,ue=O.filter(te=>te.issues).length,ne=te=>{u(te),s(!0)},le=()=>{s(!1),u(null)};return A?T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"shadow-lg rounded-full",children:T.jsx(wy,{member:A,size:"lg"})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900",children:A.nameJa}),T.jsxs("p",{className:"text-sm text-gray-500",children:[A.nameEn," | ",O.length," |  ",Z," |  ",K,"%",ue>0&&T.jsxs("span",{className:"text-orange-500 ml-1",children:["|  ",ue,""]})]})]})]}),T.jsxs("button",{onClick:()=>{u(null),s(!0)},className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition flex items-center gap-1 cursor-pointer",children:[T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),""]})]}),T.jsxs("div",{className:"flex items-center gap-4 mb-4 flex-wrap",children:[T.jsxs("div",{className:"flex gap-1.5 flex-wrap flex-1",children:[T.jsxs("button",{onClick:()=>m("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${c==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",O.length,")"]}),vs.map(te=>{const _e=O.filter(Te=>Te.category===te.id).length;return _e===0?null:T.jsxs("button",{onClick:()=>m(te.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${c===te.id?"text-white":"text-gray-600 hover:opacity-80"}`,style:c===te.id?{backgroundColor:te.color}:{backgroundColor:`${te.color}20`,color:te.color},children:[te.label," (",_e,")"]},te.id)})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("select",{value:g,onChange:te=>p(te.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-lg",children:[T.jsx("option",{value:"all",children:""}),mc.map(te=>T.jsxs("option",{value:te.id,children:[te.icon," ",te.label]},te.id))]}),T.jsxs("select",{value:_,onChange:te=>b(te.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-lg",children:[T.jsx("option",{value:"default",children:""}),T.jsx("option",{value:"priority",children:""}),T.jsx("option",{value:"dueDate",children:""}),T.jsx("option",{value:"progress",children:""})]})]})]}),j.length>0?T.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:j.map(te=>T.jsx(eV,{task:te,onEdit:ne},te.id))}):T.jsxs("div",{className:"text-center py-12",children:[T.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),T.jsx("p",{className:"text-gray-500",children:""}),T.jsx("button",{onClick:()=>{u(null),s(!0)},className:"mt-3 text-blue-600 hover:text-blue-800 text-sm cursor-pointer",children:"+ "})]}),t&&T.jsx(sV,{task:o,defaultMemberId:r,onClose:le})]}):T.jsx("div",{className:"p-6 text-gray-500",children:""})}function aV(){const{deletedTasks:r,restoreFromTrash:e,permanentlyDelete:t,emptyTrash:s}=Fi(),[o,u]=we.useState("all"),m=[...o==="all"?r:r.filter(_=>_.memberId===o)].sort((_,b)=>new Date(b.deletedAt)-new Date(_.deletedAt)),g=_=>{if(!_)return"";const b=new Date(_);return`${b.getFullYear()}/${b.getMonth()+1}/${b.getDate()} ${b.getHours()}:${String(b.getMinutes()).padStart(2,"0")}`},p=_=>{if(!_)return 0;const b=Date.now()-new Date(_).getTime();return Math.floor(b/(1e3*60*60*24))};return T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:T.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),T.jsxs("p",{className:"text-sm text-gray-500",children:[r.length,""]})]})]}),r.length>0&&T.jsx("button",{onClick:()=>{confirm(`
${r.length}`)&&s()},className:"px-3 py-1.5 text-xs text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition cursor-pointer",children:" "})]}),r.length>0&&T.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[T.jsxs("button",{onClick:()=>u("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${o==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",r.length,")"]}),qi.map(_=>{const b=r.filter(A=>A.memberId===_.id).length;return b===0?null:T.jsxs("button",{onClick:()=>u(_.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${o===_.id?"text-white":"hover:opacity-80"}`,style:o===_.id?{backgroundColor:_.color}:{backgroundColor:`${_.color}20`,color:_.color},children:[_.nameJa," (",b,")"]},_.id)})]}),m.length>0?T.jsx("div",{className:"space-y-3",children:m.map(_=>{const b=qi.find(K=>K.id===_.memberId),A=vs.find(K=>K.id===_.category),O=mc.find(K=>K.id===_.taskType),j=p(_.deletedAt);return T.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 opacity-75 hover:opacity-100 transition",children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 flex-wrap",children:[b&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium",style:{backgroundColor:b.color},children:b.nameJa}),A&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${A.color}20`,color:A.color},children:A.label}),O&&T.jsxs("span",{className:"text-xs text-gray-500",children:[O.icon," ",O.label]})]}),T.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:_.title||"()"}),T.jsx("div",{className:"mb-2 max-w-xs",children:T.jsx(Zu,{progress:_.progress,delta:null})}),T.jsxs("p",{className:"text-xs text-gray-400",children:[": ",g(_.deletedAt),j>0&&T.jsxs("span",{className:"ml-1",children:["(",j,")"]})]})]}),T.jsxs("div",{className:"flex flex-col gap-1.5 ml-3 flex-shrink-0",children:[T.jsxs("button",{onClick:()=>e(_.id),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition cursor-pointer flex items-center gap-1",children:[T.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),""]}),T.jsx("button",{onClick:()=>{confirm("")&&t(_.id)},className:"px-3 py-1.5 text-xs text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition cursor-pointer",children:""})]})]})},_.id)})}):T.jsxs("div",{className:"text-center py-16",children:[T.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:T.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),T.jsx("p",{className:"text-gray-500 font-medium",children:""}),T.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]})]})}function oV(){const{archivedTasks:r,restoreFromArchive:e}=Fi(),[t,s]=we.useState("all"),[o,u]=we.useState("all"),[c,m]=we.useState("");let g=r;if(t!=="all"&&(g=g.filter(b=>b.memberId===t)),o!=="all"&&(g=g.filter(b=>b.category===o)),c.trim()){const b=c.toLowerCase();g=g.filter(A=>(A.title||"").toLowerCase().includes(b)||(A.done||"").toLowerCase().includes(b)||(A.completionNotes||"").toLowerCase().includes(b))}const p=[...g].sort((b,A)=>new Date(A.archivedAt)-new Date(b.archivedAt)),_=b=>{if(!b)return"";const A=new Date(b);return`${A.getFullYear()}/${A.getMonth()+1}/${A.getDate()}`};return T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsx("div",{className:"flex items-center justify-between mb-6",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:T.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),T.jsxs("p",{className:"text-sm text-gray-500",children:[r.length,""]})]})]})}),r.length>0&&T.jsxs("div",{className:"space-y-3 mb-4",children:[T.jsxs("div",{className:"relative",children:[T.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),T.jsx("input",{type:"text",value:c,onChange:b=>m(b.target.value),placeholder:"...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),T.jsxs("div",{className:"flex gap-2 flex-wrap",children:[T.jsx("button",{onClick:()=>s("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${t==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),qi.map(b=>{const A=r.filter(O=>O.memberId===b.id).length;return A===0?null:T.jsxs("button",{onClick:()=>s(b.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${t===b.id?"text-white":"hover:opacity-80"}`,style:t===b.id?{backgroundColor:b.color}:{backgroundColor:`${b.color}20`,color:b.color},children:[b.nameJa," (",A,")"]},b.id)})]}),T.jsxs("div",{className:"flex gap-2 flex-wrap",children:[T.jsx("button",{onClick:()=>u("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${o==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),vs.map(b=>{const A=r.filter(O=>O.category===b.id).length;return A===0?null:T.jsxs("button",{onClick:()=>u(b.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${o===b.id?"text-white":"hover:opacity-80"}`,style:o===b.id?{backgroundColor:b.color}:{backgroundColor:`${b.color}20`,color:b.color},children:[b.label," (",A,")"]},b.id)})]})]}),p.length>0?T.jsx("div",{className:"space-y-3",children:p.map(b=>{const A=qi.find(K=>K.id===b.memberId),O=vs.find(K=>K.id===b.category),j=mc.find(K=>K.id===b.taskType);return T.jsx("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 hover:shadow-md transition",children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 flex-wrap",children:[A&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium",style:{backgroundColor:A.color},children:A.nameJa}),O&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${O.color}20`,color:O.color},children:O.label}),j&&T.jsxs("span",{className:"text-xs text-gray-500",children:[j.icon," ",j.label]}),b.priority&&T.jsx("span",{className:"inline-flex items-center",children:[1,2,3,4,5].map(K=>T.jsx("span",{className:`text-xs ${K<=b.priority?"text-yellow-400":"text-gray-300"}`,children:""},K))})]}),T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsx("span",{className:"text-emerald-500",children:""}),T.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:b.title||"()"})]}),T.jsx("div",{className:"mb-2 max-w-xs",children:T.jsx(Zu,{progress:b.progress,delta:null})}),b.completionNotes&&T.jsxs("div",{className:"bg-emerald-50 rounded-lg px-2 py-1.5 mb-2",children:[T.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-emerald-600 mt-0.5",children:b.completionNotes})]}),b.done&&T.jsxs("p",{className:"text-xs text-gray-500 mb-1 line-clamp-2",children:[T.jsx("span",{className:"font-medium text-gray-600",children:": "}),b.done]}),T.jsxs("p",{className:"text-xs text-gray-400",children:[": ",_(b.archivedAt),b.createdAt&&T.jsxs("span",{className:"ml-2",children:[": ",_(b.createdAt)]})]})]}),T.jsx("div",{className:"ml-3 flex-shrink-0",children:T.jsxs("button",{onClick:()=>e(b.id),className:"px-3 py-1.5 text-xs bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition cursor-pointer flex items-center gap-1",children:[T.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),""]})})]})},b.id)})}):T.jsxs("div",{className:"text-center py-16",children:[T.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:T.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),T.jsx("p",{className:"text-gray-500 font-medium",children:r.length>0?"":""}),T.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]})]})}function lV(){const{tasks:r,exportData:e,importData:t}=Fi(),[s,o]=we.useState("idle"),[u,c]=we.useState(""),[m,g]=we.useState({instanceUrl:localStorage.getItem("sf-instance-url")||"",accessToken:localStorage.getItem("sf-access-token")||""}),[p,_]=we.useState(!1),b=()=>{localStorage.setItem("sf-instance-url",m.instanceUrl),localStorage.setItem("sf-access-token",m.accessToken),_(!1),c("")},A=async()=>{if(!m.instanceUrl||!m.accessToken){c("Salesforce"),_(!0);return}o("syncing"),c("Salesforce...");try{for(const j of r){const K={Name:j.title||"(Untitled)",Member_Id__c:j.memberId,Category__c:j.category,Progress__c:j.progress,Done__c:j.done||"",Not_Done__c:j.notDone||"",Not_Done_Reason__c:j.notDoneReason||"",Issues__c:j.issues||"",Consultation__c:j.consultation||"",External_Id__c:j.id},Z=await fetch(`${m.instanceUrl}/services/data/v59.0/sobjects/Weekly_Task__c/External_Id__c/${j.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${m.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(K)});if(!Z.ok&&Z.status!==201&&Z.status!==204)throw new Error(`Sync failed for task: ${j.title}`)}o("success"),c(`${r.length}Salesforce`)}catch(j){o("error"),c(`: ${j.message}`)}},O=async()=>{if(!m.instanceUrl||!m.accessToken){c("Salesforce"),_(!0);return}o("syncing"),c("Salesforce...");try{const j=encodeURIComponent("SELECT External_Id__c, Name, Member_Id__c, Category__c, Progress__c, Done__c, Not_Done__c, Not_Done_Reason__c, Issues__c, Consultation__c FROM Weekly_Task__c"),K=await fetch(`${m.instanceUrl}/services/data/v59.0/query/?q=${j}`,{headers:{Authorization:`Bearer ${m.accessToken}`}});if(!K.ok)throw new Error("Failed to fetch from Salesforce");const ue=(await K.json()).records.map(ne=>({id:ne.External_Id__c,memberId:ne.Member_Id__c,category:ne.Category__c,title:ne.Name,progress:ne.Progress__c||0,done:ne.Done__c||"",notDone:ne.Not_Done__c||"",notDoneReason:ne.Not_Done_Reason__c||"",issues:ne.Issues__c||"",consultation:ne.Consultation__c||"",weeklyHistory:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));t({tasks:ue}),o("success"),c(`${ue.length}`)}catch(j){o("error"),c(`: ${j.message}`)}};return T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsxs("div",{className:"flex items-center justify-between mb-3",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("svg",{className:"w-5 h-5 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:T.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),T.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Salesforce"})]}),T.jsx("button",{onClick:()=>_(!p),className:"text-xs text-gray-500 hover:text-gray-700 cursor-pointer",children:p?"":""})]}),p&&T.jsxs("div",{className:"mb-3 space-y-2 p-3 bg-gray-50 rounded-lg",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-xs text-gray-600",children:"Instance URL"}),T.jsx("input",{type:"text",value:m.instanceUrl,onChange:j=>g(K=>({...K,instanceUrl:j.target.value})),placeholder:"https://your-org.my.salesforce.com",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-0.5"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs text-gray-600",children:"Access Token"}),T.jsx("input",{type:"password",value:m.accessToken,onChange:j=>g(K=>({...K,accessToken:j.target.value})),placeholder:"Your Salesforce access token",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-0.5"})]}),T.jsx("button",{onClick:b,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:""})]}),u&&T.jsx("div",{className:`text-xs mb-3 p-2 rounded ${s==="error"?"bg-red-50 text-red-600":s==="success"?"bg-green-50 text-green-600":"bg-blue-50 text-blue-600"}`,children:u}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:A,disabled:s==="syncing",className:"flex-1 px-3 py-2 text-xs bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition disabled:opacity-50 cursor-pointer",children:s==="syncing"?"...":"SF "}),T.jsx("button",{onClick:O,disabled:s==="syncing",className:"flex-1 px-3 py-2 text-xs bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition disabled:opacity-50 cursor-pointer",children:s==="syncing"?"...":"SF "})]})]})}function uV(){const{exportData:r,importData:e,isLoading:t}=Fi(),[s,o]=we.useState(qi[0].id),[u,c]=we.useState("dashboard");if(t)return T.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),T.jsx("p",{className:"text-gray-500 text-sm",children:"..."})]})});const m=O=>{o(O),c("member")},g=()=>{c("dashboard")},p=O=>{c(O)},_=()=>{const O=r(),j=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),K=URL.createObjectURL(j),Z=document.createElement("a");Z.href=K,Z.download=`weekly-tasks-${new Date().toISOString().slice(0,10)}.json`,Z.click(),URL.revokeObjectURL(K)},b=O=>{const j=O.target.files?.[0];if(!j)return;const K=new FileReader;K.onload=Z=>{try{const ue=JSON.parse(Z.target.result);confirm(`${ue.tasks?.length||0}
`)&&e(ue)}catch{alert("")}},K.readAsText(j),O.target.value=""},A=()=>{switch(u){case"dashboard":return T.jsx(eb,{onSelectMember:m});case"member":return T.jsx(rV,{memberId:s});case"trash":return T.jsx(aV,{});case"archive":return T.jsx(oV,{});default:return T.jsx(eb,{onSelectMember:m})}};return T.jsxs("div",{className:"min-h-screen bg-gray-50",children:[T.jsx($4,{onExport:_,onImport:b}),T.jsxs("div",{className:"flex",children:[T.jsx(J4,{selectedMember:s,onSelectMember:m,showDashboard:u==="dashboard",onShowDashboard:g,activeView:u,onChangeView:p}),T.jsx("main",{className:"flex-1 min-h-[calc(100vh-57px)] overflow-y-auto",children:A()}),T.jsxs("aside",{className:"w-72 border-l border-gray-200 bg-white p-4 h-[calc(100vh-57px)] overflow-y-auto flex-shrink-0",children:[T.jsx(lV,{}),T.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[T.jsx("h4",{className:"text-xs font-semibold text-gray-500 mb-2",children:""}),T.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" /"})]})]})]})]})]})}gw.createRoot(document.getElementById("root")).render(T.jsx(we.StrictMode,{children:T.jsx(Y4,{children:T.jsx(uV,{})})}));
