(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function HI(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tp={exports:{}},Bu={};var Qb;function GI(){if(Qb)return Bu;Qb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Bu.Fragment=e,Bu.jsx=t,Bu.jsxs=t,Bu}var Yb;function KI(){return Yb||(Yb=1,tp.exports=GI()),tp.exports}var T=KI(),np={exports:{}},De={};var $b;function QI(){if($b)return De;$b=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function R(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,q={};function te(P,J,ae){this.props=P,this.context=J,this.refs=q,this.updater=ae||V}te.prototype.isReactComponent={},te.prototype.setState=function(P,J){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,J,"setState")},te.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function X(){}X.prototype=te.prototype;function re(P,J,ae){this.props=P,this.context=J,this.refs=q,this.updater=ae||V}var ce=re.prototype=new X;ce.constructor=re,L(ce,te.prototype),ce.isPureReactComponent=!0;var de=Array.isArray;function le(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function A(P,J,ae){var me=ae.ref;return{$$typeof:r,type:P,key:J,ref:me!==void 0?me:null,props:ae}}function M(P,J){return A(P.type,J,P.props)}function N(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function k(P){var J={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ae){return J[ae]})}var D=/\/+/g;function Ce(P,J){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):J.toString(36)}function oe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(le,le):(P.status="pending",P.then(function(J){P.status==="pending"&&(P.status="fulfilled",P.value=J)},function(J){P.status==="pending"&&(P.status="rejected",P.reason=J)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Q(P,J,ae,me,Se){var xe=typeof P;(xe==="undefined"||xe==="boolean")&&(P=null);var Ve=!1;if(P===null)Ve=!0;else switch(xe){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(P.$$typeof){case r:case e:Ve=!0;break;case _:return Ve=P._init,Q(Ve(P._payload),J,ae,me,Se)}}if(Ve)return Se=Se(P),Ve=me===""?"."+Ce(P,0):me,de(Se)?(ae="",Ve!=null&&(ae=Ve.replace(D,"$&/")+"/"),Q(Se,J,ae,"",function(ze){return ze})):Se!=null&&(N(Se)&&(Se=M(Se,ae+(Se.key==null||P&&P.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+Ve)),J.push(Se)),1;Ve=0;var st=me===""?".":me+":";if(de(P))for(var Ke=0;Ke<P.length;Ke++)me=P[Ke],xe=st+Ce(me,Ke),Ve+=Q(me,J,ae,xe,Se);else if(Ke=R(P),typeof Ke=="function")for(P=Ke.call(P),Ke=0;!(me=P.next()).done;)me=me.value,xe=st+Ce(me,Ke++),Ve+=Q(me,J,ae,xe,Se);else if(xe==="object"){if(typeof P.then=="function")return Q(oe(P),J,ae,me,Se);throw J=String(P),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function se(P,J,ae){if(P==null)return P;var me=[],Se=0;return Q(P,me,"","",function(xe){return J.call(ae,xe,Se++)}),me}function _e(P){if(P._status===-1){var J=P._result;J=J(),J.then(function(ae){(P._status===0||P._status===-1)&&(P._status=1,P._result=ae)},function(ae){(P._status===0||P._status===-1)&&(P._status=2,P._result=ae)}),P._status===-1&&(P._status=0,P._result=J)}if(P._status===1)return P._result.default;throw P._result}var Ie=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Pe={map:se,forEach:function(P,J,ae){se(P,function(){J.apply(this,arguments)},ae)},count:function(P){var J=0;return se(P,function(){J++}),J},toArray:function(P){return se(P,function(J){return J})||[]},only:function(P){if(!N(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return De.Activity=v,De.Children=Pe,De.Component=te,De.Fragment=t,De.Profiler=a,De.PureComponent=re,De.StrictMode=i,De.Suspense=g,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,De.__COMPILER_RUNTIME={__proto__:null,c:function(P){return C.H.useMemoCache(P)}},De.cache=function(P){return function(){return P.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(P,J,ae){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var me=L({},P.props),Se=P.key;if(J!=null)for(xe in J.key!==void 0&&(Se=""+J.key),J)!I.call(J,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&J.ref===void 0||(me[xe]=J[xe]);var xe=arguments.length-2;if(xe===1)me.children=ae;else if(1<xe){for(var Ve=Array(xe),st=0;st<xe;st++)Ve[st]=arguments[st+2];me.children=Ve}return A(P.type,Se,me)},De.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},De.createElement=function(P,J,ae){var me,Se={},xe=null;if(J!=null)for(me in J.key!==void 0&&(xe=""+J.key),J)I.call(J,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Se[me]=J[me]);var Ve=arguments.length-2;if(Ve===1)Se.children=ae;else if(1<Ve){for(var st=Array(Ve),Ke=0;Ke<Ve;Ke++)st[Ke]=arguments[Ke+2];Se.children=st}if(P&&P.defaultProps)for(me in Ve=P.defaultProps,Ve)Se[me]===void 0&&(Se[me]=Ve[me]);return A(P,xe,Se)},De.createRef=function(){return{current:null}},De.forwardRef=function(P){return{$$typeof:f,render:P}},De.isValidElement=N,De.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:_e}},De.memo=function(P,J){return{$$typeof:p,type:P,compare:J===void 0?null:J}},De.startTransition=function(P){var J=C.T,ae={};C.T=ae;try{var me=P(),Se=C.S;Se!==null&&Se(ae,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(le,Ie)}catch(xe){Ie(xe)}finally{J!==null&&ae.types!==null&&(J.types=ae.types),C.T=J}},De.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},De.use=function(P){return C.H.use(P)},De.useActionState=function(P,J,ae){return C.H.useActionState(P,J,ae)},De.useCallback=function(P,J){return C.H.useCallback(P,J)},De.useContext=function(P){return C.H.useContext(P)},De.useDebugValue=function(){},De.useDeferredValue=function(P,J){return C.H.useDeferredValue(P,J)},De.useEffect=function(P,J){return C.H.useEffect(P,J)},De.useEffectEvent=function(P){return C.H.useEffectEvent(P)},De.useId=function(){return C.H.useId()},De.useImperativeHandle=function(P,J,ae){return C.H.useImperativeHandle(P,J,ae)},De.useInsertionEffect=function(P,J){return C.H.useInsertionEffect(P,J)},De.useLayoutEffect=function(P,J){return C.H.useLayoutEffect(P,J)},De.useMemo=function(P,J){return C.H.useMemo(P,J)},De.useOptimistic=function(P,J){return C.H.useOptimistic(P,J)},De.useReducer=function(P,J,ae){return C.H.useReducer(P,J,ae)},De.useRef=function(P){return C.H.useRef(P)},De.useState=function(P){return C.H.useState(P)},De.useSyncExternalStore=function(P,J,ae){return C.H.useSyncExternalStore(P,J,ae)},De.useTransition=function(){return C.H.useTransition()},De.version="19.2.4",De}var Xb;function my(){return Xb||(Xb=1,np.exports=QI()),np.exports}var z=my();const xt=HI(z);var rp={exports:{}},Fu={},ip={exports:{}},sp={};var Jb;function YI(){return Jb||(Jb=1,(function(r){function e(Q,se){var _e=Q.length;Q.push(se);e:for(;0<_e;){var Ie=_e-1>>>1,Pe=Q[Ie];if(0<a(Pe,se))Q[Ie]=se,Q[_e]=Pe,_e=Ie;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var se=Q[0],_e=Q.pop();if(_e!==se){Q[0]=_e;e:for(var Ie=0,Pe=Q.length,P=Pe>>>1;Ie<P;){var J=2*(Ie+1)-1,ae=Q[J],me=J+1,Se=Q[me];if(0>a(ae,_e))me<Pe&&0>a(Se,ae)?(Q[Ie]=Se,Q[me]=_e,Ie=me):(Q[Ie]=ae,Q[J]=_e,Ie=J);else if(me<Pe&&0>a(Se,_e))Q[Ie]=Se,Q[me]=_e,Ie=me;else break e}}return se}function a(Q,se){var _e=Q.sortIndex-se.sortIndex;return _e!==0?_e:Q.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var g=[],p=[],_=1,v=null,x=3,R=!1,V=!1,L=!1,q=!1,te=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ce(Q){for(var se=t(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=Q)i(p),se.sortIndex=se.expirationTime,e(g,se);else break;se=t(p)}}function de(Q){if(L=!1,ce(Q),!V)if(t(g)!==null)V=!0,le||(le=!0,k());else{var se=t(p);se!==null&&oe(de,se.startTime-Q)}}var le=!1,C=-1,I=5,A=-1;function M(){return q?!0:!(r.unstable_now()-A<I)}function N(){if(q=!1,le){var Q=r.unstable_now();A=Q;var se=!0;try{e:{V=!1,L&&(L=!1,X(C),C=-1),R=!0;var _e=x;try{t:{for(ce(Q),v=t(g);v!==null&&!(v.expirationTime>Q&&M());){var Ie=v.callback;if(typeof Ie=="function"){v.callback=null,x=v.priorityLevel;var Pe=Ie(v.expirationTime<=Q);if(Q=r.unstable_now(),typeof Pe=="function"){v.callback=Pe,ce(Q),se=!0;break t}v===t(g)&&i(g),ce(Q)}else i(g);v=t(g)}if(v!==null)se=!0;else{var P=t(p);P!==null&&oe(de,P.startTime-Q),se=!1}}break e}finally{v=null,x=_e,R=!1}se=void 0}}finally{se?k():le=!1}}}var k;if(typeof re=="function")k=function(){re(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ce=D.port2;D.port1.onmessage=N,k=function(){Ce.postMessage(null)}}else k=function(){te(N,0)};function oe(Q,se){C=te(function(){Q(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var _e=x;x=se;try{return Q()}finally{x=_e}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var _e=x;x=Q;try{return se()}finally{x=_e}},r.unstable_scheduleCallback=function(Q,se,_e){var Ie=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ie+_e:Ie):_e=Ie,Q){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=_e+Pe,Q={id:_++,callback:se,priorityLevel:Q,startTime:_e,expirationTime:Pe,sortIndex:-1},_e>Ie?(Q.sortIndex=_e,e(p,Q),t(g)===null&&Q===t(p)&&(L?(X(C),C=-1):L=!0,oe(de,_e-Ie))):(Q.sortIndex=Pe,e(g,Q),V||R||(V=!0,le||(le=!0,k()))),Q},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Q){var se=x;return function(){var _e=x;x=se;try{return Q.apply(this,arguments)}finally{x=_e}}}})(sp)),sp}var Wb;function $I(){return Wb||(Wb=1,ip.exports=YI()),ip.exports}var ap={exports:{}},En={};var Zb;function XI(){if(Zb)return En;Zb=1;var r=my();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:p,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,En.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},En.flushSync=function(g){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=p,i.p=_,i.d.f()}},En.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},En.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},En.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,v=f(_,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:R}):_==="script"&&i.d.X(g,{crossOrigin:v,integrity:x,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},En.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},En.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,v=f(_,p.crossOrigin);i.d.L(g,_,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},En.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=f(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},En.requestFormReset=function(g){i.d.r(g)},En.unstable_batchedUpdates=function(g,p){return g(p)},En.useFormState=function(g,p,_){return c.H.useFormState(g,p,_)},En.useFormStatus=function(){return c.H.useHostTransitionStatus()},En.version="19.2.4",En}var eT;function gx(){if(eT)return ap.exports;eT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ap.exports=XI(),ap.exports}var tT;function JI(){if(tT)return Fu;tT=1;var r=$I(),e=my(),t=gx();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(i(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return g(d),n;if(m===u)return g(d),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=m;else{for(var b=!1,S=d.child;S;){if(S===o){b=!0,o=d,u=m;break}if(S===u){b=!0,u=d,o=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===o){b=!0,o=m,u=d;break}if(S===u){b=!0,u=m,o=d;break}S=S.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function Ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case te:return"Profiler";case q:return"StrictMode";case de:return"Suspense";case le:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case re:return n.displayName||"Context";case X:return(n._context.displayName||"Context")+".Consumer";case ce:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return s=n.displayName||null,s!==null?s:Ce(n.type)||"Memo";case I:s=n._payload,n=n._init;try{return Ce(n(s))}catch{}}return null}var oe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ie=[],Pe=-1;function P(n){return{current:n}}function J(n){0>Pe||(n.current=Ie[Pe],Ie[Pe]=null,Pe--)}function ae(n,s){Pe++,Ie[Pe]=n.current,n.current=s}var me=P(null),Se=P(null),xe=P(null),Ve=P(null);function st(n,s){switch(ae(xe,s),ae(Se,n),ae(me,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?pb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=pb(s),n=yb(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(me),ae(me,n)}function Ke(){J(me),J(Se),J(xe)}function ze(n){n.memoizedState!==null&&ae(Ve,n);var s=me.current,o=yb(s,n.type);s!==o&&(ae(Se,n),ae(me,o))}function dr(n){Se.current===n&&(J(me),J(Se)),Ve.current===n&&(J(Ve),ju._currentValue=_e)}var ln,Kn;function Pt(n){if(ln===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ln=s&&s[1]||"",Kn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ln+n+Kn}var fr=!1;function kn(n,s){if(!n||fr)return"";fr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch($){var K=$}Reflect.construct(n,[],ne)}else{try{ne.call()}catch($){K=$}n.call(ne.prototype)}}else{try{throw Error()}catch($){K=$}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var O=b.split(`
`),G=S.split(`
`);for(d=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(u===O.length||d===G.length)for(u=O.length-1,d=G.length-1;1<=u&&0<=d&&O[u]!==G[d];)d--;for(;1<=u&&0<=d;u--,d--)if(O[u]!==G[d]){if(u!==1||d!==1)do if(u--,d--,0>d||O[u]!==G[d]){var W=`
`+O[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=d);break}}}finally{fr=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Pt(o):""}function es(n,s){switch(n.tag){case 26:case 27:case 5:return Pt(n.type);case 16:return Pt("Lazy");case 13:return n.child!==s&&s!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return kn(n.type,!1);case 11:return kn(n.type.render,!1);case 1:return kn(n.type,!0);case 31:return Pt("Activity");default:return""}}function ts(n){try{var s="",o=null;do s+=es(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var pt=Object.prototype.hasOwnProperty,at=r.unstable_scheduleCallback,Qn=r.unstable_cancelCallback,ns=r.unstable_shouldYield,ua=r.unstable_requestPaint,Wt=r.unstable_now,_i=r.unstable_getCurrentPriorityLevel,ca=r.unstable_ImmediatePriority,mr=r.unstable_UserBlockingPriority,In=r.unstable_NormalPriority,vi=r.unstable_LowPriority,ha=r.unstable_IdlePriority,Yn=r.log,da=r.unstable_setDisableYieldValue,$n=null,Qt=null;function _n(n){if(typeof Yn=="function"&&da(n),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode($n,n)}catch{}}var yt=Math.clz32?Math.clz32:lo,oo=Math.log,bi=Math.LN2;function lo(n){return n>>>=0,n===0?32:31-(oo(n)/bi|0)|0}var gr=256,Ti=262144,je=4194304;function _t(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function vt(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,m=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var S=u&134217727;return S!==0?(u=S&~m,u!==0?d=_t(u):(b&=S,b!==0?d=_t(b):o||(o=S&~n,o!==0&&(d=_t(o))))):(S=u&~m,S!==0?d=_t(S):b!==0?d=_t(b):o||(o=u&~n,o!==0&&(d=_t(o)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:d}function jt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function vn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var n=je;return je<<=1,(je&62914560)===0&&(je=4194304),n}function Rt(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Pn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ct(n,s,o,u,d,m){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,O=n.expirationTimes,G=n.hiddenUpdates;for(o=b&~o;0<o;){var W=31-yt(o),ne=1<<W;S[W]=0,O[W]=-1;var K=G[W];if(K!==null)for(G[W]=null,W=0;W<K.length;W++){var $=K[W];$!==null&&($.lane&=-536870913)}o&=~ne}u!==0&&bn(n,u,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(b&~s))}function bn(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-yt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Tn(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-yt(o),d=1<<u;d&s|n[u]&s&&(n[u]|=s),o&=~d}}function Rn(n,s){var o=s&-s;return o=(o&42)!==0?1:Xn(o),(o&(n.suspendedLanes|s))!==0?0:o}function Xn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Cn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Jn(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:zb(n.type))}function un(n,s){var o=se.p;try{return se.p=n,s()}finally{se.p=o}}var Dn=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Dn,en="__reactProps$"+Dn,Kr="__reactContainer$"+Dn,uo="__reactEvents$"+Dn,om="__reactListeners$"+Dn,Jc="__reactHandles$"+Dn,Wc="__reactResources$"+Dn,Qr="__reactMarker$"+Dn;function co(n){delete n[Lt],delete n[en],delete n[uo],delete n[om],delete n[Jc]}function Yr(n){var s=n[Lt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Kr]||o[Lt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Sb(n);n!==null;){if(o=n[Lt])return o;n=Sb(n)}return s}n=o,o=n.parentNode}return null}function pr(n){if(n=n[Lt]||n[Kr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Wn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function $r(n){var s=n[Wc];return s||(s=n[Wc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(n){n[Qr]=!0}var Hl=new Set,Gl={};function Xr(n,s){Jr(n,s),Jr(n+"Capture",s)}function Jr(n,s){for(Gl[n]=s,n=0;n<s.length;n++)Hl.add(s[n])}var Kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ql={},Yl={};function Zc(n){return pt.call(Yl,n)?!0:pt.call(Ql,n)?!1:Kl.test(n)?Yl[n]=!0:(Ql[n]=!0,!1)}function ho(n,s,o){if(Zc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Zn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function zt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function tn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rs(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $l(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function et(n){if(!n._valueTracker){var s=rs(n)?"checked":"value";n._valueTracker=$l(n,s,""+n[s])}}function fa(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=rs(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Wr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ma=/[\n"\\]/g;function jn(n){return n.replace(ma,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fo(n,s,o,u,d,m,b,S){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+tn(s)):n.value!==""+tn(s)&&(n.value=""+tn(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?Xl(n,b,tn(s)):o!=null?Xl(n,b,tn(o)):u!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+tn(S):n.removeAttribute("name")}function eh(n,s,o,u,d,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){et(n);return}o=o!=null?""+tn(o):"",s=s!=null?""+tn(s):o,S||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=S?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),et(n)}function Xl(n,s,o){s==="number"&&Wr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function is(n,s,o,u){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+tn(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function th(n,s,o){if(s!=null&&(s=""+tn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+tn(o):""}function ss(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(oe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=tn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),et(n)}function Ln(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var nh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||nh.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Wl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&Jl(n,d,u)}else for(var m in s)s.hasOwnProperty(m)&&Jl(n,m,s[m])}function mo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),as=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function go(n){return as.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Dr(){}var Zl=null;function yr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var os=null,Zr=null;function ga(n){var s=pr(n);if(s&&(n=s.stateNode)){var o=n[en]||null;e:switch(n=s.stateNode,s.type){case"input":if(fo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var d=u[en]||null;if(!d)throw Error(i(90));fo(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&fa(u)}break e;case"textarea":th(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&is(n,!!o.multiple,s,!1)}}}var po=!1;function ls(n,s,o){if(po)return n(s,o);po=!0;try{var u=n(s);return u}finally{if(po=!1,(os!==null||Zr!==null)&&(Xh(),os&&(s=os,n=Zr,Zr=os=null,ga(s),n)))for(s=0;s<n.length;s++)ga(n[s])}}function Nr(n,s){var o=n.stateNode;if(o===null)return null;var u=o[en]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=!1;if(_r)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){pa=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{pa=!1}var ei=null,eu=null,ya=null;function tu(){if(ya)return ya;var n,s=eu,o=s.length,u,d="value"in ei?ei.value:ei.textContent,m=d.length;for(n=0;n<o&&s[n]===d[n];n++);var b=o-n;for(u=1;u<=b&&s[o-u]===d[m-u];u++);return ya=d.slice(n,1<u?1-u:void 0)}function _a(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ei(){return!0}function Mr(){return!1}function cn(n){function s(o,u,d,m,b){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ei:Mr,this.isPropagationStopped=Mr,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),s}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ti=cn(xi),us=v({},xi,{view:0,detail:0}),nu=cn(us),cs,yo,ni,_o=v({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ni&&(ni&&n.type==="mousemove"?(cs=n.screenX-ni.screenX,yo=n.screenY-ni.screenY):yo=cs=0,ni=n),cs)},movementY:function(n){return"movementY"in n?n.movementY:yo}}),ru=cn(_o),va=v({},_o,{dataTransfer:0}),ih=cn(va),sh=v({},us,{relatedTarget:0}),ba=cn(sh),iu=v({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=cn(iu),vo=v({},xi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oh=cn(vo),lh=v({},xi,{data:0}),ri=cn(lh),uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=hh[n])?!!s[n]:!1}function hs(){return dh}var Nn=v({},us,{key:function(n){if(n.key){var s=uh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=_a(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ch[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(n){return n.type==="keypress"?_a(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_a(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fh=cn(Nn),mh=v({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Si=cn(mh),h=v({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),y=cn(h),E=v({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=cn(E),F=v({},_o,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=cn(F),ue=v({},xi,{newState:0,oldState:0}),Ne=cn(ue),Dt=[9,13,27,32],Xe=_r&&"CompositionEvent"in window,bt=null;_r&&"documentMode"in document&&(bt=document.documentMode);var vr=_r&&"TextEvent"in window&&!bt,ii=_r&&(!Xe||bt&&8<bt&&11>=bt),Or=" ",Vr=!1;function Ta(n,s){switch(n){case"keyup":return Dt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var To=!1;function mA(n,s){switch(n){case"compositionend":return bo(s);case"keypress":return s.which!==32?null:(Vr=!0,Or);case"textInput":return n=s.data,n===Or&&Vr?null:n;default:return null}}function gA(n,s){if(To)return n==="compositionend"||!Xe&&Ta(n,s)?(n=tu(),ya=eu=ei=null,To=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ii&&s.locale!=="ko"?null:s.data;default:return null}}var pA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!pA[n.type]:s==="textarea"}function R_(n,s,o,u){os?Zr?Zr.push(u):Zr=[u]:os=u,s=rd(s,"onChange"),0<s.length&&(o=new ti("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var su=null,au=null;function yA(n){cb(n,0)}function gh(n){var s=Wn(n);if(fa(s))return n}function C_(n,s){if(n==="change")return s}var D_=!1;if(_r){var lm;if(_r){var um="oninput"in document;if(!um){var N_=document.createElement("div");N_.setAttribute("oninput","return;"),um=typeof N_.oninput=="function"}lm=um}else lm=!1;D_=lm&&(!document.documentMode||9<document.documentMode)}function M_(){su&&(su.detachEvent("onpropertychange",O_),au=su=null)}function O_(n){if(n.propertyName==="value"&&gh(au)){var s=[];R_(s,au,n,yr(n)),ls(yA,s)}}function _A(n,s,o){n==="focusin"?(M_(),su=s,au=o,su.attachEvent("onpropertychange",O_)):n==="focusout"&&M_()}function vA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gh(au)}function bA(n,s){if(n==="click")return gh(s)}function TA(n,s){if(n==="input"||n==="change")return gh(s)}function EA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var er=typeof Object.is=="function"?Object.is:EA;function ou(n,s){if(er(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!pt.call(s,d)||!er(n[d],s[d]))return!1}return!0}function V_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function k_(n,s){var o=V_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=V_(o)}}function P_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?P_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function j_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Wr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Wr(n.document)}return s}function cm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var xA=_r&&"documentMode"in document&&11>=document.documentMode,Eo=null,hm=null,lu=null,dm=!1;function L_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;dm||Eo==null||Eo!==Wr(u)||(u=Eo,"selectionStart"in u&&cm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lu&&ou(lu,u)||(lu=u,u=rd(hm,"onSelect"),0<u.length&&(s=new ti("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Eo)))}function Ea(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var xo={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},fm={},U_={};_r&&(U_=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function xa(n){if(fm[n])return fm[n];if(!xo[n])return n;var s=xo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in U_)return fm[n]=s[o];return n}var z_=xa("animationend"),B_=xa("animationiteration"),F_=xa("animationstart"),SA=xa("transitionrun"),wA=xa("transitionstart"),AA=xa("transitioncancel"),q_=xa("transitionend"),H_=new Map,mm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mm.push("scrollEnd");function kr(n,s){H_.set(n,s),Xr(s,[n])}var ph=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},br=[],So=0,gm=0;function yh(){for(var n=So,s=gm=So=0;s<n;){var o=br[s];br[s++]=null;var u=br[s];br[s++]=null;var d=br[s];br[s++]=null;var m=br[s];if(br[s++]=null,u!==null&&d!==null){var b=u.pending;b===null?d.next=d:(d.next=b.next,b.next=d),u.pending=d}m!==0&&G_(o,d,m)}}function _h(n,s,o,u){br[So++]=n,br[So++]=s,br[So++]=o,br[So++]=u,gm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function pm(n,s,o,u){return _h(n,s,o,u),vh(n)}function Sa(n,s){return _h(n,null,null,s),vh(n)}function G_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&s!==null&&(d=31-yt(o),n=m.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=o|536870912),m):null}function vh(n){if(50<Du)throw Du=0,wg=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var wo={};function IA(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(n,s,o,u){return new IA(n,s,o,u)}function ym(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wi(n,s){var o=n.alternate;return o===null?(o=tr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function K_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function bh(n,s,o,u,d,m){var b=0;if(u=n,typeof n=="function")ym(n)&&(b=1);else if(typeof n=="string")b=MI(n,o,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=tr(31,o,s,d),n.elementType=A,n.lanes=m,n;case L:return wa(o.children,d,m,s);case q:b=8,d|=24;break;case te:return n=tr(12,o,s,d|2),n.elementType=te,n.lanes=m,n;case de:return n=tr(13,o,s,d),n.elementType=de,n.lanes=m,n;case le:return n=tr(19,o,s,d),n.elementType=le,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:b=10;break e;case X:b=9;break e;case ce:b=11;break e;case C:b=14;break e;case I:b=16,u=null;break e}b=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=tr(b,o,s,d),s.elementType=n,s.type=u,s.lanes=m,s}function wa(n,s,o,u){return n=tr(7,n,u,s),n.lanes=o,n}function _m(n,s,o){return n=tr(6,n,null,s),n.lanes=o,n}function Q_(n){var s=tr(18,null,null,0);return s.stateNode=n,s}function vm(n,s,o){return s=tr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Y_=new WeakMap;function Tr(n,s){if(typeof n=="object"&&n!==null){var o=Y_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ts(s)},Y_.set(n,s),s)}return{value:n,source:s,stack:ts(s)}}var Ao=[],Io=0,Th=null,uu=0,Er=[],xr=0,ds=null,si=1,ai="";function Ai(n,s){Ao[Io++]=uu,Ao[Io++]=Th,Th=n,uu=s}function $_(n,s,o){Er[xr++]=si,Er[xr++]=ai,Er[xr++]=ds,ds=n;var u=si;n=ai;var d=32-yt(u)-1;u&=~(1<<d),o+=1;var m=32-yt(s)+d;if(30<m){var b=d-d%5;m=(u&(1<<b)-1).toString(32),u>>=b,d-=b,si=1<<32-yt(s)+d|o<<d|u,ai=m+n}else si=1<<m|o<<d|u,ai=n}function bm(n){n.return!==null&&(Ai(n,1),$_(n,1,0))}function Tm(n){for(;n===Th;)Th=Ao[--Io],Ao[Io]=null,uu=Ao[--Io],Ao[Io]=null;for(;n===ds;)ds=Er[--xr],Er[xr]=null,ai=Er[--xr],Er[xr]=null,si=Er[--xr],Er[xr]=null}function X_(n,s){Er[xr++]=si,Er[xr++]=ai,Er[xr++]=ds,si=s.id,ai=s.overflow,ds=n}var hn=null,mt=null,He=!1,fs=null,Sr=!1,Em=Error(i(519));function ms(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cu(Tr(s,n)),Em}function J_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Lt]=n,s[en]=u,o){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(o=0;o<Mu.length;o++)Ue(Mu[o],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),eh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),ss(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||mb(s.textContent,o)?(u.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),u.onScroll!=null&&Ue("scroll",s),u.onScrollEnd!=null&&Ue("scrollend",s),u.onClick!=null&&(s.onclick=Dr),s=!0):s=!1,s||ms(n,!0)}function W_(n){for(hn=n.return;hn;)switch(hn.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:hn=hn.return}}function Ro(n){if(n!==hn)return!1;if(!He)return W_(n),He=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||zg(n.type,n.memoizedProps)),o=!o),o&&mt&&ms(n),W_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));mt=xb(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));mt=xb(n)}else s===27?(s=mt,Rs(n.type)?(n=Gg,Gg=null,mt=n):mt=s):mt=hn?Ar(n.stateNode.nextSibling):null;return!0}function Aa(){mt=hn=null,He=!1}function xm(){var n=fs;return n!==null&&(Fn===null?Fn=n:Fn.push.apply(Fn,n),fs=null),n}function cu(n){fs===null?fs=[n]:fs.push(n)}var Sm=P(null),Ia=null,Ii=null;function gs(n,s,o){ae(Sm,s._currentValue),s._currentValue=o}function Ri(n){n._currentValue=Sm.current,J(Sm)}function wm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Am(n,s,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var b=d.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=d;for(var O=0;O<s.length;O++)if(S.context===s[O]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),wm(m.return,o,n),u||(b=null);break e}m=S.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),wm(b,o,n),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===n){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Co(n,s,o,u){n=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var S=d.type;er(d.pendingProps.value,b.value)||(n!==null?n.push(S):n=[S])}}else if(d===Ve.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(ju):n=[ju])}d=d.return}n!==null&&Am(s,n,o,u),s.flags|=262144}function Eh(n){for(n=n.firstContext;n!==null;){if(!er(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ra(n){Ia=n,Ii=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function dn(n){return Z_(Ia,n)}function xh(n,s){return Ia===null&&Ra(n),Z_(n,s)}function Z_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ii===null){if(n===null)throw Error(i(308));Ii=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ii=Ii.next=s;return o}var RA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},CA=r.unstable_scheduleCallback,DA=r.unstable_NormalPriority,Bt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Im(){return{controller:new RA,data:new Map,refCount:0}}function hu(n){n.refCount--,n.refCount===0&&CA(DA,function(){n.controller.abort()})}var du=null,Rm=0,Do=0,No=null;function NA(n,s){if(du===null){var o=du=[];Rm=0,Do=Ng(),No={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Rm++,s.then(ev,ev),s}function ev(){if(--Rm===0&&du!==null){No!==null&&(No.status="fulfilled");var n=du;du=null,Do=0,No=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function MA(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var tv=Q.S;Q.S=function(n,s){L0=Wt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&NA(n,s),tv!==null&&tv(n,s)};var Ca=P(null);function Cm(){var n=Ca.current;return n!==null?n:dt.pooledCache}function Sh(n,s){s===null?ae(Ca,Ca.current):ae(Ca,s.pool)}function nv(){var n=Cm();return n===null?null:{parent:Bt._currentValue,pool:n}}var Mo=Error(i(460)),Dm=Error(i(474)),wh=Error(i(542)),Ah={then:function(){}};function rv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function iv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Dr,Dr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,av(n),n;default:if(typeof s.status=="string")s.then(Dr,Dr);else{if(n=dt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,av(n),n}throw Na=s,Mo}}function Da(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Na=o,Mo):o}}var Na=null;function sv(){if(Na===null)throw Error(i(459));var n=Na;return Na=null,n}function av(n){if(n===Mo||n===wh)throw Error(i(483))}var Oo=null,fu=0;function Ih(n){var s=fu;return fu+=1,Oo===null&&(Oo=[]),iv(Oo,n,s)}function mu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Rh(n,s){throw s.$$typeof===x?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function ov(n){function s(U,j){if(n){var H=U.deletions;H===null?(U.deletions=[j],U.flags|=16):H.push(j)}}function o(U,j){if(!n)return null;for(;j!==null;)s(U,j),j=j.sibling;return null}function u(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function d(U,j){return U=wi(U,j),U.index=0,U.sibling=null,U}function m(U,j,H){return U.index=H,n?(H=U.alternate,H!==null?(H=H.index,H<j?(U.flags|=67108866,j):H):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function b(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function S(U,j,H,Z){return j===null||j.tag!==6?(j=_m(H,U.mode,Z),j.return=U,j):(j=d(j,H),j.return=U,j)}function O(U,j,H,Z){var Te=H.type;return Te===L?W(U,j,H.props.children,Z,H.key):j!==null&&(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&Da(Te)===j.type)?(j=d(j,H.props),mu(j,H),j.return=U,j):(j=bh(H.type,H.key,H.props,null,U.mode,Z),mu(j,H),j.return=U,j)}function G(U,j,H,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=vm(H,U.mode,Z),j.return=U,j):(j=d(j,H.children||[]),j.return=U,j)}function W(U,j,H,Z,Te){return j===null||j.tag!==7?(j=wa(H,U.mode,Z,Te),j.return=U,j):(j=d(j,H),j.return=U,j)}function ne(U,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=_m(""+j,U.mode,H),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case R:return H=bh(j.type,j.key,j.props,null,U.mode,H),mu(H,j),H.return=U,H;case V:return j=vm(j,U.mode,H),j.return=U,j;case I:return j=Da(j),ne(U,j,H)}if(oe(j)||k(j))return j=wa(j,U.mode,H,null),j.return=U,j;if(typeof j.then=="function")return ne(U,Ih(j),H);if(j.$$typeof===re)return ne(U,xh(U,j),H);Rh(U,j)}return null}function K(U,j,H,Z){var Te=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:S(U,j,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===Te?O(U,j,H,Z):null;case V:return H.key===Te?G(U,j,H,Z):null;case I:return H=Da(H),K(U,j,H,Z)}if(oe(H)||k(H))return Te!==null?null:W(U,j,H,Z,null);if(typeof H.then=="function")return K(U,j,Ih(H),Z);if(H.$$typeof===re)return K(U,j,xh(U,H),Z);Rh(U,H)}return null}function $(U,j,H,Z,Te){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return U=U.get(H)||null,S(j,U,""+Z,Te);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:return U=U.get(Z.key===null?H:Z.key)||null,O(j,U,Z,Te);case V:return U=U.get(Z.key===null?H:Z.key)||null,G(j,U,Z,Te);case I:return Z=Da(Z),$(U,j,H,Z,Te)}if(oe(Z)||k(Z))return U=U.get(H)||null,W(j,U,Z,Te,null);if(typeof Z.then=="function")return $(U,j,H,Ih(Z),Te);if(Z.$$typeof===re)return $(U,j,H,xh(j,Z),Te);Rh(j,Z)}return null}function pe(U,j,H,Z){for(var Te=null,Ye=null,ve=j,Oe=j=0,Fe=null;ve!==null&&Oe<H.length;Oe++){ve.index>Oe?(Fe=ve,ve=null):Fe=ve.sibling;var $e=K(U,ve,H[Oe],Z);if($e===null){ve===null&&(ve=Fe);break}n&&ve&&$e.alternate===null&&s(U,ve),j=m($e,j,Oe),Ye===null?Te=$e:Ye.sibling=$e,Ye=$e,ve=Fe}if(Oe===H.length)return o(U,ve),He&&Ai(U,Oe),Te;if(ve===null){for(;Oe<H.length;Oe++)ve=ne(U,H[Oe],Z),ve!==null&&(j=m(ve,j,Oe),Ye===null?Te=ve:Ye.sibling=ve,Ye=ve);return He&&Ai(U,Oe),Te}for(ve=u(ve);Oe<H.length;Oe++)Fe=$(ve,U,Oe,H[Oe],Z),Fe!==null&&(n&&Fe.alternate!==null&&ve.delete(Fe.key===null?Oe:Fe.key),j=m(Fe,j,Oe),Ye===null?Te=Fe:Ye.sibling=Fe,Ye=Fe);return n&&ve.forEach(function(Os){return s(U,Os)}),He&&Ai(U,Oe),Te}function we(U,j,H,Z){if(H==null)throw Error(i(151));for(var Te=null,Ye=null,ve=j,Oe=j=0,Fe=null,$e=H.next();ve!==null&&!$e.done;Oe++,$e=H.next()){ve.index>Oe?(Fe=ve,ve=null):Fe=ve.sibling;var Os=K(U,ve,$e.value,Z);if(Os===null){ve===null&&(ve=Fe);break}n&&ve&&Os.alternate===null&&s(U,ve),j=m(Os,j,Oe),Ye===null?Te=Os:Ye.sibling=Os,Ye=Os,ve=Fe}if($e.done)return o(U,ve),He&&Ai(U,Oe),Te;if(ve===null){for(;!$e.done;Oe++,$e=H.next())$e=ne(U,$e.value,Z),$e!==null&&(j=m($e,j,Oe),Ye===null?Te=$e:Ye.sibling=$e,Ye=$e);return He&&Ai(U,Oe),Te}for(ve=u(ve);!$e.done;Oe++,$e=H.next())$e=$(ve,U,Oe,$e.value,Z),$e!==null&&(n&&$e.alternate!==null&&ve.delete($e.key===null?Oe:$e.key),j=m($e,j,Oe),Ye===null?Te=$e:Ye.sibling=$e,Ye=$e);return n&&ve.forEach(function(qI){return s(U,qI)}),He&&Ai(U,Oe),Te}function ct(U,j,H,Z){if(typeof H=="object"&&H!==null&&H.type===L&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var Te=H.key;j!==null;){if(j.key===Te){if(Te=H.type,Te===L){if(j.tag===7){o(U,j.sibling),Z=d(j,H.props.children),Z.return=U,U=Z;break e}}else if(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===I&&Da(Te)===j.type){o(U,j.sibling),Z=d(j,H.props),mu(Z,H),Z.return=U,U=Z;break e}o(U,j);break}else s(U,j);j=j.sibling}H.type===L?(Z=wa(H.props.children,U.mode,Z,H.key),Z.return=U,U=Z):(Z=bh(H.type,H.key,H.props,null,U.mode,Z),mu(Z,H),Z.return=U,U=Z)}return b(U);case V:e:{for(Te=H.key;j!==null;){if(j.key===Te)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){o(U,j.sibling),Z=d(j,H.children||[]),Z.return=U,U=Z;break e}else{o(U,j);break}else s(U,j);j=j.sibling}Z=vm(H,U.mode,Z),Z.return=U,U=Z}return b(U);case I:return H=Da(H),ct(U,j,H,Z)}if(oe(H))return pe(U,j,H,Z);if(k(H)){if(Te=k(H),typeof Te!="function")throw Error(i(150));return H=Te.call(H),we(U,j,H,Z)}if(typeof H.then=="function")return ct(U,j,Ih(H),Z);if(H.$$typeof===re)return ct(U,j,xh(U,H),Z);Rh(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(o(U,j.sibling),Z=d(j,H),Z.return=U,U=Z):(o(U,j),Z=_m(H,U.mode,Z),Z.return=U,U=Z),b(U)):o(U,j)}return function(U,j,H,Z){try{fu=0;var Te=ct(U,j,H,Z);return Oo=null,Te}catch(ve){if(ve===Mo||ve===wh)throw ve;var Ye=tr(29,ve,null,U.mode);return Ye.lanes=Z,Ye.return=U,Ye}}}var Ma=ov(!0),lv=ov(!1),ps=!1;function Nm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ys(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function _s(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=vh(n),G_(n,null,o),s}return _h(n,u,s,o),vh(n)}function gu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Tn(n,o)}}function Om(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?d=m=s:m=m.next=s}else d=m=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Vm=!1;function pu(){if(Vm){var n=No;if(n!==null)throw n}}function yu(n,s,o,u){Vm=!1;var d=n.updateQueue;ps=!1;var m=d.firstBaseUpdate,b=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var O=S,G=O.next;O.next=null,b===null?m=G:b.next=G,b=O;var W=n.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==b&&(S===null?W.firstBaseUpdate=G:S.next=G,W.lastBaseUpdate=O))}if(m!==null){var ne=d.baseState;b=0,W=G=O=null,S=m;do{var K=S.lane&-536870913,$=K!==S.lane;if($?(Be&K)===K:(u&K)===K){K!==0&&K===Do&&(Vm=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var pe=n,we=S;K=s;var ct=o;switch(we.tag){case 1:if(pe=we.payload,typeof pe=="function"){ne=pe.call(ct,ne,K);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=we.payload,K=typeof pe=="function"?pe.call(ct,ne,K):pe,K==null)break e;ne=v({},ne,K);break e;case 2:ps=!0}}K=S.callback,K!==null&&(n.flags|=64,$&&(n.flags|=8192),$=d.callbacks,$===null?d.callbacks=[K]:$.push(K))}else $={lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(G=W=$,O=ne):W=W.next=$,b|=K;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;$=S,S=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);W===null&&(O=ne),d.baseState=O,d.firstBaseUpdate=G,d.lastBaseUpdate=W,m===null&&(d.shared.lanes=0),xs|=b,n.lanes=b,n.memoizedState=ne}}function uv(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function cv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)uv(o[n],s)}var Vo=P(null),Ch=P(0);function hv(n,s){n=ji,ae(Ch,n),ae(Vo,s),ji=n|s.baseLanes}function km(){ae(Ch,ji),ae(Vo,Vo.current)}function Pm(){ji=Ch.current,J(Vo),J(Ch)}var nr=P(null),wr=null;function vs(n){var s=n.alternate;ae(Nt,Nt.current&1),ae(nr,n),wr===null&&(s===null||Vo.current!==null||s.memoizedState!==null)&&(wr=n)}function jm(n){ae(Nt,Nt.current),ae(nr,n),wr===null&&(wr=n)}function dv(n){n.tag===22?(ae(Nt,Nt.current),ae(nr,n),wr===null&&(wr=n)):bs()}function bs(){ae(Nt,Nt.current),ae(nr,nr.current)}function rr(n){J(nr),wr===n&&(wr=null),J(Nt)}var Nt=P(0);function Dh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||qg(o)||Hg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ci=0,Me=null,lt=null,Ft=null,Nh=!1,ko=!1,Oa=!1,Mh=0,_u=0,Po=null,OA=0;function wt(){throw Error(i(321))}function Lm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!er(n[o],s[o]))return!1;return!0}function Um(n,s,o,u,d,m){return Ci=m,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?$v:eg,Oa=!1,m=o(u,d),Oa=!1,ko&&(m=mv(s,o,u,d)),fv(n),m}function fv(n){Q.H=Tu;var s=lt!==null&&lt.next!==null;if(Ci=0,Ft=lt=Me=null,Nh=!1,_u=0,Po=null,s)throw Error(i(300));n===null||qt||(n=n.dependencies,n!==null&&Eh(n)&&(qt=!0))}function mv(n,s,o,u){Me=n;var d=0;do{if(ko&&(Po=null),_u=0,ko=!1,25<=d)throw Error(i(301));if(d+=1,Ft=lt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=Xv,m=s(o,u)}while(ko);return m}function VA(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?vu(s):s,n=n.useState()[0],(lt!==null?lt.memoizedState:null)!==n&&(Me.flags|=1024),s}function zm(){var n=Mh!==0;return Mh=0,n}function Bm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Fm(n){if(Nh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Nh=!1}Ci=0,Ft=lt=Me=null,ko=!1,_u=Mh=0,Po=null}function Mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Me.memoizedState=Ft=n:Ft=Ft.next=n,Ft}function Mt(){if(lt===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=lt.next;var s=Ft===null?Me.memoizedState:Ft.next;if(s!==null)Ft=s,lt=n;else{if(n===null)throw Me.alternate===null?Error(i(467)):Error(i(310));lt=n,n={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Ft===null?Me.memoizedState=Ft=n:Ft=Ft.next=n}return Ft}function Oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vu(n){var s=_u;return _u+=1,Po===null&&(Po=[]),n=iv(Po,n,s),s=Me,(Ft===null?s.memoizedState:Ft.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?$v:eg),n}function Vh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vu(n);if(n.$$typeof===re)return dn(n)}throw Error(i(438,String(n)))}function qm(n){var s=null,o=Me.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Oh(),Me.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=M;return s.index++,o}function Di(n,s){return typeof s=="function"?s(n):s}function kh(n){var s=Mt();return Hm(s,lt,n)}function Hm(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=n.baseQueue,m=u.pending;if(m!==null){if(d!==null){var b=d.next;d.next=m.next,m.next=b}s.baseQueue=d=m,u.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{s=d.next;var S=b=null,O=null,G=s,W=!1;do{var ne=G.lane&-536870913;if(ne!==G.lane?(Be&ne)===ne:(Ci&ne)===ne){var K=G.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ne===Do&&(W=!0);else if((Ci&K)===K){G=G.next,K===Do&&(W=!0);continue}else ne={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(S=O=ne,b=m):O=O.next=ne,Me.lanes|=K,xs|=K;ne=G.action,Oa&&o(m,ne),m=G.hasEagerState?G.eagerState:o(m,ne)}else K={lane:ne,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(S=O=K,b=m):O=O.next=K,Me.lanes|=ne,xs|=ne;G=G.next}while(G!==null&&G!==s);if(O===null?b=m:O.next=S,!er(m,n.memoizedState)&&(qt=!0,W&&(o=No,o!==null)))throw o;n.memoizedState=m,n.baseState=b,n.baseQueue=O,u.lastRenderedState=m}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Gm(n){var s=Mt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,m=s.memoizedState;if(d!==null){o.pending=null;var b=d=d.next;do m=n(m,b.action),b=b.next;while(b!==d);er(m,s.memoizedState)||(qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function gv(n,s,o){var u=Me,d=Mt(),m=He;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var b=!er((lt||d).memoizedState,o);if(b&&(d.memoizedState=o,qt=!0),d=d.queue,Ym(_v.bind(null,u,d,n),[n]),d.getSnapshot!==s||b||Ft!==null&&Ft.memoizedState.tag&1){if(u.flags|=2048,jo(9,{destroy:void 0},yv.bind(null,u,d,o,s),null),dt===null)throw Error(i(349));m||(Ci&127)!==0||pv(u,s,o)}return o}function pv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Me.updateQueue,s===null?(s=Oh(),Me.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function yv(n,s,o,u){s.value=o,s.getSnapshot=u,vv(s)&&bv(n)}function _v(n,s,o){return o(function(){vv(s)&&bv(n)})}function vv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!er(n,o)}catch{return!0}}function bv(n){var s=Sa(n,2);s!==null&&qn(s,n,2)}function Km(n){var s=Mn();if(typeof n=="function"){var o=n;if(n=o(),Oa){_n(!0);try{o()}finally{_n(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:n},s}function Tv(n,s,o,u){return n.baseState=o,Hm(n,lt,typeof u=="function"?u:Di)}function kA(n,s,o,u,d){if(Lh(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Ev(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Ev(n,s){var o=s.action,u=s.payload,d=n.state;if(s.isTransition){var m=Q.T,b={};Q.T=b;try{var S=o(d,u),O=Q.S;O!==null&&O(b,S),xv(n,s,S)}catch(G){Qm(n,s,G)}finally{m!==null&&b.types!==null&&(m.types=b.types),Q.T=m}}else try{m=o(d,u),xv(n,s,m)}catch(G){Qm(n,s,G)}}function xv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Sv(n,s,u)},function(u){return Qm(n,s,u)}):Sv(n,s,o)}function Sv(n,s,o){s.status="fulfilled",s.value=o,wv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Ev(n,o)))}function Qm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,wv(s),s=s.next;while(s!==u)}n.action=null}function wv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Av(n,s){return s}function Iv(n,s){if(He){var o=dt.formState;if(o!==null){e:{var u=Me;if(He){if(mt){t:{for(var d=mt,m=Sr;d.nodeType!==8;){if(!m){d=null;break t}if(d=Ar(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){mt=Ar(d.nextSibling),u=d.data==="F!";break e}}ms(u)}u=!1}u&&(s=o[0])}}return o=Mn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Av,lastRenderedState:s},o.queue=u,o=Kv.bind(null,Me,u),u.dispatch=o,u=Km(!1),m=Zm.bind(null,Me,!1,u.queue),u=Mn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,o=kA.bind(null,Me,d,m,o),d.dispatch=o,u.memoizedState=n,[s,o,!1]}function Rv(n){var s=Mt();return Cv(s,lt,n)}function Cv(n,s,o){if(s=Hm(n,s,Av)[0],n=kh(Di)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=vu(s)}catch(b){throw b===Mo?wh:b}else u=s;s=Mt();var d=s.queue,m=d.dispatch;return o!==s.memoizedState&&(Me.flags|=2048,jo(9,{destroy:void 0},PA.bind(null,d,o),null)),[u,m,n]}function PA(n,s){n.action=s}function Dv(n){var s=Mt(),o=lt;if(o!==null)return Cv(s,o,n);Mt(),s=s.memoizedState,o=Mt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function jo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=Oh(),Me.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Nv(){return Mt().memoizedState}function Ph(n,s,o,u){var d=Mn();Me.flags|=n,d.memoizedState=jo(1|s,{destroy:void 0},o,u===void 0?null:u)}function jh(n,s,o,u){var d=Mt();u=u===void 0?null:u;var m=d.memoizedState.inst;lt!==null&&u!==null&&Lm(u,lt.memoizedState.deps)?d.memoizedState=jo(s,m,o,u):(Me.flags|=n,d.memoizedState=jo(1|s,m,o,u))}function Mv(n,s){Ph(8390656,8,n,s)}function Ym(n,s){jh(2048,8,n,s)}function jA(n){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=Oh(),Me.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function Ov(n){var s=Mt().memoizedState;return jA({ref:s,nextImpl:n}),function(){if((Je&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Vv(n,s){return jh(4,2,n,s)}function kv(n,s){return jh(4,4,n,s)}function Pv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function jv(n,s,o){o=o!=null?o.concat([n]):null,jh(4,4,Pv.bind(null,s,n),o)}function $m(){}function Lv(n,s){var o=Mt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Lm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function Uv(n,s){var o=Mt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Lm(s,u[1]))return u[0];if(u=n(),Oa){_n(!0);try{n()}finally{_n(!1)}}return o.memoizedState=[u,s],u}function Xm(n,s,o){return o===void 0||(Ci&1073741824)!==0&&(Be&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=z0(),Me.lanes|=n,xs|=n,o)}function zv(n,s,o,u){return er(o,s)?o:Vo.current!==null?(n=Xm(n,o,u),er(n,s)||(qt=!0),n):(Ci&42)===0||(Ci&1073741824)!==0&&(Be&261930)===0?(qt=!0,n.memoizedState=o):(n=z0(),Me.lanes|=n,xs|=n,s)}function Bv(n,s,o,u,d){var m=se.p;se.p=m!==0&&8>m?m:8;var b=Q.T,S={};Q.T=S,Zm(n,!1,s,o);try{var O=d(),G=Q.S;if(G!==null&&G(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=MA(O,u);bu(n,s,W,ar(n))}else bu(n,s,u,ar(n))}catch(ne){bu(n,s,{then:function(){},status:"rejected",reason:ne},ar())}finally{se.p=m,b!==null&&S.types!==null&&(b.types=S.types),Q.T=b}}function LA(){}function Jm(n,s,o,u){if(n.tag!==5)throw Error(i(476));var d=Fv(n).queue;Bv(n,d,s,_e,o===null?LA:function(){return qv(n),o(u)})}function Fv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function qv(n){var s=Fv(n);s.next===null&&(s=n.alternate.memoizedState),bu(n,s.next.queue,{},ar())}function Wm(){return dn(ju)}function Hv(){return Mt().memoizedState}function Gv(){return Mt().memoizedState}function UA(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=ar();n=ys(o);var u=_s(s,n,o);u!==null&&(qn(u,s,o),gu(u,s,o)),s={cache:Im()},n.payload=s;return}s=s.return}}function zA(n,s,o){var u=ar();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Lh(n)?Qv(s,o):(o=pm(n,s,o,u),o!==null&&(qn(o,n,u),Yv(o,s,u)))}function Kv(n,s,o){var u=ar();bu(n,s,o,u)}function bu(n,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Lh(n))Qv(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,S=m(b,o);if(d.hasEagerState=!0,d.eagerState=S,er(S,b))return _h(n,s,d,0),dt===null&&yh(),!1}catch{}if(o=pm(n,s,d,u),o!==null)return qn(o,n,u),Yv(o,s,u),!0}return!1}function Zm(n,s,o,u){if(u={lane:2,revertLane:Ng(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Lh(n)){if(s)throw Error(i(479))}else s=pm(n,o,u,2),s!==null&&qn(s,n,2)}function Lh(n){var s=n.alternate;return n===Me||s!==null&&s===Me}function Qv(n,s){ko=Nh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Yv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Tn(n,o)}}var Tu={readContext:dn,use:Vh,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};Tu.useEffectEvent=wt;var $v={readContext:dn,use:Vh,useCallback:function(n,s){return Mn().memoizedState=[n,s===void 0?null:s],n},useContext:dn,useEffect:Mv,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Ph(4194308,4,Pv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Ph(4194308,4,n,s)},useInsertionEffect:function(n,s){Ph(4,2,n,s)},useMemo:function(n,s){var o=Mn();s=s===void 0?null:s;var u=n();if(Oa){_n(!0);try{n()}finally{_n(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=Mn();if(o!==void 0){var d=o(s);if(Oa){_n(!0);try{o(s)}finally{_n(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=zA.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var s=Mn();return n={current:n},s.memoizedState=n},useState:function(n){n=Km(n);var s=n.queue,o=Kv.bind(null,Me,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:$m,useDeferredValue:function(n,s){var o=Mn();return Xm(o,n,s)},useTransition:function(){var n=Km(!1);return n=Bv.bind(null,Me,n.queue,!0,!1),Mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Me,d=Mn();if(He){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),dt===null)throw Error(i(349));(Be&127)!==0||pv(u,s,o)}d.memoizedState=o;var m={value:o,getSnapshot:s};return d.queue=m,Mv(_v.bind(null,u,m,n),[n]),u.flags|=2048,jo(9,{destroy:void 0},yv.bind(null,u,m,o,s),null),o},useId:function(){var n=Mn(),s=dt.identifierPrefix;if(He){var o=ai,u=si;o=(u&~(1<<32-yt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Mh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=OA++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Wm,useFormState:Iv,useActionState:Iv,useOptimistic:function(n){var s=Mn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Zm.bind(null,Me,!0,o),o.dispatch=s,[n,s]},useMemoCache:qm,useCacheRefresh:function(){return Mn().memoizedState=UA.bind(null,Me)},useEffectEvent:function(n){var s=Mn(),o={impl:n};return s.memoizedState=o,function(){if((Je&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},eg={readContext:dn,use:Vh,useCallback:Lv,useContext:dn,useEffect:Ym,useImperativeHandle:jv,useInsertionEffect:Vv,useLayoutEffect:kv,useMemo:Uv,useReducer:kh,useRef:Nv,useState:function(){return kh(Di)},useDebugValue:$m,useDeferredValue:function(n,s){var o=Mt();return zv(o,lt.memoizedState,n,s)},useTransition:function(){var n=kh(Di)[0],s=Mt().memoizedState;return[typeof n=="boolean"?n:vu(n),s]},useSyncExternalStore:gv,useId:Hv,useHostTransitionStatus:Wm,useFormState:Rv,useActionState:Rv,useOptimistic:function(n,s){var o=Mt();return Tv(o,lt,n,s)},useMemoCache:qm,useCacheRefresh:Gv};eg.useEffectEvent=Ov;var Xv={readContext:dn,use:Vh,useCallback:Lv,useContext:dn,useEffect:Ym,useImperativeHandle:jv,useInsertionEffect:Vv,useLayoutEffect:kv,useMemo:Uv,useReducer:Gm,useRef:Nv,useState:function(){return Gm(Di)},useDebugValue:$m,useDeferredValue:function(n,s){var o=Mt();return lt===null?Xm(o,n,s):zv(o,lt.memoizedState,n,s)},useTransition:function(){var n=Gm(Di)[0],s=Mt().memoizedState;return[typeof n=="boolean"?n:vu(n),s]},useSyncExternalStore:gv,useId:Hv,useHostTransitionStatus:Wm,useFormState:Dv,useActionState:Dv,useOptimistic:function(n,s){var o=Mt();return lt!==null?Tv(o,lt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:qm,useCacheRefresh:Gv};Xv.useEffectEvent=Ov;function tg(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var ng={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=ar(),d=ys(u);d.payload=s,o!=null&&(d.callback=o),s=_s(n,d,u),s!==null&&(qn(s,n,u),gu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=ar(),d=ys(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=_s(n,d,u),s!==null&&(qn(s,n,u),gu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=ar(),u=ys(o);u.tag=2,s!=null&&(u.callback=s),s=_s(n,u,o),s!==null&&(qn(s,n,o),gu(s,n,o))}};function Jv(n,s,o,u,d,m,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,b):s.prototype&&s.prototype.isPureReactComponent?!ou(o,u)||!ou(d,m):!0}function Wv(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&ng.enqueueReplaceState(s,s.state,null)}function Va(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=v({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function Zv(n){ph(n)}function e0(n){console.error(n)}function t0(n){ph(n)}function Uh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function n0(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function rg(n,s,o){return o=ys(o),o.tag=3,o.payload={element:null},o.callback=function(){Uh(n,s)},o}function r0(n){return n=ys(n),n.tag=3,n}function i0(n,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;n.payload=function(){return d(m)},n.callback=function(){n0(s,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){n0(s,o,u),typeof d!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function BA(n,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Co(s,o,d,!0),o=nr.current,o!==null){switch(o.tag){case 31:case 13:return wr===null?Jh():o.alternate===null&&At===0&&(At=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Ah?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Rg(n,u,d)),!1;case 22:return o.flags|=65536,u===Ah?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Rg(n,u,d)),!1}throw Error(i(435,o.tag))}return Rg(n,u,d),Jh(),!1}if(He)return s=nr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Em&&(n=Error(i(422),{cause:u}),cu(Tr(n,o)))):(u!==Em&&(s=Error(i(423),{cause:u}),cu(Tr(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Tr(u,o),d=rg(n.stateNode,u,d),Om(n,d),At!==4&&(At=2)),!1;var m=Error(i(520),{cause:u});if(m=Tr(m,o),Cu===null?Cu=[m]:Cu.push(m),At!==4&&(At=2),s===null)return!0;u=Tr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=rg(o.stateNode,u,n),Om(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ss===null||!Ss.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=r0(d),i0(d,n,o,u),Om(o,d),!1}o=o.return}while(o!==null);return!1}var ig=Error(i(461)),qt=!1;function fn(n,s,o,u){s.child=n===null?lv(s,null,o,u):Ma(s,n.child,o,u)}function s0(n,s,o,u,d){o=o.render;var m=s.ref;if("ref"in u){var b={};for(var S in u)S!=="ref"&&(b[S]=u[S])}else b=u;return Ra(s),u=Um(n,s,o,b,m,d),S=zm(),n!==null&&!qt?(Bm(n,s,d),Ni(n,s,d)):(He&&S&&bm(s),s.flags|=1,fn(n,s,u,d),s.child)}function a0(n,s,o,u,d){if(n===null){var m=o.type;return typeof m=="function"&&!ym(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,o0(n,s,m,u,d)):(n=bh(o.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!dg(n,d)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:ou,o(b,u)&&n.ref===s.ref)return Ni(n,s,d)}return s.flags|=1,n=wi(m,u),n.ref=s.ref,n.return=s,s.child=n}function o0(n,s,o,u,d){if(n!==null){var m=n.memoizedProps;if(ou(m,u)&&n.ref===s.ref)if(qt=!1,s.pendingProps=u=m,dg(n,d))(n.flags&131072)!==0&&(qt=!0);else return s.lanes=n.lanes,Ni(n,s,d)}return sg(n,s,o,u,d)}function l0(n,s,o,u){var d=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~m}else u=0,s.child=null;return u0(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Sh(s,m!==null?m.cachePool:null),m!==null?hv(s,m):km(),dv(s);else return u=s.lanes=536870912,u0(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(Sh(s,m.cachePool),hv(s,m),bs(),s.memoizedState=null):(n!==null&&Sh(s,null),km(),bs());return fn(n,s,d,o),s.child}function Eu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function u0(n,s,o,u,d){var m=Cm();return m=m===null?null:{parent:Bt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&Sh(s,null),km(),dv(s),n!==null&&Co(n,s,u,!0),s.childLanes=d,null}function zh(n,s){return s=Fh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function c0(n,s,o){return Ma(s,n.child,null,o),n=zh(s,s.pendingProps),n.flags|=2,rr(s),s.memoizedState=null,n}function FA(n,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(He){if(u.mode==="hidden")return n=zh(s,u),s.lanes=536870912,Eu(null,n);if(jm(s),(n=mt)?(n=Eb(n,Sr),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ds!==null?{id:si,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},o=Q_(n),o.return=s,s.child=o,hn=s,mt=null)):n=null,n===null)throw ms(s);return s.lanes=536870912,null}return zh(s,u)}var m=n.memoizedState;if(m!==null){var b=m.dehydrated;if(jm(s),d)if(s.flags&256)s.flags&=-257,s=c0(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(qt||Co(n,s,o,!1),d=(o&n.childLanes)!==0,qt||d){if(u=dt,u!==null&&(b=Rn(u,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,Sa(n,b),qn(u,n,b),ig;Jh(),s=c0(n,s,o)}else n=m.treeContext,mt=Ar(b.nextSibling),hn=s,He=!0,fs=null,Sr=!1,n!==null&&X_(s,n),s=zh(s,u),s.flags|=4096;return s}return n=wi(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Bh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function sg(n,s,o,u,d){return Ra(s),o=Um(n,s,o,u,void 0,d),u=zm(),n!==null&&!qt?(Bm(n,s,d),Ni(n,s,d)):(He&&u&&bm(s),s.flags|=1,fn(n,s,o,d),s.child)}function h0(n,s,o,u,d,m){return Ra(s),s.updateQueue=null,o=mv(s,u,o,d),fv(n),u=zm(),n!==null&&!qt?(Bm(n,s,m),Ni(n,s,m)):(He&&u&&bm(s),s.flags|=1,fn(n,s,o,m),s.child)}function d0(n,s,o,u,d){if(Ra(s),s.stateNode===null){var m=wo,b=o.contextType;typeof b=="object"&&b!==null&&(m=dn(b)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ng,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Nm(s),b=o.contextType,m.context=typeof b=="object"&&b!==null?dn(b):wo,m.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(tg(s,o,b,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&ng.enqueueReplaceState(m,m.state,null),yu(s,u,m,d),pu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var S=s.memoizedProps,O=Va(o,S);m.props=O;var G=m.context,W=o.contextType;b=wo,typeof W=="object"&&W!==null&&(b=dn(W));var ne=o.getDerivedStateFromProps;W=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||G!==b)&&Wv(s,m,u,b),ps=!1;var K=s.memoizedState;m.state=K,yu(s,u,m,d),pu(),G=s.memoizedState,S||K!==G||ps?(typeof ne=="function"&&(tg(s,o,ne,u),G=s.memoizedState),(O=ps||Jv(s,o,O,u,K,G,b))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),m.props=u,m.state=G,m.context=b,u=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Mm(n,s),b=s.memoizedProps,W=Va(o,b),m.props=W,ne=s.pendingProps,K=m.context,G=o.contextType,O=wo,typeof G=="object"&&G!==null&&(O=dn(G)),S=o.getDerivedStateFromProps,(G=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ne||K!==O)&&Wv(s,m,u,O),ps=!1,K=s.memoizedState,m.state=K,yu(s,u,m,d),pu();var $=s.memoizedState;b!==ne||K!==$||ps||n!==null&&n.dependencies!==null&&Eh(n.dependencies)?(typeof S=="function"&&(tg(s,o,S,u),$=s.memoizedState),(W=ps||Jv(s,o,W,u,K,$,O)||n!==null&&n.dependencies!==null&&Eh(n.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,$,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,$,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=$),m.props=u,m.state=$,m.context=O,u=W):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Bh(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=Ma(s,n.child,null,d),s.child=Ma(s,null,o,d)):fn(n,s,o,d),s.memoizedState=m.state,n=s.child):n=Ni(n,s,d),n}function f0(n,s,o,u){return Aa(),s.flags|=256,fn(n,s,o,u),s.child}var ag={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function og(n){return{baseLanes:n,cachePool:nv()}}function lg(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=sr),n}function m0(n,s,o){var u=s.pendingProps,d=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=n!==null&&n.memoizedState===null?!1:(Nt.current&2)!==0),b&&(d=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(He){if(d?vs(s):bs(),(n=mt)?(n=Eb(n,Sr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ds!==null?{id:si,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},o=Q_(n),o.return=s,s.child=o,hn=s,mt=null)):n=null,n===null)throw ms(s);return Hg(n)?s.lanes=32:s.lanes=536870912,null}var S=u.children;return u=u.fallback,d?(bs(),d=s.mode,S=Fh({mode:"hidden",children:S},d),u=wa(u,d,o,null),S.return=s,u.return=s,S.sibling=u,s.child=S,u=s.child,u.memoizedState=og(o),u.childLanes=lg(n,b,o),s.memoizedState=ag,Eu(null,u)):(vs(s),ug(s,S))}var O=n.memoizedState;if(O!==null&&(S=O.dehydrated,S!==null)){if(m)s.flags&256?(vs(s),s.flags&=-257,s=cg(n,s,o)):s.memoizedState!==null?(bs(),s.child=n.child,s.flags|=128,s=null):(bs(),S=u.fallback,d=s.mode,u=Fh({mode:"visible",children:u.children},d),S=wa(S,d,o,null),S.flags|=2,u.return=s,S.return=s,u.sibling=S,s.child=u,Ma(s,n.child,null,o),u=s.child,u.memoizedState=og(o),u.childLanes=lg(n,b,o),s.memoizedState=ag,s=Eu(null,u));else if(vs(s),Hg(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var G=b.dgst;b=G,u=Error(i(419)),u.stack="",u.digest=b,cu({value:u,source:null,stack:null}),s=cg(n,s,o)}else if(qt||Co(n,s,o,!1),b=(o&n.childLanes)!==0,qt||b){if(b=dt,b!==null&&(u=Rn(b,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,Sa(n,u),qn(b,n,u),ig;qg(S)||Jh(),s=cg(n,s,o)}else qg(S)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,mt=Ar(S.nextSibling),hn=s,He=!0,fs=null,Sr=!1,n!==null&&X_(s,n),s=ug(s,u.children),s.flags|=4096);return s}return d?(bs(),S=u.fallback,d=s.mode,O=n.child,G=O.sibling,u=wi(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,G!==null?S=wi(G,S):(S=wa(S,d,o,null),S.flags|=2),S.return=s,u.return=s,u.sibling=S,s.child=u,Eu(null,u),u=s.child,S=n.child.memoizedState,S===null?S=og(o):(d=S.cachePool,d!==null?(O=Bt._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=nv(),S={baseLanes:S.baseLanes|o,cachePool:d}),u.memoizedState=S,u.childLanes=lg(n,b,o),s.memoizedState=ag,Eu(n.child,u)):(vs(s),o=n.child,n=o.sibling,o=wi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=o,s.memoizedState=null,o)}function ug(n,s){return s=Fh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Fh(n,s){return n=tr(22,n,null,s),n.lanes=0,n}function cg(n,s,o){return Ma(s,n.child,null,o),n=ug(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function g0(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),wm(n.return,s,o)}function hg(n,s,o,u,d,m){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=d,b.treeForkCount=m)}function p0(n,s,o){var u=s.pendingProps,d=u.revealOrder,m=u.tail;u=u.children;var b=Nt.current,S=(b&2)!==0;if(S?(b=b&1|2,s.flags|=128):b&=1,ae(Nt,b),fn(n,s,u,o),u=He?uu:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&g0(n,o,s);else if(n.tag===19)g0(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&Dh(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),hg(s,!1,d,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Dh(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}hg(s,!0,o,null,m,u);break;case"together":hg(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Ni(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),xs|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Co(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=wi(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=wi(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function dg(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Eh(n)))}function qA(n,s,o){switch(s.tag){case 3:st(s,s.stateNode.containerInfo),gs(s,Bt,n.memoizedState.cache),Aa();break;case 27:case 5:ze(s);break;case 4:st(s,s.stateNode.containerInfo);break;case 10:gs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,jm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(vs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?m0(n,s,o):(vs(s),n=Ni(n,s,o),n!==null?n.sibling:null);vs(s);break;case 19:var d=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Co(n,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return p0(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ae(Nt,Nt.current),u)break;return null;case 22:return s.lanes=0,l0(n,s,o,s.pendingProps);case 24:gs(s,Bt,n.memoizedState.cache)}return Ni(n,s,o)}function y0(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)qt=!0;else{if(!dg(n,o)&&(s.flags&128)===0)return qt=!1,qA(n,s,o);qt=(n.flags&131072)!==0}else qt=!1,He&&(s.flags&1048576)!==0&&$_(s,uu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Da(s.elementType),s.type=n,typeof n=="function")ym(n)?(u=Va(n,u),s.tag=1,s=d0(null,s,n,u,o)):(s.tag=0,s=sg(null,s,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===ce){s.tag=11,s=s0(null,s,n,u,o);break e}else if(d===C){s.tag=14,s=a0(null,s,n,u,o);break e}}throw s=Ce(n)||n,Error(i(306,s,""))}}return s;case 0:return sg(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=Va(u,s.pendingProps),d0(n,s,u,d,o);case 3:e:{if(st(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;d=m.element,Mm(n,s),yu(s,u,null,o);var b=s.memoizedState;if(u=b.cache,gs(s,Bt,u),u!==m.cache&&Am(s,[Bt],o,!0),pu(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=f0(n,s,u,o);break e}else if(u!==d){d=Tr(Error(i(424)),s),cu(d),s=f0(n,s,u,o);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,mt=Ar(n.firstChild),hn=s,He=!0,fs=null,Sr=!0,o=lv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Aa(),u===d){s=Ni(n,s,o);break e}fn(n,s,u,o)}s=s.child}return s;case 26:return Bh(n,s),n===null?(o=Rb(s.type,null,s.pendingProps,null))?s.memoizedState=o:He||(o=s.type,n=s.pendingProps,u=id(xe.current).createElement(o),u[Lt]=s,u[en]=n,mn(u,o,n),Ut(u),s.stateNode=u):s.memoizedState=Rb(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ze(s),n===null&&He&&(u=s.stateNode=wb(s.type,s.pendingProps,xe.current),hn=s,Sr=!0,d=mt,Rs(s.type)?(Gg=d,mt=Ar(u.firstChild)):mt=d),fn(n,s,s.pendingProps.children,o),Bh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&He&&((d=u=mt)&&(u=vI(u,s.type,s.pendingProps,Sr),u!==null?(s.stateNode=u,hn=s,mt=Ar(u.firstChild),Sr=!1,d=!0):d=!1),d||ms(s)),ze(s),d=s.type,m=s.pendingProps,b=n!==null?n.memoizedProps:null,u=m.children,zg(d,m)?u=null:b!==null&&zg(d,b)&&(s.flags|=32),s.memoizedState!==null&&(d=Um(n,s,VA,null,null,o),ju._currentValue=d),Bh(n,s),fn(n,s,u,o),s.child;case 6:return n===null&&He&&((n=o=mt)&&(o=bI(o,s.pendingProps,Sr),o!==null?(s.stateNode=o,hn=s,mt=null,n=!0):n=!1),n||ms(s)),null;case 13:return m0(n,s,o);case 4:return st(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ma(s,null,u,o):fn(n,s,u,o),s.child;case 11:return s0(n,s,s.type,s.pendingProps,o);case 7:return fn(n,s,s.pendingProps,o),s.child;case 8:return fn(n,s,s.pendingProps.children,o),s.child;case 12:return fn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,gs(s,s.type,u.value),fn(n,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Ra(s),d=dn(d),u=u(d),s.flags|=1,fn(n,s,u,o),s.child;case 14:return a0(n,s,s.type,s.pendingProps,o);case 15:return o0(n,s,s.type,s.pendingProps,o);case 19:return p0(n,s,o);case 31:return FA(n,s,o);case 22:return l0(n,s,o,s.pendingProps);case 24:return Ra(s),u=dn(Bt),n===null?(d=Cm(),d===null&&(d=dt,m=Im(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),s.memoizedState={parent:u,cache:d},Nm(s),gs(s,Bt,d)):((n.lanes&o)!==0&&(Mm(n,s),yu(s,null,null,o),pu()),d=n.memoizedState,m=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),gs(s,Bt,u)):(u=m.cache,gs(s,Bt,u),u!==d.cache&&Am(s,[Bt],o,!0))),fn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Mi(n){n.flags|=4}function fg(n,s,o,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(H0())n.flags|=8192;else throw Na=Ah,Dm}else n.flags&=-16777217}function _0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Ob(s))if(H0())n.flags|=8192;else throw Na=Ah,Dm}function qh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Zt():536870912,n.lanes|=s,Bo|=s)}function xu(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function gt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function HA(n,s,o){var u=s.pendingProps;switch(Tm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(s),null;case 1:return gt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ri(Bt),Ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ro(s)?Mi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xm())),gt(s),null;case 26:var d=s.type,m=s.memoizedState;return n===null?(Mi(s),m!==null?(gt(s),_0(s,m)):(gt(s),fg(s,d,null,u,o))):m?m!==n.memoizedState?(Mi(s),gt(s),_0(s,m)):(gt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Mi(s),gt(s),fg(s,d,n,u,o)),null;case 27:if(dr(s),o=xe.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Mi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return gt(s),null}n=me.current,Ro(s)?J_(s):(n=wb(d,u,o),s.stateNode=n,Mi(s))}return gt(s),null;case 5:if(dr(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Mi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return gt(s),null}if(m=me.current,Ro(s))J_(s);else{var b=id(xe.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?b.createElement(d,{is:u.is}):b.createElement(d)}}m[Lt]=s,m[en]=u;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;e:switch(mn(m,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Mi(s)}}return gt(s),fg(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Mi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=xe.current,Ro(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,d=hn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Lt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||mb(n.nodeValue,o)),n||ms(s,!0)}else n=id(n).createTextNode(u),n[Lt]=s,s.stateNode=n}return gt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ro(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Lt]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),n=!1}else o=xm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(rr(s),s):(rr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return gt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ro(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Lt]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),d=!1}else d=xm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(rr(s),s):(rr(s),null)}return rr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),qh(s,s.updateQueue),gt(s),null);case 4:return Ke(),n===null&&kg(s.stateNode.containerInfo),gt(s),null;case 10:return Ri(s.type),gt(s),null;case 19:if(J(Nt),u=s.memoizedState,u===null)return gt(s),null;if(d=(s.flags&128)!==0,m=u.rendering,m===null)if(d)xu(u,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Dh(n),m!==null){for(s.flags|=128,xu(u,!1),n=m.updateQueue,s.updateQueue=n,qh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)K_(o,n),o=o.sibling;return ae(Nt,Nt.current&1|2),He&&Ai(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Wt()>Yh&&(s.flags|=128,d=!0,xu(u,!1),s.lanes=4194304)}else{if(!d)if(n=Dh(m),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,qh(s,n),xu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!He)return gt(s),null}else 2*Wt()-u.renderingStartTime>Yh&&o!==536870912&&(s.flags|=128,d=!0,xu(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Wt(),n.sibling=null,o=Nt.current,ae(Nt,d?o&1|2:o&1),He&&Ai(s,u.treeForkCount),n):(gt(s),null);case 22:case 23:return rr(s),Pm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(gt(s),s.subtreeFlags&6&&(s.flags|=8192)):gt(s),o=s.updateQueue,o!==null&&qh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&J(Ca),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ri(Bt),gt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function GA(n,s){switch(Tm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ri(Bt),Ke(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return dr(s),null;case 31:if(s.memoizedState!==null){if(rr(s),s.alternate===null)throw Error(i(340));Aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(rr(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return J(Nt),null;case 4:return Ke(),null;case 10:return Ri(s.type),null;case 22:case 23:return rr(s),Pm(),n!==null&&J(Ca),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ri(Bt),null;case 25:return null;default:return null}}function v0(n,s){switch(Tm(s),s.tag){case 3:Ri(Bt),Ke();break;case 26:case 27:case 5:dr(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&rr(s);break;case 13:rr(s);break;case 19:J(Nt);break;case 10:Ri(s.type);break;case 22:case 23:rr(s),Pm(),n!==null&&J(Ca);break;case 24:Ri(Bt)}}function Su(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var m=o.create,b=o.inst;u=m(),b.destroy=u}o=o.next}while(o!==d)}}catch(S){nt(s,s.return,S)}}function Ts(n,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&n)===n){var b=u.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,d=s;var O=o,G=S;try{G()}catch(W){nt(d,O,W)}}}u=u.next}while(u!==m)}}catch(W){nt(s,s.return,W)}}function b0(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{cv(s,o)}catch(u){nt(n,n.return,u)}}}function T0(n,s,o){o.props=Va(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){nt(n,s,u)}}function wu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){nt(n,s,d)}}function oi(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){nt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){nt(n,s,d)}else o.current=null}function E0(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){nt(n,n.return,d)}}function mg(n,s,o){try{var u=n.stateNode;fI(u,n.type,o,s),u[en]=s}catch(d){nt(n,n.return,d)}}function x0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Rs(n.type)||n.tag===4}function gg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||x0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Rs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pg(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Dr));else if(u!==4&&(u===27&&Rs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(pg(n,s,o),n=n.sibling;n!==null;)pg(n,s,o),n=n.sibling}function Hh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Rs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Hh(n,s,o),n=n.sibling;n!==null;)Hh(n,s,o),n=n.sibling}function S0(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);mn(s,u,o),s[Lt]=n,s[en]=o}catch(m){nt(n,n.return,m)}}var Oi=!1,Ht=!1,yg=!1,w0=typeof WeakSet=="function"?WeakSet:Set,nn=null;function KA(n,s){if(n=n.containerInfo,Lg=hd,n=j_(n),cm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,S=-1,O=-1,G=0,W=0,ne=n,K=null;t:for(;;){for(var $;ne!==o||d!==0&&ne.nodeType!==3||(S=b+d),ne!==m||u!==0&&ne.nodeType!==3||(O=b+u),ne.nodeType===3&&(b+=ne.nodeValue.length),($=ne.firstChild)!==null;)K=ne,ne=$;for(;;){if(ne===n)break t;if(K===o&&++G===d&&(S=b),K===m&&++W===u&&(O=b),($=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=$}o=S===-1||O===-1?null:{start:S,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ug={focusedElem:n,selectionRange:o},hd=!1,nn=s;nn!==null;)if(s=nn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,nn=n;else for(;nn!==null;){switch(s=nn,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,d=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var pe=Va(o.type,d);n=u.getSnapshotBeforeUpdate(pe,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(we){nt(o,o.return,we)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Fg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Fg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,nn=n;break}nn=s.return}}function A0(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ki(n,o),u&4&&Su(5,o);break;case 1:if(ki(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(b){nt(o,o.return,b)}else{var d=Va(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(b){nt(o,o.return,b)}}u&64&&b0(o),u&512&&wu(o,o.return);break;case 3:if(ki(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{cv(n,s)}catch(b){nt(o,o.return,b)}}break;case 27:s===null&&u&4&&S0(o);case 26:case 5:ki(n,o),s===null&&u&4&&E0(o),u&512&&wu(o,o.return);break;case 12:ki(n,o);break;case 31:ki(n,o),u&4&&C0(n,o);break;case 13:ki(n,o),u&4&&D0(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=tI.bind(null,o),TI(n,o))));break;case 22:if(u=o.memoizedState!==null||Oi,!u){s=s!==null&&s.memoizedState!==null||Ht,d=Oi;var m=Ht;Oi=u,(Ht=s)&&!m?Pi(n,o,(o.subtreeFlags&8772)!==0):ki(n,o),Oi=d,Ht=m}break;case 30:break;default:ki(n,o)}}function I0(n){var s=n.alternate;s!==null&&(n.alternate=null,I0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&co(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Tt=null,Un=!1;function Vi(n,s,o){for(o=o.child;o!==null;)R0(n,s,o),o=o.sibling}function R0(n,s,o){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount($n,o)}catch{}switch(o.tag){case 26:Ht||oi(o,s),Vi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ht||oi(o,s);var u=Tt,d=Un;Rs(o.type)&&(Tt=o.stateNode,Un=!1),Vi(n,s,o),Vu(o.stateNode),Tt=u,Un=d;break;case 5:Ht||oi(o,s);case 6:if(u=Tt,d=Un,Tt=null,Vi(n,s,o),Tt=u,Un=d,Tt!==null)if(Un)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(o.stateNode)}catch(m){nt(o,s,m)}else try{Tt.removeChild(o.stateNode)}catch(m){nt(o,s,m)}break;case 18:Tt!==null&&(Un?(n=Tt,bb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),$o(n)):bb(Tt,o.stateNode));break;case 4:u=Tt,d=Un,Tt=o.stateNode.containerInfo,Un=!0,Vi(n,s,o),Tt=u,Un=d;break;case 0:case 11:case 14:case 15:Ts(2,o,s),Ht||Ts(4,o,s),Vi(n,s,o);break;case 1:Ht||(oi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&T0(o,s,u)),Vi(n,s,o);break;case 21:Vi(n,s,o);break;case 22:Ht=(u=Ht)||o.memoizedState!==null,Vi(n,s,o),Ht=u;break;default:Vi(n,s,o)}}function C0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{$o(n)}catch(o){nt(s,s.return,o)}}}function D0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{$o(n)}catch(o){nt(s,s.return,o)}}function QA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new w0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new w0),s;default:throw Error(i(435,n.tag))}}function Gh(n,s){var o=QA(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=nI.bind(null,n,u);u.then(d,d)}})}function zn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],m=n,b=s,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(Rs(S.type)){Tt=S.stateNode,Un=!1;break e}break;case 5:Tt=S.stateNode,Un=!1;break e;case 3:case 4:Tt=S.stateNode.containerInfo,Un=!0;break e}S=S.return}if(Tt===null)throw Error(i(160));R0(m,b,d),Tt=null,Un=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)N0(s,n),s=s.sibling}var Pr=null;function N0(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:zn(s,n),Bn(n),u&4&&(Ts(3,n,n.return),Su(3,n),Ts(5,n,n.return));break;case 1:zn(s,n),Bn(n),u&512&&(Ht||o===null||oi(o,o.return)),u&64&&Oi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Pr;if(zn(s,n),Bn(n),u&512&&(Ht||o===null||oi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Qr]||m[Lt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),mn(m,u,o),m[Lt]=n,Ut(m),u=m;break e;case"link":var b=Nb("link","href",d).get(u+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}m=d.createElement(u),mn(m,u,o),d.head.appendChild(m);break;case"meta":if(b=Nb("meta","content",d).get(u+(o.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}m=d.createElement(u),mn(m,u,o),d.head.appendChild(m);break;default:throw Error(i(468,u))}m[Lt]=n,Ut(m),u=m}n.stateNode=u}else Mb(d,n.type,n.stateNode);else n.stateNode=Db(d,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Mb(d,n.type,n.stateNode):Db(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&mg(n,n.memoizedProps,o.memoizedProps)}break;case 27:zn(s,n),Bn(n),u&512&&(Ht||o===null||oi(o,o.return)),o!==null&&u&4&&mg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(zn(s,n),Bn(n),u&512&&(Ht||o===null||oi(o,o.return)),n.flags&32){d=n.stateNode;try{Ln(d,"")}catch(pe){nt(n,n.return,pe)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,mg(n,d,o!==null?o.memoizedProps:d)),u&1024&&(yg=!0);break;case 6:if(zn(s,n),Bn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(pe){nt(n,n.return,pe)}}break;case 3:if(od=null,d=Pr,Pr=sd(s.containerInfo),zn(s,n),Pr=d,Bn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{$o(s.containerInfo)}catch(pe){nt(n,n.return,pe)}yg&&(yg=!1,M0(n));break;case 4:u=Pr,Pr=sd(n.stateNode.containerInfo),zn(s,n),Bn(n),Pr=u;break;case 12:zn(s,n),Bn(n);break;case 31:zn(s,n),Bn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Gh(n,u)));break;case 13:zn(s,n),Bn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Qh=Wt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Gh(n,u)));break;case 22:d=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,G=Oi,W=Ht;if(Oi=G||d,Ht=W||O,zn(s,n),Ht=W,Oi=G,Bn(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||O||Oi||Ht||ka(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(m=O.stateNode,d)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=O.stateNode;var ne=O.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;S.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(pe){nt(O,O.return,pe)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(pe){nt(O,O.return,pe)}}}else if(s.tag===18){if(o===null){O=s;try{var $=O.stateNode;d?Tb($,!0):Tb(O.stateNode,!1)}catch(pe){nt(O,O.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Gh(n,o))));break;case 19:zn(s,n),Bn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Gh(n,u)));break;case 30:break;case 21:break;default:zn(s,n),Bn(n)}}function Bn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(x0(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,m=gg(n);Hh(n,m,d);break;case 5:var b=o.stateNode;o.flags&32&&(Ln(b,""),o.flags&=-33);var S=gg(n);Hh(n,S,b);break;case 3:case 4:var O=o.stateNode.containerInfo,G=gg(n);pg(n,G,O);break;default:throw Error(i(161))}}catch(W){nt(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function M0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;M0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ki(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)A0(n,s.alternate,s),s=s.sibling}function ka(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ts(4,s,s.return),ka(s);break;case 1:oi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&T0(s,s.return,o),ka(s);break;case 27:Vu(s.stateNode);case 26:case 5:oi(s,s.return),ka(s);break;case 22:s.memoizedState===null&&ka(s);break;case 30:ka(s);break;default:ka(s)}n=n.sibling}}function Pi(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Pi(d,m,o),Su(4,m);break;case 1:if(Pi(d,m,o),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){nt(u,u.return,G)}if(u=m,d=u.updateQueue,d!==null){var S=u.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)uv(O[d],S)}catch(G){nt(u,u.return,G)}}o&&b&64&&b0(m),wu(m,m.return);break;case 27:S0(m);case 26:case 5:Pi(d,m,o),o&&u===null&&b&4&&E0(m),wu(m,m.return);break;case 12:Pi(d,m,o);break;case 31:Pi(d,m,o),o&&b&4&&C0(d,m);break;case 13:Pi(d,m,o),o&&b&4&&D0(d,m);break;case 22:m.memoizedState===null&&Pi(d,m,o),wu(m,m.return);break;case 30:break;default:Pi(d,m,o)}s=s.sibling}}function _g(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&hu(o))}function vg(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&hu(n))}function jr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)O0(n,s,o,u),s=s.sibling}function O0(n,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:jr(n,s,o,u),d&2048&&Su(9,s);break;case 1:jr(n,s,o,u);break;case 3:jr(n,s,o,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&hu(n)));break;case 12:if(d&2048){jr(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){nt(s,s.return,O)}}else jr(n,s,o,u);break;case 31:jr(n,s,o,u);break;case 13:jr(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?jr(n,s,o,u):Au(n,s):m._visibility&2?jr(n,s,o,u):(m._visibility|=2,Lo(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&_g(b,s);break;case 24:jr(n,s,o,u),d&2048&&vg(s.alternate,s);break;default:jr(n,s,o,u)}}function Lo(n,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,b=s,S=o,O=u,G=b.flags;switch(b.tag){case 0:case 11:case 15:Lo(m,b,S,O,d),Su(8,b);break;case 23:break;case 22:var W=b.stateNode;b.memoizedState!==null?W._visibility&2?Lo(m,b,S,O,d):Au(m,b):(W._visibility|=2,Lo(m,b,S,O,d)),d&&G&2048&&_g(b.alternate,b);break;case 24:Lo(m,b,S,O,d),d&&G&2048&&vg(b.alternate,b);break;default:Lo(m,b,S,O,d)}s=s.sibling}}function Au(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,d=u.flags;switch(u.tag){case 22:Au(o,u),d&2048&&_g(u.alternate,u);break;case 24:Au(o,u),d&2048&&vg(u.alternate,u);break;default:Au(o,u)}s=s.sibling}}var Iu=8192;function Uo(n,s,o){if(n.subtreeFlags&Iu)for(n=n.child;n!==null;)V0(n,s,o),n=n.sibling}function V0(n,s,o){switch(n.tag){case 26:Uo(n,s,o),n.flags&Iu&&n.memoizedState!==null&&OI(o,Pr,n.memoizedState,n.memoizedProps);break;case 5:Uo(n,s,o);break;case 3:case 4:var u=Pr;Pr=sd(n.stateNode.containerInfo),Uo(n,s,o),Pr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Iu,Iu=16777216,Uo(n,s,o),Iu=u):Uo(n,s,o));break;default:Uo(n,s,o)}}function k0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ru(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];nn=u,j0(u,n)}k0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P0(n),n=n.sibling}function P0(n){switch(n.tag){case 0:case 11:case 15:Ru(n),n.flags&2048&&Ts(9,n,n.return);break;case 3:Ru(n);break;case 12:Ru(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Kh(n)):Ru(n);break;default:Ru(n)}}function Kh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];nn=u,j0(u,n)}k0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ts(8,s,s.return),Kh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Kh(s));break;default:Kh(s)}n=n.sibling}}function j0(n,s){for(;nn!==null;){var o=nn;switch(o.tag){case 0:case 11:case 15:Ts(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,nn=u;else e:for(o=n;nn!==null;){u=nn;var d=u.sibling,m=u.return;if(I0(u),u===o){nn=null;break e}if(d!==null){d.return=m,nn=d;break e}nn=m}}}var YA={getCacheForType:function(n){var s=dn(Bt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return dn(Bt).controller.signal}},$A=typeof WeakMap=="function"?WeakMap:Map,Je=0,dt=null,Le=null,Be=0,tt=0,ir=null,Es=!1,zo=!1,bg=!1,ji=0,At=0,xs=0,Pa=0,Tg=0,sr=0,Bo=0,Cu=null,Fn=null,Eg=!1,Qh=0,L0=0,Yh=1/0,$h=null,Ss=null,Yt=0,ws=null,Fo=null,Li=0,xg=0,Sg=null,U0=null,Du=0,wg=null;function ar(){return(Je&2)!==0&&Be!==0?Be&-Be:Q.T!==null?Ng():Jn()}function z0(){if(sr===0)if((Be&536870912)===0||He){var n=Ti;Ti<<=1,(Ti&3932160)===0&&(Ti=262144),sr=n}else sr=536870912;return n=nr.current,n!==null&&(n.flags|=32),sr}function qn(n,s,o){(n===dt&&(tt===2||tt===9)||n.cancelPendingCommit!==null)&&(qo(n,0),As(n,Be,sr,!1)),Pn(n,o),((Je&2)===0||n!==dt)&&(n===dt&&((Je&2)===0&&(Pa|=o),At===4&&As(n,Be,sr,!1)),li(n))}function B0(n,s,o){if((Je&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||jt(n,s),d=u?WA(n,s):Ig(n,s,!0),m=u;do{if(d===0){zo&&!u&&As(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!XA(o)){d=Ig(n,s,!1),m=!1;continue}if(d===2){if(m=s,n.errorRecoveryDisabledLanes&m)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var S=n;d=Cu;var O=S.current.memoizedState.isDehydrated;if(O&&(qo(S,b).flags|=256),b=Ig(S,b,!1),b!==2){if(bg&&!O){S.errorRecoveryDisabledLanes|=m,Pa|=m,d=4;break e}m=Fn,Fn=d,m!==null&&(Fn===null?Fn=m:Fn.push.apply(Fn,m))}d=b}if(m=!1,d!==2)continue}}if(d===1){qo(n,0),As(n,s,0,!0);break}e:{switch(u=n,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:As(u,s,sr,!Es);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=Qh+300-Wt(),10<d)){if(As(u,s,sr,!Es),vt(u,0,!0)!==0)break e;Li=s,u.timeoutHandle=_b(F0.bind(null,u,o,Fn,$h,Eg,s,sr,Pa,Bo,Es,m,"Throttled",-0,0),d);break e}F0(u,o,Fn,$h,Eg,s,sr,Pa,Bo,Es,m,null,-0,0)}}break}while(!0);li(n)}function F0(n,s,o,u,d,m,b,S,O,G,W,ne,K,$){if(n.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dr},V0(s,m,ne);var pe=(m&62914560)===m?Qh-Wt():(m&4194048)===m?L0-Wt():0;if(pe=VI(ne,pe),pe!==null){Li=m,n.cancelPendingCommit=pe(X0.bind(null,n,s,m,o,u,d,b,S,O,W,ne,null,K,$)),As(n,m,b,!G);return}}X0(n,s,m,o,u,d,b,S,O)}function XA(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],m=d.getSnapshot;d=d.value;try{if(!er(m(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function As(n,s,o,u){s&=~Tg,s&=~Pa,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var m=31-yt(d),b=1<<m;u[m]=-1,d&=~b}o!==0&&bn(n,o,s)}function Xh(){return(Je&6)===0?(Nu(0),!1):!0}function Ag(){if(Le!==null){if(tt===0)var n=Le.return;else n=Le,Ii=Ia=null,Fm(n),Oo=null,fu=0,n=Le;for(;n!==null;)v0(n.alternate,n),n=n.return;Le=null}}function qo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,pI(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Li=0,Ag(),dt=n,Le=o=wi(n.current,null),Be=s,tt=0,ir=null,Es=!1,zo=jt(n,s),bg=!1,Bo=sr=Tg=Pa=xs=At=0,Fn=Cu=null,Eg=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-yt(u),m=1<<d;s|=n[d],u&=~m}return ji=s,yh(),o}function q0(n,s){Me=null,Q.H=Tu,s===Mo||s===wh?(s=sv(),tt=3):s===Dm?(s=sv(),tt=4):tt=s===ig?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ir=s,Le===null&&(At=1,Uh(n,Tr(s,n.current)))}function H0(){var n=nr.current;return n===null?!0:(Be&4194048)===Be?wr===null:(Be&62914560)===Be||(Be&536870912)!==0?n===wr:!1}function G0(){var n=Q.H;return Q.H=Tu,n===null?Tu:n}function K0(){var n=Q.A;return Q.A=YA,n}function Jh(){At=4,Es||(Be&4194048)!==Be&&nr.current!==null||(zo=!0),(xs&134217727)===0&&(Pa&134217727)===0||dt===null||As(dt,Be,sr,!1)}function Ig(n,s,o){var u=Je;Je|=2;var d=G0(),m=K0();(dt!==n||Be!==s)&&($h=null,qo(n,s)),s=!1;var b=At;e:do try{if(tt!==0&&Le!==null){var S=Le,O=ir;switch(tt){case 8:Ag(),b=6;break e;case 3:case 2:case 9:case 6:nr.current===null&&(s=!0);var G=tt;if(tt=0,ir=null,Ho(n,S,O,G),o&&zo){b=0;break e}break;default:G=tt,tt=0,ir=null,Ho(n,S,O,G)}}JA(),b=At;break}catch(W){q0(n,W)}while(!0);return s&&n.shellSuspendCounter++,Ii=Ia=null,Je=u,Q.H=d,Q.A=m,Le===null&&(dt=null,Be=0,yh()),b}function JA(){for(;Le!==null;)Q0(Le)}function WA(n,s){var o=Je;Je|=2;var u=G0(),d=K0();dt!==n||Be!==s?($h=null,Yh=Wt()+500,qo(n,s)):zo=jt(n,s);e:do try{if(tt!==0&&Le!==null){s=Le;var m=ir;t:switch(tt){case 1:tt=0,ir=null,Ho(n,s,m,1);break;case 2:case 9:if(rv(m)){tt=0,ir=null,Y0(s);break}s=function(){tt!==2&&tt!==9||dt!==n||(tt=7),li(n)},m.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:rv(m)?(tt=0,ir=null,Y0(s)):(tt=0,ir=null,Ho(n,s,m,7));break;case 5:var b=null;switch(Le.tag){case 26:b=Le.memoizedState;case 5:case 27:var S=Le;if(b?Ob(b):S.stateNode.complete){tt=0,ir=null;var O=S.sibling;if(O!==null)Le=O;else{var G=S.return;G!==null?(Le=G,Wh(G)):Le=null}break t}}tt=0,ir=null,Ho(n,s,m,5);break;case 6:tt=0,ir=null,Ho(n,s,m,6);break;case 8:Ag(),At=6;break e;default:throw Error(i(462))}}ZA();break}catch(W){q0(n,W)}while(!0);return Ii=Ia=null,Q.H=u,Q.A=d,Je=o,Le!==null?0:(dt=null,Be=0,yh(),At)}function ZA(){for(;Le!==null&&!ns();)Q0(Le)}function Q0(n){var s=y0(n.alternate,n,ji);n.memoizedProps=n.pendingProps,s===null?Wh(n):Le=s}function Y0(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=h0(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=h0(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Fm(s);default:v0(o,s),s=Le=K_(s,ji),s=y0(o,s,ji)}n.memoizedProps=n.pendingProps,s===null?Wh(n):Le=s}function Ho(n,s,o,u){Ii=Ia=null,Fm(s),Oo=null,fu=0;var d=s.return;try{if(BA(n,d,s,o,Be)){At=1,Uh(n,Tr(o,n.current)),Le=null;return}}catch(m){if(d!==null)throw Le=d,m;At=1,Uh(n,Tr(o,n.current)),Le=null;return}s.flags&32768?(He||u===1?n=!0:zo||(Be&536870912)!==0?n=!1:(Es=n=!0,(u===2||u===9||u===3||u===6)&&(u=nr.current,u!==null&&u.tag===13&&(u.flags|=16384))),$0(s,n)):Wh(s)}function Wh(n){var s=n;do{if((s.flags&32768)!==0){$0(s,Es);return}n=s.return;var o=HA(s.alternate,s,ji);if(o!==null){Le=o;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=n}while(s!==null);At===0&&(At=5)}function $0(n,s){do{var o=GA(n.alternate,n);if(o!==null){o.flags&=32767,Le=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Le=n;return}Le=n=o}while(n!==null);At=6,Le=null}function X0(n,s,o,u,d,m,b,S,O){n.cancelPendingCommit=null;do Zh();while(Yt!==0);if((Je&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=gm,Ct(n,o,m,b,S,O),n===dt&&(Le=dt=null,Be=0),Fo=s,ws=n,Li=o,xg=m,Sg=d,U0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,rI(In,function(){return tb(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,d=se.p,se.p=2,b=Je,Je|=4;try{KA(n,s,o)}finally{Je=b,se.p=d,Q.T=u}}Yt=1,J0(),W0(),Z0()}}function J0(){if(Yt===1){Yt=0;var n=ws,s=Fo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=se.p;se.p=2;var d=Je;Je|=4;try{N0(s,n);var m=Ug,b=j_(n.containerInfo),S=m.focusedElem,O=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&P_(S.ownerDocument.documentElement,S)){if(O!==null&&cm(S)){var G=O.start,W=O.end;if(W===void 0&&(W=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(W,S.value.length);else{var ne=S.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var $=K.getSelection(),pe=S.textContent.length,we=Math.min(O.start,pe),ct=O.end===void 0?we:Math.min(O.end,pe);!$.extend&&we>ct&&(b=ct,ct=we,we=b);var U=k_(S,we),j=k_(S,ct);if(U&&j&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==j.node||$.focusOffset!==j.offset)){var H=ne.createRange();H.setStart(U.node,U.offset),$.removeAllRanges(),we>ct?($.addRange(H),$.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),$.addRange(H))}}}}for(ne=[],$=S;$=$.parentNode;)$.nodeType===1&&ne.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ne.length;S++){var Z=ne[S];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}hd=!!Lg,Ug=Lg=null}finally{Je=d,se.p=u,Q.T=o}}n.current=s,Yt=2}}function W0(){if(Yt===2){Yt=0;var n=ws,s=Fo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=se.p;se.p=2;var d=Je;Je|=4;try{A0(n,s.alternate,s)}finally{Je=d,se.p=u,Q.T=o}}Yt=3}}function Z0(){if(Yt===4||Yt===3){Yt=0,ua();var n=ws,s=Fo,o=Li,u=U0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Yt=5:(Yt=0,Fo=ws=null,eb(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Ss=null),Cn(o),s=s.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot($n,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,d=se.p,se.p=2,Q.T=null;try{for(var m=n.onRecoverableError,b=0;b<u.length;b++){var S=u[b];m(S.value,{componentStack:S.stack})}}finally{Q.T=s,se.p=d}}(Li&3)!==0&&Zh(),li(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===wg?Du++:(Du=0,wg=n):Du=0,Nu(0)}}function eb(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,hu(s)))}function Zh(){return J0(),W0(),Z0(),tb()}function tb(){if(Yt!==5)return!1;var n=ws,s=xg;xg=0;var o=Cn(Li),u=Q.T,d=se.p;try{se.p=32>o?32:o,Q.T=null,o=Sg,Sg=null;var m=ws,b=Li;if(Yt=0,Fo=ws=null,Li=0,(Je&6)!==0)throw Error(i(331));var S=Je;if(Je|=4,P0(m.current),O0(m,m.current,b,o),Je=S,Nu(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot($n,m)}catch{}return!0}finally{se.p=d,Q.T=u,eb(n,s)}}function nb(n,s,o){s=Tr(o,s),s=rg(n.stateNode,s,2),n=_s(n,s,2),n!==null&&(Pn(n,2),li(n))}function nt(n,s,o){if(n.tag===3)nb(n,n,o);else for(;s!==null;){if(s.tag===3){nb(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ss===null||!Ss.has(u))){n=Tr(o,n),o=r0(2),u=_s(s,o,2),u!==null&&(i0(o,u,s,n),Pn(u,2),li(u));break}}s=s.return}}function Rg(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new $A;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(bg=!0,d.add(o),n=eI.bind(null,n,s,o),s.then(n,n))}function eI(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,dt===n&&(Be&o)===o&&(At===4||At===3&&(Be&62914560)===Be&&300>Wt()-Qh?(Je&2)===0&&qo(n,0):Tg|=o,Bo===Be&&(Bo=0)),li(n)}function rb(n,s){s===0&&(s=Zt()),n=Sa(n,s),n!==null&&(Pn(n,s),li(n))}function tI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),rb(n,o)}function nI(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),rb(n,o)}function rI(n,s){return at(n,s)}var ed=null,Go=null,Cg=!1,td=!1,Dg=!1,Is=0;function li(n){n!==Go&&n.next===null&&(Go===null?ed=Go=n:Go=Go.next=n),td=!0,Cg||(Cg=!0,sI())}function Nu(n,s){if(!Dg&&td){Dg=!0;do for(var o=!1,u=ed;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var b=u.suspendedLanes,S=u.pingedLanes;m=(1<<31-yt(42|n)+1)-1,m&=d&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,ob(u,m))}else m=Be,m=vt(u,u===dt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||jt(u,m)||(o=!0,ob(u,m));u=u.next}while(o);Dg=!1}}function iI(){ib()}function ib(){td=Cg=!1;var n=0;Is!==0&&gI()&&(n=Is);for(var s=Wt(),o=null,u=ed;u!==null;){var d=u.next,m=sb(u,s);m===0?(u.next=null,o===null?ed=d:o.next=d,d===null&&(Go=o)):(o=u,(n!==0||(m&3)!==0)&&(td=!0)),u=d}Yt!==0&&Yt!==5||Nu(n),Is!==0&&(Is=0)}function sb(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var b=31-yt(m),S=1<<b,O=d[b];O===-1?((S&o)===0||(S&u)!==0)&&(d[b]=vn(S,s)):O<=s&&(n.expiredLanes|=S),m&=~S}if(s=dt,o=Be,o=vt(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(tt===2||tt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Qn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||jt(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Qn(u),Cn(o)){case 2:case 8:o=mr;break;case 32:o=In;break;case 268435456:o=ha;break;default:o=In}return u=ab.bind(null,n),o=at(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Qn(u),n.callbackPriority=2,n.callbackNode=null,2}function ab(n,s){if(Yt!==0&&Yt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Zh()&&n.callbackNode!==o)return null;var u=Be;return u=vt(n,n===dt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(B0(n,u,s),sb(n,Wt()),n.callbackNode!=null&&n.callbackNode===o?ab.bind(null,n):null)}function ob(n,s){if(Zh())return null;B0(n,s,!0)}function sI(){yI(function(){(Je&6)!==0?at(ca,iI):ib()})}function Ng(){if(Is===0){var n=Do;n===0&&(n=gr,gr<<=1,(gr&261888)===0&&(gr=256)),Is=n}return Is}function lb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:go(""+n)}function ub(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function aI(n,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var m=lb((d[en]||null).action),b=u.submitter;b&&(s=(s=b[en]||null)?lb(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var S=new ti("action","action",null,u,d);n.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Is!==0){var O=b?ub(d,b):new FormData(d);Jm(o,{pending:!0,data:O,method:d.method,action:m},null,O)}}else typeof m=="function"&&(S.preventDefault(),O=b?ub(d,b):new FormData(d),Jm(o,{pending:!0,data:O,method:d.method,action:m},m,O))},currentTarget:d}]})}}for(var Mg=0;Mg<mm.length;Mg++){var Og=mm[Mg],oI=Og.toLowerCase(),lI=Og[0].toUpperCase()+Og.slice(1);kr(oI,"on"+lI)}kr(z_,"onAnimationEnd"),kr(B_,"onAnimationIteration"),kr(F_,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(SA,"onTransitionRun"),kr(wA,"onTransitionStart"),kr(AA,"onTransitionCancel"),kr(q_,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function cb(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var b=u.length-1;0<=b;b--){var S=u[b],O=S.instance,G=S.currentTarget;if(S=S.listener,O!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=G;try{m(d)}catch(W){ph(W)}d.currentTarget=null,m=O}else for(b=0;b<u.length;b++){if(S=u[b],O=S.instance,G=S.currentTarget,S=S.listener,O!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=G;try{m(d)}catch(W){ph(W)}d.currentTarget=null,m=O}}}}function Ue(n,s){var o=s[uo];o===void 0&&(o=s[uo]=new Set);var u=n+"__bubble";o.has(u)||(hb(s,n,2,!1),o.add(u))}function Vg(n,s,o){var u=0;s&&(u|=4),hb(o,n,u,s)}var nd="_reactListening"+Math.random().toString(36).slice(2);function kg(n){if(!n[nd]){n[nd]=!0,Hl.forEach(function(o){o!=="selectionchange"&&(uI.has(o)||Vg(o,!1,n),Vg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[nd]||(s[nd]=!0,Vg("selectionchange",!1,s))}}function hb(n,s,o,u){switch(zb(s)){case 2:var d=jI;break;case 8:d=LI;break;default:d=Xg}o=d.bind(null,s,o,n),d=void 0,!pa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function Pg(n,s,o,u,d){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var S=u.stateNode.containerInfo;if(S===d)break;if(b===4)for(b=u.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;S!==null;){if(b=Yr(S),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){u=m=b;continue e}S=S.parentNode}}u=u.return}ls(function(){var G=m,W=yr(o),ne=[];e:{var K=H_.get(n);if(K!==void 0){var $=ti,pe=n;switch(n){case"keypress":if(_a(o)===0)break e;case"keydown":case"keyup":$=fh;break;case"focusin":pe="focus",$=ba;break;case"focusout":pe="blur",$=ba;break;case"beforeblur":case"afterblur":$=ba;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=y;break;case z_:case B_:case F_:$=ah;break;case q_:$=w;break;case"scroll":case"scrollend":$=nu;break;case"wheel":$=Y;break;case"copy":case"cut":case"paste":$=oh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Si;break;case"toggle":case"beforetoggle":$=Ne}var we=(s&4)!==0,ct=!we&&(n==="scroll"||n==="scrollend"),U=we?K!==null?K+"Capture":null:K;we=[];for(var j=G,H;j!==null;){var Z=j;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||U===null||(Z=Nr(j,U),Z!=null&&we.push(Ou(j,Z,H))),ct)break;j=j.return}0<we.length&&(K=new $(K,pe,null,o,W),ne.push({event:K,listeners:we}))}}if((s&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",K&&o!==Zl&&(pe=o.relatedTarget||o.fromElement)&&(Yr(pe)||pe[Kr]))break e;if(($||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,$?(pe=o.relatedTarget||o.toElement,$=G,pe=pe?Yr(pe):null,pe!==null&&(ct=l(pe),we=pe.tag,pe!==ct||we!==5&&we!==27&&we!==6)&&(pe=null)):($=null,pe=G),$!==pe)){if(we=ru,Z="onMouseLeave",U="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(we=Si,Z="onPointerLeave",U="onPointerEnter",j="pointer"),ct=$==null?K:Wn($),H=pe==null?K:Wn(pe),K=new we(Z,j+"leave",$,o,W),K.target=ct,K.relatedTarget=H,Z=null,Yr(W)===G&&(we=new we(U,j+"enter",pe,o,W),we.target=H,we.relatedTarget=ct,Z=we),ct=Z,$&&pe)t:{for(we=cI,U=$,j=pe,H=0,Z=U;Z;Z=we(Z))H++;Z=0;for(var Te=j;Te;Te=we(Te))Z++;for(;0<H-Z;)U=we(U),H--;for(;0<Z-H;)j=we(j),Z--;for(;H--;){if(U===j||j!==null&&U===j.alternate){we=U;break t}U=we(U),j=we(j)}we=null}else we=null;$!==null&&db(ne,K,$,we,!1),pe!==null&&ct!==null&&db(ne,ct,pe,we,!0)}}e:{if(K=G?Wn(G):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var Ye=C_;else if(I_(K))if(D_)Ye=TA;else{Ye=vA;var ve=_A}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&mo(G.elementType)&&(Ye=C_):Ye=bA;if(Ye&&(Ye=Ye(n,G))){R_(ne,Ye,o,W);break e}ve&&ve(n,K,G),n==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Xl(K,"number",K.value)}switch(ve=G?Wn(G):window,n){case"focusin":(I_(ve)||ve.contentEditable==="true")&&(Eo=ve,hm=G,lu=null);break;case"focusout":lu=hm=Eo=null;break;case"mousedown":dm=!0;break;case"contextmenu":case"mouseup":case"dragend":dm=!1,L_(ne,o,W);break;case"selectionchange":if(xA)break;case"keydown":case"keyup":L_(ne,o,W)}var Oe;if(Xe)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else To?Ta(n,o)&&(Fe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(ii&&o.locale!=="ko"&&(To||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&To&&(Oe=tu()):(ei=W,eu="value"in ei?ei.value:ei.textContent,To=!0)),ve=rd(G,Fe),0<ve.length&&(Fe=new ri(Fe,n,null,o,W),ne.push({event:Fe,listeners:ve}),Oe?Fe.data=Oe:(Oe=bo(o),Oe!==null&&(Fe.data=Oe)))),(Oe=vr?mA(n,o):gA(n,o))&&(Fe=rd(G,"onBeforeInput"),0<Fe.length&&(ve=new ri("onBeforeInput","beforeinput",null,o,W),ne.push({event:ve,listeners:Fe}),ve.data=Oe)),aI(ne,n,G,o,W)}cb(ne,s)})}function Ou(n,s,o){return{instance:n,listener:s,currentTarget:o}}function rd(n,s){for(var o=s+"Capture",u=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Nr(n,o),d!=null&&u.unshift(Ou(n,d,m)),d=Nr(n,s),d!=null&&u.push(Ou(n,d,m))),n.tag===3)return u;n=n.return}return[]}function cI(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function db(n,s,o,u,d){for(var m=s._reactName,b=[];o!==null&&o!==u;){var S=o,O=S.alternate,G=S.stateNode;if(S=S.tag,O!==null&&O===u)break;S!==5&&S!==26&&S!==27||G===null||(O=G,d?(G=Nr(o,m),G!=null&&b.unshift(Ou(o,G,O))):d||(G=Nr(o,m),G!=null&&b.push(Ou(o,G,O)))),o=o.return}b.length!==0&&n.push({event:s,listeners:b})}var hI=/\r\n?/g,dI=/\u0000|\uFFFD/g;function fb(n){return(typeof n=="string"?n:""+n).replace(hI,`
`).replace(dI,"")}function mb(n,s){return s=fb(s),fb(n)===s}function ut(n,s,o,u,d,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Ln(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Ln(n,""+u);break;case"className":Zn(n,"class",u);break;case"tabIndex":Zn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(n,o,u);break;case"style":Wl(n,u,m);break;case"data":if(s!=="object"){Zn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=go(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&ut(n,s,"name",d.name,d,null),ut(n,s,"formEncType",d.formEncType,d,null),ut(n,s,"formMethod",d.formMethod,d,null),ut(n,s,"formTarget",d.formTarget,d,null)):(ut(n,s,"encType",d.encType,d,null),ut(n,s,"method",d.method,d,null),ut(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=go(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Dr);break;case"onScroll":u!=null&&Ue("scroll",n);break;case"onScrollEnd":u!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=go(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),ho(n,"popover",u);break;case"xlinkActuate":zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ho(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=rh.get(o)||o,ho(n,o,u))}}function jg(n,s,o,u,d,m){switch(o){case"style":Wl(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ln(n,u):(typeof u=="number"||typeof u=="bigint")&&Ln(n,""+u);break;case"onScroll":u!=null&&Ue("scroll",n);break;case"onScrollEnd":u!=null&&Ue("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Dr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),m=n[en]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):ho(n,o,u)}}}function mn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var u=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ut(n,s,m,b,o,null)}}d&&ut(n,s,"srcSet",o.srcSet,o,null),u&&ut(n,s,"src",o.src,o,null);return;case"input":Ue("invalid",n);var S=m=b=d=null,O=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":d=W;break;case"type":b=W;break;case"checked":O=W;break;case"defaultChecked":G=W;break;case"value":m=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:ut(n,s,u,W,o,null)}}eh(n,m,S,O,G,b,d,!1);return;case"select":Ue("invalid",n),u=b=m=null;for(d in o)if(o.hasOwnProperty(d)&&(S=o[d],S!=null))switch(d){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":u=S;default:ut(n,s,d,S,o,null)}s=m,o=b,n.multiple=!!u,s!=null?is(n,!!u,s,!1):o!=null&&is(n,!!u,o,!0);return;case"textarea":Ue("invalid",n),m=d=u=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":u=S;break;case"defaultValue":d=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:ut(n,s,b,S,o,null)}ss(n,u,d,m);return;case"option":for(O in o)o.hasOwnProperty(O)&&(u=o[O],u!=null)&&(O==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":ut(n,s,O,u,o,null));return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(u=0;u<Mu.length;u++)Ue(Mu[u],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ut(n,s,G,u,o,null)}return;default:if(mo(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&jg(n,s,W,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&ut(n,s,S,u,o,null))}function fI(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,b=null,S=null,O=null,G=null,W=null;for($ in o){var ne=o[$];if(o.hasOwnProperty($)&&ne!=null)switch($){case"checked":break;case"value":break;case"defaultValue":O=ne;default:u.hasOwnProperty($)||ut(n,s,$,null,u,ne)}}for(var K in u){var $=u[K];if(ne=o[K],u.hasOwnProperty(K)&&($!=null||ne!=null))switch(K){case"type":m=$;break;case"name":d=$;break;case"checked":G=$;break;case"defaultChecked":W=$;break;case"value":b=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:$!==ne&&ut(n,s,K,$,u,ne)}}fo(n,b,S,O,G,W,m,d);return;case"select":$=b=S=K=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":$=O;default:u.hasOwnProperty(m)||ut(n,s,m,null,u,O)}for(d in u)if(m=u[d],O=o[d],u.hasOwnProperty(d)&&(m!=null||O!=null))switch(d){case"value":K=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==O&&ut(n,s,d,m,u,O)}s=S,o=b,u=$,K!=null?is(n,!!o,K,!1):!!u!=!!o&&(s!=null?is(n,!!o,s,!0):is(n,!!o,o?[]:"",!1));return;case"textarea":$=K=null;for(S in o)if(d=o[S],o.hasOwnProperty(S)&&d!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ut(n,s,S,null,u,d)}for(b in u)if(d=u[b],m=o[b],u.hasOwnProperty(b)&&(d!=null||m!=null))switch(b){case"value":K=d;break;case"defaultValue":$=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&ut(n,s,b,d,u,m)}th(n,K,$);return;case"option":for(var pe in o)K=o[pe],o.hasOwnProperty(pe)&&K!=null&&!u.hasOwnProperty(pe)&&(pe==="selected"?n.selected=!1:ut(n,s,pe,null,u,K));for(O in u)K=u[O],$=o[O],u.hasOwnProperty(O)&&K!==$&&(K!=null||$!=null)&&(O==="selected"?n.selected=K&&typeof K!="function"&&typeof K!="symbol":ut(n,s,O,K,u,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)K=o[we],o.hasOwnProperty(we)&&K!=null&&!u.hasOwnProperty(we)&&ut(n,s,we,null,u,K);for(G in u)if(K=u[G],$=o[G],u.hasOwnProperty(G)&&K!==$&&(K!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:ut(n,s,G,K,u,$)}return;default:if(mo(s)){for(var ct in o)K=o[ct],o.hasOwnProperty(ct)&&K!==void 0&&!u.hasOwnProperty(ct)&&jg(n,s,ct,void 0,u,K);for(W in u)K=u[W],$=o[W],!u.hasOwnProperty(W)||K===$||K===void 0&&$===void 0||jg(n,s,W,K,u,$);return}}for(var U in o)K=o[U],o.hasOwnProperty(U)&&K!=null&&!u.hasOwnProperty(U)&&ut(n,s,U,null,u,K);for(ne in u)K=u[ne],$=o[ne],!u.hasOwnProperty(ne)||K===$||K==null&&$==null||ut(n,s,ne,K,u,$)}function gb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],m=d.transferSize,b=d.initiatorType,S=d.duration;if(m&&S&&gb(b)){for(b=0,S=d.responseEnd,u+=1;u<o.length;u++){var O=o[u],G=O.startTime;if(G>S)break;var W=O.transferSize,ne=O.initiatorType;W&&gb(ne)&&(O=O.responseEnd,b+=W*(O<S?1:(S-G)/(O-G)))}if(--u,s+=8*(m+b)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Lg=null,Ug=null;function id(n){return n.nodeType===9?n:n.ownerDocument}function pb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yb(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function zg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bg=null;function gI(){var n=window.event;return n&&n.type==="popstate"?n===Bg?!1:(Bg=n,!0):(Bg=null,!1)}var _b=typeof setTimeout=="function"?setTimeout:void 0,pI=typeof clearTimeout=="function"?clearTimeout:void 0,vb=typeof Promise=="function"?Promise:void 0,yI=typeof queueMicrotask=="function"?queueMicrotask:typeof vb<"u"?function(n){return vb.resolve(null).then(n).catch(_I)}:_b;function _I(n){setTimeout(function(){throw n})}function Rs(n){return n==="head"}function bb(n,s){var o=s,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),$o(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Vu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Vu(o);for(var m=o.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[Qr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&Vu(n.ownerDocument.body);o=d}while(o);$o(s)}function Tb(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Fg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Fg(o),co(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function vI(n,s,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Qr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ar(n.nextSibling),n===null)break}return null}function bI(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ar(n.nextSibling),n===null))return null;return n}function Eb(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ar(n.nextSibling),n===null))return null;return n}function qg(n){return n.data==="$?"||n.data==="$~"}function Hg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function TI(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ar(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Gg=null;function xb(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Ar(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Sb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function wb(n,s,o){switch(s=id(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Vu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);co(n)}var Ir=new Map,Ab=new Set;function sd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ui=se.d;se.d={f:EI,r:xI,D:SI,C:wI,L:AI,m:II,X:CI,S:RI,M:DI};function EI(){var n=Ui.f(),s=Xh();return n||s}function xI(n){var s=pr(n);s!==null&&s.tag===5&&s.type==="form"?qv(s):Ui.r(n)}var Ko=typeof document>"u"?null:document;function Ib(n,s,o){var u=Ko;if(u&&typeof s=="string"&&s){var d=jn(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Ab.has(d)||(Ab.add(d),n={rel:n,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),mn(s,"link",n),Ut(s),u.head.appendChild(s)))}}function SI(n){Ui.D(n),Ib("dns-prefetch",n,null)}function wI(n,s){Ui.C(n,s),Ib("preconnect",n,s)}function AI(n,s,o){Ui.L(n,s,o);var u=Ko;if(u&&n&&s){var d='link[rel="preload"][as="'+jn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+jn(o.imageSizes)+'"]')):d+='[href="'+jn(n)+'"]';var m=d;switch(s){case"style":m=Qo(n);break;case"script":m=Yo(n)}Ir.has(m)||(n=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Ir.set(m,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(ku(m))||s==="script"&&u.querySelector(Pu(m))||(s=u.createElement("link"),mn(s,"link",n),Ut(s),u.head.appendChild(s)))}}function II(n,s){Ui.m(n,s);var o=Ko;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(n)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Yo(n)}if(!Ir.has(m)&&(n=v({rel:"modulepreload",href:n},s),Ir.set(m,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Pu(m)))return}u=o.createElement("link"),mn(u,"link",n),Ut(u),o.head.appendChild(u)}}}function RI(n,s,o){Ui.S(n,s,o);var u=Ko;if(u&&n){var d=$r(u).hoistableStyles,m=Qo(n);s=s||"default";var b=d.get(m);if(!b){var S={loading:0,preload:null};if(b=u.querySelector(ku(m)))S.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Ir.get(m))&&Kg(n,o);var O=b=u.createElement("link");Ut(O),mn(O,"link",n),O._p=new Promise(function(G,W){O.onload=G,O.onerror=W}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ad(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:S},d.set(m,b)}}}function CI(n,s){Ui.X(n,s);var o=Ko;if(o&&n){var u=$r(o).hoistableScripts,d=Yo(n),m=u.get(d);m||(m=o.querySelector(Pu(d)),m||(n=v({src:n,async:!0},s),(s=Ir.get(d))&&Qg(n,s),m=o.createElement("script"),Ut(m),mn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function DI(n,s){Ui.M(n,s);var o=Ko;if(o&&n){var u=$r(o).hoistableScripts,d=Yo(n),m=u.get(d);m||(m=o.querySelector(Pu(d)),m||(n=v({src:n,async:!0,type:"module"},s),(s=Ir.get(d))&&Qg(n,s),m=o.createElement("script"),Ut(m),mn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function Rb(n,s,o,u){var d=(d=xe.current)?sd(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Qo(o.href),o=$r(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Qo(o.href);var m=$r(d).hoistableStyles,b=m.get(n);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,b),(m=d.querySelector(ku(n)))&&!m._p&&(b.instance=m,b.state.loading=5),Ir.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ir.set(n,o),m||NI(d,n,o,b.state))),s&&u===null)throw Error(i(528,""));return b}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Yo(o),o=$r(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Qo(n){return'href="'+jn(n)+'"'}function ku(n){return'link[rel="stylesheet"]['+n+"]"}function Cb(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function NI(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),mn(s,"link",o),Ut(s),n.head.appendChild(s))}function Yo(n){return'[src="'+jn(n)+'"]'}function Pu(n){return"script[async]"+n}function Db(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+jn(o.href)+'"]');if(u)return s.instance=u,Ut(u),u;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ut(u),mn(u,"style",d),ad(u,o.precedence,n),s.instance=u;case"stylesheet":d=Qo(o.href);var m=n.querySelector(ku(d));if(m)return s.state.loading|=4,s.instance=m,Ut(m),m;u=Cb(o),(d=Ir.get(d))&&Kg(u,d),m=(n.ownerDocument||n).createElement("link"),Ut(m);var b=m;return b._p=new Promise(function(S,O){b.onload=S,b.onerror=O}),mn(m,"link",u),s.state.loading|=4,ad(m,o.precedence,n),s.instance=m;case"script":return m=Yo(o.src),(d=n.querySelector(Pu(m)))?(s.instance=d,Ut(d),d):(u=o,(d=Ir.get(m))&&(u=v({},o),Qg(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Ut(d),mn(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ad(u,o.precedence,n));return s.instance}function ad(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,b=0;b<u.length;b++){var S=u[b];if(S.dataset.precedence===s)m=S;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Kg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Qg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var od=null;function Nb(n,s,o){if(od===null){var u=new Map,d=od=new Map;d.set(o,u)}else d=od,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var m=o[d];if(!(m[Qr]||m[Lt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=n+b;var S=u.get(b);S?S.push(m):u.set(b,[m])}}return u}function Mb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function MI(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ob(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function OI(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=Qo(u.href),m=s.querySelector(ku(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=ld.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,Ut(m);return}m=s.ownerDocument||s,u=Cb(u),(d=Ir.get(d))&&Kg(u,d),m=m.createElement("link"),Ut(m);var b=m;b._p=new Promise(function(S,O){b.onload=S,b.onerror=O}),mn(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=ld.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Yg=0;function VI(n,s){return n.stylesheets&&n.count===0&&cd(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&cd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Yg===0&&(Yg=62500*mI());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&cd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Yg?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function ld(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ud=null;function cd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ud=new Map,s.forEach(kI,n),ud=null,ld.call(n))}function kI(n,s){if(!(s.state.loading&4)){var o=ud.get(n);if(o)var u=o.get(null);else{o=new Map,ud.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var b=d[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}d=s.instance,b=d.getAttribute("data-precedence"),m=o.get(b)||u,m===u&&o.set(null,d),o.set(b,d),this.count++,u=ld.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var ju={$$typeof:re,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function PI(n,s,o,u,d,m,b,S,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.hiddenUpdates=Rt(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Vb(n,s,o,u,d,m,b,S,O,G,W,ne){return n=new PI(n,s,o,b,O,G,W,ne,S),s=1,m===!0&&(s|=24),m=tr(3,null,null,s),n.current=m,m.stateNode=n,s=Im(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Nm(m),n}function kb(n){return n?(n=wo,n):wo}function Pb(n,s,o,u,d,m){d=kb(d),u.context===null?u.context=d:u.pendingContext=d,u=ys(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=_s(n,u,s),o!==null&&(qn(o,n,s),gu(o,n,s))}function jb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function $g(n,s){jb(n,s),(n=n.alternate)&&jb(n,s)}function Lb(n){if(n.tag===13||n.tag===31){var s=Sa(n,67108864);s!==null&&qn(s,n,67108864),$g(n,67108864)}}function Ub(n){if(n.tag===13||n.tag===31){var s=ar();s=Xn(s);var o=Sa(n,s);o!==null&&qn(o,n,s),$g(n,s)}}var hd=!0;function jI(n,s,o,u){var d=Q.T;Q.T=null;var m=se.p;try{se.p=2,Xg(n,s,o,u)}finally{se.p=m,Q.T=d}}function LI(n,s,o,u){var d=Q.T;Q.T=null;var m=se.p;try{se.p=8,Xg(n,s,o,u)}finally{se.p=m,Q.T=d}}function Xg(n,s,o,u){if(hd){var d=Jg(u);if(d===null)Pg(n,s,u,dd,o),Bb(n,u);else if(zI(d,n,s,o,u))u.stopPropagation();else if(Bb(n,u),s&4&&-1<UI.indexOf(n)){for(;d!==null;){var m=pr(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=_t(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var O=1<<31-yt(b);S.entanglements[1]|=O,b&=~O}li(m),(Je&6)===0&&(Yh=Wt()+500,Nu(0))}}break;case 31:case 13:S=Sa(m,2),S!==null&&qn(S,m,2),Xh(),$g(m,2)}if(m=Jg(u),m===null&&Pg(n,s,u,dd,o),m===d)break;d=m}d!==null&&u.stopPropagation()}else Pg(n,s,u,null,o)}}function Jg(n){return n=yr(n),Wg(n)}var dd=null;function Wg(n){if(dd=null,n=Yr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return dd=n,null}function zb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_i()){case ca:return 2;case mr:return 8;case In:case vi:return 32;case ha:return 268435456;default:return 32}default:return 32}}var Zg=!1,Cs=null,Ds=null,Ns=null,Lu=new Map,Uu=new Map,Ms=[],UI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bb(n,s){switch(n){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Lu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(s.pointerId)}}function zu(n,s,o,u,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},s!==null&&(s=pr(s),s!==null&&Lb(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function zI(n,s,o,u,d){switch(s){case"focusin":return Cs=zu(Cs,n,s,o,u,d),!0;case"dragenter":return Ds=zu(Ds,n,s,o,u,d),!0;case"mouseover":return Ns=zu(Ns,n,s,o,u,d),!0;case"pointerover":var m=d.pointerId;return Lu.set(m,zu(Lu.get(m)||null,n,s,o,u,d)),!0;case"gotpointercapture":return m=d.pointerId,Uu.set(m,zu(Uu.get(m)||null,n,s,o,u,d)),!0}return!1}function Fb(n){var s=Yr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,un(n.priority,function(){Ub(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,un(n.priority,function(){Ub(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Jg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Zl=u,o.target.dispatchEvent(u),Zl=null}else return s=pr(o),s!==null&&Lb(s),n.blockedOn=o,!1;s.shift()}return!0}function qb(n,s,o){fd(n)&&o.delete(s)}function BI(){Zg=!1,Cs!==null&&fd(Cs)&&(Cs=null),Ds!==null&&fd(Ds)&&(Ds=null),Ns!==null&&fd(Ns)&&(Ns=null),Lu.forEach(qb),Uu.forEach(qb)}function md(n,s){n.blockedOn===s&&(n.blockedOn=null,Zg||(Zg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,BI)))}var gd=null;function Hb(n){gd!==n&&(gd=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){gd===n&&(gd=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(Wg(u||o)===null)continue;break}var m=pr(o);m!==null&&(n.splice(s,3),s-=3,Jm(m,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function $o(n){function s(O){return md(O,n)}Cs!==null&&md(Cs,n),Ds!==null&&md(Ds,n),Ns!==null&&md(Ns,n),Lu.forEach(s),Uu.forEach(s);for(var o=0;o<Ms.length;o++){var u=Ms[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ms.length&&(o=Ms[0],o.blockedOn===null);)Fb(o),o.blockedOn===null&&Ms.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],m=o[u+1],b=d[en]||null;if(typeof m=="function")b||Hb(o);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(d=m,b=m[en]||null)S=b.formAction;else if(Wg(d)!==null)continue}else S=b.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),Hb(o)}}}function Gb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function ep(n){this._internalRoot=n}pd.prototype.render=ep.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=ar();Pb(o,u,n,s,null,null)},pd.prototype.unmount=ep.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Pb(n.current,2,null,n,null,null),Xh(),s[Kr]=null}};function pd(n){this._internalRoot=n}pd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Jn();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ms.length&&s!==0&&s<Ms[o].priority;o++);Ms.splice(o,0,n),o===0&&Fb(n)}};var Kb=e.version;if(Kb!=="19.2.4")throw Error(i(527,Kb,"19.2.4"));se.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var FI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yd.isDisabled&&yd.supportsFiber)try{$n=yd.inject(FI),Qt=yd}catch{}}return Fu.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",d=Zv,m=e0,b=t0;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=Vb(n,1,!1,null,null,o,u,null,d,m,b,Gb),n[Kr]=s.current,kg(n),new ep(s)},Fu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,d="",m=Zv,b=e0,S=t0,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),s=Vb(n,1,!0,s,o??null,u,d,O,m,b,S,Gb),s.context=kb(null),o=s.current,u=ar(),u=Xn(u),d=ys(u),d.callback=null,_s(o,d,u),o=u,s.current.lanes=o,Pn(s,o),li(s),n[Kr]=s.current,kg(n),new pd(s)},Fu.version="19.2.4",Fu}var nT;function WI(){if(nT)return rp.exports;nT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rp.exports=JI(),rp.exports}var ZI=WI();function rT(r=new Date){const e=new Date(r);e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);const t=new Date(e.getFullYear(),0,4),i=1+Math.round(((e-t)/864e5-3+(t.getDay()+6)%7)/7);return`${e.getFullYear()}-W${String(i).padStart(2,"0")}`}function e2(r=new Date){const e=new Date(r);e.setHours(0,0,0,0);const t=e.getDay(),i=e.getDate()-((t===0?7:t)-1),a=new Date(e);a.setDate(i);const l=a.getFullYear()%100,c=a.getMonth()+1,f=a.getDate();return`${l}${c}${f}`}function t2(r){const e=r.match(/^(\d{4})-W(\d{2})$/);if(!e)return r;const t=parseInt(e[1],10),i=parseInt(e[2],10),a=new Date(t,0,4),l=a.getDay()||7,c=new Date(a);c.setDate(a.getDate()-(l-1)+(i-1)*7);const f=c.getFullYear()%100,g=c.getMonth()+1,p=c.getDate();return`${f}${g}${p}`}function n2(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}const r2=()=>{};var iT={};const px=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},i2=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],f=r[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},yx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,f=c?r[a+1]:0,g=a+2<r.length,p=g?r[a+2]:0,_=l>>2,v=(l&3)<<4|f>>4;let x=(f&15)<<2|p>>6,R=p&63;g||(R=64,c||(x=64)),i.push(t[_],t[v],t[x],t[R])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(px(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):i2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],f=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const v=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||f==null||p==null||v==null)throw new s2;const x=l<<2|f>>4;if(i.push(x),p!==64){const R=f<<4&240|p>>2;if(i.push(R),v!==64){const V=p<<6&192|v;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class s2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a2=function(r){const e=px(r);return yx.encodeByteArray(e,!0)},Hd=function(r){return a2(r).replace(/\./g,"")},_x=function(r){try{return yx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const o2=()=>vx().__FIREBASE_DEFAULTS__,l2=()=>{if(typeof process>"u"||typeof iT>"u")return;const r=iT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},u2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_x(r[1]);return e&&JSON.parse(e)},wf=()=>{try{return r2()||o2()||l2()||u2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bx=r=>wf()?.emulatorHosts?.[r],c2=r=>{const e=bx(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Tx=()=>wf()?.config,Ex=r=>wf()?.[`_${r}`];class h2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Ol(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xx(r){return(await fetch(r,{credentials:"include"})).ok}function d2(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Hd(JSON.stringify(t)),Hd(JSON.stringify(c)),""].join(".")}const tc={};function f2(){const r={prod:[],emulator:[]};for(const e of Object.keys(tc))tc[e]?r.emulator.push(e):r.prod.push(e);return r}function m2(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let sT=!1;function Sx(r,e){if(typeof window>"u"||typeof document>"u"||!Ol(window.location.host)||tc[r]===e||tc[r]||sT)return;tc[r]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",l=f2().prod.length>0;function c(){const x=document.getElementById(i);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,R){x.setAttribute("width","24"),x.setAttribute("id",R),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{sT=!0,c()},x}function _(x,R){x.setAttribute("id",R),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function v(){const x=m2(i),R=t("text"),V=document.getElementById(R)||document.createElement("span"),L=t("learnmore"),q=document.getElementById(L)||document.createElement("a"),te=t("preprendIcon"),X=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const re=x.element;f(re),_(q,L);const ce=p();g(X,te),re.append(X,V,q,ce),document.body.appendChild(re)}l?(V.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function wx(){const r=wf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function _2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v2(){const r=Xt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Ax(){return!wx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ix(){return!wx()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Rx(){try{return typeof indexedDB=="object"}catch{return!1}}function b2(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const T2="FirebaseError";class Ji extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=T2,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mc.prototype.create)}}class Mc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?E2(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ji(a,f,i)}}function E2(r,e){return r.replace(x2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const x2=/\{\$([^}]+)}/g;function S2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Xa(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(aT(l)&&aT(c)){if(!Xa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function aT(r){return r!==null&&typeof r=="object"}function Oc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function w2(r,e){const t=new A2(r,e);return t.subscribe.bind(t)}class A2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");I2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=op),a.error===void 0&&(a.error=op),a.complete===void 0&&(a.complete=op);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I2(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function op(){}function pn(r){return r&&r._delegate?r._delegate:r}class Ja{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const La="[DEFAULT]";class R2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new h2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D2(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:C2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C2(r){return r===La?void 0:r}function D2(r){return r.instantiationMode==="EAGER"}class N2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const M2={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},O2=qe.INFO,V2={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},k2=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=V2[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gy{constructor(e){this.name=e,this._logLevel=O2,this._logHandler=k2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const P2=(r,e)=>e.some(t=>r instanceof t);let oT,lT;function j2(){return oT||(oT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L2(){return lT||(lT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cx=new WeakMap,Rp=new WeakMap,Dx=new WeakMap,lp=new WeakMap,py=new WeakMap;function U2(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Gs(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Cx.set(t,r)}).catch(()=>{}),py.set(e,r),e}function z2(r){if(Rp.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Rp.set(r,e)}let Cp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Rp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Dx.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function B2(r){Cp=r(Cp)}function F2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(up(this),e,...t);return Dx.set(i,e.sort?e.sort():[e]),Gs(i)}:L2().includes(r)?function(...e){return r.apply(up(this),e),Gs(Cx.get(this))}:function(...e){return Gs(r.apply(up(this),e))}}function q2(r){return typeof r=="function"?F2(r):(r instanceof IDBTransaction&&z2(r),P2(r,j2())?new Proxy(r,Cp):r)}function Gs(r){if(r instanceof IDBRequest)return U2(r);if(lp.has(r))return lp.get(r);const e=q2(r);return e!==r&&(lp.set(r,e),py.set(e,r)),e}const up=r=>py.get(r);function H2(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),f=Gs(c);return i&&c.addEventListener("upgradeneeded",g=>{i(Gs(c.result),g.oldVersion,g.newVersion,Gs(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const G2=["get","getKey","getAll","getAllKeys","count"],K2=["put","add","delete","clear"],cp=new Map;function uT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=K2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||G2.includes(t)))return;const l=async function(c,...f){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&g.done]))[0]};return cp.set(e,l),l}B2(r=>({...r,get:(e,t,i)=>uT(e,t)||r.get(e,t,i),has:(e,t)=>!!uT(e,t)||r.has(e,t)}));class Q2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Y2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Y2(r){return r.getComponent()?.type==="VERSION"}const Dp="@firebase/app",cT="0.14.8";const Hi=new gy("@firebase/app"),$2="@firebase/app-compat",X2="@firebase/analytics-compat",J2="@firebase/analytics",W2="@firebase/app-check-compat",Z2="@firebase/app-check",eR="@firebase/auth",tR="@firebase/auth-compat",nR="@firebase/database",rR="@firebase/data-connect",iR="@firebase/database-compat",sR="@firebase/functions",aR="@firebase/functions-compat",oR="@firebase/installations",lR="@firebase/installations-compat",uR="@firebase/messaging",cR="@firebase/messaging-compat",hR="@firebase/performance",dR="@firebase/performance-compat",fR="@firebase/remote-config",mR="@firebase/remote-config-compat",gR="@firebase/storage",pR="@firebase/storage-compat",yR="@firebase/firestore",_R="@firebase/ai",vR="@firebase/firestore-compat",bR="firebase",TR="12.9.0";const Np="[DEFAULT]",ER={[Dp]:"fire-core",[$2]:"fire-core-compat",[J2]:"fire-analytics",[X2]:"fire-analytics-compat",[Z2]:"fire-app-check",[W2]:"fire-app-check-compat",[eR]:"fire-auth",[tR]:"fire-auth-compat",[nR]:"fire-rtdb",[rR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[sR]:"fire-fn",[aR]:"fire-fn-compat",[oR]:"fire-iid",[lR]:"fire-iid-compat",[uR]:"fire-fcm",[cR]:"fire-fcm-compat",[hR]:"fire-perf",[dR]:"fire-perf-compat",[fR]:"fire-rc",[mR]:"fire-rc-compat",[gR]:"fire-gcs",[pR]:"fire-gcs-compat",[yR]:"fire-fst",[vR]:"fire-fst-compat",[_R]:"fire-vertex","fire-js":"fire-js",[bR]:"fire-js-all"};const Gd=new Map,xR=new Map,Mp=new Map;function hT(r,e){try{r.container.addComponent(e)}catch(t){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function gl(r){const e=r.name;if(Mp.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;Mp.set(e,r);for(const t of Gd.values())hT(t,r);for(const t of xR.values())hT(t,r);return!0}function yy(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ur(r){return r==null?!1:r.settings!==void 0}const SR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new Mc("app","Firebase",SR);class wR{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}const Vl=TR;function Nx(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Np,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ks.create("bad-app-name",{appName:String(a)});if(t||(t=Tx()),!t)throw Ks.create("no-options");const l=Gd.get(a);if(l){if(Xa(t,l.options)&&Xa(i,l.config))return l;throw Ks.create("duplicate-app",{appName:a})}const c=new N2(a);for(const g of Mp.values())c.addComponent(g);const f=new wR(t,i,c);return Gd.set(a,f),f}function Mx(r=Np){const e=Gd.get(r);if(!e&&r===Np&&Tx())return Nx();if(!e)throw Ks.create("no-app",{appName:r});return e}function Qs(r,e,t){let i=ER[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(c.join(" "));return}gl(new Ja(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const AR="firebase-heartbeat-database",IR=1,gc="firebase-heartbeat-store";let hp=null;function Ox(){return hp||(hp=H2(AR,IR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(gc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ks.create("idb-open",{originalErrorMessage:r.message})})),hp}async function RR(r){try{const t=(await Ox()).transaction(gc),i=await t.objectStore(gc).get(Vx(r));return await t.done,i}catch(e){if(e instanceof Ji)Hi.warn(e.message);else{const t=Ks.create("idb-get",{originalErrorMessage:e?.message});Hi.warn(t.message)}}}async function dT(r,e){try{const i=(await Ox()).transaction(gc,"readwrite");await i.objectStore(gc).put(e,Vx(r)),await i.done}catch(t){if(t instanceof Ji)Hi.warn(t.message);else{const i=Ks.create("idb-set",{originalErrorMessage:t?.message});Hi.warn(i.message)}}}function Vx(r){return`${r.name}!${r.options.appId}`}const CR=1024,DR=30;class NR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>DR){const a=VR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Hi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fT(),{heartbeatsToSend:t,unsentEntries:i}=MR(this._heartbeatsCache.heartbeats),a=Hd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Hi.warn(e),""}}}function fT(){return new Date().toISOString().substring(0,10)}function MR(r,e=CR){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),mT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),mT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class OR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rx()?b2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return dT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return dT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mT(r){return Hd(JSON.stringify({version:2,heartbeats:r})).length}function VR(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function kR(r){gl(new Ja("platform-logger",e=>new Q2(e),"PRIVATE")),gl(new Ja("heartbeat",e=>new NR(e),"PRIVATE")),Qs(Dp,cT,r),Qs(Dp,cT,"esm2020"),Qs("fire-js","")}kR("");var PR="firebase",jR="12.9.0";Qs(PR,jR,"app");var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ys,kx;(function(){var r;function e(C,I){function A(){}A.prototype=I.prototype,C.F=I.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(M,N,k){for(var D=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)D[Ce-2]=arguments[Ce];return I.prototype[N].apply(M,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,I,A){A||(A=0);const M=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)M[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;N<16;++N)M[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=C.g[0],A=C.g[1],N=C.g[2];let k=C.g[3],D;D=I+(k^A&(N^k))+M[0]+3614090360&4294967295,I=A+(D<<7&4294967295|D>>>25),D=k+(N^I&(A^N))+M[1]+3905402710&4294967295,k=I+(D<<12&4294967295|D>>>20),D=N+(A^k&(I^A))+M[2]+606105819&4294967295,N=k+(D<<17&4294967295|D>>>15),D=A+(I^N&(k^I))+M[3]+3250441966&4294967295,A=N+(D<<22&4294967295|D>>>10),D=I+(k^A&(N^k))+M[4]+4118548399&4294967295,I=A+(D<<7&4294967295|D>>>25),D=k+(N^I&(A^N))+M[5]+1200080426&4294967295,k=I+(D<<12&4294967295|D>>>20),D=N+(A^k&(I^A))+M[6]+2821735955&4294967295,N=k+(D<<17&4294967295|D>>>15),D=A+(I^N&(k^I))+M[7]+4249261313&4294967295,A=N+(D<<22&4294967295|D>>>10),D=I+(k^A&(N^k))+M[8]+1770035416&4294967295,I=A+(D<<7&4294967295|D>>>25),D=k+(N^I&(A^N))+M[9]+2336552879&4294967295,k=I+(D<<12&4294967295|D>>>20),D=N+(A^k&(I^A))+M[10]+4294925233&4294967295,N=k+(D<<17&4294967295|D>>>15),D=A+(I^N&(k^I))+M[11]+2304563134&4294967295,A=N+(D<<22&4294967295|D>>>10),D=I+(k^A&(N^k))+M[12]+1804603682&4294967295,I=A+(D<<7&4294967295|D>>>25),D=k+(N^I&(A^N))+M[13]+4254626195&4294967295,k=I+(D<<12&4294967295|D>>>20),D=N+(A^k&(I^A))+M[14]+2792965006&4294967295,N=k+(D<<17&4294967295|D>>>15),D=A+(I^N&(k^I))+M[15]+1236535329&4294967295,A=N+(D<<22&4294967295|D>>>10),D=I+(N^k&(A^N))+M[1]+4129170786&4294967295,I=A+(D<<5&4294967295|D>>>27),D=k+(A^N&(I^A))+M[6]+3225465664&4294967295,k=I+(D<<9&4294967295|D>>>23),D=N+(I^A&(k^I))+M[11]+643717713&4294967295,N=k+(D<<14&4294967295|D>>>18),D=A+(k^I&(N^k))+M[0]+3921069994&4294967295,A=N+(D<<20&4294967295|D>>>12),D=I+(N^k&(A^N))+M[5]+3593408605&4294967295,I=A+(D<<5&4294967295|D>>>27),D=k+(A^N&(I^A))+M[10]+38016083&4294967295,k=I+(D<<9&4294967295|D>>>23),D=N+(I^A&(k^I))+M[15]+3634488961&4294967295,N=k+(D<<14&4294967295|D>>>18),D=A+(k^I&(N^k))+M[4]+3889429448&4294967295,A=N+(D<<20&4294967295|D>>>12),D=I+(N^k&(A^N))+M[9]+568446438&4294967295,I=A+(D<<5&4294967295|D>>>27),D=k+(A^N&(I^A))+M[14]+3275163606&4294967295,k=I+(D<<9&4294967295|D>>>23),D=N+(I^A&(k^I))+M[3]+4107603335&4294967295,N=k+(D<<14&4294967295|D>>>18),D=A+(k^I&(N^k))+M[8]+1163531501&4294967295,A=N+(D<<20&4294967295|D>>>12),D=I+(N^k&(A^N))+M[13]+2850285829&4294967295,I=A+(D<<5&4294967295|D>>>27),D=k+(A^N&(I^A))+M[2]+4243563512&4294967295,k=I+(D<<9&4294967295|D>>>23),D=N+(I^A&(k^I))+M[7]+1735328473&4294967295,N=k+(D<<14&4294967295|D>>>18),D=A+(k^I&(N^k))+M[12]+2368359562&4294967295,A=N+(D<<20&4294967295|D>>>12),D=I+(A^N^k)+M[5]+4294588738&4294967295,I=A+(D<<4&4294967295|D>>>28),D=k+(I^A^N)+M[8]+2272392833&4294967295,k=I+(D<<11&4294967295|D>>>21),D=N+(k^I^A)+M[11]+1839030562&4294967295,N=k+(D<<16&4294967295|D>>>16),D=A+(N^k^I)+M[14]+4259657740&4294967295,A=N+(D<<23&4294967295|D>>>9),D=I+(A^N^k)+M[1]+2763975236&4294967295,I=A+(D<<4&4294967295|D>>>28),D=k+(I^A^N)+M[4]+1272893353&4294967295,k=I+(D<<11&4294967295|D>>>21),D=N+(k^I^A)+M[7]+4139469664&4294967295,N=k+(D<<16&4294967295|D>>>16),D=A+(N^k^I)+M[10]+3200236656&4294967295,A=N+(D<<23&4294967295|D>>>9),D=I+(A^N^k)+M[13]+681279174&4294967295,I=A+(D<<4&4294967295|D>>>28),D=k+(I^A^N)+M[0]+3936430074&4294967295,k=I+(D<<11&4294967295|D>>>21),D=N+(k^I^A)+M[3]+3572445317&4294967295,N=k+(D<<16&4294967295|D>>>16),D=A+(N^k^I)+M[6]+76029189&4294967295,A=N+(D<<23&4294967295|D>>>9),D=I+(A^N^k)+M[9]+3654602809&4294967295,I=A+(D<<4&4294967295|D>>>28),D=k+(I^A^N)+M[12]+3873151461&4294967295,k=I+(D<<11&4294967295|D>>>21),D=N+(k^I^A)+M[15]+530742520&4294967295,N=k+(D<<16&4294967295|D>>>16),D=A+(N^k^I)+M[2]+3299628645&4294967295,A=N+(D<<23&4294967295|D>>>9),D=I+(N^(A|~k))+M[0]+4096336452&4294967295,I=A+(D<<6&4294967295|D>>>26),D=k+(A^(I|~N))+M[7]+1126891415&4294967295,k=I+(D<<10&4294967295|D>>>22),D=N+(I^(k|~A))+M[14]+2878612391&4294967295,N=k+(D<<15&4294967295|D>>>17),D=A+(k^(N|~I))+M[5]+4237533241&4294967295,A=N+(D<<21&4294967295|D>>>11),D=I+(N^(A|~k))+M[12]+1700485571&4294967295,I=A+(D<<6&4294967295|D>>>26),D=k+(A^(I|~N))+M[3]+2399980690&4294967295,k=I+(D<<10&4294967295|D>>>22),D=N+(I^(k|~A))+M[10]+4293915773&4294967295,N=k+(D<<15&4294967295|D>>>17),D=A+(k^(N|~I))+M[1]+2240044497&4294967295,A=N+(D<<21&4294967295|D>>>11),D=I+(N^(A|~k))+M[8]+1873313359&4294967295,I=A+(D<<6&4294967295|D>>>26),D=k+(A^(I|~N))+M[15]+4264355552&4294967295,k=I+(D<<10&4294967295|D>>>22),D=N+(I^(k|~A))+M[6]+2734768916&4294967295,N=k+(D<<15&4294967295|D>>>17),D=A+(k^(N|~I))+M[13]+1309151649&4294967295,A=N+(D<<21&4294967295|D>>>11),D=I+(N^(A|~k))+M[4]+4149444226&4294967295,I=A+(D<<6&4294967295|D>>>26),D=k+(A^(I|~N))+M[11]+3174756917&4294967295,k=I+(D<<10&4294967295|D>>>22),D=N+(I^(k|~A))+M[2]+718787259&4294967295,N=k+(D<<15&4294967295|D>>>17),D=A+(k^(N|~I))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+k&4294967295}i.prototype.v=function(C,I){I===void 0&&(I=C.length);const A=I-this.blockSize,M=this.C;let N=this.h,k=0;for(;k<I;){if(N==0)for(;k<=A;)a(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<I;)if(M[N++]=C.charCodeAt(k++),N==this.blockSize){a(this,M),N=0;break}}else for(;k<I;)if(M[N++]=C[k++],N==this.blockSize){a(this,M),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)C[I++]=this.g[A]>>>M&255;return C};function l(C,I){var A=f;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=I(C)}function c(C,I){this.h=I;const A=[];let M=!0;for(let N=C.length-1;N>=0;N--){const k=C[N]|0;M&&k==I||(A[N]=k,M=!1)}this.g=A}var f={};function g(C){return-128<=C&&C<128?l(C,function(I){return new c([I|0],I<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return q(p(-C));const I=[];let A=1;for(let M=0;C>=A;M++)I[M]=C/A|0,A*=4294967296;return new c(I,0)}function _(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return q(_(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(I,8));let M=v;for(let k=0;k<C.length;k+=8){var N=Math.min(8,C.length-k);const D=parseInt(C.substring(k,k+N),I);N<8?(N=p(Math.pow(I,N)),M=M.j(N).add(p(D))):(M=M.j(A),M=M.add(p(D)))}return M}var v=g(0),x=g(1),R=g(16777216);r=c.prototype,r.m=function(){if(L(this))return-q(this).m();let C=0,I=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);C+=(M>=0?M:4294967296+M)*I,I*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(L(this))return"-"+q(this).toString(C);const I=p(Math.pow(C,6));var A=this;let M="";for(;;){const N=ce(A,I).g;A=te(A,N.j(I));let k=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=N,V(A))return k+M;for(;k.length<6;)k="0"+k;M=k+M}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function L(C){return C.h==-1}r.l=function(C){return C=te(this,C),L(C)?-1:V(C)?0:1};function q(C){const I=C.g.length,A=[];for(let M=0;M<I;M++)A[M]=~C.g[M];return new c(A,~C.h).add(x)}r.abs=function(){return L(this)?q(this):this},r.add=function(C){const I=Math.max(this.g.length,C.g.length),A=[];let M=0;for(let N=0;N<=I;N++){let k=M+(this.i(N)&65535)+(C.i(N)&65535),D=(k>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);M=D>>>16,k&=65535,D&=65535,A[N]=D<<16|k}return new c(A,A[A.length-1]&-2147483648?-1:0)};function te(C,I){return C.add(q(I))}r.j=function(C){if(V(this)||V(C))return v;if(L(this))return L(C)?q(this).j(q(C)):q(q(this).j(C));if(L(C))return q(this.j(q(C)));if(this.l(R)<0&&C.l(R)<0)return p(this.m()*C.m());const I=this.g.length+C.g.length,A=[];for(var M=0;M<2*I;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<C.g.length;N++){const k=this.i(M)>>>16,D=this.i(M)&65535,Ce=C.i(N)>>>16,oe=C.i(N)&65535;A[2*M+2*N]+=D*oe,X(A,2*M+2*N),A[2*M+2*N+1]+=k*oe,X(A,2*M+2*N+1),A[2*M+2*N+1]+=D*Ce,X(A,2*M+2*N+1),A[2*M+2*N+2]+=k*Ce,X(A,2*M+2*N+2)}for(C=0;C<I;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=I;C<2*I;C++)A[C]=0;return new c(A,0)};function X(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function re(C,I){this.g=C,this.h=I}function ce(C,I){if(V(I))throw Error("division by zero");if(V(C))return new re(v,v);if(L(C))return I=ce(q(C),I),new re(q(I.g),q(I.h));if(L(I))return I=ce(C,q(I)),new re(q(I.g),I.h);if(C.g.length>30){if(L(C)||L(I))throw Error("slowDivide_ only works with positive integers.");for(var A=x,M=I;M.l(C)<=0;)A=de(A),M=de(M);var N=le(A,1),k=le(M,1);for(M=le(M,2),A=le(A,2);!V(M);){var D=k.add(M);D.l(C)<=0&&(N=N.add(A),k=D),M=le(M,1),A=le(A,1)}return I=te(C,N.j(I)),new re(N,I)}for(N=v;C.l(I)>=0;){for(A=Math.max(1,Math.floor(C.m()/I.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),k=p(A),D=k.j(I);L(D)||D.l(C)>0;)A-=M,k=p(A),D=k.j(I);V(k)&&(k=x),N=N.add(k),C=te(C,D)}return new re(N,C)}r.B=function(C){return ce(this,C).h},r.and=function(C){const I=Math.max(this.g.length,C.g.length),A=[];for(let M=0;M<I;M++)A[M]=this.i(M)&C.i(M);return new c(A,this.h&C.h)},r.or=function(C){const I=Math.max(this.g.length,C.g.length),A=[];for(let M=0;M<I;M++)A[M]=this.i(M)|C.i(M);return new c(A,this.h|C.h)},r.xor=function(C){const I=Math.max(this.g.length,C.g.length),A=[];for(let M=0;M<I;M++)A[M]=this.i(M)^C.i(M);return new c(A,this.h^C.h)};function de(C){const I=C.g.length+1,A=[];for(let M=0;M<I;M++)A[M]=C.i(M)<<1|C.i(M-1)>>>31;return new c(A,C.h)}function le(C,I){const A=I>>5;I%=32;const M=C.g.length-A,N=[];for(let k=0;k<M;k++)N[k]=I>0?C.i(k+A)>>>I|C.i(k+A+1)<<32-I:C.i(k+A);return new c(N,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,kx=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,Ys=c}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Px,$u,jx,Id,Op,Lx,Ux,zx;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var F=h[w];if(!(F in E))break e;E=E[F]}h=h[h.length-1],w=E[h],y=y(w),y!=w&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&E.push([w,y[w]]);return E}});var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,E){return h.call.apply(h.bind,arguments)}function p(h,y,E){return p=g,p.apply(null,arguments)}function _(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function v(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(w,F,Y){for(var ue=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ue[Ne-2]=arguments[Ne];return y.prototype[F].apply(w,ue)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const E=Array(y);for(let w=0;w<y;w++)E[w]=h[w];return E}return[]}function V(h,y){for(let w=1;w<arguments.length;w++){const F=arguments[w];var E=typeof F;if(E=E!="object"?E:F?Array.isArray(F)?"array":E:"null",E=="array"||E=="object"&&typeof F.length=="number"){E=h.length||0;const Y=F.length||0;h.length=E+Y;for(let ue=0;ue<Y;ue++)h[E+ue]=F[ue]}else h.push(F)}}class L{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){c.setTimeout(()=>{throw h},0)}function te(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class X{constructor(){this.h=this.g=null}add(y,E){const w=re.get();w.set(y,E),this.h?this.h.next=w:this.g=w,this.h=w}}var re=new L(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let de,le=!1,C=new X,I=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(A)}};function A(){for(var h;h=te();){try{h.h.call(h.g)}catch(E){q(E)}var y=re;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function Ce(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}v(Ce,N),Ce.prototype.init=function(h,y){const E=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),Q=0;function se(h,y,E,w,F){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!w,this.ha=F,this.key=++Q,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ie(h,y,E){for(const w in h)y.call(E,h[w],w,h)}function Pe(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function P(h){const y={};for(const E in h)y[E]=h[E];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,y){let E,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(E in w)h[E]=w[E];for(let Y=0;Y<J.length;Y++)E=J[Y],Object.prototype.hasOwnProperty.call(w,E)&&(h[E]=w[E])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,y,E,w,F){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const ue=xe(h,y,w,F);return ue>-1?(y=h[ue],E||(y.fa=!1)):(y=new se(y,this.src,Y,!!w,F),y.fa=E,h.push(y)),y};function Se(h,y){const E=y.type;if(E in h.g){var w=h.g[E],F=Array.prototype.indexOf.call(w,y,void 0),Y;(Y=F>=0)&&Array.prototype.splice.call(w,F,1),Y&&(_e(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function xe(h,y,E,w){for(let F=0;F<h.length;++F){const Y=h[F];if(!Y.da&&Y.listener==y&&Y.capture==!!E&&Y.ha==w)return F}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),st={};function Ke(h,y,E,w,F){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)Ke(h,y[Y],E,w,F);return null}return E=ts(E),h&&h[oe]?h.J(y,E,f(w)?!!w.capture:!1,F):ze(h,y,E,!1,w,F)}function ze(h,y,E,w,F,Y){if(!y)throw Error("Invalid event type");const ue=f(F)?!!F.capture:!!F;let Ne=kn(h);if(Ne||(h[Ve]=Ne=new me(h)),E=Ne.add(y,E,w,ue,Y),E.proxy)return E;if(w=dr(),E.proxy=w,w.src=h,w.listener=E,h.addEventListener)k||(F=ue),F===void 0&&(F=!1),h.addEventListener(y.toString(),w,F);else if(h.attachEvent)h.attachEvent(Pt(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function dr(){function h(E){return y.call(h.src,h.listener,E)}const y=fr;return h}function ln(h,y,E,w,F){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)ln(h,y[Y],E,w,F);else w=f(w)?!!w.capture:!!w,E=ts(E),h&&h[oe]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],E=xe(y,E,w,F),E>-1&&(_e(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=kn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=xe(y,E,w,F)),(E=h>-1?y[h]:null)&&Kn(E))}function Kn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[oe])Se(y.i,h);else{var E=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(E,w,h.capture):y.detachEvent?y.detachEvent(Pt(E),w):y.addListener&&y.removeListener&&y.removeListener(w),(E=kn(y))?(Se(E,h),E.h==0&&(E.src=null,y[Ve]=null)):_e(h)}}}function Pt(h){return h in st?st[h]:st[h]="on"+h}function fr(h,y){if(h.da)h=!0;else{y=new Ce(y,this);const E=h.listener,w=h.ha||h.src;h.fa&&Kn(h),h=E.call(w,y)}return h}function kn(h){return h=h[Ve],h instanceof me?h:null}var es="__closure_events_fn_"+(Math.random()*1e9>>>0);function ts(h){return typeof h=="function"?h:(h[es]||(h[es]=function(y){return h.handleEvent(y)}),h[es])}function pt(){M.call(this),this.i=new me(this),this.M=this,this.G=null}v(pt,M),pt.prototype[oe]=!0,pt.prototype.removeEventListener=function(h,y,E,w){ln(this,h,y,E,w)};function at(h,y){var E,w=h.G;if(w)for(E=[];w;w=w.G)E.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var F=y;y=new N(w,h),ae(y,F)}F=!0;let Y,ue;if(E)for(ue=E.length-1;ue>=0;ue--)Y=y.g=E[ue],F=Qn(Y,w,!0,y)&&F;if(Y=y.g=h,F=Qn(Y,w,!0,y)&&F,F=Qn(Y,w,!1,y)&&F,E)for(ue=0;ue<E.length;ue++)Y=y.g=E[ue],F=Qn(Y,w,!1,y)&&F}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let w=0;w<E.length;w++)_e(E[w]);delete h.g[y],h.h--}}this.G=null},pt.prototype.J=function(h,y,E,w){return this.i.add(String(h),y,!1,E,w)},pt.prototype.K=function(h,y,E,w){return this.i.add(String(h),y,!0,E,w)};function Qn(h,y,E,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let Y=0;Y<y.length;++Y){const ue=y[Y];if(ue&&!ue.da&&ue.capture==E){const Ne=ue.listener,Dt=ue.ha||ue.src;ue.fa&&Se(h.i,ue),F=Ne.call(Dt,w)!==!1&&F}}return F&&!w.defaultPrevented}function ns(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ua(h){h.g=ns(()=>{h.g=null,h.i&&(h.i=!1,ua(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Wt extends M{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ua(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(h){M.call(this),this.h=h,this.g={}}v(_i,M);var ca=[];function mr(h){Ie(h.g,function(y,E){this.g.hasOwnProperty(E)&&Kn(y)},h),h.g={}}_i.prototype.N=function(){_i.Z.N.call(this),mr(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=c.JSON.stringify,vi=c.JSON.parse,ha=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Yn(){}function da(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){N.call(this,"d")}v(Qt,N);function _n(){N.call(this,"c")}v(_n,N);var yt={},oo=null;function bi(){return oo=oo||new pt}yt.Ia="serverreachability";function lo(h){N.call(this,yt.Ia,h)}v(lo,N);function gr(h){const y=bi();at(y,new lo(y))}yt.STAT_EVENT="statevent";function Ti(h,y){N.call(this,yt.STAT_EVENT,h),this.stat=y}v(Ti,N);function je(h){const y=bi();at(y,new Ti(y,h))}yt.Ja="timingevent";function _t(h,y){N.call(this,yt.Ja,h),this.size=y}v(_t,N);function vt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function jt(){this.g=!0}jt.prototype.ua=function(){this.g=!1};function vn(h,y,E,w,F,Y){h.info(function(){if(h.g)if(Y){var ue="",Ne=Y.split("&");for(let Xe=0;Xe<Ne.length;Xe++){var Dt=Ne[Xe].split("=");if(Dt.length>1){const bt=Dt[0];Dt=Dt[1];const vr=bt.split("_");ue=vr.length>=2&&vr[1]=="type"?ue+(bt+"="+Dt+"&"):ue+(bt+"=redacted&")}}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+y+`
`+E+`
`+ue})}function Zt(h,y,E,w,F,Y,ue){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+y+`
`+E+`
`+Y+" "+ue})}function Rt(h,y,E,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ct(h,E)+(w?" "+w:"")})}function Pn(h,y){h.info(function(){return"TIMEOUT: "+y})}jt.prototype.info=function(){};function Ct(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var E=Y[h];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ue=1;ue<w.length;ue++)w[ue]=""}}}}return In(Y)}catch{return y}}var bn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rn;function Xn(){}v(Xn,Yn),Xn.prototype.g=function(){return new XMLHttpRequest},Rn=new Xn;function Cn(h){return encodeURIComponent(String(h))}function Jn(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function un(h,y,E,w){this.j=h,this.i=y,this.l=E,this.S=w||1,this.V=new _i(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Dn}function Dn(){this.i=null,this.g="",this.h=!1}var Lt={},en={};function Kr(h,y,E){h.M=1,h.A=fa(zt(y)),h.u=E,h.R=!0,uo(h,null)}function uo(h,y){h.F=Date.now(),Qr(h),h.B=zt(h.A);var E=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),mo(E.i,"t",w),h.C=0,E=h.j.L,h.h=new Dn,h.g=hh(h.j,E?y:null,!h.u),h.P>0&&(h.O=new Wt(p(h.Y,h,h.g),h.P)),y=h.V,E=h.g,w=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(ca[0]=F.toString()),F=ca);for(let Y=0;Y<F.length;Y++){const ue=Ke(E,F[Y],w||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),gr(),vn(h.i,h.v,h.B,h.l,h.S,h.u)}un.prototype.ba=function(h){h=h.target;const y=this.O;y&&Mr(h)==3?y.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Ne=Mr(this.g),Dt=this.g.ya(),Xe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||Ne!=4||Dt==7||(Dt==8||Xe<=0?gr(3):gr(2)),Yr(this);var y=this.g.ca();this.X=y;var E=om(this);if(this.o=y==200,Zt(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var Y=w;break t}}Y=null}if(h=Y)Rt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$r(this,h);else{this.o=!1,this.m=3,je(12),Wn(this),pr(this);break e}}if(this.R){h=!0;let bt;for(;!this.K&&this.C<E.length;)if(bt=Wc(this,E),bt==en){Ne==4&&(this.m=4,je(14),h=!1),Rt(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Lt){this.m=4,je(15),Rt(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Rt(this.i,this.l,bt,null),$r(this,bt);if(Jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||E.length!=0||this.h.h||(this.m=1,je(16),h=!1),this.o=this.o&&h,!h)Rt(this.i,this.l,E,"[Invalid Chunked Response]"),Wn(this),pr(this);else if(E.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),iu(ue),ue.P=!0,je(11))}}else Rt(this.i,this.l,E,null),$r(this,E);Ne==4&&Wn(this),this.o&&!this.K&&(Ne==4?oh(this.j,this):(this.o=!1,Qr(this)))}else xi(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,je(12)):(this.m=0,je(13)),Wn(this),pr(this)}}}catch{}};function om(h){if(!Jc(h))return h.g.la();const y=cn(h.g);if(y==="")return"";let E="";const w=y.length,F=Mr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Wn(h),pr(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<w;Y++)h.h.h=!0,E+=h.h.i.decode(y[Y],{stream:!(F&&Y==w-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Jc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Wc(h,y){var E=h.C,w=y.indexOf(`
`,E);return w==-1?en:(E=Number(y.substring(E,w)),isNaN(E)?Lt:(w+=1,w+E>y.length?en:(y=y.slice(w,w+E),h.C=w+E,y)))}un.prototype.cancel=function(){this.K=!0,Wn(this)};function Qr(h){h.T=Date.now()+h.H,co(h,h.H)}function co(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=vt(p(h.aa,h),y)}function Yr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}un.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pn(this.i,this.B),this.M!=2&&(gr(),je(17)),Wn(this),this.m=2,pr(this)):co(this,this.T-h)};function pr(h){h.j.I==0||h.K||oh(h.j,h)}function Wn(h){Yr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,mr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function $r(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Jr(E.h,h))){if(!h.L&&Jr(E.h,h)&&E.I==3){try{var w=E.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)vo(E),cs(E);else break e;ba(E),je(18)}}else E.xa=F[1],0<E.xa-E.K&&F[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=vt(p(E.Va,E),6e3));Xr(E.h)<=1&&E.ta&&(E.ta=void 0)}else ri(E,11)}else if((h.L||E.g==h)&&vo(E),!D(y))for(F=E.Ba.g.parse(y),y=0;y<F.length;y++){let Xe=F[y];const bt=Xe[0];if(!(bt<=E.K))if(E.K=bt,Xe=Xe[1],E.I==2)if(Xe[0]=="c"){E.M=Xe[1],E.ba=Xe[2];const vr=Xe[3];vr!=null&&(E.ka=vr,E.j.info("VER="+E.ka));const ii=Xe[4];ii!=null&&(E.za=ii,E.j.info("SVER="+E.za));const Or=Xe[5];Or!=null&&typeof Or=="number"&&Or>0&&(w=1.5*Or,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const Vr=h.g;if(Vr){const Ta=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var Y=w.h;Y.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Kl(Y,Y.h),Y.h=null))}if(w.G){const bo=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(w.wa=bo,et(w.J,w.G,bo))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var ue=h;if(w.na=ch(w,w.L?w.ba:null,w.W),ue.L){Ql(w.h,ue);var Ne=ue,Dt=w.O;Dt&&(Ne.H=Dt),Ne.D&&(Yr(Ne),Qr(Ne)),w.g=ue}else sh(w);E.i.length>0&&ni(E)}else Xe[0]!="stop"&&Xe[0]!="close"||ri(E,7);else E.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?ri(E,7):nu(E):Xe[0]!="noop"&&E.l&&E.l.qa(Xe),E.A=0)}}gr(4)}catch{}}var Ut=class{constructor(h,y){this.g=h,this.map=y}};function Hl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xr(h){return h.h?1:h.g?h.g.size:0}function Jr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Kl(h,y){h.g?h.g.add(y):h.h=y}function Ql(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Hl.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Yl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return R(h.i)}var Zc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ho(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const w=h[E].indexOf("=");let F,Y=null;w>=0?(F=h[E].substring(0,w),Y=h[E].substring(w+1)):F=h[E],y(F,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Zn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Zn?(this.l=h.l,tn(this,h.j),this.o=h.o,this.g=h.g,rs(this,h.u),this.h=h.h,$l(this,rh(h.i)),this.m=h.m):h&&(y=String(h).match(Zc))?(this.l=!1,tn(this,y[1]||"",!0),this.o=Wr(y[2]||""),this.g=Wr(y[3]||"",!0),rs(this,y[4]),this.h=Wr(y[5]||"",!0),$l(this,y[6]||"",!0),this.m=Wr(y[7]||"")):(this.l=!1,this.i=new ss(null,this.l))}Zn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ma(y,fo,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ma(y,fo,!0),"@"),h.push(Cn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ma(E,E.charAt(0)=="/"?Xl:eh,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ma(E,th)),h.join("")},Zn.prototype.resolve=function(h){const y=zt(this);let E=!!h.j;E?tn(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var w=h.h;if(E)rs(y,h.u);else if(E=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=y.h.lastIndexOf("/");F!=-1&&(w=y.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const Y=[];for(let ue=0;ue<F.length;){const Ne=F[ue++];Ne=="."?w&&ue==F.length&&Y.push(""):Ne==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&ue==F.length&&Y.push("")):(Y.push(Ne),w=!0)}w=Y.join("/")}else w=F}return E?y.h=w:E=h.i.toString()!=="",E?$l(y,rh(h.i)):E=!!h.m,E&&(y.m=h.m),y};function zt(h){return new Zn(h)}function tn(h,y,E){h.j=E?Wr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function rs(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function $l(h,y,E){y instanceof ss?(h.i=y,go(h.i,h.l)):(E||(y=ma(y,is)),h.i=new ss(y,h.l))}function et(h,y,E){h.i.set(y,E)}function fa(h){return et(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Wr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ma(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,jn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var fo=/[#\/\?@]/g,eh=/[#\?:]/g,Xl=/[#\?]/g,is=/[#\?@]/g,th=/#/g;function ss(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Ln(h){h.g||(h.g=new Map,h.h=0,h.i&&ho(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=ss.prototype,r.add=function(h,y){Ln(this),this.i=null,h=as(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function nh(h,y){Ln(h),y=as(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Jl(h,y){return Ln(h),y=as(h,y),h.g.has(y)}r.forEach=function(h,y){Ln(this),this.g.forEach(function(E,w){E.forEach(function(F){h.call(y,F,w,this)},this)},this)};function Wl(h,y){Ln(h);let E=[];if(typeof y=="string")Jl(h,y)&&(E=E.concat(h.g.get(as(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}r.set=function(h,y){return Ln(this),this.i=null,h=as(this,h),Jl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Wl(this,h),h.length>0?String(h[0]):y):y};function mo(h,y,E){nh(h,y),E.length>0&&(h.i=null,h.g.set(as(h,y),R(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var E=y[w];const F=Cn(E);E=Wl(this,E);for(let Y=0;Y<E.length;Y++){let ue=F;E[Y]!==""&&(ue+="="+Cn(E[Y])),h.push(ue)}}return this.i=h.join("&")};function rh(h){const y=new ss;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function as(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function go(h,y){y&&!h.j&&(Ln(h),h.i=null,h.g.forEach(function(E,w){const F=w.toLowerCase();w!=F&&(nh(this,w),mo(this,F,E))},h)),h.j=y}function Dr(h,y){const E=new jt;if(c.Image){const w=new Image;w.onload=_(yr,E,"TestLoadImage: loaded",!0,y,w),w.onerror=_(yr,E,"TestLoadImage: error",!1,y,w),w.onabort=_(yr,E,"TestLoadImage: abort",!1,y,w),w.ontimeout=_(yr,E,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Zl(h,y){const E=new jt,w=new AbortController,F=setTimeout(()=>{w.abort(),yr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Y=>{clearTimeout(F),Y.ok?yr(E,"TestPingServer: ok",!0,y):yr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),yr(E,"TestPingServer: error",!1,y)})}function yr(h,y,E,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(E)}catch{}}function os(){this.g=new ha}function Zr(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Zr,Yn),Zr.prototype.g=function(){return new ga(this.i,this.h)};function ga(h,y){pt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(ga,pt),r=ga.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Nr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;po(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function po(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ls(this):Nr(this),this.readyState==3&&po(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,ls(this))},r.Na=function(h){this.g&&(this.response=h,ls(this))},r.ga=function(){this.g&&ls(this)};function ls(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Nr(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function Nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function _r(h){let y="";return Ie(h,function(E,w){y+=w,y+=":",y+=E,y+=`\r
`}),y}function pa(h,y,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=_r(E),typeof h=="string"?E!=null&&Cn(E):et(h,y,E))}function ot(h){pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ot,pt);var ei=/^https?$/i,eu=["POST","PUT"];r=ot.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rn.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){ya(this,Y);return}if(h=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)E.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())E.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(eu,y,void 0)>=0)||w||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of E)this.g.setRequestHeader(Y,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){ya(this,Y)}};function ya(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,tu(h),Ei(h)}function tu(h){h.A||(h.A=!0,at(h,"complete"),at(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,at(this,"complete"),at(this,"abort"),Ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),ot.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?_a(this):this.Xa())},r.Xa=function(){_a(this)};function _a(h){if(h.h&&typeof l<"u"){if(h.v&&Mr(h)==4)setTimeout(h.Ca.bind(h),0);else if(at(h,"readystatechange"),Mr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var w;if(w=Y===0){let ue=String(h.D).match(Zc)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),w=!ei.test(ue?ue.toLowerCase():"")}E=w}if(E)at(h,"complete"),at(h,"success");else{h.o=6;try{var F=Mr(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",tu(h)}}finally{Ei(h)}}}}function Ei(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||at(h,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Mr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Mr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),vi(y)}};function cn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xi(h){const y={};h=(h.g&&Mr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(D(h[w]))continue;var E=Jn(h[w]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=y[F]||[];y[F]=Y,Y.push(E)}Pe(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function us(h){this.za=0,this.i=[],this.j=new jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ti("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ti("baseRetryDelayMs",5e3,h),this.Za=ti("retryDelaySeedMs",1e4,h),this.Ta=ti("forwardChannelMaxRetries",2,h),this.va=ti("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Hl(h&&h.concurrentRequestLimit),this.Ba=new os,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=us.prototype,r.ka=8,r.I=1,r.connect=function(h,y,E,w){je(0),this.W=h,this.H=y||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=ch(this,null,this.W),ni(this)};function nu(h){if(yo(h),h.I==3){var y=h.V++,E=zt(h.J);if(et(E,"SID",h.M),et(E,"RID",y),et(E,"TYPE","terminate"),va(h,E),y=new un(h,h.j,y),y.M=2,y.A=fa(zt(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=hh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Qr(y)}uh(h)}function cs(h){h.g&&(iu(h),h.g.cancel(),h.g=null)}function yo(h){cs(h),h.v&&(c.clearTimeout(h.v),h.v=null),vo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ni(h){if(!Gl(h.h)&&!h.m){h.m=!0;var y=h.Ea;de||I(),le||(de(),le=!0),C.add(y,h),h.D=0}}function _o(h,y){return Xr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=vt(p(h.Ea,h,y),lh(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new un(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=P(Y),ae(Y,this.U)):Y=this.U),this.u!==null||this.R||(F.J=Y,Y=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=ih(this,F,y),E=zt(this.J),et(E,"RID",h),et(E,"CVER",22),this.G&&et(E,"X-HTTP-Session-Id",this.G),va(this,E),Y&&(this.R?y="headers="+Cn(_r(Y))+"&"+y:this.u&&pa(E,this.u,Y)),Kl(this.h,F),this.Ra&&et(E,"TYPE","init"),this.S?(et(E,"$req",y),et(E,"SID","null"),F.U=!0,Kr(F,E,null)):Kr(F,E,y),this.I=2}}else this.I==3&&(h?ru(this,h):this.i.length==0||Gl(this.h)||ru(this))};function ru(h,y){var E;y?E=y.l:E=h.V++;const w=zt(h.J);et(w,"SID",h.M),et(w,"RID",E),et(w,"AID",h.K),va(h,w),h.u&&h.o&&pa(w,h.u,h.o),E=new un(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=ih(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Kl(h.h,E),Kr(E,w,y)}function va(h,y){h.H&&Ie(h.H,function(E,w){et(y,w,E)}),h.l&&Ie({},function(E,w){et(y,w,E)})}function ih(h,y,E){E=Math.min(h.i.length,E);const w=h.l?p(h.l.Ka,h.l,h):null;e:{var F=h.i;let Ne=-1;for(;;){const Dt=["count="+E];Ne==-1?E>0?(Ne=F[0].g,Dt.push("ofs="+Ne)):Ne=0:Dt.push("ofs="+Ne);let Xe=!0;for(let bt=0;bt<E;bt++){var Y=F[bt].g;const vr=F[bt].map;if(Y-=Ne,Y<0)Ne=Math.max(0,F[bt].g-100),Xe=!1;else try{Y="req"+Y+"_"||"";try{var ue=vr instanceof Map?vr:Object.entries(vr);for(const[ii,Or]of ue){let Vr=Or;f(Or)&&(Vr=In(Or)),Dt.push(Y+ii+"="+encodeURIComponent(Vr))}}catch(ii){throw Dt.push(Y+"type="+encodeURIComponent("_badmap")),ii}}catch{w&&w(vr)}}if(Xe){ue=Dt.join("&");break e}}ue=void 0}return h=h.i.splice(0,E),y.G=h,ue}function sh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;de||I(),le||(de(),le=!0),C.add(y,h),h.A=0}}function ba(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=vt(p(h.Da,h),lh(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,ah(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=vt(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,je(10),cs(this),ah(this))};function iu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ah(h){h.g=new un(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=zt(h.na);et(y,"RID","rpc"),et(y,"SID",h.M),et(y,"AID",h.K),et(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&et(y,"TO",h.ia),et(y,"TYPE","xmlhttp"),va(h,y),h.u&&h.o&&pa(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=fa(zt(y)),E.u=null,E.R=!0,uo(E,h)}r.Va=function(){this.C!=null&&(this.C=null,cs(this),ba(this),je(19))};function vo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function oh(h,y){var E=null;if(h.g==y){vo(h),iu(h),h.g=null;var w=2}else if(Jr(h.h,y))E=y.G,Ql(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;w=bi(),at(w,new _t(w,E)),ni(h)}else sh(h);else if(F=y.m,F==3||F==0&&y.X>0||!(w==1&&_o(h,y)||w==2&&ba(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),F){case 1:ri(h,5);break;case 4:ri(h,10);break;case 3:ri(h,6);break;default:ri(h,2)}}}function lh(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function ri(h,y){if(h.j.info("Error code "+y),y==2){var E=p(h.bb,h),w=h.Ua;const F=!w;w=new Zn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||tn(w,"https"),fa(w),F?Dr(w.toString(),E):Zl(w.toString(),E)}else je(2);h.I=0,h.l&&h.l.pa(y),uh(h),yo(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function uh(h){if(h.I=0,h.ja=[],h.l){const y=Yl(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function ch(h,y,E){var w=E instanceof Zn?zt(E):new Zn(E);if(w.g!="")y&&(w.g=y+"."+w.g),rs(w,w.u);else{var F=c.location;w=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const Y=new Zn(null);w&&tn(Y,w),y&&(Y.g=y),F&&rs(Y,F),E&&(Y.h=E),w=Y}return E=h.G,y=h.wa,E&&y&&et(w,E,y),et(w,"VER",h.ka),va(h,w),w}function hh(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ot(new Zr({ab:E})):new ot(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function dh(){}r=dh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function hs(){}hs.prototype.g=function(h,y){return new Nn(h,y)};function Nn(h,y){pt.call(this),this.g=new us(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Si(this)}v(Nn,pt),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){nu(this.g)},Nn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=In(h),h=E);y.i.push(new Ut(y.Ya++,h)),y.I==3&&ni(y)},Nn.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,Nn.Z.N.call(this)};function fh(h){Qt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}v(fh,Qt);function mh(){_n.call(this),this.status=1}v(mh,_n);function Si(h){this.g=h}v(Si,dh),Si.prototype.ra=function(){at(this.g,"a")},Si.prototype.qa=function(h){at(this.g,new fh(h))},Si.prototype.pa=function(h){at(this.g,new mh)},Si.prototype.oa=function(){at(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,zx=function(){return new hs},Ux=function(){return bi()},Lx=yt,Op={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bn.NO_ERROR=0,bn.TIMEOUT=8,bn.HTTP_ERROR=6,Id=bn,Tn.COMPLETE="complete",jx=Tn,da.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",pt.prototype.listen=pt.prototype.J,$u=da,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,Px=ot}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");let kl="12.9.0";function LR(r){kl=r}const Wa=new gy("@firebase/firestore");function nl(){return Wa.logLevel}function ie(r,...e){if(Wa.logLevel<=qe.DEBUG){const t=e.map(_y);Wa.debug(`Firestore (${kl}): ${r}`,...t)}}function Ot(r,...e){if(Wa.logLevel<=qe.ERROR){const t=e.map(_y);Wa.error(`Firestore (${kl}): ${r}`,...t)}}function Ws(r,...e){if(Wa.logLevel<=qe.WARN){const t=e.map(_y);Wa.warn(`Firestore (${kl}): ${r}`,...t)}}function _y(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function ge(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Bx(r,i,t)}function Bx(r,e,t){let i=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ot(i),new Error(i)}function be(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Bx(e,a,i)}function ye(r,e){return r}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Fx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class zR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BR{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let i=this.i;const a=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new qi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new qi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},f=g=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new qi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(be(typeof i.accessToken=="string",31837,{l:i}),new Fx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class FR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class qR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new FR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);const i=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function GR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class vy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=GR(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Re(r,e){return r<e?-1:r>e?1:0}function Vp(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return dp(a)===dp(l)?Re(a,l):dp(a)?1:-1}return Re(r.length,e.length)}const KR=55296,QR=57343;function dp(r){const e=r.charCodeAt(0);return e>=KR&&e<=QR}function pl(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function qx(r){return r+"\0"}const yT="__name__";class ui{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ge(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=ui.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const i=ui.isNumericId(e),a=ui.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?ui.extractNumericId(e).compare(ui.extractNumericId(t)):Vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class Ze extends ui{construct(e,t,i){return new Ze(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Ze(t)}static emptyPath(){return new Ze([])}}const YR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends ui{construct(e,t,i){return new St(e,t,i)}static isValidIdentifier(e){return YR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yT}static keyField(){return new St([yT])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(t)}static emptyPath(){return new St([])}}class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ze.fromString(e))}static fromName(e){return new fe(Ze.fromString(e).popFirst(5))}static empty(){return new fe(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ze(e.slice()))}}function Hx(r,e,t){if(!t)throw new he(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $R(r,e,t,i){if(e===!0&&i===!0)throw new he(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function _T(r){if(!fe.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vT(r){if(fe.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gx(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function by(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ge(12329,{type:typeof r})}function ur(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=by(r);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Vc(r,e){if(!Gx(r))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new he(ee.INVALID_ARGUMENT,t);return!0}const bT=-62135596800,TT=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*TT);return new rt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bT)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TT}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Kt("string",rt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new rt(0,0))}static max(){return new Ee(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const yl=-1;class Kd{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function kp(r){return r.fields.find((e=>e.kind===2))}function Ua(r){return r.fields.filter((e=>e.kind!==2))}Kd.UNKNOWN_ID=-1;class Rd{constructor(e,t){this.fieldPath=e,this.kind=t}}class pc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pc(0,hr.min())}}function Kx(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new rt(t+1,0):new rt(t,i));return new hr(a,fe.empty(),e)}function Qx(r){return new hr(r.readTime,r.key,yl)}class hr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new hr(Ee.min(),fe.empty(),yl)}static max(){return new hr(Ee.max(),fe.empty(),yl)}}function Ty(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(r.documentKey,e.documentKey),t!==0?t:Re(r.largestBatchId,e.largestBatchId))}const Yx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $x{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function sa(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==Yx)throw r;ie("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,i)=>{t(e)}))}static reject(e){return new B(((t,i)=>{i(e)}))}static waitFor(e){return new B(((t,i)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(g=>i(g)))})),c=!0,l===a&&t()}))}static or(e){let t=B.resolve(!1);for(const i of e)t=t.next((a=>a?B.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new B(((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((_=>{c[p]=_,++f,f===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new B(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}const or="SimpleDb";class Af{static open(e,t,i,a){try{return new Af(t,e.transaction(a,i))}catch(l){throw new nc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new qi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new nc(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=Ey(i.target.error);this.S.reject(new nc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ie(or,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JR(t)}}class $s{static delete(e){return ie(or,"Removing database:",e),Ba(vx().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Rx())return!1;if($s.F())return!0;const e=Xt(),t=$s.M(e),i=0<t&&t<10,a=Xx(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,$s.M(Xt())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ie(or,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new nc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new he(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new he(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new nc(e,c))},a.onupgradeneeded=l=>{ie(or,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ie(or,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=Af.open(this.db,e,l?"readonly":"readwrite",i),g=a(f).next((p=>(f.C(),p))).catch((p=>(f.abort(p),B.reject(p)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,p=g.name!=="FirebaseError"&&c<3;if(ie(or,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Xx(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class XR{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ba(this.U.delete())}}class nc extends he{constructor(e,t){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function aa(r){return r.name==="IndexedDbTransactionError"}class JR{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ie(or,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ie(or,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ba(i)}add(e){return ie(or,"ADD",this.store.name,e,e),Ba(this.store.add(e))}get(e){return Ba(this.store.get(e)).next((t=>(t===void 0&&(t=null),ie(or,"GET",this.store.name,e,t),t)))}delete(e){return ie(or,"DELETE",this.store.name,e),Ba(this.store.delete(e))}count(){return ie(or,"COUNT",this.store.name),Ba(this.store.count())}H(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new B(((c,f)=>{l.onerror=g=>{f(g.target.error)},l.onsuccess=g=>{c(g.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((f,g)=>{c.push(g)})).next((()=>c))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new B(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(e,t){ie(or,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,f)=>f.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.J(a,t)}te(e){const t=this.cursor({});return new B(((i,a)=>{t.onerror=l=>{const c=Ey(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():i()})):i()}}))}J(e,t){const i=[];return new B(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void a();const g=new XR(f),p=t(f.primaryKey,f.value,g);if(p instanceof B){const _=p.catch((v=>(g.done(),B.reject(v))));i.push(_)}g.isDone?a():g.G===null?f.continue():f.continue(g.G)}})).next((()=>B.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ba(r){return new B(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=Ey(i.target.error);t(a)}}))}let ET=!1;function Ey(r){const e=$s.M(Xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ET||(ET=!0,setTimeout((()=>{throw i}),0)),i}}return r}const rc="IndexBackfiller";class WR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ie(rc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ie(rc,`Documents written: ${t}`)}catch(t){aa(t)?ie(rc,"Ignoring IndexedDB error during index backfill: ",t):await sa(t)}await this.re(6e4)}))}}class ZR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return B.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return ie(rc,`Processing collection: ${c}`),this.oe(e,c,a).next((f=>{a-=f,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((f=>(ie(rc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=Qx(l);Ty(c,i)>0&&(i=c)})),new hr(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hn.ce=-1;const Ka=-1;function If(r){return r==null}function yc(r){return r===0&&1/r==-1/0}function Jx(r){return typeof r=="number"&&Number.isInteger(r)&&!yc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Qd="";function An(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=xT(e)),e=eC(r.get(t),e);return xT(e)}function eC(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Qd:t+="";break;default:t+=l}}return t}function xT(r){return r+Qd+""}function hi(r){const e=r.length;if(be(e>=2,64408,{path:r}),e===2)return be(r.charAt(0)===Qd&&r.charAt(1)==="",56145,{path:r}),Ze.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(Qd,l);switch((c<0||c>t)&&ge(50515,{path:r}),r.charAt(c+1)){case"":const f=r.substring(l,c);let g;a.length===0?g=f:(a+=f,g=a,a=""),i.push(g);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:ge(61167,{path:r})}l=c+2}return new Ze(i)}const za="remoteDocuments",kc="owner",Xo="owner",_c="mutationQueues",tC="userId",Lr="mutations",ST="batchId",Ga="userMutationsIndex",wT=["userId","batchId"];function Cd(r,e){return[r,An(e)]}function Wx(r,e,t){return[r,An(e),t]}const nC={},_l="documentMutations",Yd="remoteDocumentsV14",rC=["prefixPath","collectionGroup","readTime","documentId"],Dd="documentKeyIndex",iC=["prefixPath","collectionGroup","documentId"],Zx="collectionGroupIndex",sC=["collectionGroup","readTime","prefixPath","documentId"],vc="remoteDocumentGlobal",Pp="remoteDocumentGlobalKey",vl="targets",eS="queryTargetsIndex",aC=["canonicalId","targetId"],bl="targetDocuments",oC=["targetId","path"],xy="documentTargetsIndex",lC=["path","targetId"],$d="targetGlobalKey",Qa="targetGlobal",bc="collectionParents",uC=["collectionId","parent"],Tl="clientMetadata",cC="clientId",Rf="bundles",hC="bundleId",Cf="namedQueries",dC="name",Sy="indexConfiguration",fC="indexId",jp="collectionGroupIndex",mC="collectionGroup",ic="indexState",gC=["indexId","uid"],tS="sequenceNumberIndex",pC=["uid","sequenceNumber"],sc="indexEntries",yC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nS="documentKeyIndex",_C=["indexId","uid","orderedDocumentKey"],Df="documentOverlays",vC=["userId","collectionPath","documentId"],Lp="collectionPathOverlayIndex",bC=["userId","collectionPath","largestBatchId"],rS="collectionGroupOverlayIndex",TC=["userId","collectionGroup","largestBatchId"],wy="globals",EC="name",iS=[_c,Lr,_l,za,vl,kc,Qa,bl,Tl,vc,bc,Rf,Cf],xC=[...iS,Df],sS=[_c,Lr,_l,Yd,vl,kc,Qa,bl,Tl,vc,bc,Rf,Cf,Df],aS=sS,Ay=[...aS,Sy,ic,sc],SC=Ay,oS=[...Ay,wy],wC=oS;class Up extends $x{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Jt(r,e){const t=ye(r);return $s.O(t.le,e)}function AT(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function oa(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function lS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ft{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??gn.RED,this.left=a??gn.EMPTY,this.right=l??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new gn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return gn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IT(this.data.getIterator())}getIteratorFrom(e){return new IT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class IT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jo(r){return r.hasNext()?r.getNext():void 0}class Gn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new it(St.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class uS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new uS("Invalid base64 string: "+l):l}})(e);return new kt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const AC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(r){if(be(!!r,39018),typeof r=="string"){let e=0;const t=AC.exec(r);if(be(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(r.seconds),nanos:Et(r.nanos)}}function Et(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ki(r){return typeof r=="string"?kt.fromBase64String(r):kt.fromUint8Array(r)}const cS="server_timestamp",hS="__type__",dS="__previous_value__",fS="__local_write_time__";function Iy(r){return(r?.mapValue?.fields||{})[hS]?.stringValue===cS}function Nf(r){const e=r.mapValue.fields[dS];return Iy(e)?Nf(e):e}function Tc(r){const e=Gi(r.mapValue.fields[fS].timestampValue);return new rt(e.seconds,e.nanos)}class IC{constructor(e,t,i,a,l,c,f,g,p,_,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_,this.apiKey=v}}const Xd="(default)";class Za{constructor(e,t){this.projectId=e,this.database=t||Xd}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===Xd}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}function RC(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(r.options.projectId,e)}const Ry="__type__",mS="__max__",Hs={mapValue:{fields:{__type__:{stringValue:mS}}}},Cy="__vector__",El="value",Nd={nullValue:"NULL_VALUE"};function Zs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Iy(r)?4:gS(r)?9007199254740991:Mf(r)?10:11:ge(28295,{value:r})}function pi(r,e){if(r===e)return!0;const t=Zs(r);if(t!==Zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Tc(r).isEqual(Tc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Gi(a.timestampValue),f=Gi(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Ki(a.bytesValue).isEqual(Ki(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return Et(a.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(a.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Et(a.integerValue)===Et(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Et(a.doubleValue),f=Et(l.doubleValue);return c===f?yc(c)===yc(f):isNaN(c)&&isNaN(f)}return!1})(r,e);case 9:return pl(r.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(AT(c)!==AT(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!pi(c[g],f[g])))return!1;return!0})(r,e);default:return ge(52216,{left:r})}}function Ec(r,e){return(r.values||[]).find((t=>pi(t,e)))!==void 0}function ea(r,e){if(r===e)return 0;const t=Zs(r),i=Zs(e);if(t!==i)return Re(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Et(l.integerValue||l.doubleValue),g=Et(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return RT(r.timestampValue,e.timestampValue);case 4:return RT(Tc(r),Tc(e));case 5:return Vp(r.stringValue,e.stringValue);case 6:return(function(l,c){const f=Ki(l),g=Ki(c);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),g=c.split("/");for(let p=0;p<f.length&&p<g.length;p++){const _=Re(f[p],g[p]);if(_!==0)return _}return Re(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Re(Et(l.latitude),Et(c.latitude));return f!==0?f:Re(Et(l.longitude),Et(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return CT(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},g=c.fields||{},p=f[El]?.arrayValue,_=g[El]?.arrayValue,v=Re(p?.values?.length||0,_?.values?.length||0);return v!==0?v:CT(p,_)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Hs.mapValue&&c===Hs.mapValue)return 0;if(l===Hs.mapValue)return 1;if(c===Hs.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),p=c.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let v=0;v<g.length&&v<_.length;++v){const x=Vp(g[v],_[v]);if(x!==0)return x;const R=ea(f[g[v]],p[_[v]]);if(R!==0)return R}return Re(g.length,_.length)})(r.mapValue,e.mapValue);default:throw ge(23264,{he:t})}}function RT(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Re(r,e);const t=Gi(r),i=Gi(e),a=Re(t.seconds,i.seconds);return a!==0?a:Re(t.nanos,i.nanos)}function CT(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=ea(t[a],i[a]);if(l)return l}return Re(t.length,i.length)}function xl(r){return zp(r)}function zp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Gi(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ki(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return fe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=zp(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${zp(t.fields[c])}`;return a+"}"})(r.mapValue):ge(61005,{value:r})}function Md(r){switch(Zs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nf(r);return e?16+Md(e):16;case 5:return 2*r.stringValue.length;case 6:return Ki(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Md(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return oa(i.fields,((l,c)=>{a+=l.length+Md(c)})),a})(r.mapValue);default:throw ge(13486,{value:r})}}function Dy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Bp(r){return!!r&&"integerValue"in r}function xc(r){return!!r&&"arrayValue"in r}function DT(r){return!!r&&"nullValue"in r}function NT(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Od(r){return!!r&&"mapValue"in r}function Mf(r){return(r?.mapValue?.fields||{})[Ry]?.stringValue===Cy}function ac(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return oa(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ac(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ac(r.arrayValue.values[t]);return e}return{...r}}function gS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===mS}const pS={mapValue:{fields:{[Ry]:{stringValue:Cy},[El]:{arrayValue:{}}}}};function CC(r){return"nullValue"in r?Nd:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Dy(Za.empty(),fe.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Mf(r)?pS:{mapValue:{}}:ge(35942,{value:r})}function DC(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Dy(Za.empty(),fe.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?pS:"mapValue"in r?Mf(r)?{mapValue:{}}:Hs:ge(61959,{value:r})}function MT(r,e){const t=ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function OT(r,e){const t=ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(t)}setAll(e){let t=St.emptyPath(),i={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=ac(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Od(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){oa(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new wn(ac(this.value))}}function yS(r){const e=[];return oa(r.fields,((t,i)=>{const a=new St([t]);if(Od(i)){const l=yS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Gn(e)}class It{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new It(e,0,Ee.min(),Ee.min(),Ee.min(),wn.empty(),0)}static newFoundDocument(e,t,i,a){return new It(e,1,t,Ee.min(),i,a,0)}static newNoDocument(e,t){return new It(e,2,t,Ee.min(),Ee.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new It(e,3,t,Ee.min(),Ee.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sl{constructor(e,t){this.position=e,this.inclusive=t}}function VT(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=fe.comparator(fe.fromName(c.referenceValue),t.key):i=ea(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function kT(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!pi(r.position[t],e.position[t]))return!1;return!0}class Jd{constructor(e,t="asc"){this.field=e,this.dir=t}}function NC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class _S{}class Ge extends _S{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new MC(e,t,i):t==="array-contains"?new kC(e,i):t==="in"?new SS(e,i):t==="not-in"?new PC(e,i):t==="array-contains-any"?new jC(e,i):new Ge(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new OC(e,i):new VC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ea(t,this.value)):t!==null&&Zs(this.value)===Zs(t)&&this.matchesComparison(ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ht extends _S{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ht(e,t)}matches(e){return wl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wl(r){return r.op==="and"}function Fp(r){return r.op==="or"}function Ny(r){return vS(r)&&wl(r)}function vS(r){for(const e of r.filters)if(e instanceof ht)return!1;return!0}function qp(r){if(r instanceof Ge)return r.field.canonicalString()+r.op.toString()+xl(r.value);if(Ny(r))return r.filters.map((e=>qp(e))).join(",");{const e=r.filters.map((t=>qp(t))).join(",");return`${r.op}(${e})`}}function bS(r,e){return r instanceof Ge?(function(i,a){return a instanceof Ge&&i.op===a.op&&i.field.isEqual(a.field)&&pi(i.value,a.value)})(r,e):r instanceof ht?(function(i,a){return a instanceof ht&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,f)=>l&&bS(c,a.filters[f])),!0):!1})(r,e):void ge(19439)}function TS(r,e){const t=r.filters.concat(e);return ht.create(t,r.op)}function ES(r){return r instanceof Ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${xl(t.value)}`})(r):r instanceof ht?(function(t){return t.op.toString()+" {"+t.getFilters().map(ES).join(" ,")+"}"})(r):"Filter"}class MC extends Ge{constructor(e,t,i){super(e,t,i),this.key=fe.fromName(i.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class OC extends Ge{constructor(e,t){super(e,"in",t),this.keys=xS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class VC extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=xS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xS(r,e){return(e.arrayValue?.values||[]).map((t=>fe.fromName(t.referenceValue)))}class kC extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xc(t)&&Ec(t.arrayValue,this.value)}}class SS extends Ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ec(this.value.arrayValue,t)}}class PC extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ec(this.value.arrayValue,t)}}class jC extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ec(this.value.arrayValue,i)))}}class LC{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Hp(r,e=null,t=[],i=[],a=null,l=null,c=null){return new LC(r,e,t,i,a,l,c)}function eo(r){const e=ye(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>qp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),If(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>xl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>xl(i))).join(",")),e.Te=t}return e.Te}function Pc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!NC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!bS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!kT(r.startAt,e.startAt)&&kT(r.endAt,e.endAt)}function Wd(r){return fe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Zd(r,e){return r.filters.filter((t=>t instanceof Ge&&t.field.isEqual(e)))}function PT(r,e,t){let i=Nd,a=!0;for(const l of Zd(r,e)){let c=Nd,f=!0;switch(l.op){case"<":case"<=":c=CC(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Nd}MT({value:i,inclusive:a},{value:c,inclusive:f})<0&&(i=c,a=f)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];MT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function jT(r,e,t){let i=Hs,a=!0;for(const l of Zd(r,e)){let c=Hs,f=!0;switch(l.op){case">=":case">":c=DC(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Hs}OT({value:i,inclusive:a},{value:c,inclusive:f})>0&&(i=c,a=f)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];OT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}class Of{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function wS(r,e,t,i,a,l,c,f){return new Of(r,e,t,i,a,l,c,f)}function jc(r){return new Of(r)}function LT(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function UC(r){return fe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function zC(r){return r.collectionGroup!==null}function oc(r){const e=ye(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new it(St.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Jd(l,i))})),t.has(St.keyField().canonicalString())||e.Ie.push(new Jd(St.keyField(),i))}return e.Ie}function cr(r){const e=ye(r);return e.Ee||(e.Ee=BC(e,oc(r))),e.Ee}function BC(r,e){if(r.limitType==="F")return Hp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Jd(a.field,l)}));const t=r.endAt?new Sl(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Sl(r.startAt.position,r.startAt.inclusive):null;return Hp(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Gp(r,e,t){return new Of(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vf(r,e){return Pc(cr(r),cr(e))&&r.limitType===e.limitType}function AS(r){return`${eo(cr(r))}|lt:${r.limitType}`}function rl(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>ES(a))).join(", ")}]`),If(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>xl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>xl(a))).join(",")),`Target(${i})`})(cr(r))}; limitType=${r.limitType})`}function Lc(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):fe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of oc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,f,g){const p=VT(c,f,g);return c.inclusive?p<=0:p<0})(i.startAt,oc(i),a)||i.endAt&&!(function(c,f,g){const p=VT(c,f,g);return c.inclusive?p>=0:p>0})(i.endAt,oc(i),a))})(r,e)}function IS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function RS(r){return(e,t)=>{let i=!1;for(const a of oc(r)){const l=FC(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function FC(r,e,t){const i=r.field.isKeyField()?fe.comparator(e.key,t.key):(function(l,c,f){const g=c.data.field(l),p=f.data.field(l);return g!==null&&p!==null?ea(g,p):ge(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:r.dir})}}class Wi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return lS(this.inner)}size(){return this.innerSize}}const qC=new ft(fe.comparator);function lr(){return qC}const CS=new ft(fe.comparator);function Xu(...r){let e=CS;for(const t of r)e=e.insert(t.key,t);return e}function DS(r){let e=CS;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function di(){return lc()}function NS(){return lc()}function lc(){return new Wi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const HC=new ft(fe.comparator),GC=new it(fe.comparator);function ke(...r){let e=GC;for(const t of r)e=e.add(t);return e}const KC=new it(Re);function My(){return KC}function Oy(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yc(e)?"-0":e}}function MS(r){return{integerValue:""+r}}function QC(r,e){return Jx(e)?MS(e):Oy(r,e)}class kf{constructor(){this._=void 0}}function YC(r,e,t){return r instanceof Sc?(function(a,l){const c={fields:{[hS]:{stringValue:cS},[fS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Iy(l)&&(l=Nf(l)),l&&(c.fields[dS]=l),{mapValue:c}})(t,e):r instanceof Al?VS(r,e):r instanceof Il?kS(r,e):(function(a,l){const c=OS(a,l),f=UT(c)+UT(a.Ae);return Bp(c)&&Bp(a.Ae)?MS(f):Oy(a.serializer,f)})(r,e)}function $C(r,e,t){return r instanceof Al?VS(r,e):r instanceof Il?kS(r,e):t}function OS(r,e){return r instanceof wc?(function(i){return Bp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Sc extends kf{}class Al extends kf{constructor(e){super(),this.elements=e}}function VS(r,e){const t=PS(e);for(const i of r.elements)t.some((a=>pi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Il extends kf{constructor(e){super(),this.elements=e}}function kS(r,e){let t=PS(e);for(const i of r.elements)t=t.filter((a=>!pi(a,i)));return{arrayValue:{values:t}}}class wc extends kf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function UT(r){return Et(r.integerValue||r.doubleValue)}function PS(r){return xc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class XC{constructor(e,t){this.field=e,this.transform=t}}function JC(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Al&&a instanceof Al||i instanceof Il&&a instanceof Il?pl(i.elements,a.elements,pi):i instanceof wc&&a instanceof wc?pi(i.Ae,a.Ae):i instanceof Sc&&a instanceof Sc})(r.transform,e.transform)}class WC{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Pf{}function jS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Uc(r.key,on.none()):new Pl(r.key,r.data,on.none());{const t=r.data,i=wn.empty();let a=new it(St.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Zi(r.key,i,new Gn(a.toArray()),on.none())}}function ZC(r,e,t){r instanceof Pl?(function(a,l,c){const f=a.value.clone(),g=BT(a.fieldTransforms,l,c.transformResults);f.setAll(g),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Zi?(function(a,l,c){if(!Vd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=BT(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(LS(a)),g.setAll(f),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function uc(r,e,t,i){return r instanceof Pl?(function(l,c,f,g){if(!Vd(l.precondition,c))return f;const p=l.value.clone(),_=FT(l.fieldTransforms,g,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,i):r instanceof Zi?(function(l,c,f,g){if(!Vd(l.precondition,c))return f;const p=FT(l.fieldTransforms,g,c),_=c.data;return _.setAll(LS(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(r,e,t,i):(function(l,c,f){return Vd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(r,e,t)}function eD(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=OS(i.transform,a||null);l!=null&&(t===null&&(t=wn.empty()),t.set(i.field,l))}return t||null}function zT(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&pl(i,a,((l,c)=>JC(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Pl extends Pf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Zi extends Pf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function LS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function BT(r,e,t){const i=new Map;be(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,$C(c,f,t[a]))}return i}function FT(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,YC(l,c,e))}return i}class Uc extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class US extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vy{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&ZC(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=uc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=uc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=NS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const g=jS(c,f);g!==null&&i.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,((t,i)=>zT(t,i)))&&pl(this.baseMutations,e.baseMutations,((t,i)=>zT(t,i)))}}class ky{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){be(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return HC})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new ky(e,t,i,a)}}class Py{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class tD{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gt,Qe;function nD(r){switch(r){case ee.OK:return ge(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return ge(15467,{code:r})}}function zS(r){if(r===void 0)return Ot("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Gt.OK:return ee.OK;case Gt.CANCELLED:return ee.CANCELLED;case Gt.UNKNOWN:return ee.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ee.INTERNAL;case Gt.UNAVAILABLE:return ee.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ee.NOT_FOUND;case Gt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Gt.ABORTED:return ee.ABORTED;case Gt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Gt.DATA_LOSS:return ee.DATA_LOSS;default:return ge(39323,{code:r})}}(Qe=Gt||(Gt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function rD(){return new TextEncoder}const iD=new Ys([4294967295,4294967295],0);function qT(r){const e=rD().encode(r),t=new kx;return t.update(e),new Uint8Array(t.digest())}function HT(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ys([t,i],0),new Ys([a,l],0)]}class jy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ju(`Invalid padding: ${t}`);if(i<0)throw new Ju(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ys.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Ys.fromNumber(i)));return a.compare(iD)===1&&(a=new Ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=qT(e),[i,a]=HT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new jy(l,a,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=qT(e),[i,a]=HT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new zc(Ee.min(),a,new ft(Re),lr(),ke())}}class Bc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Bc(i,t,ke(),ke(),ke())}}class kd{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class BS{constructor(e,t){this.targetId=e,this.Ce=t}}class FS{constructor(e,t,i=kt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class GT{constructor(){this.ve=0,this.Fe=KT(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),i=ke();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ge(38017,{changeType:l})}})),new Bc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=KT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class sD{constructor(e){this.Ge=e,this.ze=new Map,this.je=lr(),this.He=bd(),this.Je=bd(),this.Ze=new ft(Re)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Wd(l))if(i===0){const c=new fe(l.path);this.et(t,c,It.newNoDocument(c,Ee.min()))}else be(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),g=f?this.ct(f,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Ki(i).toUint8Array()}catch(g){if(g instanceof uS)return Ws("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new jy(c,a,l)}catch(g){return Ws(g instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Wd(f.target)){const g=new fe(f.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,It.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=ke();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new zc(e,t,this.Ze,this.je,i);return this.je=lr(),this.He=bd(),this.Je=bd(),this.Ze=new ft(Re),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new GT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new it(Re),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new it(Re),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bd(){return new ft(fe.comparator)}function KT(){return new ft(fe.comparator)}const aD={asc:"ASCENDING",desc:"DESCENDING"},oD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lD={and:"AND",or:"OR"};class uD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kp(r,e){return r.useProto3Json||If(e)?e:{value:e}}function Rl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cD(r,e){return Rl(r,e.toTimestamp())}function On(r){return be(!!r,49232),Ee.fromTimestamp((function(t){const i=Gi(t);return new rt(i.seconds,i.nanos)})(r))}function Ly(r,e){return Qp(r,e).canonicalString()}function Qp(r,e){const t=(function(a){return new Ze(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function HS(r){const e=Ze.fromString(r);return be(ZS(e),10190,{key:e.toString()}),e}function ef(r,e){return Ly(r.databaseId,e.path)}function Ya(r,e){const t=HS(e);if(t.get(1)!==r.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new fe(QS(t))}function GS(r,e){return Ly(r.databaseId,e)}function KS(r){const e=HS(r);return e.length===4?Ze.emptyPath():QS(e)}function Yp(r){return new Ze(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function QS(r){return be(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function QT(r,e,t){return{name:ef(r,e),fields:t.value.mapValue.fields}}function hD(r,e,t){const i=Ya(r,e.name),a=On(e.updateTime),l=e.createTime?On(e.createTime):Ee.min(),c=new wn({mapValue:{fields:e.fields}}),f=It.newFoundDocument(i,a,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function dD(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(be(_===void 0||typeof _=="string",58123),kt.fromBase64String(_||"")):(be(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),kt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const _=p.code===void 0?ee.UNKNOWN:zS(p.code);return new he(_,p.message||"")})(c);t=new FS(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Ya(r,i.document.name),l=On(i.document.updateTime),c=i.document.createTime?On(i.document.createTime):Ee.min(),f=new wn({mapValue:{fields:i.document.fields}}),g=It.newFoundDocument(a,l,c,f),p=i.targetIds||[],_=i.removedTargetIds||[];t=new kd(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Ya(r,i.document),l=i.readTime?On(i.readTime):Ee.min(),c=It.newNoDocument(a,l),f=i.removedTargetIds||[];t=new kd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Ya(r,i.document),l=i.removedTargetIds||[];t=new kd([],l,a,null)}else{if(!("filter"in e))return ge(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new tD(a,l),f=i.targetId;t=new BS(f,c)}}return t}function tf(r,e){let t;if(e instanceof Pl)t={update:QT(r,e.key,e.value)};else if(e instanceof Uc)t={delete:ef(r,e.key)};else if(e instanceof Zi)t={update:QT(r,e.key,e.data),updateMask:_D(e.fieldMask)};else{if(!(e instanceof US))return ge(16599,{dt:e.type});t={verify:ef(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof Sc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Al)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Il)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof wc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ge(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:cD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(r,e.precondition)),t}function $p(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?on.updateTime(On(l.updateTime)):l.exists!==void 0?on.exists(l.exists):on.none()})(e.currentDocument):on.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,f){let g=null;if("setToServerValue"in f)be(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new Sc;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];g=new Al(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];g=new Il(_)}else"increment"in f?g=new wc(c,f.increment):ge(16584,{proto:f});const p=St.fromServerFormat(f.fieldPath);return new XC(p,g)})(r,a))):[];if(e.update){e.update.name;const a=Ya(r,e.update.name),l=new wn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new Gn(p.map((_=>St.fromServerFormat(_))))})(e.updateMask);return new Zi(a,l,c,t,i)}return new Pl(a,l,t,i)}if(e.delete){const a=Ya(r,e.delete);return new Uc(a,t)}if(e.verify){const a=Ya(r,e.verify);return new US(a,t)}return ge(1463,{proto:e})}function fD(r,e){return r&&r.length>0?(be(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?On(a.updateTime):On(l);return c.isEqual(Ee.min())&&(c=On(l)),new WC(c,a.transformResults||[])})(t,e)))):[]}function YS(r,e){return{documents:[GS(r,e.path)]}}function $S(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=GS(r,a);const l=(function(p){if(p.length!==0)return WS(ht.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((_=>(function(x){return{field:il(x.field),direction:gD(x.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Kp(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function XS(r){let e=KS(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){be(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(v){const x=JS(v);return x instanceof ht&&Ny(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((x=>(function(V){return new Jd(sl(V.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(x)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let x;return x=typeof v=="object"?v.value:v,If(x)?null:x})(t.limit));let g=null;t.startAt&&(g=(function(v){const x=!!v.before,R=v.values||[];return new Sl(R,x)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const x=!v.before,R=v.values||[];return new Sl(R,x)})(t.endAt)),wS(e,a,c,l,f,"F",g,p)}function mD(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JS(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=sl(t.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=sl(t.unaryFilter.field);return Ge.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=sl(t.unaryFilter.field);return Ge.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=sl(t.unaryFilter.field);return Ge.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ge.create(sl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return ht.create(t.compositeFilter.filters.map((i=>JS(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(r):ge(30097,{filter:r})}function gD(r){return aD[r]}function pD(r){return oD[r]}function yD(r){return lD[r]}function il(r){return{fieldPath:r.canonicalString()}}function sl(r){return St.fromServerFormat(r.fieldPath)}function WS(r){return r instanceof Ge?(function(t){if(t.op==="=="){if(NT(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(DT(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NT(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(DT(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:pD(t.op),value:t.value}}})(r):r instanceof ht?(function(t){const i=t.getFilters().map((a=>WS(a)));return i.length===1?i[0]:{compositeFilter:{op:yD(t.op),filters:i}}})(r):ge(54877,{filter:r})}function _D(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ZS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function e1(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class zi{constructor(e,t,i,a,l=Ee.min(),c=Ee.min(),f=kt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class t1{constructor(e){this.yt=e}}function vD(r,e){let t;if(e.document)t=hD(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=fe.fromSegments(e.noDocument.path),a=no(e.noDocument.readTime);t=It.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const i=fe.fromSegments(e.unknownDocument.path),a=no(e.unknownDocument.version);t=It.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new rt(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function YT(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:ef(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Rl(l,c.version.toTimestamp()),createTime:Rl(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:to(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:to(e.version)}}return i}function nf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function to(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function no(r){const e=new rt(r.seconds,r.nanoseconds);return Ee.fromTimestamp(e)}function Fa(r,e){const t=(e.baseMutations||[]).map((l=>$p(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>$p(r.yt,l))),a=rt.fromMillis(e.localWriteTimeMs);return new Vy(e.batchId,a,t,i)}function Wu(r){const e=no(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?no(r.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return be(c===1,1966,{count:c}),cr(jc(KS(l.documents[0])))})(r.query):(function(l){return cr(XS(l))})(r.query),new zi(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,kt.fromBase64String(r.resumeToken))}function n1(r,e){const t=to(e.snapshotVersion),i=to(e.lastLimboFreeSnapshotVersion);let a;a=Wd(e.target)?YS(r.yt,e.target):$S(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function r1(r){const e=XS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Gp(e,e.limit,"L"):e}function fp(r,e){return new Py(e.largestBatchId,$p(r.yt,e.overlayMutation))}function $T(r,e){const t=e.path.lastSegment();return[r,An(e.path.popLast()),t]}function XT(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:to(i.readTime),documentKey:An(i.documentKey.path),largestBatchId:i.largestBatchId}}class bD{getBundleMetadata(e,t){return JT(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:no(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return JT(e).put((function(a){return{bundleId:a.id,createTime:to(On(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return WT(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:r1(l.bundledQuery),readTime:no(l.readTime)}})(i)}))}saveNamedQuery(e,t){return WT(e).put((function(a){return{name:a.name,readTime:to(On(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function JT(r){return Jt(r,Rf)}function WT(r){return Jt(r,Cf)}class jf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new jf(e,i)}getOverlay(e,t){return qu(e).get($T(this.userId,t)).next((i=>i?fp(this.serializer,i):null))}getOverlays(e,t){const i=di();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const f=new Py(t,c);a.push(this.bt(e,f))})),B.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(An(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(qu(e).X(Lp,f))})),B.waitFor(l)}getOverlaysForCollection(e,t,i){const a=di(),l=An(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return qu(e).H(Lp,c).next((f=>{for(const g of f){const p=fp(this.serializer,g);a.set(p.getKey(),p)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=di();let c;const f=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qu(e).ee({index:rS,range:f},((g,p,_)=>{const v=fp(this.serializer,p);l.size()<a||v.largestBatchId===c?(l.set(v.getKey(),v),c=v.largestBatchId):_.done()})).next((()=>l))}bt(e,t){return qu(e).put((function(a,l,c){const[f,g,p]=$T(l,c.mutation.key);return{userId:l,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:tf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function qu(r){return Jt(r,Df)}class TD{St(e){return Jt(e,wy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t?.value;return i?kt.fromUint8Array(i):kt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class qa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Et(e.integerValue));else if("doubleValue"in e){const i=Et(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),yc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Gi(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ki(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?gS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Mf(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ge(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=El,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Et(l)),this.Ot(a,t),this.Ct(i[a],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}qa.Wt=new qa;const Wo=255;function ED(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function ZT(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=ED(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class xD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),i=ZT(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=ZT(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Wo),this.sn(255)}_n(){this.an(Wo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Wo?(this.sn(Wo),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Wo?(this.an(Wo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class SD{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class wD{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hu{constructor(){this.cn=new xD,this.ascending=new SD(this.cn),this.descending=new wD(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ha{constructor(e,t,i,a){this.hn=e,this.Pn=t,this.Tn=i,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new Ha(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:Pd(this.Tn),directionalValue:Pd(this.In),orderedDocumentKey:Pd(t),documentKey:i.path.toArray()}}An(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Vs(r,e){let t=r.hn-e.hn;return t!==0?t:(t=eE(r.Tn,e.Tn),t!==0?t:(t=eE(r.In,e.In),t!==0?t:fe.comparator(r.Pn,e.Pn)))}function eE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function Pd(r){return Ix()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function tE(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class nE{constructor(e){this.Vn=new it(((t,i)=>St.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(be(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=kp(e);if(t!==void 0&&!this.pn(t))return!1;const i=Ua(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const g=i[l];if(!this.yn(f,g)||!this.wn(this.dn[c++],g))return!1}++l}for(;l<i.length;++l){const f=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new it(St.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Rd(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Rd(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Rd(i.field,i.dir==="asc"?0:1)));return new Kd(Kd.UNKNOWN_ID,this.collectionId,t,pc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function i1(r){if(be(r instanceof Ge||r instanceof ht,20012),r instanceof Ge){if(r instanceof SS){const t=r.value.arrayValue?.values?.map((i=>Ge.create(r.field,"==",i)))||[];return ht.create(t,"or")}return r}const e=r.filters.map((t=>i1(t)));return ht.create(e,r.op)}function AD(r){if(r.getFilters().length===0)return[];const e=Wp(i1(r));return be(s1(e),7391),Xp(e)||Jp(e)?[e]:e.getFilters()}function Xp(r){return r instanceof Ge}function Jp(r){return r instanceof ht&&Ny(r)}function s1(r){return Xp(r)||Jp(r)||(function(t){if(t instanceof ht&&Fp(t)){for(const i of t.getFilters())if(!Xp(i)&&!Jp(i))return!1;return!0}return!1})(r)}function Wp(r){if(be(r instanceof Ge||r instanceof ht,34018),r instanceof Ge)return r;if(r.filters.length===1)return Wp(r.filters[0]);const e=r.filters.map((i=>Wp(i)));let t=ht.create(e,r.op);return t=rf(t),s1(t)?t:(be(t instanceof ht,64498),be(wl(t),40251),be(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Uy(i,a))))}function Uy(r,e){let t;return be(r instanceof Ge||r instanceof ht,38388),be(e instanceof Ge||e instanceof ht,25473),t=r instanceof Ge?e instanceof Ge?(function(a,l){return ht.create([a,l],"and")})(r,e):rE(r,e):e instanceof Ge?rE(e,r):(function(a,l){if(be(a.filters.length>0&&l.filters.length>0,48005),wl(a)&&wl(l))return TS(a,l.getFilters());const c=Fp(a)?a:l,f=Fp(a)?l:a,g=c.filters.map((p=>Uy(p,f)));return ht.create(g,"or")})(r,e),rf(t)}function rE(r,e){if(wl(e))return TS(e,r.getFilters());{const t=e.filters.map((i=>Uy(r,i)));return ht.create(t,"or")}}function rf(r){if(be(r instanceof Ge||r instanceof ht,11850),r instanceof Ge)return r;const e=r.getFilters();if(e.length===1)return rf(e[0]);if(vS(r))return r;const t=e.map((a=>rf(a))),i=[];return t.forEach((a=>{a instanceof Ge?i.push(a):a instanceof ht&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:ht.create(i,r.op)}class ID{constructor(){this.Sn=new zy}addToCollectionParentIndex(e,t){return this.Sn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(hr.min())}updateCollectionGroup(e,t,i){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class zy{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new it(Ze.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new it(Ze.comparator)).toArray()}}const iE="IndexedDbIndexManager",Td=new Uint8Array(0);class RD{constructor(e,t){this.databaseId=t,this.Dn=new zy,this.Cn=new Wi((i=>eo(i)),((i,a)=>Pc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:i,parent:An(a)};return sE(e).put(l)}return B.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[qx(t),""],!1,!0);return sE(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(hi(c.parent))}return i}))}addFieldIndex(e,t){const i=Gu(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=el(e);return l.next((f=>{c.put(XT(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Gu(e),a=el(e),l=Zo(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Gu(e),i=Zo(e),a=el(e);return t.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(e,t){return B.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new nE(i).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Zo(e);let a=!0;const l=new Map;return B.forEach(this.vn(t),(c=>this.Fn(e,c).next((f=>{a&&(a=!!f),l.set(c,f)})))).next((()=>{if(a){let c=ke();const f=[];return B.forEach(l,((g,p)=>{ie(iE,`Using index ${(function(re){return`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map((ce=>`${ce.fieldPath}:${ce.kind}`)).join(",")}`})(g)} to execute ${eo(t)}`);const _=(function(re,ce){const de=kp(ce);if(de===void 0)return null;for(const le of Zd(re,de.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null})(p,g),v=(function(re,ce){const de=new Map;for(const le of Ua(ce))for(const C of Zd(re,le.fieldPath))switch(C.op){case"==":case"in":de.set(le.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return de.set(le.fieldPath.canonicalString(),C.value),Array.from(de.values())}return null})(p,g),x=(function(re,ce){const de=[];let le=!0;for(const C of Ua(ce)){const I=C.kind===0?PT(re,C.fieldPath,re.startAt):jT(re,C.fieldPath,re.startAt);de.push(I.value),le&&(le=I.inclusive)}return new Sl(de,le)})(p,g),R=(function(re,ce){const de=[];let le=!0;for(const C of Ua(ce)){const I=C.kind===0?jT(re,C.fieldPath,re.endAt):PT(re,C.fieldPath,re.endAt);de.push(I.value),le&&(le=I.inclusive)}return new Sl(de,le)})(p,g),V=this.Mn(g,p,x),L=this.Mn(g,p,R),q=this.xn(g,p,v),te=this.On(g.indexId,_,V,x.inclusive,L,R.inclusive,q);return B.forEach(te,(X=>i.Z(X,t.limit).next((re=>{re.forEach((ce=>{const de=fe.fromSegments(ce.documentKey);c.has(de)||(c=c.add(de),f.push(de))}))}))))})).next((()=>f))}return B.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=AD(ht.create(e.filters,"and")).map((i=>Hp(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,a,l,c,f){const g=(t!=null?t.length:1)*Math.max(i.length,l.length),p=g/(t!=null?t.length:1),_=[];for(let v=0;v<g;++v){const x=t?this.Nn(t[v/p]):Td,R=this.Bn(e,x,i[v%p],a),V=this.Ln(e,x,l[v%p],c),L=f.map((q=>this.Bn(e,x,q,!0)));_.push(...this.createRange(R,V,L))}return _}Bn(e,t,i,a){const l=new Ha(e,fe.empty(),t,i);return a?l:l.En()}Ln(e,t,i,a){const l=new Ha(e,fe.empty(),t,i);return a?l.En():l}Fn(e,t){const i=new nE(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const f of l)i.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let i=2;const a=this.vn(t);return B.forEach(a,(l=>this.Fn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(g){let p=new it(St.comparator),_=!1;for(const v of g.filters)for(const x of v.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?_=!0:p=p.add(x.field));for(const v of g.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}kn(e,t){const i=new Hu;for(const a of Ua(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);qa.Wt.Dt(l,c)}return i.un()}Nn(e){const t=new Hu;return qa.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new Hu;return qa.Wt.Dt(Dy(this.databaseId,t),i.ln((function(l){const c=Ua(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let a=[];a.push(new Hu);let l=0;for(const c of Ua(e)){const f=i[l++];for(const g of a)if(this.qn(t,c.fieldPath)&&xc(f))a=this.Un(a,c,f);else{const p=g.ln(c.kind);qa.Wt.Dt(f,p)}}return this.$n(a)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const f of a){const g=new Hu;g.seed(f.un()),qa.Wt.Dt(c,g.ln(t.kind)),l.push(g)}return l}qn(e,t){return!!e.filters.find((i=>i instanceof Ge&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Gu(e),a=el(e);return(t?i.H(jp,IDBKeyRange.bound(t,t)):i.H()).next((l=>{const c=[];return B.forEach(l,(f=>a.get([f.indexId,this.uid]).next((g=>{c.push((function(_,v){const x=v?new pc(v.sequenceNumber,new hr(no(v.readTime),new fe(hi(v.documentKey)),v.largestBatchId)):pc.empty(),R=_.fields.map((([V,L])=>new Rd(St.fromServerFormat(V),L)));return new Kd(_.indexId,_.collectionGroup,R,x)})(f,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Re(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Gu(e),l=el(e);return this.Wn(e).next((c=>a.H(jp,IDBKeyRange.bound(t,t)).next((f=>B.forEach(f,(g=>l.put(XT(g.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return B.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(i.set(a.collectionGroup,f),B.forEach(f,(g=>this.Qn(e,a,g).next((p=>{const _=this.Gn(l,g);return p.isEqual(_)?B.resolve():this.zn(e,l,g,p,_)})))))))}))}jn(e,t,i,a){return Zo(e).put(a.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,a){return Zo(e).delete(a.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const a=Zo(e);let l=new it(Vs);return a.ee({index:nS,range:IDBKeyRange.only([i.indexId,this.uid,Pd(this.Kn(i,t))])},((c,f)=>{l=l.add(new Ha(i.indexId,t,tE(f.arrayValue),tE(f.directionalValue)))})).next((()=>l))}Gn(e,t){let i=new it(Vs);const a=this.kn(t,e);if(a==null)return i;const l=kp(t);if(l!=null){const c=e.data.field(l.fieldPath);if(xc(c))for(const f of c.arrayValue.values||[])i=i.add(new Ha(t.indexId,e.key,this.Nn(f),a))}else i=i.add(new Ha(t.indexId,e.key,Td,a));return i}zn(e,t,i,a,l){ie(iE,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,_,v,x){const R=g.getIterator(),V=p.getIterator();let L=Jo(R),q=Jo(V);for(;L||q;){let te=!1,X=!1;if(L&&q){const re=_(L,q);re<0?X=!0:re>0&&(te=!0)}else L!=null?X=!0:te=!0;te?(v(q),q=Jo(V)):X?(x(L),L=Jo(R)):(L=Jo(R),q=Jo(V))}})(a,l,Vs,(f=>{c.push(this.jn(e,t,i,f))}),(f=>{c.push(this.Hn(e,t,i,f))})),B.waitFor(c)}Wn(e){let t=1;return el(e).ee({index:tS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,f)=>Vs(c,f))).filter(((c,f,g)=>!f||Vs(c,g[f-1])!==0));const a=[];a.push(e);for(const c of i){const f=Vs(c,e),g=Vs(c,t);if(f===0)a[0]=e.En();else if(f>0&&g<0)a.push(c),a.push(c.En());else if(g>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const f=a[c].An(this.uid,Td,fe.empty()),g=a[c+1].An(this.uid,Td,fe.empty());l.push(IDBKeyRange.bound(f,g))}return l}Jn(e,t){return Vs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aE)}getMinOffset(e,t){return B.mapArray(this.vn(t),(i=>this.Fn(e,i).next((a=>a||ge(44426))))).next(aE)}}function sE(r){return Jt(r,bc)}function Zo(r){return Jt(r,sc)}function Gu(r){return Jt(r,Sy)}function el(r){return Jt(r,ic)}function aE(r){be(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;Ty(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new hr(e.readTime,e.documentKey,t)}const oE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a1=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function o1(r,e,t){const i=r.store(Lr),a=r.store(_l),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const g=i.ee({range:c},((_,v,x)=>(f++,x.delete())));l.push(g.next((()=>{be(f===1,47070,{batchId:t.batchId})})));const p=[];for(const _ of t.mutations){const v=Wx(e,_.key.path,t.batchId);l.push(a.delete(v)),p.push(_.key)}return B.waitFor(l).next((()=>p))}function sf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ge(14731);e=r.noDocument}return JSON.stringify(e).length}Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(a1,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);class Lf{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(e,t,i,a){be(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Lf(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).ee({index:Ga,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=al(e),c=ks(e);return c.add({}).next((f=>{be(typeof f=="number",49019);const g=new Vy(f,t,i,a),p=(function(R,V,L){const q=L.baseMutations.map((X=>tf(R.yt,X))),te=L.mutations.map((X=>tf(R.yt,X)));return{userId:V,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:q,mutations:te}})(this.serializer,this.userId,g),_=[];let v=new it(((x,R)=>Re(x.canonicalString(),R.canonicalString())));for(const x of a){const R=Wx(this.userId,x.key.path,f);v=v.add(x.key.path.popLast()),_.push(c.put(p)),_.push(l.put(R,nC))}return v.forEach((x=>{_.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Zn[f]=g.keys()})),B.waitFor(_).next((()=>g))}))}lookupMutationBatch(e,t){return ks(e).get(t).next((i=>i?(be(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Fa(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return ks(e).ee({index:Ga,range:a},((c,f,g)=>{f.userId===this.userId&&(be(f.batchId>=i,47524,{Yn:i}),l=Fa(this.serializer,f)),g.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ka;return ks(e).ee({index:Ga,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ka],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).H(Ga,t).next((i=>i.map((a=>Fa(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Cd(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return al(e).ee({range:a},((c,f,g)=>{const[p,_,v]=c,x=hi(_);if(p===this.userId&&t.path.isEqual(x))return ks(e).get(v).next((R=>{if(!R)throw ge(61480,{er:c,batchId:v});be(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:v}),l.push(Fa(this.serializer,R))}));g.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(Re);const a=[];return t.forEach((l=>{const c=Cd(this.userId,l.path),f=IDBKeyRange.lowerBound(c),g=al(e).ee({range:f},((p,_,v)=>{const[x,R,V]=p,L=hi(R);x===this.userId&&l.path.isEqual(L)?i=i.add(V):v.done()}));a.push(g)})),B.waitFor(a).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Cd(this.userId,i),c=IDBKeyRange.lowerBound(l);let f=new it(Re);return al(e).ee({range:c},((g,p,_)=>{const[v,x,R]=g,V=hi(x);v===this.userId&&i.isPrefixOf(V)?V.length===a&&(f=f.add(R)):_.done()})).next((()=>this.tr(e,f)))}tr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(ks(e).get(l).next((c=>{if(c===null)throw ge(35274,{batchId:l});be(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Fa(this.serializer,c))})))})),B.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return o1(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),B.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return al(e).ee({range:i},((l,c,f)=>{if(l[0]===this.userId){const g=hi(l[1]);a.push(g)}else f.done()})).next((()=>{be(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return l1(e,this.userId,t)}ir(e){return u1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ka,lastStreamToken:""}))}}function l1(r,e,t){const i=Cd(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return al(r).ee({range:l,Y:!0},((f,g,p)=>{const[_,v,x]=f;_===e&&v===a&&(c=!0),p.done()})).next((()=>c))}function ks(r){return Jt(r,Lr)}function al(r){return Jt(r,_l)}function u1(r){return Jt(r,_c)}class ro{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ro(0)}static ar(){return new ro(-1)}}class CD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new ro(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ee.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>tl(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(be(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return tl(e).ee(((c,f)=>{const g=Wu(f);g.sequenceNumber<=t&&i.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(e,g)))})).next((()=>B.waitFor(l))).next((()=>a))}forEachTarget(e,t){return tl(e).ee(((i,a)=>{const l=Wu(a);t(l)}))}ur(e){return lE(e).get($d).next((t=>(be(t!==null,2888),t)))}cr(e,t){return lE(e).put($d,t)}lr(e,t){return tl(e).put(n1(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=eo(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return tl(e).ee({range:a,index:eS},((c,f,g)=>{const p=Wu(f);Pc(t,p.target)&&(l=p,g.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=Us(e);return t.forEach((c=>{const f=An(c.path);a.push(l.put({targetId:i,path:f})),a.push(this.referenceDelegate.addReference(e,i,c))})),B.waitFor(a)}removeMatchingKeys(e,t,i){const a=Us(e);return B.forEach(t,(l=>{const c=An(l.path);return B.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=Us(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Us(e);let l=ke();return a.ee({range:i,Y:!0},((c,f,g)=>{const p=hi(c[1]),_=new fe(p);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=An(t.path),a=IDBKeyRange.bound([i],[qx(i)],!1,!0);let l=0;return Us(e).ee({index:xy,Y:!0,range:a},(([c,f],g,p)=>{c!==0&&(l++,p.done())})).next((()=>l>0))}At(e,t){return tl(e).get(t).next((i=>i?Wu(i):null))}}function tl(r){return Jt(r,vl)}function lE(r){return Jt(r,Qa)}function Us(r){return Jt(r,bl)}const uE="LruGarbageCollector",DD=1048576;function cE([r,e],[t,i]){const a=Re(r,t);return a===0?Re(e,i):a}class ND{constructor(e){this.Pr=e,this.buffer=new it(cE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();cE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class c1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ie(uE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?ie(uE,"Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Ar(3e5)}))}}class MD{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(Hn.ce);const i=new ND(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(oE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,f,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),nl()<=qe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${v} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function h1(r,e){return new MD(r,e)}class OD{constructor(e,t){this.db=e,this.garbageCollector=h1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,a)=>t(a)))}addReference(e,t,i){return Ed(e,i)}removeReference(e,t,i){return Ed(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Ed(e,t)}wr(e,t){return(function(a,l){let c=!1;return u1(a).te((f=>l1(a,f,l).next((g=>(g&&(c=!0),B.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,f)=>{if(f<=t){const g=this.wr(e,c).next((p=>{if(!p)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Ee.min()),Us(e).delete((function(v){return[0,An(v.path)]})(c)))))}));a.push(g)}})).next((()=>B.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Ed(e,t)}yr(e,t){const i=Us(e);let a,l=Hn.ce;return i.ee({index:xy},(([c,f],{path:g,sequenceNumber:p})=>{c===0?(l!==Hn.ce&&t(new fe(hi(a)),l),l=p,a=g):l=Hn.ce})).next((()=>{l!==Hn.ce&&t(new fe(hi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ed(r,e){return Us(r).put((function(i,a){return{targetId:0,path:An(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}class d1{constructor(){this.changes=new Wi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?B.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ja(e).put(i)}removeEntry(e,t,i){return ja(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],nf(c),f[f.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=It.newInvalidDocument(t);return ja(e).ee({index:Dd,range:IDBKeyRange.only(Ku(t))},((a,l)=>{i=this.Sr(t,l)})).next((()=>i))}Dr(e,t){let i={size:0,document:It.newInvalidDocument(t)};return ja(e).ee({index:Dd,range:IDBKeyRange.only(Ku(t))},((a,l)=>{i={document:this.Sr(t,l),size:sf(l)}})).next((()=>i))}getEntries(e,t){let i=lr();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(e,t){let i=lr(),a=new ft(fe.comparator);return this.Cr(e,t,((l,c)=>{const f=this.Sr(l,c);i=i.insert(l,f),a=a.insert(l,sf(c))})).next((()=>({documents:i,Fr:a})))}Cr(e,t,i){if(t.isEmpty())return B.resolve();let a=new it(fE);t.forEach((g=>a=a.add(g)));const l=IDBKeyRange.bound(Ku(a.first()),Ku(a.last())),c=a.getIterator();let f=c.getNext();return ja(e).ee({index:Dd,range:l},((g,p,_)=>{const v=fe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;f&&fE(f,v)<0;)i(f,null),f=c.getNext();f&&f.isEqual(v)&&(i(f,p),f=c.hasNext()?c.getNext():null),f?_.j(Ku(f)):_.done()})).next((()=>{for(;f;)i(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),nf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ja(e).H(IDBKeyRange.bound(f,g,!0)).next((p=>{l?.incrementDocumentReadCount(p.length);let _=lr();for(const v of p){const x=this.Sr(fe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);x.isFoundDocument()&&(Lc(t,x)||a.has(x.key))&&(_=_.insert(x.key,x))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=lr();const c=dE(t,i),f=dE(t,hr.max());return ja(e).ee({index:Zx,range:IDBKeyRange.bound(c,f,!0)},((g,p,_)=>{const v=this.Sr(fe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(v.key,v),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new kD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return hE(e).get(Pp).next((t=>(be(!!t,20021),t)))}br(e,t){return hE(e).put(Pp,t)}Sr(e,t){if(t){const i=vD(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return It.newInvalidDocument(e)}}function f1(r){return new VD(r)}class kD extends d1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Wi((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new it(((l,c)=>Re(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const g=YT(this.Mr.serializer,c);a=a.add(l.path.popLast());const p=sf(g);i+=p-f.size,t.push(this.Mr.addEntry(e,l,g))}else if(i-=f.size,this.trackRemovals){const g=YT(this.Mr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Mr.addEntry(e,l,g))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,i)),B.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function hE(r){return Jt(r,vc)}function ja(r){return Jt(r,Yd)}function Ku(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dE(r,e){const t=e.documentKey.path.toArray();return[r,nf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fE(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Re(t[l],i[l]),a)return a;return a=Re(t.length,i.length),a||(a=Re(t[t.length-2],i[i.length-2]),a||Re(t[t.length-1],i[i.length-1]))}class PD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class m1{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&uc(i.mutation,a,Gn.empty(),rt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ke()){const a=di();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Xu();return l.forEach(((f,g)=>{c=c.insert(f,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=di();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ke())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,a){let l=lr();const c=lc(),f=(function(){return lc()})();return t.forEach(((g,p)=>{const _=i.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof Zi)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),uc(_.mutation,p,_.mutation.getFieldMask(),rt.now())):c.set(p.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,_)=>c.set(p,_))),t.forEach(((p,_)=>f.set(p,new PD(_,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=lc();let a=new ft(((c,f)=>c-f)),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let _=i.get(g)||Gn.empty();_=f.applyToLocalView(p,_),i.set(g,_);const v=(a.get(f.batchId)||ke()).add(g);a=a.insert(f.batchId,v)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),p=g.key,_=g.value,v=NS();_.forEach((x=>{if(!l.has(x)){const R=jS(t.get(x),i.get(x));R!==null&&v.set(x,R),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return B.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return UC(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):B.resolve(di());let f=yl,g=l;return c.next((p=>B.forEach(p,((_,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(_)?B.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{g=g.insert(_,x)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,ke()))).next((_=>({batchId:f,changes:DS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((i=>{let a=Xu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Xu();return this.indexManager.getCollectionParents(e,l).next((f=>B.forEach(f,(g=>{const p=(function(v,x){return new Of(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((_=>{_.forEach(((v,x)=>{c=c.insert(v,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((g,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,It.newInvalidDocument(_)))}));let f=Xu();return c.forEach(((g,p)=>{const _=l.get(g);_!==void 0&&uc(_.mutation,p,Gn.empty(),rt.now()),Lc(t,p)&&(f=f.insert(g,p))})),f}))}}class jD{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return B.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:On(a.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:r1(a.bundledQuery),readTime:On(a.readTime)}})(t)),B.resolve()}}class LD{constructor(){this.overlays=new ft(fe.comparator),this.Lr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const i=di();return B.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),B.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),B.resolve()}getOverlaysForCollection(e,t,i){const a=di(),l=t.length+1,c=new fe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>i&&a.set(g.getKey(),g)}return B.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ft(((p,_)=>p-_));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=di(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const f=di(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>f.set(p,_))),!(f.size()>=a)););return B.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Py(t,i));let l=this.Lr.get(t);l===void 0&&(l=ke(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}class UD{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}class By{constructor(){this.kr=new it(rn.Kr),this.qr=new it(rn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new rn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new rn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new fe(new Ze([])),i=new rn(t,e),a=new rn(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new fe(new Ze([])),i=new rn(t,e),a=new rn(t,e+1);let l=ke();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new rn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class rn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return fe.comparator(e.key,t.key)||Re(e.Hr,t.Hr)}static Ur(e,t){return Re(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}}class zD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new it(rn.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Vy(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new rn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return B.resolve(c)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ka:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new rn(t,0),a=new rn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(Re);return t.forEach((a=>{const l=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{i=i.add(f.Hr)}))})),B.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;fe.isDocumentKey(l)||(l=l.child(""));const c=new rn(new fe(l),0);let f=new it(Re);return this.Jr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(g.Hr)),!0)}),c),B.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){be(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return B.forEach(t.mutations,(a=>{const l=new rn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new rn(t,0),a=this.Jr.firstAfterOrEqual(i);return B.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class BD{constructor(e){this.ti=e,this.docs=(function(){return new ft(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return B.resolve(i?i.document.mutableCopy():It.newInvalidDocument(t))}getEntries(e,t){let i=lr();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():It.newInvalidDocument(a))})),B.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=lr();const c=t.path,f=new fe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Ty(Qx(_),i)<=0||(a.has(_.key)||Lc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ge(9500)}ni(e,t){return B.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new FD(this)}getSize(e){return B.resolve(this.size)}}class FD extends d1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),B.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class qD{constructor(e){this.persistence=e,this.ri=new Wi((t=>eo(t)),Pc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.ii=0,this.si=new By,this.targetCount=0,this.oi=ro._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),B.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ro(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.lr(t),B.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),B.waitFor(l).next((()=>a))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return B.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),B.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),B.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return B.resolve(i)}containsKey(e,t){return B.resolve(this.si.containsKey(t))}}class Fy{constructor(e,t){this._i={},this.overlays={},this.ai=new Hn(0),this.ui=!1,this.ui=!0,this.ci=new UD,this.referenceDelegate=e(this),this.li=new qD(this),this.indexManager=new ID,this.remoteDocumentCache=(function(a){return new BD(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new t1(t),this.Pi=new jD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new zD(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ie("MemoryPersistence","Starting transaction:",e);const a=new HD(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return B.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class HD extends $x{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Ri=new By,this.Ai=null}static Vi(e){return new Uf(e)}get di(){if(this.Ai)return this.Ai;throw ge(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),B.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,(i=>{const a=fe.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class af{constructor(e,t){this.persistence=e,this.fi=new Wi((i=>An(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=h1(this,t)}static Vi(e,t){return new af(e,t)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return B.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?B.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(i++,l.removeEntry(c,Ee.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),B.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Md(e.data.value)),t}wr(e,t,i){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return B.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class GD{constructor(e){this.serializer=e}k(e,t,i,a){const l=new Af("createOrUpgrade",t);i<1&&a>=1&&((function(g){g.createObjectStore(kc)})(e),(function(g){g.createObjectStore(_c,{keyPath:tC}),g.createObjectStore(Lr,{keyPath:ST,autoIncrement:!0}).createIndex(Ga,wT,{unique:!0}),g.createObjectStore(_l)})(e),mE(e),(function(g){g.createObjectStore(za)})(e));let c=B.resolve();return i<3&&a>=3&&(i!==0&&((function(g){g.deleteObjectStore(bl),g.deleteObjectStore(vl),g.deleteObjectStore(Qa)})(e),mE(e)),c=c.next((()=>(function(g){const p=g.store(Qa),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put($d,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(g,p){return p.store(Lr).H().next((v=>{g.deleteObjectStore(Lr),g.createObjectStore(Lr,{keyPath:ST,autoIncrement:!0}).createIndex(Ga,wT,{unique:!0});const x=p.store(Lr),R=v.map((V=>x.put(V)));return B.waitFor(R)}))})(e,l)))),c=c.next((()=>{(function(g){g.createObjectStore(Tl,{keyPath:cC})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(g){g.createObjectStore(vc)})(e),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Rf,{keyPath:hC})})(e),(function(g){g.createObjectStore(Cf,{keyPath:dC})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Df,{keyPath:vC});p.createIndex(Lp,bC,{unique:!1}),p.createIndex(rS,TC,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Yd,{keyPath:rC});p.createIndex(Dd,iC),p.createIndex(Zx,sC)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(za)))),i<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Sy,{keyPath:fC,autoIncrement:!0}).createIndex(jp,mC,{unique:!1}),g.createObjectStore(ic,{keyPath:gC}).createIndex(tS,pC,{unique:!1}),g.createObjectStore(sc,{keyPath:yC}).createIndex(nS,_C,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(ic).clear()})).next((()=>{t.objectStore(sc).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(wy,{keyPath:EC})})(e)}))),i<18&&a>=18&&Ix()&&(c=c.next((()=>{t.objectStore(ic).clear()})).next((()=>{t.objectStore(sc).clear()}))),c}pi(e){let t=0;return e.store(za).ee(((i,a)=>{t+=sf(a)})).next((()=>{const i={byteSize:t};return e.store(vc).put(Pp,i)}))}gi(e){const t=e.store(_c),i=e.store(Lr);return t.H().next((a=>B.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ka],[l.userId,l.lastAcknowledgedBatchId]);return i.H(Ga,c).next((f=>B.forEach(f,(g=>{be(g.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=Fa(this.serializer,g);return o1(e,l.userId,p).next((()=>{}))}))))}))))}yi(e){const t=e.store(bl),i=e.store(za);return e.store(Qa).get($d).next((a=>{const l=[];return i.ee(((c,f)=>{const g=new Ze(c),p=(function(v){return[0,An(v)]})(g);l.push(t.get(p).next((_=>_?B.resolve():(v=>t.put({targetId:0,path:An(v),sequenceNumber:a.highestListenSequenceNumber}))(g))))})).next((()=>B.waitFor(l)))}))}wi(e,t){e.createObjectStore(bc,{keyPath:uC});const i=t.store(bc),a=new zy,l=c=>{if(a.add(c)){const f=c.lastSegment(),g=c.popLast();return i.put({collectionId:f,parent:An(g)})}};return t.store(za).ee({Y:!0},((c,f)=>{const g=new Ze(c);return l(g.popLast())})).next((()=>t.store(_l).ee({Y:!0},(([c,f,g],p)=>{const _=hi(f);return l(_.popLast())}))))}bi(e){const t=e.store(vl);return t.ee(((i,a)=>{const l=Wu(a),c=n1(this.serializer,l);return t.put(c)}))}Si(e,t){const i=t.store(za),a=[];return i.ee(((l,c)=>{const f=t.store(Yd),g=(function(v){return v.document?new fe(Ze.fromString(v.document.name).popFirst(5)):v.noDocument?fe.fromSegments(v.noDocument.path):v.unknownDocument?fe.fromSegments(v.unknownDocument.path):ge(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(f.put(p))})).next((()=>B.waitFor(a)))}Di(e,t){const i=t.store(Lr),a=f1(this.serializer),l=new Fy(Uf.Vi,this.serializer.yt);return i.H().next((c=>{const f=new Map;return c.forEach((g=>{let p=f.get(g.userId)??ke();Fa(this.serializer,g).keys().forEach((_=>p=p.add(_))),f.set(g.userId,p)})),B.forEach(f,((g,p)=>{const _=new sn(p),v=jf.wt(this.serializer,_),x=l.getIndexManager(_),R=Lf.wt(_,this.serializer,x,l.referenceDelegate);return new m1(a,R,v,x).recalculateAndSaveOverlaysForDocumentKeys(new Up(t,Hn.ce),g).next()}))}))}}function mE(r){r.createObjectStore(bl,{keyPath:oC}).createIndex(xy,lC,{unique:!0}),r.createObjectStore(vl,{keyPath:"targetId"}).createIndex(eS,aC,{unique:!0}),r.createObjectStore(Qa)}const Ps="IndexedDbPersistence",mp=18e5,gp=5e3,pp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",KD="main";class qy{constructor(e,t,i,a,l,c,f,g,p,_,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=l,this.window=c,this.document=f,this.Fi=p,this.Mi=_,this.xi=v,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=x=>Promise.resolve(),!qy.v())throw new he(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OD(this,a),this.Ki=t+KD,this.serializer=new t1(g),this.qi=new $s(this.Ki,this.xi,new GD(this.serializer)),this.ci=new TD,this.li=new CD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=f1(this.serializer),this.Pi=new bD,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&Ot(Ps,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(ee.FAILED_PRECONDITION,pp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Hn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>xd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(aa(e))return ie(Ps,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie(Ps,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Qu(e).get(Xo).next((t=>B.resolve(this.Xi(t))))}Yi(e){return xd(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,mp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Jt(t,Tl);return i.H().next((a=>{const l=this.ns(a,mp),c=a.filter((f=>l.indexOf(f)===-1));return B.forEach(c,(f=>i.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?B.resolve(!0):Qu(e).get(Xo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,gp)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new he(ee.FAILED_PRECONDITION,pp);return!1}}return!(!this.networkEnabled||!this.inForeground)||xd(e).H().next((i=>this.ns(i,gp).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ie(Ps,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[kc,Tl],(e=>{const t=new Up(e,Hn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>xd(e).H().next((t=>this.ns(t,mp).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Lf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RD(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return jf.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){ie(Ps,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(g){return g===18?wC:g===17?oS:g===16?SC:g===15?Ay:g===14?aS:g===13?sS:g===12?xC:g===11?iS:void ge(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(f=>(c=new Up(f,this.ai?this.ai.next():Hn.ce),t==="readwrite-primary"?this.ji(c).next((g=>!!g||this.Hi(c))).next((g=>{if(!g)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new he(ee.FAILED_PRECONDITION,Yx);return i(c)})).next((g=>this.Zi(c).next((()=>g)))):this.Ps(c).next((()=>i(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(e){return Qu(e).get(Xo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,gp)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(ee.FAILED_PRECONDITION,pp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qu(e).put(Xo,t)}static v(){return $s.v()}Ji(e){const t=Qu(e);return t.get(Xo).next((i=>this.Xi(i)?(ie(Ps,"Releasing primary lease."),t.delete(Xo)):B.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;Ax()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ie(Ps,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ot(Ps,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qu(r){return Jt(r,kc)}function xd(r){return Jt(r,Tl)}function g1(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Hy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=ke(),a=ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Hy(e,t.fromCache,i,a)}}class QD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class p1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Ax()?8:Xx(Xt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new QD;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(nl()<=qe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(nl()<=qe.DEBUG&&ie("QueryEngine","Query:",rl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(nl()<=qe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):B.resolve())}gs(e,t){if(LT(t))return B.resolve(null);let i=cr(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Gp(t,null,"F"),i=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=ke(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.bs(t,f);return this.Ss(t,p,c,g.readTime)?this.gs(e,Gp(t,null,"F")):this.Ds(e,p,t,g)}))))})))))}ps(e,t,i,a){return LT(t)||a.isEqual(Ee.min())?B.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?B.resolve(null):(nl()<=qe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),rl(t)),this.Ds(e,c,t,Kx(a,yl)).next((f=>f)))}))}bs(e,t){let i=new it(RS(e));return t.forEach(((a,l)=>{Lc(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return nl()<=qe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",rl(t)),this.fs.getDocumentsMatchingQuery(e,t,hr.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Gy="LocalStore",YD=3e8;class $D{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new ft(Re),this.Fs=new Wi((l=>eo(l)),Pc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function y1(r,e,t,i){return new $D(r,e,t,i)}async function _1(r,e){const t=ye(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let g=ke();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of l){f.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function XD(r,e){const t=ye(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,g,p,_){const v=p.batch,x=v.keys();let R=B.resolve();return x.forEach((V=>{R=R.next((()=>_.getEntry(g,V))).next((L=>{const q=p.docVersions.get(V);be(q!==null,48541),L.version.compareTo(q)<0&&(v.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),_.addEntry(L)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(g,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=ke();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(g=g.add(f.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function v1(r){const e=ye(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function JD(r,e){const t=ye(r),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((_,v)=>{const x=a.get(v);if(!x)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,v))));let R=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(kt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),a=a.insert(v,R),(function(L,q,te){return L.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=YD?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(x,R,_)&&f.push(t.li.updateTargetData(l,R))}));let g=lr(),p=ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(WD(l,c,e.documentUpdates).next((_=>{g=_.Bs,p=_.Ls}))),!i.isEqual(Ee.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return B.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.vs=a,l)))}function WD(r,e,t){let i=ke(),a=ke();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=lr();return t.forEach(((f,g)=>{const p=l.get(f);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),g.isNoDocument()&&g.version.isEqual(Ee.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):ie(Gy,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",g.version)})),{Bs:c,Ls:a}}))}function ZD(r,e){const t=ye(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ka),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function of(r,e){const t=ye(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,B.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new zi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Cl(r,e,t){const i=ye(r),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!aa(c))throw c;ie(Gy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Zp(r,e,t){const i=ye(r);let a=Ee.min(),l=ke();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,_){const v=ye(g),x=v.Fs.get(_);return x!==void 0?B.resolve(v.vs.get(x)):v.li.getTargetData(p,_)})(i,c,cr(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((g=>{l=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:ke()))).next((f=>(E1(i,IS(e),f),{documents:f,ks:l})))))}function b1(r,e){const t=ye(r),i=ye(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function T1(r,e){const t=ye(r),i=t.Ms.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,Kx(i,yl),Number.MAX_SAFE_INTEGER))).then((a=>(E1(t,e,a),a)))}function E1(r,e,t){let i=r.Ms.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}const x1="firestore_clients";function gE(r,e){return`${x1}_${r}_${e}`}const S1="firestore_mutations";function pE(r,e,t){let i=`${S1}_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const w1="firestore_targets";function yp(r,e){return`${w1}_${r}_${e}`}const ci="SharedClientState";class lf{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static $s(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new he(a.error.code,a.error.message))),c?new lf(e,t,a.state,l):(Ot(ci,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cc{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new he(i.error.code,i.error.message))),l?new cc(e,i.state,a):(Ot(ci,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=My();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=Jx(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new uf(e,l):(Ot(ci,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ky{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Ky(t.clientId,t.onlineState):(Ot(ci,`Failed to parse online state: ${e}`),null)}}class ey{constructor(){this.activeTargetIds=My()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _p{constructor(e,t,i,a,l){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ft(Re),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=gE(this.persistenceKey,this.zs),this.Ys=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new ey),this.eo=new RegExp(`^${x1}_${c}_([^_]*)$`),this.no=new RegExp(`^${S1}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${w1}_${c}_(\\d+)$`),this.io=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this.so=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const a=this.getItem(gE(this.persistenceKey,i));if(a){const l=uf.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(yp(this.persistenceKey,e));if(a){const l=cc.$s(e,a);l&&(i=l.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yp(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.lo(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ie(ci,"READ",e,t),t}setItem(e,t){ie(ci,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ie(ci,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ie(ci,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(l){let c=Hn.ce;if(l!=null)try{const f=JSON.parse(l);be(typeof f=="number",30636,{yo:l}),c=f}catch(f){Ot(ci,"Failed to read sequence number from WebStorage",f)}return c})(t.newValue);i!==Hn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const a=new lf(this.currentUser,e,t,i),l=pE(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=pE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const a=yp(this.persistenceKey,e),l=new cc(e,t,i);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return uf.$s(i,t)}Vo(e,t){const i=this.no.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return lf.$s(new sn(l),a,t)}fo(e,t){const i=this.ro.exec(e),a=Number(i[1]);return cc.$s(a,t)}_o(e){return Ky.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ie(ci,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(i),c=[],f=[];return l.forEach((g=>{a.has(g)||c.push(g)})),a.forEach((g=>{l.has(g)||f.push(g)})),this.syncEngine.Co(c,f).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=My();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class A1{constructor(){this.vo=new ey,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new ey,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eN{Mo(e){}shutdown(){}}const yE="ConnectivityMonitor";class _E{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ie(yE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ie(yE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sd=null;function ty(){return Sd===null?Sd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sd++,"0x"+Sd.toString(16)}const vp="RestConnection",tN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class nN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Xd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=ty(),f=this.Qo(e,t.toUriEncodedString());ie(vp,`Sending RPC '${e}' ${c}:`,f,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:p}=new URL(f),_=Ol(p);return this.zo(e,f,g,i,_).then((v=>(ie(vp,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw Ws(vp,`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",i),v}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=tN[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class rN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const xn="WebChannelConnection",Yu=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class ll extends nN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ll.c_){const e=Ux();Yu(e,Lx.STAT_EVENT,(t=>{t.stat===Op.PROXY?ie(xn,"STAT_EVENT: detected buffering proxy"):t.stat===Op.NOPROXY&&ie(xn,"STAT_EVENT: detected no buffering proxy")})),ll.c_=!0}}zo(e,t,i,a,l){const c=ty();return new Promise(((f,g)=>{const p=new Px;p.setWithCredentials(!0),p.listenOnce(jx.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Id.NO_ERROR:const v=p.getResponseJson();ie(xn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),f(v);break;case Id.TIMEOUT:ie(xn,`RPC '${e}' ${c} timed out`),g(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:const x=p.getStatus();if(ie(xn,`RPC '${e}' ${c} failed with status:`,x,"response text:",p.getResponseText()),x>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R?.error;if(V&&V.status&&V.message){const L=(function(te){const X=te.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(X)>=0?X:ee.UNKNOWN})(V.status);g(new he(L,V.message))}else g(new he(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new he(ee.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ie(xn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ie(xn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=ty(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=l.join("");ie(xn,`Creating RPC '${e}' stream ${a}: ${p}`,f);const _=c.createWebChannel(p,f);this.I_(_);let v=!1,x=!1;const R=new rN({Ho:V=>{x?ie(xn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(v||(ie(xn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),v=!0),ie(xn,`RPC '${e}' stream ${a} sending:`,V),_.send(V))},Jo:()=>_.close()});return Yu(_,$u.EventType.OPEN,(()=>{x||(ie(xn,`RPC '${e}' stream ${a} transport opened.`),R.i_())})),Yu(_,$u.EventType.CLOSE,(()=>{x||(x=!0,ie(xn,`RPC '${e}' stream ${a} transport closed`),R.o_(),this.E_(_))})),Yu(_,$u.EventType.ERROR,(V=>{x||(x=!0,Ws(xn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),R.o_(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),Yu(_,$u.EventType.MESSAGE,(V=>{if(!x){const L=V.data[0];be(!!L,16349);const q=L,te=q?.error||q[0]?.error;if(te){ie(xn,`RPC '${e}' stream ${a} received error:`,te);const X=te.status;let re=(function(le){const C=Gt[le];if(C!==void 0)return zS(C)})(X),ce=te.message;X==="NOT_FOUND"&&ce.includes("database")&&ce.includes("does not exist")&&ce.includes(this.databaseId.database)&&Ws(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),re===void 0&&(re=ee.INTERNAL,ce="Unknown error status: "+X+" with message "+te.message),x=!0,R.o_(new he(re,ce)),_.close()}else ie(xn,`RPC '${e}' stream ${a} received:`,L),R.__(L)}})),ll.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zx()}}function iN(r){return new ll(r)}function I1(){return typeof window<"u"?window:null}function jd(){return typeof document<"u"?document:null}function zf(r){return new uD(r,!0)}ll.c_=!1;class R1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const vE="PersistentStream";class C1{constructor(e,t,i,a,l,c,f,g){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new he(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ie(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sN extends C1{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dD(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?On(c.readTime):Ee.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Yp(this.serializer),t.addTarget=(function(l,c){let f;const g=c.target;if(f=Wd(g)?{documents:YS(l,g)}:{query:$S(l,g).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=qS(l,c.resumeToken);const p=Kp(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ee.min())>0){f.readTime=Rl(l,c.snapshotVersion.toTimestamp());const p=Kp(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=mD(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Yp(this.serializer),t.removeTarget=e,this.K_(t)}}class aN extends C1{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=fD(e.writeResults,e.commitTime),i=On(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Yp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>tf(this.serializer,i)))};this.K_(t)}}class oN{}class lN extends oN{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Qp(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ee.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Qp(t,i),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function uN(r,e,t,i){return new lN(r,e,t,i)}class cN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ot(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const io="RemoteStore";class hN{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{ao(this)&&(ie(io,"Restarting streams for network reachability change."),await(async function(g){const p=ye(g);p.Ea.add(4),await Fc(p),p.Va.set("Unknown"),p.Ea.delete(4),await Bf(p)})(this))}))})),this.Va=new cN(i,a)}}async function Bf(r){if(ao(r))for(const e of r.Ra)await e(!0)}async function Fc(r){for(const e of r.Ra)await e(!1)}function Ff(r,e){const t=ye(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$y(t)?Yy(t):Ll(t).O_()&&Qy(t,e))}function Dl(r,e){const t=ye(r),i=Ll(t);t.Ia.delete(e),i.O_()&&D1(t,e),t.Ia.size===0&&(i.O_()?i.L_():ao(t)&&t.Va.set("Unknown"))}function Qy(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ll(r).Z_(e)}function D1(r,e){r.da.$e(e),Ll(r).X_(e)}function Yy(r){r.da=new sD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ll(r).start(),r.Va.ua()}function $y(r){return ao(r)&&!Ll(r).x_()&&r.Ia.size>0}function ao(r){return ye(r).Ea.size===0}function N1(r){r.da=void 0}async function dN(r){r.Va.set("Online")}async function fN(r){r.Ia.forEach(((e,t)=>{Qy(r,e)}))}async function mN(r,e){N1(r),$y(r)?(r.Va.ha(e),Yy(r)):r.Va.set("Unknown")}async function gN(r,e,t){if(r.Va.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(r,e)}catch(i){ie(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cf(r,i)}else if(e instanceof kd?r.da.Xe(e):e instanceof BS?r.da.st(e):r.da.tt(e),!t.isEqual(Ee.min()))try{const i=await v1(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(g.resumeToken,c))}})),f.targetMismatches.forEach(((g,p)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(kt.EMPTY_BYTE_STRING,_.snapshotVersion)),D1(l,g);const v=new zi(_.target,g,p,_.sequenceNumber);Qy(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ie(io,"Failed to raise snapshot:",i),await cf(r,i)}}async function cf(r,e,t){if(!aa(e))throw e;r.Ea.add(1),await Fc(r),r.Va.set("Offline"),t||(t=()=>v1(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ie(io,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Bf(r)}))}function M1(r,e){return e().catch((t=>cf(r,t,e)))}async function jl(r){const e=ye(r),t=ta(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ka;for(;pN(e);)try{const a=await ZD(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,yN(e,a)}catch(a){await cf(e,a)}O1(e)&&V1(e)}function pN(r){return ao(r)&&r.Ta.length<10}function yN(r,e){r.Ta.push(e);const t=ta(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function O1(r){return ao(r)&&!ta(r).x_()&&r.Ta.length>0}function V1(r){ta(r).start()}async function _N(r){ta(r).ra()}async function vN(r){const e=ta(r);for(const t of r.Ta)e.ea(t.mutations)}async function bN(r,e,t){const i=r.Ta.shift(),a=ky.from(i,e,t);await M1(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await jl(r)}async function TN(r,e){e&&ta(r).Y_&&await(async function(i,a){if((function(c){return nD(c)&&c!==ee.ABORTED})(a.code)){const l=i.Ta.shift();ta(i).B_(),await M1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await jl(i)}})(r,e),O1(r)&&V1(r)}async function bE(r,e){const t=ye(r);t.asyncQueue.verifyOperationInProgress(),ie(io,"RemoteStore received new credentials");const i=ao(t);t.Ea.add(3),await Fc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bf(t)}async function ny(r,e){const t=ye(r);e?(t.Ea.delete(2),await Bf(t)):e||(t.Ea.add(2),await Fc(t),t.Va.set("Unknown"))}function Ll(r){return r.ma||(r.ma=(function(t,i,a){const l=ye(t);return l.sa(),new sN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:dN.bind(null,r),Yo:fN.bind(null,r),t_:mN.bind(null,r),J_:gN.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),$y(r)?Yy(r):r.Va.set("Unknown")):(await r.ma.stop(),N1(r))}))),r.ma}function ta(r){return r.fa||(r.fa=(function(t,i,a){const l=ye(t);return l.sa(),new aN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_N.bind(null,r),t_:TN.bind(null,r),ta:vN.bind(null,r),na:bN.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await jl(r)):(await r.fa.stop(),r.Ta.length>0&&(ie(io,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Xy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new Xy(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(r,e){if(Ot("AsyncQueue",`${e}: ${r}`),aa(r))return new he(ee.UNAVAILABLE,`${e}: ${r}`);throw r}class ul{static emptySet(e){return new ul(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||fe.comparator(t.key,i.key):(t,i)=>fe.comparator(t.key,i.key),this.keyedMap=Xu(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ul;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class TE{constructor(){this.ga=new ft(fe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ge(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Nl{constructor(e,t,i,a,l,c,f,g,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Nl(e,t,ul.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class EN{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class xN{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=ye(t),l=a.queries;a.queries=EE(),l.forEach(((c,f)=>{for(const g of f.ba)g.onError(i)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function EE(){return new Wi((r=>AS(r)),Vf)}async function k1(r,e){const t=ye(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new EN,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=Jy(c,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Wy(t)}async function P1(r,e){const t=ye(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function SN(r,e){const t=ye(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(i=!0);c.wa=a}}i&&Wy(t)}function wN(r,e,t){const i=ye(r),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function Wy(r){r.Ca.forEach((e=>{e.next()}))}var ry,xE;(xE=ry||(ry={})).Ma="default",xE.Cache="cache";class j1{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Nl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ry.Cache}}class L1{constructor(e){this.key=e}}class U1{constructor(e){this.key=e}}class AN{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ke(),this.mutatedKeys=ke(),this.eu=RS(e),this.tu=new ul(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new TE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,v)=>{const x=a.get(_),R=Lc(this.query,v)?v:null,V=!!x&&this.mutatedKeys.has(x.key),L=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let q=!1;x&&R?x.data.isEqual(R.data)?V!==L&&(i.track({type:3,doc:R}),q=!0):this.su(x,R)||(i.track({type:2,doc:R}),q=!0,(g&&this.eu(R,g)>0||p&&this.eu(R,p)<0)&&(f=!0)):!x&&R?(i.track({type:0,doc:R}),q=!0):x&&!R&&(i.track({type:1,doc:x}),q=!0,(g||p)&&(f=!0)),q&&(R?(c=c.add(R),l=L?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,v)=>(function(R,V){const L=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Vt:q})}};return L(R)-L(V)})(_.type,v.type)||this.eu(_.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,p=g!==this.Xa;return this.Xa=g,c.length!==0||p?{snapshot:new Nl(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new U1(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new L1(i))})),t}cu(e){this.Za=e.ks,this.Ya=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ul="SyncEngine";class IN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class RN{constructor(e){this.key=e,this.hu=!1}}class CN{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Wi((f=>AS(f)),Vf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ft(fe.comparator),this.Au=new Map,this.Vu=new By,this.du={},this.mu=new Map,this.fu=ro.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DN(r,e,t=!0){const i=qf(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await z1(i,e,t,!0),a}async function NN(r,e){const t=qf(r);await z1(t,e,!0,!1)}async function z1(r,e,t,i){const a=await of(r.localStore,cr(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await Zy(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&Ff(r.remoteStore,a),f}async function Zy(r,e,t,i,a){r.pu=(v,x,R)=>(async function(L,q,te,X){let re=q.view.ru(te);re.Ss&&(re=await Zp(L.localStore,q.query,!1).then((({documents:C})=>q.view.ru(C,re))));const ce=X&&X.targetChanges.get(q.targetId),de=X&&X.targetMismatches.get(q.targetId)!=null,le=q.view.applyChanges(re,L.isPrimaryClient,ce,de);return iy(L,q.targetId,le.au),le.snapshot})(r,v,x,R);const l=await Zp(r.localStore,e,!0),c=new AN(e,l.ks),f=c.ru(l.documents),g=Bc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),p=c.applyChanges(f,r.isPrimaryClient,g);iy(r,t,p.au);const _=new IN(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function MN(r,e,t){const i=ye(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Vf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Cl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Dl(i.remoteStore,a.targetId),Ml(i,a.targetId)})).catch(sa)):(Ml(i,a.targetId),await Cl(i.localStore,a.targetId,!0))}async function ON(r,e){const t=ye(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Dl(t.remoteStore,i.targetId))}async function VN(r,e,t){const i=r_(r);try{const a=await(function(c,f){const g=ye(c),p=rt.now(),_=f.reduce(((R,V)=>R.add(V.key)),ke());let v,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=lr(),L=ke();return g.xs.getEntries(R,_).next((q=>{V=q,V.forEach(((te,X)=>{X.isValidDocument()||(L=L.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,V))).next((q=>{v=q;const te=[];for(const X of f){const re=eD(X,v.get(X.key).overlayedDocument);re!=null&&te.push(new Zi(X.key,re,yS(re.value.mapValue),on.exists(!0)))}return g.mutationQueue.addMutationBatch(R,p,te,f)})).next((q=>{x=q;const te=q.applyToLocalDocumentSet(v,L);return g.documentOverlayCache.saveOverlays(R,q.batchId,te)}))})).then((()=>({batchId:x.batchId,changes:DS(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,f,g){let p=c.du[c.currentUser.toKey()];p||(p=new ft(Re)),p=p.insert(f,g),c.du[c.currentUser.toKey()]=p})(i,a.batchId,t),await la(i,a.changes),await jl(i.remoteStore)}catch(a){const l=Jy(a,"Failed to persist write");t.reject(l)}}async function B1(r,e){const t=ye(r);try{const i=await JD(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?be(c.hu,14607):a.removedDocuments.size>0&&(be(c.hu,42227),c.hu=!1))})),await la(t,i,e)}catch(i){await sa(i)}}function SE(r,e,t){const i=ye(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const g=ye(c);g.onlineState=f;let p=!1;g.queries.forEach(((_,v)=>{for(const x of v.ba)x.va(f)&&(p=!0)})),p&&Wy(g)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function kN(r,e,t){const i=ye(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new ft(fe.comparator);c=c.insert(l,It.newNoDocument(l,Ee.min()));const f=ke().add(l),g=new zc(Ee.min(),new Map,new ft(Re),c,f);await B1(i,g),i.Ru=i.Ru.remove(l),i.Au.delete(e),n_(i)}else await Cl(i.localStore,e,!1).then((()=>Ml(i,e,t))).catch(sa)}async function PN(r,e){const t=ye(r),i=e.batch.batchId;try{const a=await XD(t.localStore,e);t_(t,i,null),e_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await la(t,a)}catch(a){await sa(a)}}async function jN(r,e,t){const i=ye(r);try{const a=await(function(c,f){const g=ye(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,f).next((v=>(be(v!==null,37113),_=v.keys(),g.mutationQueue.removeMutationBatch(p,v)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);t_(i,e,t),e_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await la(i,a)}catch(a){await sa(a)}}function e_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function t_(r,e,t){const i=ye(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function Ml(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||F1(r,i)}))}function F1(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Dl(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),n_(r))}function iy(r,e,t){for(const i of t)i instanceof L1?(r.Vu.addReference(i.key,e),LN(r,i)):i instanceof U1?(ie(Ul,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||F1(r,i.key)):ge(19791,{wu:i})}function LN(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(ie(Ul,"New document in limbo: "+t),r.Eu.add(i),n_(r))}function n_(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new fe(Ze.fromString(e)),i=r.fu.next();r.Au.set(i,new RN(t)),r.Ru=r.Ru.insert(t,i),Ff(r.remoteStore,new zi(cr(jc(t.path)),i,"TargetPurposeLimboResolution",Hn.ce))}}async function la(r,e,t){const i=ye(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{c.push(i.pu(g,e,t).then((p=>{if((p||t)&&i.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(p){a.push(p);const _=Hy.Es(g.targetId,p);l.push(_)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(g,p){const _=ye(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>B.forEach(p,(x=>B.forEach(x.Ts,(R=>_.persistence.referenceDelegate.addReference(v,x.targetId,R))).next((()=>B.forEach(x.Is,(R=>_.persistence.referenceDelegate.removeReference(v,x.targetId,R)))))))))}catch(v){if(!aa(v))throw v;ie(Gy,"Failed to update sequence numbers: "+v)}for(const v of p){const x=v.targetId;if(!v.fromCache){const R=_.vs.get(x),V=R.snapshotVersion,L=R.withLastLimboFreeSnapshotVersion(V);_.vs=_.vs.insert(x,L)}}})(i.localStore,l))}async function UN(r,e){const t=ye(r);if(!t.currentUser.isEqual(e)){ie(Ul,"User change. New user:",e.toKey());const i=await _1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new he(ee.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await la(t,i.Ns)}}function zN(r,e){const t=ye(r),i=t.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let a=ke();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}async function BN(r,e){const t=ye(r),i=await Zp(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&iy(t,e.targetId,a.au),a}async function FN(r,e){const t=ye(r);return T1(t.localStore,e).then((i=>la(t,i)))}async function qN(r,e,t,i){const a=ye(r),l=await(function(f,g){const p=ye(f),_=ye(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(v=>_.Xn(v,g).next((x=>x?p.localDocuments.getDocuments(v,x):B.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await jl(a.remoteStore):t==="acknowledged"||t==="rejected"?(t_(a,e,i||null),e_(a,e),(function(f,g){ye(ye(f).mutationQueue).nr(g)})(a.localStore,e)):ge(6720,"Unknown batchState",{bu:t}),await la(a,l)):ie(Ul,"Cannot apply mutation batch with id: "+e)}async function HN(r,e){const t=ye(r);if(qf(t),r_(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await wE(t,i.toArray());t.gu=!0,await ny(t.remoteStore,!0);for(const l of a)Ff(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(Ml(t,c),Cl(t.localStore,c,!0)))),Dl(t.remoteStore,c)})),await a,await wE(t,i),(function(c){const f=ye(c);f.Au.forEach(((g,p)=>{Dl(f.remoteStore,p)})),f.Vu.zr(),f.Au=new Map,f.Ru=new ft(fe.comparator)})(t),t.gu=!1,await ny(t.remoteStore,!1)}}async function wE(r,e,t){const i=ye(r),a=[],l=[];for(const c of e){let f;const g=i.Iu.get(c);if(g&&g.length!==0){f=await of(i.localStore,cr(g[0]));for(const p of g){const _=i.Tu.get(p),v=await BN(i,_);v.snapshot&&l.push(v.snapshot)}}else{const p=await b1(i.localStore,c);f=await of(i.localStore,p),await Zy(i,q1(p),c,!1,f.resumeToken)}a.push(f)}return i.Pu.J_(l),a}function q1(r){return wS(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function GN(r){return(function(t){return ye(ye(t).persistence).hs()})(ye(r).localStore)}async function KN(r,e,t,i){const a=ye(r);if(a.gu)return void ie(Ul,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await T1(a.localStore,IS(l[0])),f=zc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",kt.EMPTY_BYTE_STRING);await la(a,c,f);break}case"rejected":await Cl(a.localStore,e,!0),Ml(a,e,i);break;default:ge(64155,t)}}async function QN(r,e,t){const i=qf(r);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){ie(Ul,"Adding an already active target "+a);continue}const l=await b1(i.localStore,a),c=await of(i.localStore,l);await Zy(i,q1(l),c.targetId,!1,c.resumeToken),Ff(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await Cl(i.localStore,a,!1).then((()=>{Dl(i.remoteStore,a),Ml(i,a)})).catch(sa)}}function qf(r){const e=ye(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=B1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kN.bind(null,e),e.Pu.J_=SN.bind(null,e.eventManager),e.Pu.yu=wN.bind(null,e.eventManager),e}function r_(r){const e=ye(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jN.bind(null,e),e}class Ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return y1(this.persistence,new p1,e.initialUser,this.serializer)}Cu(e){return new Fy(Uf.Vi,this.serializer)}Du(e){return new A1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ac.provider={build:()=>new Ac};class YN extends Ac{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){be(this.persistence.referenceDelegate instanceof af,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new c1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new Fy((i=>af.Vi(i,t)),this.serializer)}}class $N extends Ac{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await r_(this.xu.syncEngine),await jl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return y1(this.persistence,new p1,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new c1(i,e.asyncQueue,t)}Mu(e,t){const i=new ZR(t,this.persistence);return new WR(e.asyncQueue,i)}Cu(e){const t=g1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new qy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,I1(),jd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new A1}}class XN extends $N{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof _p&&(this.sharedClientState.syncEngine={So:qN.bind(null,t),Do:KN.bind(null,t),Co:QN.bind(null,t),hs:GN.bind(null,t),bo:FN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await HN(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=I1();if(!_p.v(t))throw new he(ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=g1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _p(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UN.bind(null,this.syncEngine),await ny(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xN})()}createDatastore(e){const t=zf(e.databaseInfo.databaseId),i=iN(e.databaseInfo);return uN(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,f){return new hN(i,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>SE(this.syncEngine,t,0)),(function(){return _E.v()?new _E:new eN})())}createSyncEngine(e,t){return(function(a,l,c,f,g,p,_){const v=new CN(a,l,c,f,g,p);return _&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=ye(t);ie(io,"RemoteStore shutting down."),i.Ea.add(5),await Fc(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hf.provider={build:()=>new hf};class H1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const na="FirestoreClient";class JN{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=sn.UNAUTHENTICATED,this.clientId=vy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ie(na,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ie(na,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Jy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function bp(r,e){r.asyncQueue.verifyOperationInProgress(),ie(na,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await _1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function AE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await WN(r);ie(na,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>bE(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>bE(e.remoteStore,a))),r._onlineComponents=e}async function WN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ie(na,"Using user provided OfflineComponentProvider");try{await bp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ee.FAILED_PRECONDITION||a.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ws("Error using user provided cache. Falling back to memory cache: "+t),await bp(r,new Ac)}}else ie(na,"Using default OfflineComponentProvider"),await bp(r,new YN(void 0));return r._offlineComponents}async function G1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ie(na,"Using user provided OnlineComponentProvider"),await AE(r,r._uninitializedComponentsProvider._online)):(ie(na,"Using default OnlineComponentProvider"),await AE(r,new hf))),r._onlineComponents}function ZN(r){return G1(r).then((e=>e.syncEngine))}async function sy(r){const e=await G1(r),t=e.eventManager;return t.onListen=DN.bind(null,e.syncEngine),t.onUnlisten=MN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=NN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ON.bind(null,e.syncEngine),t}function e4(r,e,t,i){const a=new H1(i),l=new j1(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>k1(await sy(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>P1(await sy(r),l)))}}function t4(r,e,t={}){const i=new qi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,p){const _=new H1({next:x=>{_.Nu(),c.enqueueAndForget((()=>P1(l,v)));const R=x.docs.has(f);!R&&x.fromCache?p.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&x.fromCache&&g&&g.source==="server"?p.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),v=new j1(jc(f.path),_,{includeMetadataChanges:!0,Ka:!0});return k1(l,v)})(await sy(r),r.asyncQueue,e,t,i))),i.promise}function n4(r,e){const t=new qi;return r.asyncQueue.enqueueAndForget((async()=>VN(await ZN(r),e,t))),t.promise}function K1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const r4="ComponentProvider",IE=new Map;function i4(r,e,t,i,a){return new IC(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,K1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}const Q1="firestore.googleapis.com",RE=!0;class CE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q1,this.ssl=RE}else this.host=e.host,this.ssl=e.ssl??RE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DD)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$R("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new UR;switch(i.type){case"firstParty":return new qR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=IE.get(t);i&&(ie(r4,"Removing Datastore"),IE.delete(t),i.terminate())})(this),Promise.resolve()}}function s4(r,e,t,i={}){r=ur(r,Hf);const a=Ol(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;a&&(xx(`https://${f}`),Sx("Firestore",!0)),l.host!==Q1&&l.host!==f&&Ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:a,emulatorOptions:i};if(!Xa(g,c)&&(r._setSettings(g),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=sn.MOCK_USER;else{p=d2(i.mockUserToken,r._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new sn(v)}r._authCredentials=new zR(new Fx(p,_))}}class Gf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gf(this.firestore,e,this._query)}}class Vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Vc(t,Vt._jsonSchema))return new Vt(e,i||null,new fe(Ze.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Kt("string",Vt._jsonSchemaVersion),referencePath:Kt("string")};class Xs extends Gf{constructor(e,t,i){super(e,t,jc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new fe(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Y1(r,e,...t){if(r=pn(r),Hx("collection","path",e),r instanceof Hf){const i=Ze.fromString(e,...t);return vT(i),new Xs(r,null,i)}{if(!(r instanceof Vt||r instanceof Xs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ze.fromString(e,...t));return vT(i),new Xs(r.firestore,null,i)}}function Gr(r,e,...t){if(r=pn(r),arguments.length===1&&(e=vy.newId()),Hx("doc","path",e),r instanceof Hf){const i=Ze.fromString(e,...t);return _T(i),new Vt(r,null,new fe(i))}{if(!(r instanceof Vt||r instanceof Xs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ze.fromString(e,...t));return _T(i),new Vt(r.firestore,r instanceof Xs?r.converter:null,new fe(i))}}const DE="AsyncQueue";class NE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R1(this,"async_queue_retry"),this._c=()=>{const i=jd();i&&ie(DE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=jd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;ie(DE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ot("INTERNAL UNHANDLED ERROR: ",ME(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Xy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ge(47125,{Pc:ME(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ME(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Qi extends Hf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new NE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NE(e),this._firestoreClient=void 0,await e}}}function a4(r,e){const t=typeof r=="object"?r:Mx(),i=typeof r=="string"?r:Xd,a=yy(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=c2("firestore");l&&s4(a,...l)}return a}function Kf(r){if(r._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$1(r),r._firestoreClient}function $1(r){const e=r._freezeSettings(),t=i4(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new JN(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(r._componentsProvider))}async function o4(r){Ws("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();l4(r,hf.provider,{build:t=>new XN(t,e.cacheSizeBytes)})}function l4(r,e,t){if((r=ur(r,Qi))._firestoreClient||r._terminated)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new he(ee.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},$1(r)}class Cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cr(kt.fromBase64String(e))}catch(t){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cr(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,Cr._jsonSchema))return Cr.fromBase64String(e.bytes)}}Cr._jsonSchemaVersion="firestore/bytes/1.0",Cr._jsonSchema={type:Kt("string",Cr._jsonSchemaVersion),bytes:Kt("string")};class Qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class i_{constructor(e){this._methodName=e}}class fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,fi._jsonSchema))return new fi(e.latitude,e.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:Kt("string",fi._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};class Br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Br(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:Kt("string",Br._jsonSchemaVersion),vectorValues:Kt("object")};const u4=/^__.*__$/;class c4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class X1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function J1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{dataSource:r})}}class s_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new s_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return df(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(J1(this.dataSource)&&u4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class h4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zf(e)}createContext(e,t,i,a=!1){return new s_({dataSource:e,methodName:t,targetDoc:i,path:St.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a_(r){const e=r._freezeSettings(),t=zf(r._databaseId);return new h4(r._databaseId,!!e.ignoreUndefinedProperties,t)}function W1(r,e,t,i,a,l={}){const c=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);o_("Data must be an object, but it was:",c,i);const f=tw(i,c);let g,p;if(l.merge)g=new Gn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const v of l.mergeFields){const x=Ic(e,v,t);if(!c.contains(x))throw new he(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);iw(_,x)||_.push(x)}g=new Gn(_),p=c.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,p=c.fieldTransforms;return new c4(new wn(f),g,p)}class Yf extends i_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function Z1(r,e,t,i){const a=r.createContext(1,e,t);o_("Data must be an object, but it was:",a,i);const l=[],c=wn.empty();oa(i,((g,p)=>{const _=rw(e,g,t);p=pn(p);const v=a.childContextForFieldPath(_);if(p instanceof Yf)l.push(_);else{const x=$f(p,v);x!=null&&(l.push(_),c.set(_,x))}}));const f=new Gn(l);return new X1(c,f,a.fieldTransforms)}function ew(r,e,t,i,a,l){const c=r.createContext(1,e,t),f=[Ic(e,i,t)],g=[a];if(l.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(Ic(e,l[x])),g.push(l[x+1]);const p=[],_=wn.empty();for(let x=f.length-1;x>=0;--x)if(!iw(p,f[x])){const R=f[x];let V=g[x];V=pn(V);const L=c.childContextForFieldPath(R);if(V instanceof Yf)p.push(R);else{const q=$f(V,L);q!=null&&(p.push(R),_.set(R,q))}}const v=new Gn(p);return new X1(_,v,c.fieldTransforms)}function $f(r,e){if(nw(r=pn(r)))return o_("Unsupported field value:",e,r),tw(r,e);if(r instanceof i_)return(function(i,a){if(!J1(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const f of i){let g=$f(f,a.childContextForArray(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return QC(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=rt.fromDate(i);return{timestampValue:Rl(a.serializer,l)}}if(i instanceof rt){const l=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rl(a.serializer,l)}}if(i instanceof fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Cr)return{bytesValue:qS(a.serializer,i._byteString)};if(i instanceof Vt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ly(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Br)return(function(c,f){const g=c instanceof Br?c.toArray():c;return{mapValue:{fields:{[Ry]:{stringValue:Cy},[El]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return Oy(f.serializer,_)}))}}}}}})(i,a);if(e1(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${by(i)}`)})(r,e)}function tw(r,e){const t={};return lS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(r,((i,a)=>{const l=$f(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function nw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof rt||r instanceof fi||r instanceof Cr||r instanceof Vt||r instanceof i_||r instanceof Br||e1(r))}function o_(r,e,t){if(!nw(t)||!Gx(t)){const i=by(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function Ic(r,e,t){if((e=pn(e))instanceof Qf)return e._internalPath;if(typeof e=="string")return rw(r,e);throw df("Field path arguments must be of type string or ",r,!1,void 0,t)}const d4=new RegExp("[~\\*/\\[\\]]");function rw(r,e,t){if(e.search(d4)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Qf(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function df(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${i}`),c&&(g+=` in document ${a}`),g+=")"),new he(ee.INVALID_ARGUMENT,f+r+g)}function iw(r,e){return r.some((t=>t.isEqual(e)))}class f4{convertValue(e,t="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return oa(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[El].arrayValue?.values?.map((i=>Et(i.doubleValue)));return new Br(t)}convertGeoPoint(e){return new fi(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Nf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=Gi(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ze.fromString(e);be(ZS(i),9688,{name:e});const a=new Za(i.get(1),i.get(3)),l=new fe(i.popFirst(5));return a.isEqual(t)||Ot(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class sw extends f4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}const OE="@firebase/firestore",VE="4.11.0";function kE(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class aw{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Ic("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class m4 extends aw{data(){return super.data()}}function g4(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function ow(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends aw{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ic("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$a._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:Kt("string",$a._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Ld extends $a{data(e={}){return super.data(e)}}class cl{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Zu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ld(this._firestore,this._userDataWriter,i.key,i,new Zu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const g=new Ld(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Zu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Ld(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Zu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:p4(f.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function p4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:r})}}cl._jsonSchemaVersion="firestore/querySnapshot/1.0",cl._jsonSchema={type:Kt("string",cl._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class y4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=a_(e)}set(e,t,i){this._verifyNotCommitted();const a=Tp(e,this._firestore),l=ow(a.converter,t,i),c=W1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,on.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Tp(e,this._firestore);let c;return c=typeof(t=pn(t))=="string"||t instanceof Qf?ew(this._dataReader,"WriteBatch.update",l._key,t,i,a):Z1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tp(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(t._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tp(r,e){if((r=pn(r)).firestore!==e)throw new he(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function _4(r){r=ur(r,Vt);const e=ur(r.firestore,Qi),t=Kf(e);return t4(t,r._key).then((i=>uw(e,r,i)))}function l_(r,e,t){r=ur(r,Vt);const i=ur(r.firestore,Qi),a=ow(r.converter,e,t),l=a_(i);return Jf(i,[W1(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,on.none())])}function Xf(r,e,t,...i){r=ur(r,Vt);const a=ur(r.firestore,Qi),l=a_(a);let c;return c=typeof(e=pn(e))=="string"||e instanceof Qf?ew(l,"updateDoc",r._key,e,t,i):Z1(l,"updateDoc",r._key,e),Jf(a,[c.toMutation(r._key,on.exists(!0))])}function v4(r){return Jf(ur(r.firestore,Qi),[new Uc(r._key,on.none())])}function lw(r,...e){r=pn(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||kE(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(kE(e[i])){const p=e[i];e[i]=p.next?.bind(p),e[i+1]=p.error?.bind(p),e[i+2]=p.complete?.bind(p)}let l,c,f;if(r instanceof Vt)c=ur(r.firestore,Qi),f=jc(r._key.path),l={next:p=>{e[i]&&e[i](uw(c,r,p))},error:e[i+1],complete:e[i+2]};else{const p=ur(r,Gf);c=ur(p.firestore,Qi),f=p._query;const _=new sw(c);l={next:v=>{e[i]&&e[i](new cl(c,_,p,v))},error:e[i+1],complete:e[i+2]},g4(r._query)}const g=Kf(c);return e4(g,f,a,l)}function Jf(r,e){const t=Kf(r);return n4(t,e)}function uw(r,e,t){const i=t.docs.get(e._key),a=new sw(r);return new $a(r,a,e._key,i,new Zu(t.hasPendingWrites,t.fromCache),e.converter)}function u_(r){return r=ur(r,Qi),Kf(r),new y4(r,(e=>Jf(r,e)))}(function(e,t=!0){LR(Vl),gl(new Ja("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Qi(new BR(i.getProvider("auth-internal")),new HR(c,i.getProvider("app-check-internal")),RC(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Qs(OE,VE,e),Qs(OE,VE,"esm2020")})();function cw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b4=cw,hw=new Mc("auth","Firebase",cw());const ff=new gy("@firebase/auth");function T4(r,...e){ff.logLevel<=qe.WARN&&ff.warn(`Auth (${Vl}): ${r}`,...e)}function Ud(r,...e){ff.logLevel<=qe.ERROR&&ff.error(`Auth (${Vl}): ${r}`,...e)}function Yi(r,...e){throw c_(r,...e)}function mi(r,...e){return c_(r,...e)}function dw(r,e,t){const i={...b4(),[e]:t};return new Mc("auth","Firebase",i).create(e,{appName:r.name})}function Js(r){return dw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function c_(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return hw.create(r,...e)}function Ae(r,e,...t){if(!r)throw c_(e,...t)}function Bi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ud(e),new Error(e)}function $i(r,e){r||Bi(e)}function ay(){return typeof self<"u"&&self.location?.href||""}function E4(){return PE()==="http:"||PE()==="https:"}function PE(){return typeof self<"u"&&self.location?.protocol||null}function x4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E4()||y2()||"connection"in navigator)?navigator.onLine:!0}function S4(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=g2()||_2()}get(){return x4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function h_(r,e){$i(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class fw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const w4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const A4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I4=new qc(3e4,6e4);function Wf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function zl(r,e,t,i,a={}){return mw(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Oc({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...l};return p2()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&Ol(r.emulatorConfig.host)&&(p.credentials="include"),fw.fetch()(await pw(r,r.config.apiHost,t,f),p)})}async function mw(r,e,t){r._canInitEmulator=!1;const i={...w4,...e};try{const a=new R4(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw wd(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[g,p]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw wd(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw wd(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw wd(r,"user-disabled",c);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw dw(r,_,p);Yi(r,_)}}catch(a){if(a instanceof Ji)throw a;Yi(r,"network-request-failed",{message:String(a)})}}async function gw(r,e,t,i,a={}){const l=await zl(r,e,t,i,a);return"mfaPendingCredential"in l&&Yi(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function pw(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?h_(r.config,a):`${r.config.apiScheme}://${a}`;return A4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class R4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),I4.get())})}}function wd(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=mi(r,e,i);return a.customData._tokenResponse=t,a}async function C4(r,e){return zl(r,"POST","/v1/accounts:delete",e)}async function mf(r,e){return zl(r,"POST","/v1/accounts:lookup",e)}function hc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D4(r,e=!1){const t=pn(r),i=await t.getIdToken(e),a=d_(i);Ae(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:hc(Ep(a.auth_time)),issuedAtTime:hc(Ep(a.iat)),expirationTime:hc(Ep(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ep(r){return Number(r)*1e3}function d_(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Ud("JWT malformed, contained fewer than 3 sections"),null;try{const a=_x(t);return a?JSON.parse(a):(Ud("Failed to decode base64 JWT payload"),null)}catch(a){return Ud("Caught error parsing JWT payload as JSON",a?.toString()),null}}function jE(r){const e=d_(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Rc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ji&&N4(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function N4({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class M4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class oy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gf(r){const e=r.auth,t=await r.getIdToken(),i=await Rc(r,mf(e,{idToken:t}));Ae(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?yw(a.providerUserInfo):[],c=V4(r.providerData,l),f=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!c?.length,p=f?g:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new oy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(r,_)}async function O4(r){const e=pn(r);await gf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V4(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function yw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function k4(r,e){const t=await mw(r,{},async()=>{const i=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await pw(r,a,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return r.emulatorConfig&&Ol(r.emulatorConfig.host)&&(g.credentials="include"),fw.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function P4(r,e){return zl(r,"POST","/v2/accounts:revokeToken",Wf(r,e))}class hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=jE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await k4(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new hl;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ae(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ae(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hl,this.toJSON())}_performRefresh(){return Bi("not implemented")}}function js(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class zr{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new M4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new oy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Rc(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return D4(this,e)}reload(){return O4(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await gf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await Rc(this,C4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:v,emailVerified:x,isAnonymous:R,providerData:V,stsTokenManager:L}=t;Ae(v&&L,e,"internal-error");const q=hl.fromJSON(this.name,L);Ae(typeof v=="string",e,"internal-error"),js(i,e.name),js(a,e.name),Ae(typeof x=="boolean",e,"internal-error"),Ae(typeof R=="boolean",e,"internal-error"),js(l,e.name),js(c,e.name),js(f,e.name),js(g,e.name),js(p,e.name),js(_,e.name);const te=new zr({uid:v,auth:e,email:a,emailVerified:x,displayName:i,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:q,createdAt:p,lastLoginAt:_});return V&&Array.isArray(V)&&(te.providerData=V.map(X=>({...X}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,t,i=!1){const a=new hl;a.updateFromServerResponse(t);const l=new zr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await gf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ae(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?yw(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new hl;f.updateFromIdToken(i);const g=new zr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new oy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,p),g}}const LE=new Map;function Fi(r){$i(r instanceof Function,"Expected a class definition");let e=LE.get(r);return e?($i(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,LE.set(r,e),e)}class _w{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_w.type="NONE";const UE=_w;function zd(r,e,t){return`firebase:${r}:${e}:${t}`}class dl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=zd(this.userKey,a.apiKey,l),this.fullPersistenceKey=zd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mf(this.auth,{idToken:e}).catch(()=>{});return t?zr._fromGetAccountInfoResponse(this.auth,t,e):null}return zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new dl(Fi(UE),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Fi(UE);const c=zd(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const _=await p._get(c);if(_){let v;if(typeof _=="string"){const x=await mf(e,{idToken:_}).catch(()=>{});if(!x)break;v=await zr._fromGetAccountInfoResponse(e,x,_)}else v=zr._fromJSON(e,_);p!==l&&(f=v),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new dl(l,e,i):(l=g[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new dl(l,e,i))}}function zE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sw(e))return"Blackberry";if(ww(e))return"Webos";if(bw(e))return"Safari";if((e.includes("chrome/")||Tw(e))&&!e.includes("edge/"))return"Chrome";if(xw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function vw(r=Xt()){return/firefox\//i.test(r)}function bw(r=Xt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tw(r=Xt()){return/crios\//i.test(r)}function Ew(r=Xt()){return/iemobile/i.test(r)}function xw(r=Xt()){return/android/i.test(r)}function Sw(r=Xt()){return/blackberry/i.test(r)}function ww(r=Xt()){return/webos/i.test(r)}function f_(r=Xt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function j4(r=Xt()){return f_(r)&&!!window.navigator?.standalone}function L4(){return v2()&&document.documentMode===10}function Aw(r=Xt()){return f_(r)||xw(r)||ww(r)||Sw(r)||/windows phone/i.test(r)||Ew(r)}function Iw(r,e=[]){let t;switch(r){case"Browser":t=zE(Xt());break;case"Worker":t=`${zE(Xt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vl}/${i}`}class U4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const g=e(l);c(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function z4(r,e={}){return zl(r,"GET","/v2/passwordPolicy",Wf(r,e))}const B4=6;class F4{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??B4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class q4{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BE(this),this.idTokenSubscription=new BE(this),this.beforeStateQueue=new U4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mf(this,{idToken:e}),i=await zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ur(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(Js(this));const t=e?pn(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z4(this),t=new F4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await P4(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fi(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Iw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&T4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Zf(r){return pn(r)}class BE{constructor(e){this.auth=e,this.observer=null,this.addObserver=w2(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let m_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H4(r){m_=r}function G4(r){return m_.loadJS(r)}function K4(){return m_.gapiScript}function Q4(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function Y4(r,e){const t=yy(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Xa(l,e??{}))return a;Yi(a,"already-initialized")}return t.initialize({options:e})}function $4(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Fi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function X4(r,e,t){const i=Zf(r);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=Rw(e),{host:c,port:f}=J4(e),g=f===null?"":`:${f}`,p={url:`${l}//${c}${g}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(Xa(p,i.config.emulator)&&Xa(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ol(c)?(xx(`${l}//${c}${g}`),Sx("Auth",!0)):W4()}function Rw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function J4(r){const e=Rw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:FE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:FE(c)}}}function FE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function W4(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Cw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function fl(r,e){return gw(r,"POST","/v1/accounts:signInWithIdp",Wf(r,e))}const Z4="http://localhost";class so extends Cw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new so(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,fl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:Z4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oc(t)}return e}}class Dw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hc extends Dw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zs extends Hc{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";class Bs extends Hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Bs.credential(t,i)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";class Fs extends Hc{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";class qs extends Hc{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qs.credential(t,i)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";async function eM(r,e){return gw(r,"POST","/v1/accounts:signUp",Wf(r,e))}class ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await zr._fromIdTokenResponse(e,i,a),c=qE(i);return new ra({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=qE(i);return new ra({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function qE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function tM(r){if(Ur(r.app))return Promise.reject(Js(r));const e=Zf(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ra({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await eM(e,{returnSecureToken:!0}),i=await ra._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}class pf extends Ji{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new pf(e,t,i,a)}}function Nw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?pf._fromErrorAndOperation(r,l,e,i):l})}async function nM(r,e,t=!1){const i=await Rc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ra._forOperation(r,"link",i)}async function rM(r,e,t=!1){const{auth:i}=r;if(Ur(i.app))return Promise.reject(Js(i));const a="reauthenticate";try{const l=await Rc(r,Nw(i,a,e,r),t);Ae(l.idToken,i,"internal-error");const c=d_(l.idToken);Ae(c,i,"internal-error");const{sub:f}=c;return Ae(r.uid===f,i,"user-mismatch"),ra._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Yi(i,"user-mismatch"),l}}async function iM(r,e,t=!1){if(Ur(r.app))return Promise.reject(Js(r));const i="signIn",a=await Nw(r,i,e),l=await ra._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}function sM(r,e,t,i){return pn(r).onIdTokenChanged(e,t,i)}function aM(r,e,t){return pn(r).beforeAuthStateChanged(e,t)}const yf="__sak";class Mw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const oM=1e3,lM=10;class Ow extends Mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,g)=>{this.notifyListeners(c,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);L4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,lM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},oM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ow.type="LOCAL";const uM=Ow;class Vw extends Mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vw.type="SESSION";const kw=Vw;function cM(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new em(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),g=await cM(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}em.receivers=[];function g_(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class hM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,g)=>{const p=g_("",20);a.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const x=v;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function gi(){return window}function dM(r){gi().location.href=r}function Pw(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function fM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mM(){return navigator?.serviceWorker?.controller||null}function gM(){return Pw()?self:null}const jw="firebaseLocalStorageDb",pM=1,_f="firebaseLocalStorage",Lw="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tm(r,e){return r.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function yM(){const r=indexedDB.deleteDatabase(jw);return new Gc(r).toPromise()}function ly(){const r=indexedDB.open(jw,pM);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(_f,{keyPath:Lw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(_f)?e(i):(i.close(),await yM(),e(await ly()))})})}async function HE(r,e,t){const i=tm(r,!0).put({[Lw]:e,value:t});return new Gc(i).toPromise()}async function _M(r,e){const t=tm(r,!1).get(e),i=await new Gc(t).toPromise();return i===void 0?null:i.value}function GE(r,e){const t=tm(r,!0).delete(e);return new Gc(t).toPromise()}const vM=800,bM=3;class Uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>bM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=em._getInstance(gM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fM(),!this.activeServiceWorker)return;this.sender=new hM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await HE(e,yf,"1"),await GE(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>HE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>_M(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=tm(a,!1).getAll();return new Gc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uw.type="LOCAL";const TM=Uw;new qc(3e4,6e4);function EM(r,e){return e?Fi(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class p_ extends Cw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xM(r){return iM(r.auth,new p_(r),r.bypassAuthState)}function SM(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),rM(t,new p_(r),r.bypassAuthState)}async function wM(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),nM(t,new p_(r),r.bypassAuthState)}class zw{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xM;case"linkViaPopup":case"linkViaRedirect":return wM;case"reauthViaPopup":case"reauthViaRedirect":return SM;default:Yi(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AM=new qc(2e3,1e4);class ol extends zw{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,ol.currentPopupAction&&ol.currentPopupAction.cancel(),ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=g_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AM.get())};e()}}ol.currentPopupAction=null;const IM="pendingRedirect",Bd=new Map;class RM extends zw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{const i=await CM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CM(r,e){const t=MM(e),i=NM(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function DM(r,e){Bd.set(r._key(),e)}function NM(r){return Fi(r._redirectPersistence)}function MM(r){return zd(IM,r.config.apiKey,r.name)}async function OM(r,e,t=!1){if(Ur(r.app))return Promise.reject(Js(r));const i=Zf(r),a=EM(i,e),c=await new RM(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const VM=600*1e3;class kM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Bw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(mi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VM&&this.cachedEventUids.clear(),this.cachedEventUids.has(KE(e))}saveEventToCache(e){this.cachedEventUids.add(KE(e)),this.lastProcessedEventTime=Date.now()}}function KE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Bw({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function PM(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bw(r);default:return!1}}async function jM(r,e={}){return zl(r,"GET","/v1/projects",e)}const LM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UM=/^https?/;async function zM(r){if(r.config.emulator)return;const{authorizedDomains:e}=await jM(r);for(const t of e)try{if(BM(t))return}catch{}Yi(r,"unauthorized-domain")}function BM(r){const e=ay(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!UM.test(t))return!1;if(LM.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const FM=new qc(3e4,6e4);function QE(){const r=gi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function qM(r){return new Promise((e,t)=>{function i(){QE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QE(),t(mi(r,"network-request-failed"))},timeout:FM.get()})}if(gi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gi().gapi?.load)i();else{const a=Q4("iframefcb");return gi()[a]=()=>{gapi.load?i():t(mi(r,"network-request-failed"))},G4(`${K4()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Fd=null,e})}let Fd=null;function HM(r){return Fd=Fd||qM(r),Fd}const GM=new qc(5e3,15e3),KM="__/auth/iframe",QM="emulator/auth/iframe",YM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XM(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?h_(e,QM):`https://${r.config.authDomain}/${KM}`,i={apiKey:e.apiKey,appName:r.name,v:Vl},a=$M.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Oc(i).slice(1)}`}async function JM(r){const e=await HM(r),t=gi().gapi;return Ae(t,r,"internal-error"),e.open({where:document.body,url:XM(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YM,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=mi(r,"network-request-failed"),f=gi().setTimeout(()=>{l(c)},GM.get());function g(){gi().clearTimeout(f),a(i)}i.ping(g).then(g,()=>{l(c)})}))}const WM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZM=500,eO=600,tO="_blank",nO="http://localhost";class YE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rO(r,e,t,i=ZM,a=eO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...WM,width:i.toString(),height:a.toString(),top:l,left:c},p=Xt().toLowerCase();t&&(f=Tw(p)?tO:t),vw(p)&&(e=e||nO,g.scrollbars="yes");const _=Object.entries(g).reduce((x,[R,V])=>`${x}${R}=${V},`,"");if(j4(p)&&f!=="_self")return iO(e||"",f),new YE(null);const v=window.open(e||"",f,_);Ae(v,r,"popup-blocked");try{v.focus()}catch{}return new YE(v)}function iO(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const sO="__/auth/handler",aO="emulator/auth/handler",oO=encodeURIComponent("fac");async function $E(r,e,t,i,a,l){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Vl,eventId:a};if(e instanceof Dw){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",S2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(e instanceof Hc){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await r._getAppCheckToken(),p=g?`#${oO}=${encodeURIComponent(g)}`:"";return`${lO(r)}?${Oc(f).slice(1)}${p}`}function lO({config:r}){return r.emulator?h_(r,aO):`https://${r.authDomain}/${sO}`}const xp="webStorageSupport";class uO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kw,this._completeRedirectFn=OM,this._overrideRedirectResult=DM}async _openPopup(e,t,i,a){$i(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await $E(e,t,i,ay(),a);return rO(e,l,g_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await $E(e,t,i,ay(),a);return dM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):($i(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await JM(e),i=new kM(e);return t.register("authEvent",a=>(Ae(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xp,{type:xp},a=>{const l=a?.[0]?.[xp];l!==void 0&&t(!!l),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Aw()||bw()||f_()}}const cO=uO;var XE="@firebase/auth",JE="1.12.0";class hO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fO(r){gl(new Ja("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ae(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Iw(r)},p=new q4(i,a,l,g);return $4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),gl(new Ja("auth-internal",e=>{const t=Zf(e.getProvider("auth").getImmediate());return(i=>new hO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(XE,JE,dO(r)),Qs(XE,JE,"esm2020")}const mO=300,gO=Ex("authIdTokenMaxAge")||mO;let WE=null;const pO=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>gO)return;const a=t?.token;WE!==a&&(WE=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function yO(r=Mx()){const e=yy(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Y4(r,{popupRedirectResolver:cO,persistence:[TM,uM,kw]}),i=Ex("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=pO(l.toString());aM(t,c,()=>c(t.currentUser)),sM(t,f=>c(f))}}const a=bx("auth");return a&&X4(t,`http://${a}`),t}function _O(){return document.getElementsByTagName("head")?.[0]??document}H4({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=mi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",_O().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fO("Browser");const vO={apiKey:"AIzaSyDGvL7gs3AMDRV3qxnYfo9msTBUS5rXmkU",authDomain:"weekly-task-manager-76f3f.firebaseapp.com",projectId:"weekly-task-manager-76f3f",storageBucket:"weekly-task-manager-76f3f.firebasestorage.app",messagingSenderId:"795879343853",appId:"1:795879343853:web:e5d538a14446d7502daee4"},Fw=Nx(vO),yn=a4(Fw),bO=yO(Fw);o4(yn).catch(r=>{r.code==="failed-precondition"?console.warn("Firestore persistence: Multiple tabs open"):r.code==="unimplemented"&&console.warn("Firestore persistence: Browser not supported")});async function TO(){try{await tM(bO)}catch(r){console.error("Anonymous auth failed:",r)}}function EO(r){const e=Y1(yn,"tasks");return lw(e,t=>{const i=t.docs.map(l=>({...l.data(),id:l.id})),a={fromCache:t.metadata.fromCache,hasPendingWrites:t.metadata.hasPendingWrites};r(i,a)})}function xO(r){const e=Y1(yn,"weekSnapshots");return lw(e,t=>{const i={};t.docs.forEach(a=>{i[a.id]=a.data()}),r(i)})}async function SO(r){const e=Gr(yn,"tasks",r.id);await l_(e,{...r,status:"active"})}async function wO(r,e){const t=Gr(yn,"tasks",r);await Xf(t,{...e,updatedAt:new Date().toISOString()})}async function AO(r){const e=Gr(yn,"tasks",r);await Xf(e,{status:"deleted",deletedAt:new Date().toISOString()})}async function IO(r){const e=Gr(yn,"tasks",r);await Xf(e,{status:"archived",archivedAt:new Date().toISOString()})}async function ZE(r){const e=Gr(yn,"tasks",r);await Xf(e,{status:"active",deletedAt:null,archivedAt:null,updatedAt:new Date().toISOString()})}async function RO(r){const e=Gr(yn,"tasks",r);await v4(e)}async function CO(r){const e=u_(yn);r.forEach(t=>{const i=Gr(yn,"tasks",t);e.delete(i)}),await e.commit()}async function uy(r,e,t){const i=Gr(yn,"weekSnapshots",r);await l_(i,{...e,savedBy:t||"anonymous",savedAt:new Date().toISOString()})}async function ex(r){const e=u_(yn);r.forEach(({id:t,data:i})=>{const a=Gr(yn,"tasks",t);e.update(a,{...i,updatedAt:new Date().toISOString()})}),await e.commit()}async function qw(r){const e=u_(yn);r.forEach(t=>{const i=Gr(yn,"tasks",t.id);e.set(i,t)}),await e.commit()}async function DO(){try{const r=Gr(yn,"metadata","migration"),e=await _4(r);if(e.exists())return console.log("Migration already completed:",e.data()),!1;const t=localStorage.getItem("wtm-tasks"),i=localStorage.getItem("wtm-deleted"),a=localStorage.getItem("wtm-archived"),l=localStorage.getItem("wtm-snapshots");if(!t&&!i&&!a&&!l)return console.log("No localStorage data found, skipping migration"),!1;const c=t?JSON.parse(t):[],f=i?JSON.parse(i):[],g=a?JSON.parse(a):[],p=l?JSON.parse(l):{},_=[...c.map(x=>({...x,status:"active"})),...f.map(x=>({...x,status:"deleted"})),...g.map(x=>({...x,status:"archived"}))];if(_.length>0)for(let R=0;R<_.length;R+=500){const V=_.slice(R,R+500);await qw(V)}const v=Object.keys(p);for(const x of v)await uy(x,p[x],"migration");return await l_(r,{migratedAt:new Date().toISOString(),taskCount:_.length,snapshotCount:v.length,activeTasks:c.length,deletedTasks:f.length,archivedTasks:g.length}),console.log(`Migration complete: ${_.length} tasks, ${v.length} snapshots`),!0}catch(r){throw console.error("Migration failed:",r),r}}const Hw=z.createContext(null);function NO({children:r}){const[e,t]=z.useState([]),[i,a]=z.useState({}),[l,c]=z.useState(!0),f=z.useMemo(()=>e.filter(A=>A.status==="active"),[e]),g=z.useMemo(()=>e.filter(A=>A.status==="deleted"),[e]),p=z.useMemo(()=>e.filter(A=>A.status==="archived"),[e]);z.useEffect(()=>{let A,M;async function N(){await TO(),await DO(),A=EO(k=>{t(k),c(!1)}),M=xO(k=>{a(k)})}return N(),()=>{A?.(),M?.()}},[]);const _=z.useCallback(async A=>{const M=new Date().toISOString(),k=f.filter(Ce=>Ce.memberId===A.memberId).reduce((Ce,oe)=>Math.max(Ce,oe.displayOrder||0),0),D={id:n2(),...A,progress:A.progress||0,displayOrder:k+1,weeklyHistory:{},status:"active",createdAt:M,updatedAt:M};return await SO(D),D},[f]),v=z.useCallback(async(A,M)=>{await wO(A,M)},[]),x=z.useCallback(async A=>{await AO(A)},[]),R=z.useCallback(async A=>{await IO(A)},[]),V=z.useCallback(async A=>{await ZE(A)},[]),L=z.useCallback(async A=>{await ZE(A)},[]),q=z.useCallback(async A=>{await RO(A)},[]),te=z.useCallback(async()=>{const A=g.map(M=>M.id);await CO(A)},[g]),X=z.useCallback(async A=>{const M=A||rT(),N={};f.forEach(D=>{N[D.id]={progress:D.progress,done:D.done,notDone:D.notDone,notDoneReason:D.notDoneReason,issues:D.issues,consultation:D.consultation}}),await uy(M,N);const k=f.map(D=>({id:D.id,data:{weeklyHistory:{...D.weeklyHistory,[M]:{progress:D.progress}}}}));k.length>0&&await ex(k)},[f]),re=z.useCallback(A=>{const M=rT(),N=A.weeklyHistory||{},k=Object.keys(N).sort(),D=k.indexOf(M);if(D<=0){const oe=k.filter(se=>se<M);if(oe.length===0)return null;const Q=oe[oe.length-1];return A.progress-(N[Q]?.progress||0)}const Ce=k[D-1];return A.progress-(N[Ce]?.progress||0)},[]),ce=z.useCallback(async A=>{const M=A.map((N,k)=>({id:N,data:{displayOrder:k+1}}));await ex(M)},[]),de=z.useCallback(A=>f.filter(N=>N.memberId===A).sort((N,k)=>{const D=N.displayOrder??new Date(N.createdAt).getTime(),Ce=k.displayOrder??new Date(k.createdAt).getTime();return D-Ce}),[f]),le=z.useCallback(A=>f.filter(M=>M.category===A),[f]),C=z.useCallback(async A=>{const M=new Date().toISOString(),N=[];if(A.tasks&&N.push(...A.tasks.map(k=>({...k,status:"active",updatedAt:k.updatedAt||M,createdAt:k.createdAt||M}))),A.deletedTasks&&N.push(...A.deletedTasks.map(k=>({...k,status:"deleted",deletedAt:k.deletedAt||M,updatedAt:k.updatedAt||M,createdAt:k.createdAt||M}))),A.archivedTasks&&N.push(...A.archivedTasks.map(k=>({...k,status:"archived",archivedAt:k.archivedAt||M,updatedAt:k.updatedAt||M,createdAt:k.createdAt||M}))),N.length>0)for(let D=0;D<N.length;D+=500)await qw(N.slice(D,D+500));if(A.weekSnapshots)for(const[k,D]of Object.entries(A.weekSnapshots))await uy(k,D,"import")},[]),I=z.useCallback(()=>({tasks:f,weekSnapshots:i,deletedTasks:g,archivedTasks:p,exportedAt:new Date().toISOString()}),[f,i,g,p]);return T.jsx(Hw.Provider,{value:{tasks:f,weekSnapshots:i,deletedTasks:g,archivedTasks:p,addTask:_,updateTask:v,deleteTask:x,archiveTask:R,restoreFromTrash:V,restoreFromArchive:L,permanentlyDelete:q,emptyTrash:te,saveWeeklySnapshot:X,getProgressDelta:re,reorderTasks:ce,getTasksByMember:de,getTasksByCategory:le,importData:C,exportData:I,isLoading:l},children:r})}function yi(){const r=z.useContext(Hw);if(!r)throw new Error("useTaskContext must be used within TaskProvider");return r}function MO({onExport:r,onImport:e}){const{saveWeeklySnapshot:t}=yi();return T.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-30",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center",children:T.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Weekly Task Manager"}),T.jsx("p",{className:"text-xs text-gray-500",children:e2()})]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>t(),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition cursor-pointer",children:""}),T.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:""}),T.jsxs("label",{className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:["",T.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:e})]})]})]})})}const Fr=[{id:"tanaka_k",nameJa:"",nameEn:"Keisuke Tanaka",role:"manager",color:"#3b82f6",sfUserId:"0055h000005vdi3AAA",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvuN/T"},{id:"mochizuki",nameJa:"",nameEn:"Takashi Mochizuki",role:"member",color:"#8b5cf6",sfUserId:"0055h000001USjaAAG",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h0000019WFm/T"},{id:"tanaka_j",nameJa:"",nameEn:"Jun Tanaka",role:"member",color:"#06b6d4",sfUserId:"0055h000005vdTDAAY",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvuX/T"},{id:"tago",nameJa:"",nameEn:"Shoichiro Tago",role:"member",color:"#f59e0b",sfUserId:"005J20000011BmCIAU",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/729J2000000kB3i/T"},{id:"tsubosaka",nameJa:"",nameEn:"Seiko Tsubosaka",role:"member",color:"#ec4899",sfUserId:"0055h000005KHzPAAW",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvwO/T"},{id:"osawa",nameJa:"",nameEn:"Naoko Osawa",role:"member",color:"#10b981",sfUserId:"0055h00000BPJdVAAX",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000USCE/T"}],Xi=[{id:"oandm",label:"O&M",color:"#3b82f6"},{id:"power_gen",label:"",color:"#10b981"},{id:"estimate_report",label:"",color:"#f59e0b"},{id:"ai_asset",label:"AI",color:"#8b5cf6"},{id:"equipment",label:"",color:"#06b6d4"},{id:"operation",label:"",color:"#64748b"},{id:"smart_meter",label:"",color:"#ec4899"},{id:"transfer",label:"V1V2PPH",color:"#f97316"},{id:"other",label:"",color:"#94a3b8"}],Kc=[{id:"project",label:"",color:"#3b82f6",icon:""},{id:"routine",label:"",color:"#10b981",icon:""}],OO=[{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""}];function y_({member:r,size:e="sm"}){const[t,i]=z.useState(!1),a={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-14 h-14 text-xl"},l=a[e]||a.sm;return r.sfPhotoUrl&&!t?T.jsx("img",{src:r.sfPhotoUrl,alt:r.nameJa,onError:()=>i(!0),className:`${l} rounded-full object-cover`}):T.jsx("div",{className:`${l} rounded-full flex items-center justify-center text-white font-bold`,style:{backgroundColor:r.color},children:r.nameJa.charAt(0)})}function VO({selectedMember:r,onSelectMember:e,showDashboard:t,onShowDashboard:i,activeView:a,onChangeView:l}){const{tasks:c,deletedTasks:f,archivedTasks:g}=yi(),p=v=>c.filter(x=>x.memberId===v).length,_=v=>{const x=c.filter(R=>R.memberId===v);return x.length===0?0:Math.round(x.reduce((R,V)=>R+V.progress,0)/x.length)};return T.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 h-[calc(100vh-57px)] overflow-y-auto flex-shrink-0",children:T.jsxs("nav",{className:"p-3",children:[T.jsxs("button",{onClick:i,className:`w-full text-left px-3 py-2.5 rounded-lg mb-1 flex items-center gap-2 transition cursor-pointer ${a==="dashboard"?"bg-blue-50 text-blue-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),""]}),T.jsx("div",{className:"mt-4 mb-2 px-3",children:T.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:""})}),Fr.map(v=>T.jsxs("button",{onClick:()=>e(v.id),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${a==="member"&&r===v.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(y_,{member:v,size:"sm"}),T.jsxs("div",{children:[T.jsx("div",{className:"text-sm font-medium",children:v.nameJa}),T.jsxs("div",{className:"text-xs text-gray-400",children:[p(v.id),""]})]})]}),T.jsxs("div",{className:"text-xs text-gray-500",children:[_(v.id),"%"]})]},v.id)),T.jsx("div",{className:"mt-4 mb-2 border-t border-gray-200 pt-3 px-3",children:T.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:""})}),T.jsxs("button",{onClick:()=>l("archive"),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${a==="archive"?"bg-emerald-50 text-emerald-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),T.jsx("span",{className:"text-sm",children:""})]}),g.length>0&&T.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-1.5 py-0.5 rounded-full",children:g.length})]}),T.jsxs("button",{onClick:()=>l("trash"),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${a==="trash"?"bg-red-50 text-red-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),T.jsx("span",{className:"text-sm",children:""})]}),f.length>0&&T.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-1.5 py-0.5 rounded-full",children:f.length})]})]})})}function Cc({progress:r,delta:e,size:t="md"}){const i=l=>l>=80?"bg-green-500":l>=50?"bg-blue-500":l>=25?"bg-yellow-500":"bg-red-400",a=t==="sm"?"h-2":t==="lg"?"h-5":"h-3";return T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`flex-1 ${a} bg-gray-200 rounded-full overflow-hidden`,children:T.jsx("div",{className:`${a} ${i(r)} progress-bar-fill rounded-full`,style:{width:`${Math.min(100,Math.max(0,r))}%`}})}),T.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[40px] text-right",children:[r,"%"]}),e!=null&&T.jsx("span",{className:`text-xs font-medium min-w-[42px] text-right ${e>0?"text-green-600":e<0?"text-red-600":"text-gray-400"}`,children:e>0?`+${e}%`:e<0?`${e}%`:"0%"})]})}function tx({onSelectMember:r}){const{tasks:e}=yi(),t=_=>{const v=e.filter(X=>X.memberId===_),x=v.length,R=x>0?Math.round(v.reduce((X,re)=>X+re.progress,0)/x):0,V=v.filter(X=>X.progress>=100).length,L=v.filter(X=>X.issues).length,q=v.filter(X=>X.consultation).length,te=v.filter(X=>X.dueDate?new Date(X.dueDate)<new Date&&X.progress<100:!1).length;return{count:x,avg:R,completed:V,hasIssues:L,hasConsultation:q,overdue:te}},i=_=>{const v=e.filter(V=>V.category===_),x=v.length,R=x>0?Math.round(v.reduce((V,L)=>V+L.progress,0)/x):0;return{count:x,avg:R}},a=e.length,l=a>0?Math.round(e.reduce((_,v)=>_+v.progress,0)/a):0,c=e.filter(_=>_.progress>=100).length,f=e.filter(_=>_.dueDate?new Date(_.dueDate)<new Date&&_.progress<100:!1).length,g=e.filter(_=>_.taskType==="project").length,p=e.filter(_=>_.taskType==="routine").length;return T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:""}),T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-8",children:[T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[l,"%"]})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsx("p",{className:"text-2xl font-bold text-green-600",children:c})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:""}),T.jsx("p",{className:`text-2xl font-bold ${f>0?"text-red-600":"text-gray-400"}`,children:f})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:" "}),T.jsx("p",{className:"text-2xl font-bold text-blue-500",children:g})]}),T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsx("p",{className:"text-xs text-gray-500",children:" "}),T.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:p})]})]}),T.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:Fr.map(_=>{const v=t(_.id);return T.jsxs("div",{onClick:()=>r(_.id),className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition cursor-pointer",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[T.jsx(y_,{member:_,size:"md"}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-gray-900",children:_.nameJa}),T.jsx("p",{className:"text-xs text-gray-500",children:_.nameEn})]}),T.jsxs("div",{className:"ml-auto text-right",children:[T.jsxs("span",{className:"text-sm text-gray-500",children:[v.count,""]}),T.jsxs("span",{className:"text-xs text-gray-400 block",children:[v.completed,""]})]})]}),T.jsx(Cc,{progress:v.avg,delta:null}),T.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[v.hasIssues>0&&T.jsxs("span",{className:"text-xs text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded",children:[" : ",v.hasIssues,""]}),v.hasConsultation>0&&T.jsxs("span",{className:"text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:[" : ",v.hasConsultation,""]}),v.overdue>0&&T.jsxs("span",{className:"text-xs text-red-600 bg-red-50 px-1.5 py-0.5 rounded",children:[" : ",v.overdue,""]})]})]},_.id)})}),T.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),T.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:T.jsxs("div",{className:"space-y-3",children:[Xi.map(_=>{const v=i(_.id);return v.count===0?null:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium min-w-[140px] text-center",style:{backgroundColor:_.color},children:_.label}),T.jsx("div",{className:"flex-1",children:T.jsx(Cc,{progress:v.avg,delta:null,size:"sm"})}),T.jsxs("span",{className:"text-xs text-gray-500 min-w-[30px] text-right",children:[v.count,""]})]},_.id)}),Xi.every(_=>e.filter(v=>v.category===_.id).length===0)&&T.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:""})]})})]})}var ec=gx();function kO(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return z.useMemo(()=>i=>{e.forEach(a=>a(i))},e)}const nm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bl(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function __(r){return"nodeType"in r}function Vn(r){var e,t;return r?Bl(r)?r:__(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function v_(r){const{Document:e}=Vn(r);return r instanceof e}function Qc(r){return Bl(r)?!1:r instanceof Vn(r).HTMLElement}function Gw(r){return r instanceof Vn(r).SVGElement}function Fl(r){return r?Bl(r)?r.document:__(r)?v_(r)?r:Qc(r)||Gw(r)?r.ownerDocument:document:document:document}const qr=nm?z.useLayoutEffect:z.useEffect;function rm(r){const e=z.useRef(r);return qr(()=>{e.current=r}),z.useCallback(function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function PO(){const r=z.useRef(null),e=z.useCallback((i,a)=>{r.current=setInterval(i,a)},[]),t=z.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function Dc(r,e){e===void 0&&(e=[r]);const t=z.useRef(r);return qr(()=>{t.current!==r&&(t.current=r)},e),t}function Yc(r,e){const t=z.useRef();return z.useMemo(()=>{const i=r(t.current);return t.current=i,i},[...e])}function vf(r){const e=rm(r),t=z.useRef(null),i=z.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,i]}function bf(r){const e=z.useRef();return z.useEffect(()=>{e.current=r},[r]),e.current}let Sp={};function $c(r,e){return z.useMemo(()=>{if(e)return e;const t=Sp[r]==null?0:Sp[r]+1;return Sp[r]=t,r+"-"+t},[r,e])}function Kw(r){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.reduce((l,c)=>{const f=Object.entries(c);for(const[g,p]of f){const _=l[g];_!=null&&(l[g]=_+r*p)}return l},{...e})}}const ml=Kw(1),Tf=Kw(-1);function jO(r){return"clientX"in r&&"clientY"in r}function im(r){if(!r)return!1;const{KeyboardEvent:e}=Vn(r.target);return e&&r instanceof e}function LO(r){if(!r)return!1;const{TouchEvent:e}=Vn(r.target);return e&&r instanceof e}function Ef(r){if(LO(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return jO(r)?{x:r.clientX,y:r.clientY}:null}const ia=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[ia.Translate.toString(r),ia.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:i}=r;return e+" "+t+"ms "+i}}}),nx="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function UO(r){return r.matches(nx)?r:r.querySelector(nx)}const zO={display:"none"};function BO(r){let{id:e,value:t}=r;return xt.createElement("div",{id:e,style:zO},t)}function FO(r){let{id:e,announcement:t,ariaLiveType:i="assertive"}=r;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return xt.createElement("div",{id:e,style:a,role:"status","aria-live":i,"aria-atomic":!0},t)}function qO(){const[r,e]=z.useState("");return{announce:z.useCallback(i=>{i!=null&&e(i)},[]),announcement:r}}const Qw=z.createContext(null);function HO(r){const e=z.useContext(Qw);z.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function GO(){const[r]=z.useState(()=>new Set),e=z.useCallback(i=>(r.add(i),()=>r.delete(i)),[r]);return[z.useCallback(i=>{let{type:a,event:l}=i;r.forEach(c=>{var f;return(f=c[a])==null?void 0:f.call(c,l)})},[r]),e]}const KO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},QO={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function YO(r){let{announcements:e=QO,container:t,hiddenTextDescribedById:i,screenReaderInstructions:a=KO}=r;const{announce:l,announcement:c}=qO(),f=$c("DndLiveRegion"),[g,p]=z.useState(!1);if(z.useEffect(()=>{p(!0)},[]),HO(z.useMemo(()=>({onDragStart(v){let{active:x}=v;l(e.onDragStart({active:x}))},onDragMove(v){let{active:x,over:R}=v;e.onDragMove&&l(e.onDragMove({active:x,over:R}))},onDragOver(v){let{active:x,over:R}=v;l(e.onDragOver({active:x,over:R}))},onDragEnd(v){let{active:x,over:R}=v;l(e.onDragEnd({active:x,over:R}))},onDragCancel(v){let{active:x,over:R}=v;l(e.onDragCancel({active:x,over:R}))}}),[l,e])),!g)return null;const _=xt.createElement(xt.Fragment,null,xt.createElement(BO,{id:i,value:a.draggable}),xt.createElement(FO,{id:f,announcement:c}));return t?ec.createPortal(_,t):_}var $t;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})($t||($t={}));function xf(){}function $O(r,e){return z.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function XO(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return z.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Hr=Object.freeze({x:0,y:0});function JO(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function WO(r,e){const t=Ef(r);if(!t)return"0 0";const i={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function ZO(r,e){let{data:{value:t}}=r,{data:{value:i}}=e;return t-i}function eV(r,e){let{data:{value:t}}=r,{data:{value:i}}=e;return i-t}function tV(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}function rx(r,e,t){return e===void 0&&(e=r.left),t===void 0&&(t=r.top),{x:e+r.width*.5,y:t+r.height*.5}}const nV=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=r;const a=rx(e,e.left,e.top),l=[];for(const c of i){const{id:f}=c,g=t.get(f);if(g){const p=JO(rx(g),a);l.push({id:f,data:{droppableContainer:c,value:p}})}}return l.sort(ZO)};function rV(r,e){const t=Math.max(e.top,r.top),i=Math.max(e.left,r.left),a=Math.min(e.left+e.width,r.left+r.width),l=Math.min(e.top+e.height,r.top+r.height),c=a-i,f=l-t;if(i<a&&t<l){const g=e.width*e.height,p=r.width*r.height,_=c*f,v=_/(g+p-_);return Number(v.toFixed(4))}return 0}const iV=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=r;const a=[];for(const l of i){const{id:c}=l,f=t.get(c);if(f){const g=rV(f,e);g>0&&a.push({id:c,data:{droppableContainer:l,value:g}})}}return a.sort(eV)};function sV(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Yw(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:Hr}function aV(r){return function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return a.reduce((c,f)=>({...c,top:c.top+r*f.y,bottom:c.bottom+r*f.y,left:c.left+r*f.x,right:c.right+r*f.x}),{...t})}}const oV=aV(1);function $w(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function lV(r,e,t){const i=$w(e);if(!i)return r;const{scaleX:a,scaleY:l,x:c,y:f}=i,g=r.left-c-(1-a)*parseFloat(t),p=r.top-f-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),_=a?r.width/a:r.width,v=l?r.height/l:r.height;return{width:_,height:v,top:p,right:g+_,bottom:p+v,left:g}}const uV={ignoreTransform:!1};function ql(r,e){e===void 0&&(e=uV);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:_}=Vn(r).getComputedStyle(r);p&&(t=lV(t,p,_))}const{top:i,left:a,width:l,height:c,bottom:f,right:g}=t;return{top:i,left:a,width:l,height:c,bottom:f,right:g}}function ix(r){return ql(r,{ignoreTransform:!0})}function cV(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function hV(r,e){return e===void 0&&(e=Vn(r).getComputedStyle(r)),e.position==="fixed"}function dV(r,e){e===void 0&&(e=Vn(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?t.test(l):!1})}function b_(r,e){const t=[];function i(a){if(e!=null&&t.length>=e||!a)return t;if(v_(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!Qc(a)||Gw(a)||t.includes(a))return t;const l=Vn(r).getComputedStyle(a);return a!==r&&dV(a,l)&&t.push(a),hV(a,l)?t:i(a.parentNode)}return r?i(r):t}function Xw(r){const[e]=b_(r,1);return e??null}function wp(r){return!nm||!r?null:Bl(r)?r:__(r)?v_(r)||r===Fl(r).scrollingElement?window:Qc(r)?r:null:null}function Jw(r){return Bl(r)?r.scrollX:r.scrollLeft}function Ww(r){return Bl(r)?r.scrollY:r.scrollTop}function cy(r){return{x:Jw(r),y:Ww(r)}}var an;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(an||(an={}));function Zw(r){return!nm||!r?!1:r===document.scrollingElement}function eA(r){const e={x:0,y:0},t=Zw(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},i={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},a=r.scrollTop<=e.y,l=r.scrollLeft<=e.x,c=r.scrollTop>=i.y,f=r.scrollLeft>=i.x;return{isTop:a,isLeft:l,isBottom:c,isRight:f,maxScroll:i,minScroll:e}}const fV={x:.2,y:.2};function mV(r,e,t,i,a){let{top:l,left:c,right:f,bottom:g}=t;i===void 0&&(i=10),a===void 0&&(a=fV);const{isTop:p,isBottom:_,isLeft:v,isRight:x}=eA(r),R={x:0,y:0},V={x:0,y:0},L={height:e.height*a.y,width:e.width*a.x};return!p&&l<=e.top+L.height?(R.y=an.Backward,V.y=i*Math.abs((e.top+L.height-l)/L.height)):!_&&g>=e.bottom-L.height&&(R.y=an.Forward,V.y=i*Math.abs((e.bottom-L.height-g)/L.height)),!x&&f>=e.right-L.width?(R.x=an.Forward,V.x=i*Math.abs((e.right-L.width-f)/L.width)):!v&&c<=e.left+L.width&&(R.x=an.Backward,V.x=i*Math.abs((e.left+L.width-c)/L.width)),{direction:R,speed:V}}function gV(r){if(r===document.scrollingElement){const{innerWidth:l,innerHeight:c}=window;return{top:0,left:0,right:l,bottom:c,width:l,height:c}}const{top:e,left:t,right:i,bottom:a}=r.getBoundingClientRect();return{top:e,left:t,right:i,bottom:a,width:r.clientWidth,height:r.clientHeight}}function tA(r){return r.reduce((e,t)=>ml(e,cy(t)),Hr)}function pV(r){return r.reduce((e,t)=>e+Jw(t),0)}function yV(r){return r.reduce((e,t)=>e+Ww(t),0)}function nA(r,e){if(e===void 0&&(e=ql),!r)return;const{top:t,left:i,bottom:a,right:l}=e(r);Xw(r)&&(a<=0||l<=0||t>=window.innerHeight||i>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const _V=[["x",["left","right"],pV],["y",["top","bottom"],yV]];class T_{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=b_(t),a=tA(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,c,f]of _V)for(const g of c)Object.defineProperty(this,g,{get:()=>{const p=f(i),_=a[l]-p;return this.rect[g]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class dc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var a;(a=this.target)==null||a.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function vV(r){const{EventTarget:e}=Vn(r);return r instanceof e?r:Fl(r)}function Ap(r,e){const t=Math.abs(r.x),i=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var Rr;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Rr||(Rr={}));function sx(r){r.preventDefault()}function bV(r){r.stopPropagation()}var We;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(We||(We={}));const rA={start:[We.Space,We.Enter],cancel:[We.Esc],end:[We.Space,We.Enter,We.Tab]},TV=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case We.Right:return{...t,x:t.x+25};case We.Left:return{...t,x:t.x-25};case We.Down:return{...t,y:t.y+25};case We.Up:return{...t,y:t.y-25}}};class iA{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new dc(Fl(t)),this.windowListeners=new dc(Vn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rr.Resize,this.handleCancel),this.windowListeners.add(Rr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&nA(i),t(Hr)}handleKeyDown(e){if(im(e)){const{active:t,context:i,options:a}=this.props,{keyboardCodes:l=rA,coordinateGetter:c=TV,scrollBehavior:f="smooth"}=a,{code:g}=e;if(l.end.includes(g)){this.handleEnd(e);return}if(l.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=i.current,_=p?{x:p.left,y:p.top}:Hr;this.referenceCoordinates||(this.referenceCoordinates=_);const v=c(e,{active:t,context:i.current,currentCoordinates:_});if(v){const x=Tf(v,_),R={x:0,y:0},{scrollableAncestors:V}=i.current;for(const L of V){const q=e.code,{isTop:te,isRight:X,isLeft:re,isBottom:ce,maxScroll:de,minScroll:le}=eA(L),C=gV(L),I={x:Math.min(q===We.Right?C.right-C.width/2:C.right,Math.max(q===We.Right?C.left:C.left+C.width/2,v.x)),y:Math.min(q===We.Down?C.bottom-C.height/2:C.bottom,Math.max(q===We.Down?C.top:C.top+C.height/2,v.y))},A=q===We.Right&&!X||q===We.Left&&!re,M=q===We.Down&&!ce||q===We.Up&&!te;if(A&&I.x!==v.x){const N=L.scrollLeft+x.x,k=q===We.Right&&N<=de.x||q===We.Left&&N>=le.x;if(k&&!x.y){L.scrollTo({left:N,behavior:f});return}k?R.x=L.scrollLeft-N:R.x=q===We.Right?L.scrollLeft-de.x:L.scrollLeft-le.x,R.x&&L.scrollBy({left:-R.x,behavior:f});break}else if(M&&I.y!==v.y){const N=L.scrollTop+x.y,k=q===We.Down&&N<=de.y||q===We.Up&&N>=le.y;if(k&&!x.x){L.scrollTo({top:N,behavior:f});return}k?R.y=L.scrollTop-N:R.y=q===We.Down?L.scrollTop-de.y:L.scrollTop-le.y,R.y&&L.scrollBy({top:-R.y,behavior:f});break}}this.handleMove(e,ml(Tf(v,this.referenceCoordinates),R))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}iA.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:i=rA,onActivation:a}=e,{active:l}=t;const{code:c}=r.nativeEvent;if(i.start.includes(c)){const f=l.activatorNode.current;return f&&r.target!==f?!1:(r.preventDefault(),a?.({event:r.nativeEvent}),!0)}return!1}}];function ax(r){return!!(r&&"distance"in r)}function ox(r){return!!(r&&"delay"in r)}class E_{constructor(e,t,i){var a;i===void 0&&(i=vV(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:c}=l;this.props=e,this.events=t,this.document=Fl(c),this.documentListeners=new dc(this.document),this.listeners=new dc(i),this.windowListeners=new dc(Vn(c)),this.initialCoordinates=(a=Ef(l))!=null?a:Hr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Rr.Resize,this.handleCancel),this.windowListeners.add(Rr.DragStart,sx),this.windowListeners.add(Rr.VisibilityChange,this.handleCancel),this.windowListeners.add(Rr.ContextMenu,sx),this.documentListeners.add(Rr.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ox(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(ax(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:a}=this.props;a(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Rr.Click,bV,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rr.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:a,props:l}=this,{onMove:c,options:{activationConstraint:f}}=l;if(!a)return;const g=(t=Ef(e))!=null?t:Hr,p=Tf(a,g);if(!i&&f){if(ax(f)){if(f.tolerance!=null&&Ap(p,f.tolerance))return this.handleCancel();if(Ap(p,f.distance))return this.handleStart()}if(ox(f)&&Ap(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}e.cancelable&&e.preventDefault(),c(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===We.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const EV={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class x_ extends E_{constructor(e){const{event:t}=e,i=Fl(t.target);super(e,EV,i)}}x_.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const xV={move:{name:"mousemove"},end:{name:"mouseup"}};var hy;(function(r){r[r.RightClick=2]="RightClick"})(hy||(hy={}));class SV extends E_{constructor(e){super(e,xV,Fl(e.event.target))}}SV.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:i}=e;return t.button===hy.RightClick?!1:(i?.({event:t}),!0)}}];const Ip={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class wV extends E_{constructor(e){super(e,Ip)}static setup(){return window.addEventListener(Ip.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ip.move.name,e)};function e(){}}}wV.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:i}=e;const{touches:a}=t;return a.length>1?!1:(i?.({event:t}),!0)}}];var fc;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(fc||(fc={}));var Sf;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Sf||(Sf={}));function AV(r){let{acceleration:e,activator:t=fc.Pointer,canScroll:i,draggingRect:a,enabled:l,interval:c=5,order:f=Sf.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:_,delta:v,threshold:x}=r;const R=RV({delta:v,disabled:!l}),[V,L]=PO(),q=z.useRef({x:0,y:0}),te=z.useRef({x:0,y:0}),X=z.useMemo(()=>{switch(t){case fc.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case fc.DraggableRect:return a}},[t,a,g]),re=z.useRef(null),ce=z.useCallback(()=>{const le=re.current;if(!le)return;const C=q.current.x*te.current.x,I=q.current.y*te.current.y;le.scrollBy(C,I)},[]),de=z.useMemo(()=>f===Sf.TreeOrder?[...p].reverse():p,[f,p]);z.useEffect(()=>{if(!l||!p.length||!X){L();return}for(const le of de){if(i?.(le)===!1)continue;const C=p.indexOf(le),I=_[C];if(!I)continue;const{direction:A,speed:M}=mV(le,I,X,e,x);for(const N of["x","y"])R[N][A[N]]||(M[N]=0,A[N]=0);if(M.x>0||M.y>0){L(),re.current=le,V(ce,c),q.current=M,te.current=A;return}}q.current={x:0,y:0},te.current={x:0,y:0},L()},[e,ce,i,L,l,c,JSON.stringify(X),JSON.stringify(R),V,p,de,_,JSON.stringify(x)])}const IV={x:{[an.Backward]:!1,[an.Forward]:!1},y:{[an.Backward]:!1,[an.Forward]:!1}};function RV(r){let{delta:e,disabled:t}=r;const i=bf(e);return Yc(a=>{if(t||!i||!a)return IV;const l={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[an.Backward]:a.x[an.Backward]||l.x===-1,[an.Forward]:a.x[an.Forward]||l.x===1},y:{[an.Backward]:a.y[an.Backward]||l.y===-1,[an.Forward]:a.y[an.Forward]||l.y===1}}},[t,e,i])}function CV(r,e){const t=e!=null?r.get(e):void 0,i=t?t.node.current:null;return Yc(a=>{var l;return e==null?null:(l=i??a)!=null?l:null},[i,e])}function DV(r,e){return z.useMemo(()=>r.reduce((t,i)=>{const{sensor:a}=i,l=a.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,i)}));return[...t,...l]},[]),[r,e])}var Nc;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Nc||(Nc={}));var dy;(function(r){r.Optimized="optimized"})(dy||(dy={}));const lx=new Map;function NV(r,e){let{dragging:t,dependencies:i,config:a}=e;const[l,c]=z.useState(null),{frequency:f,measure:g,strategy:p}=a,_=z.useRef(r),v=q(),x=Dc(v),R=z.useCallback(function(te){te===void 0&&(te=[]),!x.current&&c(X=>X===null?te:X.concat(te.filter(re=>!X.includes(re))))},[x]),V=z.useRef(null),L=Yc(te=>{if(v&&!t)return lx;if(!te||te===lx||_.current!==r||l!=null){const X=new Map;for(let re of r){if(!re)continue;if(l&&l.length>0&&!l.includes(re.id)&&re.rect.current){X.set(re.id,re.rect.current);continue}const ce=re.node.current,de=ce?new T_(g(ce),ce):null;re.rect.current=de,de&&X.set(re.id,de)}return X}return te},[r,l,t,v,g]);return z.useEffect(()=>{_.current=r},[r]),z.useEffect(()=>{v||R()},[t,v]),z.useEffect(()=>{l&&l.length>0&&c(null)},[JSON.stringify(l)]),z.useEffect(()=>{v||typeof f!="number"||V.current!==null||(V.current=setTimeout(()=>{R(),V.current=null},f))},[f,v,R,...i]),{droppableRects:L,measureDroppableContainers:R,measuringScheduled:l!=null};function q(){switch(p){case Nc.Always:return!1;case Nc.BeforeDragging:return t;default:return!t}}}function S_(r,e){return Yc(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function MV(r,e){return S_(r,e)}function OV(r){let{callback:e,disabled:t}=r;const i=rm(e),a=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(i)},[i,t]);return z.useEffect(()=>()=>a?.disconnect(),[a]),a}function sm(r){let{callback:e,disabled:t}=r;const i=rm(e),a=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(i)},[t]);return z.useEffect(()=>()=>a?.disconnect(),[a]),a}function VV(r){return new T_(ql(r),r)}function ux(r,e,t){e===void 0&&(e=VV);const[i,a]=z.useState(null);function l(){a(g=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=g??t)!=null?p:null}const _=e(r);return JSON.stringify(g)===JSON.stringify(_)?g:_})}const c=OV({callback(g){if(r)for(const p of g){const{type:_,target:v}=p;if(_==="childList"&&v instanceof HTMLElement&&v.contains(r)){l();break}}}}),f=sm({callback:l});return qr(()=>{l(),r?(f?.observe(r),c?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),c?.disconnect())},[r]),i}function kV(r){const e=S_(r);return Yw(r,e)}const cx=[];function PV(r){const e=z.useRef(r),t=Yc(i=>r?i&&i!==cx&&r&&e.current&&r.parentNode===e.current.parentNode?i:b_(r):cx,[r]);return z.useEffect(()=>{e.current=r},[r]),t}function jV(r){const[e,t]=z.useState(null),i=z.useRef(r),a=z.useCallback(l=>{const c=wp(l.target);c&&t(f=>f?(f.set(c,cy(c)),new Map(f)):null)},[]);return z.useEffect(()=>{const l=i.current;if(r!==l){c(l);const f=r.map(g=>{const p=wp(g);return p?(p.addEventListener("scroll",a,{passive:!0}),[p,cy(p)]):null}).filter(g=>g!=null);t(f.length?new Map(f):null),i.current=r}return()=>{c(r),c(l)};function c(f){f.forEach(g=>{const p=wp(g);p?.removeEventListener("scroll",a)})}},[a,r]),z.useMemo(()=>r.length?e?Array.from(e.values()).reduce((l,c)=>ml(l,c),Hr):tA(r):Hr,[r,e])}function hx(r,e){e===void 0&&(e=[]);const t=z.useRef(null);return z.useEffect(()=>{t.current=null},e),z.useEffect(()=>{const i=r!==Hr;i&&!t.current&&(t.current=r),!i&&t.current&&(t.current=null)},[r]),t.current?Tf(r,t.current):Hr}function LV(r){z.useEffect(()=>{if(!nm)return;const e=r.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function UV(r,e){return z.useMemo(()=>r.reduce((t,i)=>{let{eventName:a,handler:l}=i;return t[a]=c=>{l(c,e)},t},{}),[r,e])}function sA(r){return z.useMemo(()=>r?cV(r):null,[r])}const dx=[];function zV(r,e){e===void 0&&(e=ql);const[t]=r,i=sA(t?Vn(t):null),[a,l]=z.useState(dx);function c(){l(()=>r.length?r.map(g=>Zw(g)?i:new T_(e(g),g)):dx)}const f=sm({callback:c});return qr(()=>{f?.disconnect(),c(),r.forEach(g=>f?.observe(g))},[r]),a}function aA(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Qc(e)?e:r}function BV(r){let{measure:e}=r;const[t,i]=z.useState(null),a=z.useCallback(p=>{for(const{target:_}of p)if(Qc(_)){i(v=>{const x=e(_);return v?{...v,width:x.width,height:x.height}:x});break}},[e]),l=sm({callback:a}),c=z.useCallback(p=>{const _=aA(p);l?.disconnect(),_&&l?.observe(_),i(_?e(_):null)},[e,l]),[f,g]=vf(c);return z.useMemo(()=>({nodeRef:f,rect:t,setRef:g}),[t,f,g])}const FV=[{sensor:x_,options:{}},{sensor:iA,options:{}}],qV={current:{}},qd={draggable:{measure:ix},droppable:{measure:ix,strategy:Nc.WhileDragging,frequency:dy.Optimized},dragOverlay:{measure:ql}};class mc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const HV={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new mc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:qd,measureDroppableContainers:xf,windowRect:null,measuringScheduled:!1},oA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xf,draggableNodes:new Map,over:null,measureDroppableContainers:xf},Xc=z.createContext(oA),lA=z.createContext(HV);function GV(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new mc}}}function KV(r,e){switch(e.type){case $t.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case $t.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case $t.DragEnd:case $t.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case $t.RegisterDroppable:{const{element:t}=e,{id:i}=t,a=new mc(r.droppable.containers);return a.set(i,t),{...r,droppable:{...r.droppable,containers:a}}}case $t.SetDroppableDisabled:{const{id:t,key:i,disabled:a}=e,l=r.droppable.containers.get(t);if(!l||i!==l.key)return r;const c=new mc(r.droppable.containers);return c.set(t,{...l,disabled:a}),{...r,droppable:{...r.droppable,containers:c}}}case $t.UnregisterDroppable:{const{id:t,key:i}=e,a=r.droppable.containers.get(t);if(!a||i!==a.key)return r;const l=new mc(r.droppable.containers);return l.delete(t),{...r,droppable:{...r.droppable,containers:l}}}default:return r}}function QV(r){let{disabled:e}=r;const{active:t,activatorEvent:i,draggableNodes:a}=z.useContext(Xc),l=bf(i),c=bf(t?.id);return z.useEffect(()=>{if(!e&&!i&&l&&c!=null){if(!im(l)||document.activeElement===l.target)return;const f=a.get(c);if(!f)return;const{activatorNode:g,node:p}=f;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const _ of[g.current,p.current]){if(!_)continue;const v=UO(_);if(v){v.focus();break}}})}},[i,e,a,c,l]),null}function uA(r,e){let{transform:t,...i}=e;return r!=null&&r.length?r.reduce((a,l)=>l({transform:a,...i}),t):t}function YV(r){return z.useMemo(()=>({draggable:{...qd.draggable,...r?.draggable},droppable:{...qd.droppable,...r?.droppable},dragOverlay:{...qd.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function $V(r){let{activeNode:e,measure:t,initialRect:i,config:a=!0}=r;const l=z.useRef(!1),{x:c,y:f}=typeof a=="boolean"?{x:a,y:a}:a;qr(()=>{if(!c&&!f||!e){l.current=!1;return}if(l.current||!i)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const _=t(p),v=Yw(_,i);if(c||(v.x=0),f||(v.y=0),l.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=Xw(p);x&&x.scrollBy({top:v.y,left:v.x})}},[e,c,f,i,t])}const am=z.createContext({...Hr,scaleX:1,scaleY:1});var Ls;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Ls||(Ls={}));const XV=z.memo(function(e){var t,i,a,l;let{id:c,accessibility:f,autoScroll:g=!0,children:p,sensors:_=FV,collisionDetection:v=iV,measuring:x,modifiers:R,...V}=e;const L=z.useReducer(KV,void 0,GV),[q,te]=L,[X,re]=GO(),[ce,de]=z.useState(Ls.Uninitialized),le=ce===Ls.Initialized,{draggable:{active:C,nodes:I,translate:A},droppable:{containers:M}}=q,N=C!=null?I.get(C):null,k=z.useRef({initial:null,translated:null}),D=z.useMemo(()=>{var je;return C!=null?{id:C,data:(je=N?.data)!=null?je:qV,rect:k}:null},[C,N]),Ce=z.useRef(null),[oe,Q]=z.useState(null),[se,_e]=z.useState(null),Ie=Dc(V,Object.values(V)),Pe=$c("DndDescribedBy",c),P=z.useMemo(()=>M.getEnabled(),[M]),J=YV(x),{droppableRects:ae,measureDroppableContainers:me,measuringScheduled:Se}=NV(P,{dragging:le,dependencies:[A.x,A.y],config:J.droppable}),xe=CV(I,C),Ve=z.useMemo(()=>se?Ef(se):null,[se]),st=Ti(),Ke=MV(xe,J.draggable.measure);$V({activeNode:C!=null?I.get(C):null,config:st.layoutShiftCompensation,initialRect:Ke,measure:J.draggable.measure});const ze=ux(xe,J.draggable.measure,Ke),dr=ux(xe?xe.parentElement:null),ln=z.useRef({activatorEvent:null,active:null,activeNode:xe,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Kn=M.getNodeFor((t=ln.current.over)==null?void 0:t.id),Pt=BV({measure:J.dragOverlay.measure}),fr=(i=Pt.nodeRef.current)!=null?i:xe,kn=le?(a=Pt.rect)!=null?a:ze:null,es=!!(Pt.nodeRef.current&&Pt.rect),ts=kV(es?null:ze),pt=sA(fr?Vn(fr):null),at=PV(le?Kn??xe:null),Qn=zV(at),ns=uA(R,{transform:{x:A.x-ts.x,y:A.y-ts.y,scaleX:1,scaleY:1},activatorEvent:se,active:D,activeNodeRect:ze,containerNodeRect:dr,draggingNodeRect:kn,over:ln.current.over,overlayNodeRect:Pt.rect,scrollableAncestors:at,scrollableAncestorRects:Qn,windowRect:pt}),ua=Ve?ml(Ve,A):null,Wt=jV(at),_i=hx(Wt),ca=hx(Wt,[ze]),mr=ml(ns,_i),In=kn?oV(kn,ns):null,vi=D&&In?v({active:D,collisionRect:In,droppableRects:ae,droppableContainers:P,pointerCoordinates:ua}):null,ha=tV(vi,"id"),[Yn,da]=z.useState(null),$n=es?ns:ml(ns,ca),Qt=sV($n,(l=Yn?.rect)!=null?l:null,ze),_n=z.useRef(null),yt=z.useCallback((je,_t)=>{let{sensor:vt,options:jt}=_t;if(Ce.current==null)return;const vn=I.get(Ce.current);if(!vn)return;const Zt=je.nativeEvent,Rt=new vt({active:Ce.current,activeNode:vn,event:Zt,options:jt,context:ln,onAbort(Ct){if(!I.get(Ct))return;const{onDragAbort:Tn}=Ie.current,Rn={id:Ct};Tn?.(Rn),X({type:"onDragAbort",event:Rn})},onPending(Ct,bn,Tn,Rn){if(!I.get(Ct))return;const{onDragPending:Cn}=Ie.current,Jn={id:Ct,constraint:bn,initialCoordinates:Tn,offset:Rn};Cn?.(Jn),X({type:"onDragPending",event:Jn})},onStart(Ct){const bn=Ce.current;if(bn==null)return;const Tn=I.get(bn);if(!Tn)return;const{onDragStart:Rn}=Ie.current,Xn={activatorEvent:Zt,active:{id:bn,data:Tn.data,rect:k}};ec.unstable_batchedUpdates(()=>{Rn?.(Xn),de(Ls.Initializing),te({type:$t.DragStart,initialCoordinates:Ct,active:bn}),X({type:"onDragStart",event:Xn}),Q(_n.current),_e(Zt)})},onMove(Ct){te({type:$t.DragMove,coordinates:Ct})},onEnd:Pn($t.DragEnd),onCancel:Pn($t.DragCancel)});_n.current=Rt;function Pn(Ct){return async function(){const{active:Tn,collisions:Rn,over:Xn,scrollAdjustedTranslate:Cn}=ln.current;let Jn=null;if(Tn&&Cn){const{cancelDrop:un}=Ie.current;Jn={activatorEvent:Zt,active:Tn,collisions:Rn,delta:Cn,over:Xn},Ct===$t.DragEnd&&typeof un=="function"&&await Promise.resolve(un(Jn))&&(Ct=$t.DragCancel)}Ce.current=null,ec.unstable_batchedUpdates(()=>{te({type:Ct}),de(Ls.Uninitialized),da(null),Q(null),_e(null),_n.current=null;const un=Ct===$t.DragEnd?"onDragEnd":"onDragCancel";if(Jn){const Dn=Ie.current[un];Dn?.(Jn),X({type:un,event:Jn})}})}}},[I]),oo=z.useCallback((je,_t)=>(vt,jt)=>{const vn=vt.nativeEvent,Zt=I.get(jt);if(Ce.current!==null||!Zt||vn.dndKit||vn.defaultPrevented)return;const Rt={active:Zt};je(vt,_t.options,Rt)===!0&&(vn.dndKit={capturedBy:_t.sensor},Ce.current=jt,yt(vt,_t))},[I,yt]),bi=DV(_,oo);LV(_),qr(()=>{ze&&ce===Ls.Initializing&&de(Ls.Initialized)},[ze,ce]),z.useEffect(()=>{const{onDragMove:je}=Ie.current,{active:_t,activatorEvent:vt,collisions:jt,over:vn}=ln.current;if(!_t||!vt)return;const Zt={active:_t,activatorEvent:vt,collisions:jt,delta:{x:mr.x,y:mr.y},over:vn};ec.unstable_batchedUpdates(()=>{je?.(Zt),X({type:"onDragMove",event:Zt})})},[mr.x,mr.y]),z.useEffect(()=>{const{active:je,activatorEvent:_t,collisions:vt,droppableContainers:jt,scrollAdjustedTranslate:vn}=ln.current;if(!je||Ce.current==null||!_t||!vn)return;const{onDragOver:Zt}=Ie.current,Rt=jt.get(ha),Pn=Rt&&Rt.rect.current?{id:Rt.id,rect:Rt.rect.current,data:Rt.data,disabled:Rt.disabled}:null,Ct={active:je,activatorEvent:_t,collisions:vt,delta:{x:vn.x,y:vn.y},over:Pn};ec.unstable_batchedUpdates(()=>{da(Pn),Zt?.(Ct),X({type:"onDragOver",event:Ct})})},[ha]),qr(()=>{ln.current={activatorEvent:se,active:D,activeNode:xe,collisionRect:In,collisions:vi,droppableRects:ae,draggableNodes:I,draggingNode:fr,draggingNodeRect:kn,droppableContainers:M,over:Yn,scrollableAncestors:at,scrollAdjustedTranslate:mr},k.current={initial:kn,translated:In}},[D,xe,vi,In,I,fr,kn,ae,M,Yn,at,mr]),AV({...st,delta:A,draggingRect:In,pointerCoordinates:ua,scrollableAncestors:at,scrollableAncestorRects:Qn});const lo=z.useMemo(()=>({active:D,activeNode:xe,activeNodeRect:ze,activatorEvent:se,collisions:vi,containerNodeRect:dr,dragOverlay:Pt,draggableNodes:I,droppableContainers:M,droppableRects:ae,over:Yn,measureDroppableContainers:me,scrollableAncestors:at,scrollableAncestorRects:Qn,measuringConfiguration:J,measuringScheduled:Se,windowRect:pt}),[D,xe,ze,se,vi,dr,Pt,I,M,ae,Yn,me,at,Qn,J,Se,pt]),gr=z.useMemo(()=>({activatorEvent:se,activators:bi,active:D,activeNodeRect:ze,ariaDescribedById:{draggable:Pe},dispatch:te,draggableNodes:I,over:Yn,measureDroppableContainers:me}),[se,bi,D,ze,te,Pe,I,Yn,me]);return xt.createElement(Qw.Provider,{value:re},xt.createElement(Xc.Provider,{value:gr},xt.createElement(lA.Provider,{value:lo},xt.createElement(am.Provider,{value:Qt},p)),xt.createElement(QV,{disabled:f?.restoreFocus===!1})),xt.createElement(YO,{...f,hiddenTextDescribedById:Pe}));function Ti(){const je=oe?.autoScrollEnabled===!1,_t=typeof g=="object"?g.enabled===!1:g===!1,vt=le&&!je&&!_t;return typeof g=="object"?{...g,enabled:vt}:{enabled:vt}}}),JV=z.createContext(null),fx="button",WV="Draggable";function ZV(r){let{id:e,data:t,disabled:i=!1,attributes:a}=r;const l=$c(WV),{activators:c,activatorEvent:f,active:g,activeNodeRect:p,ariaDescribedById:_,draggableNodes:v,over:x}=z.useContext(Xc),{role:R=fx,roleDescription:V="draggable",tabIndex:L=0}=a??{},q=g?.id===e,te=z.useContext(q?am:JV),[X,re]=vf(),[ce,de]=vf(),le=UV(c,e),C=Dc(t);qr(()=>(v.set(e,{id:e,key:l,node:X,activatorNode:ce,data:C}),()=>{const A=v.get(e);A&&A.key===l&&v.delete(e)}),[v,e]);const I=z.useMemo(()=>({role:R,tabIndex:L,"aria-disabled":i,"aria-pressed":q&&R===fx?!0:void 0,"aria-roledescription":V,"aria-describedby":_.draggable}),[i,R,L,q,V,_.draggable]);return{active:g,activatorEvent:f,activeNodeRect:p,attributes:I,isDragging:q,listeners:i?void 0:le,node:X,over:x,setNodeRef:re,setActivatorNodeRef:de,transform:te}}function cA(){return z.useContext(lA)}const ek="Droppable",tk={timeout:25};function nk(r){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:a}=r;const l=$c(ek),{active:c,dispatch:f,over:g,measureDroppableContainers:p}=z.useContext(Xc),_=z.useRef({disabled:t}),v=z.useRef(!1),x=z.useRef(null),R=z.useRef(null),{disabled:V,updateMeasurementsFor:L,timeout:q}={...tk,...a},te=Dc(L??i),X=z.useCallback(()=>{if(!v.current){v.current=!0;return}R.current!=null&&clearTimeout(R.current),R.current=setTimeout(()=>{p(Array.isArray(te.current)?te.current:[te.current]),R.current=null},q)},[q]),re=sm({callback:X,disabled:V||!c}),ce=z.useCallback((I,A)=>{re&&(A&&(re.unobserve(A),v.current=!1),I&&re.observe(I))},[re]),[de,le]=vf(ce),C=Dc(e);return z.useEffect(()=>{!re||!de.current||(re.disconnect(),v.current=!1,re.observe(de.current))},[de,re]),z.useEffect(()=>(f({type:$t.RegisterDroppable,element:{id:i,key:l,disabled:t,node:de,rect:x,data:C}}),()=>f({type:$t.UnregisterDroppable,key:l,id:i})),[i]),z.useEffect(()=>{t!==_.current.disabled&&(f({type:$t.SetDroppableDisabled,id:i,key:l,disabled:t}),_.current.disabled=t)},[i,l,t,f]),{active:c,rect:x,isOver:g?.id===i,node:de,over:g,setNodeRef:le}}function rk(r){let{animation:e,children:t}=r;const[i,a]=z.useState(null),[l,c]=z.useState(null),f=bf(t);return!t&&!i&&f&&a(f),qr(()=>{if(!l)return;const g=i?.key,p=i?.props.id;if(g==null||p==null){a(null);return}Promise.resolve(e(p,l)).then(()=>{a(null)})},[e,i,l]),xt.createElement(xt.Fragment,null,t,i?z.cloneElement(i,{ref:c}):null)}const ik={x:0,y:0,scaleX:1,scaleY:1};function sk(r){let{children:e}=r;return xt.createElement(Xc.Provider,{value:oA},xt.createElement(am.Provider,{value:ik},e))}const ak={position:"fixed",touchAction:"none"},ok=r=>im(r)?"transform 250ms ease":void 0,lk=z.forwardRef((r,e)=>{let{as:t,activatorEvent:i,adjustScale:a,children:l,className:c,rect:f,style:g,transform:p,transition:_=ok}=r;if(!f)return null;const v=a?p:{...p,scaleX:1,scaleY:1},x={...ak,width:f.width,height:f.height,top:f.top,left:f.left,transform:ia.Transform.toString(v),transformOrigin:a&&i?WO(i,f):void 0,transition:typeof _=="function"?_(i):_,...g};return xt.createElement(t,{className:c,style:x,ref:e},l)}),uk=r=>e=>{let{active:t,dragOverlay:i}=e;const a={},{styles:l,className:c}=r;if(l!=null&&l.active)for(const[f,g]of Object.entries(l.active))g!==void 0&&(a[f]=t.node.style.getPropertyValue(f),t.node.style.setProperty(f,g));if(l!=null&&l.dragOverlay)for(const[f,g]of Object.entries(l.dragOverlay))g!==void 0&&i.node.style.setProperty(f,g);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&i.node.classList.add(c.dragOverlay),function(){for(const[g,p]of Object.entries(a))t.node.style.setProperty(g,p);c!=null&&c.active&&t.node.classList.remove(c.active)}},ck=r=>{let{transform:{initial:e,final:t}}=r;return[{transform:ia.Transform.toString(e)},{transform:ia.Transform.toString(t)}]},hk={duration:250,easing:"ease",keyframes:ck,sideEffects:uk({styles:{active:{opacity:"0"}}})};function dk(r){let{config:e,draggableNodes:t,droppableContainers:i,measuringConfiguration:a}=r;return rm((l,c)=>{if(e===null)return;const f=t.get(l);if(!f)return;const g=f.node.current;if(!g)return;const p=aA(c);if(!p)return;const{transform:_}=Vn(c).getComputedStyle(c),v=$w(_);if(!v)return;const x=typeof e=="function"?e:fk(e);return nA(g,a.draggable.measure),x({active:{id:l,data:f.data,node:g,rect:a.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:c,rect:a.dragOverlay.measure(p)},droppableContainers:i,measuringConfiguration:a,transform:v})})}function fk(r){const{duration:e,easing:t,sideEffects:i,keyframes:a}={...hk,...r};return l=>{let{active:c,dragOverlay:f,transform:g,...p}=l;if(!e)return;const _={x:f.rect.left-c.rect.left,y:f.rect.top-c.rect.top},v={scaleX:g.scaleX!==1?c.rect.width*g.scaleX/f.rect.width:1,scaleY:g.scaleY!==1?c.rect.height*g.scaleY/f.rect.height:1},x={x:g.x-_.x,y:g.y-_.y,...v},R=a({...p,active:c,dragOverlay:f,transform:{initial:g,final:x}}),[V]=R,L=R[R.length-1];if(JSON.stringify(V)===JSON.stringify(L))return;const q=i?.({active:c,dragOverlay:f,...p}),te=f.node.animate(R,{duration:e,easing:t,fill:"forwards"});return new Promise(X=>{te.onfinish=()=>{q?.(),X()}})}}let mx=0;function mk(r){return z.useMemo(()=>{if(r!=null)return mx++,mx},[r])}const gk=xt.memo(r=>{let{adjustScale:e=!1,children:t,dropAnimation:i,style:a,transition:l,modifiers:c,wrapperElement:f="div",className:g,zIndex:p=999}=r;const{activatorEvent:_,active:v,activeNodeRect:x,containerNodeRect:R,draggableNodes:V,droppableContainers:L,dragOverlay:q,over:te,measuringConfiguration:X,scrollableAncestors:re,scrollableAncestorRects:ce,windowRect:de}=cA(),le=z.useContext(am),C=mk(v?.id),I=uA(c,{activatorEvent:_,active:v,activeNodeRect:x,containerNodeRect:R,draggingNodeRect:q.rect,over:te,overlayNodeRect:q.rect,scrollableAncestors:re,scrollableAncestorRects:ce,transform:le,windowRect:de}),A=S_(x),M=dk({config:i,draggableNodes:V,droppableContainers:L,measuringConfiguration:X}),N=A?q.setRef:void 0;return xt.createElement(sk,null,xt.createElement(rk,{animation:M},v&&C?xt.createElement(lk,{key:C,id:v.id,ref:N,as:f,activatorEvent:_,adjustScale:e,className:g,transition:l,rect:A,style:{zIndex:p,...a},transform:I},t):null))});function w_(r,e,t){const i=r.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function pk(r,e){return r.reduce((t,i,a)=>{const l=e.get(i);return l&&(t[a]=l),t},Array(r.length))}function Ad(r){return r!==null&&r>=0}function yk(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function _k(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const A_=r=>{let{rects:e,activeIndex:t,overIndex:i,index:a}=r;const l=w_(e,i,t),c=e[a],f=l[a];return!f||!c?null:{x:f.left-c.left,y:f.top-c.top,scaleX:f.width/c.width,scaleY:f.height/c.height}},hA="Sortable",dA=xt.createContext({activeIndex:-1,containerId:hA,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:A_,disabled:{draggable:!1,droppable:!1}});function vk(r){let{children:e,id:t,items:i,strategy:a=A_,disabled:l=!1}=r;const{active:c,dragOverlay:f,droppableRects:g,over:p,measureDroppableContainers:_}=cA(),v=$c(hA,t),x=f.rect!==null,R=z.useMemo(()=>i.map(le=>typeof le=="object"&&"id"in le?le.id:le),[i]),V=c!=null,L=c?R.indexOf(c.id):-1,q=p?R.indexOf(p.id):-1,te=z.useRef(R),X=!yk(R,te.current),re=q!==-1&&L===-1||X,ce=_k(l);qr(()=>{X&&V&&_(R)},[X,R,V,_]),z.useEffect(()=>{te.current=R},[R]);const de=z.useMemo(()=>({activeIndex:L,containerId:v,disabled:ce,disableTransforms:re,items:R,overIndex:q,useDragOverlay:x,sortedRects:pk(R,g),strategy:a}),[L,v,ce.draggable,ce.droppable,re,R,q,g,x,a]);return xt.createElement(dA.Provider,{value:de},e)}const bk=r=>{let{id:e,items:t,activeIndex:i,overIndex:a}=r;return w_(t,i,a).indexOf(e)},Tk=r=>{let{containerId:e,isSorting:t,wasDragging:i,index:a,items:l,newIndex:c,previousItems:f,previousContainerId:g,transition:p}=r;return!p||!i||f!==l&&a===c?!1:t?!0:c!==a&&e===g},Ek={duration:200,easing:"ease"},fA="transform",xk=ia.Transition.toString({property:fA,duration:0,easing:"linear"}),Sk={roleDescription:"sortable"};function wk(r){let{disabled:e,index:t,node:i,rect:a}=r;const[l,c]=z.useState(null),f=z.useRef(t);return qr(()=>{if(!e&&t!==f.current&&i.current){const g=a.current;if(g){const p=ql(i.current,{ignoreTransform:!0}),_={x:g.left-p.left,y:g.top-p.top,scaleX:g.width/p.width,scaleY:g.height/p.height};(_.x||_.y)&&c(_)}}t!==f.current&&(f.current=t)},[e,t,i,a]),z.useEffect(()=>{l&&c(null)},[l]),l}function Ak(r){let{animateLayoutChanges:e=Tk,attributes:t,disabled:i,data:a,getNewIndex:l=bk,id:c,strategy:f,resizeObserverConfig:g,transition:p=Ek}=r;const{items:_,containerId:v,activeIndex:x,disabled:R,disableTransforms:V,sortedRects:L,overIndex:q,useDragOverlay:te,strategy:X}=z.useContext(dA),re=Ik(i,R),ce=_.indexOf(c),de=z.useMemo(()=>({sortable:{containerId:v,index:ce,items:_},...a}),[v,a,ce,_]),le=z.useMemo(()=>_.slice(_.indexOf(c)),[_,c]),{rect:C,node:I,isOver:A,setNodeRef:M}=nk({id:c,data:de,disabled:re.droppable,resizeObserverConfig:{updateMeasurementsFor:le,...g}}),{active:N,activatorEvent:k,activeNodeRect:D,attributes:Ce,setNodeRef:oe,listeners:Q,isDragging:se,over:_e,setActivatorNodeRef:Ie,transform:Pe}=ZV({id:c,data:de,attributes:{...Sk,...t},disabled:re.draggable}),P=kO(M,oe),J=!!N,ae=J&&!V&&Ad(x)&&Ad(q),me=!te&&se,Se=me&&ae?Pe:null,Ve=ae?Se??(f??X)({rects:L,activeNodeRect:D,activeIndex:x,overIndex:q,index:ce}):null,st=Ad(x)&&Ad(q)?l({id:c,items:_,activeIndex:x,overIndex:q}):ce,Ke=N?.id,ze=z.useRef({activeId:Ke,items:_,newIndex:st,containerId:v}),dr=_!==ze.current.items,ln=e({active:N,containerId:v,isDragging:se,isSorting:J,id:c,index:ce,items:_,newIndex:ze.current.newIndex,previousItems:ze.current.items,previousContainerId:ze.current.containerId,transition:p,wasDragging:ze.current.activeId!=null}),Kn=wk({disabled:!ln,index:ce,node:I,rect:C});return z.useEffect(()=>{J&&ze.current.newIndex!==st&&(ze.current.newIndex=st),v!==ze.current.containerId&&(ze.current.containerId=v),_!==ze.current.items&&(ze.current.items=_)},[J,st,v,_]),z.useEffect(()=>{if(Ke===ze.current.activeId)return;if(Ke!=null&&ze.current.activeId==null){ze.current.activeId=Ke;return}const fr=setTimeout(()=>{ze.current.activeId=Ke},50);return()=>clearTimeout(fr)},[Ke]),{active:N,activeIndex:x,attributes:Ce,data:de,rect:C,index:ce,newIndex:st,items:_,isOver:A,isSorting:J,isDragging:se,listeners:Q,node:I,overIndex:q,over:_e,setNodeRef:P,setActivatorNodeRef:Ie,setDroppableNodeRef:M,setDraggableNodeRef:oe,transform:Kn??Ve,transition:Pt()};function Pt(){if(Kn||dr&&ze.current.newIndex===ce)return xk;if(!(me&&!im(k)||!p)&&(J||ln))return ia.Transition.toString({...p,property:fA})}}function Ik(r,e){var t,i;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(i=r?.droppable)!=null?i:e.droppable}}We.Down,We.Right,We.Up,We.Left;function Rk({value:r}){return T.jsx("span",{className:"inline-flex items-center",title:`: ${r}/5`,children:[1,2,3,4,5].map(e=>T.jsx("span",{className:`text-xs ${e<=r?"text-yellow-400":"text-gray-300"}`,children:""},e))})}function Ck({dueDate:r}){if(!r)return null;const e=new Date(r),t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0);const i=Math.ceil((e-t)/(1e3*60*60*24));let a="text-gray-500 bg-gray-100";i<0?a="text-red-700 bg-red-100":i===0?a="text-orange-700 bg-orange-100":i<=3&&(a="text-yellow-700 bg-yellow-100");const l=`${e.getMonth()+1}/${e.getDate()}`,c=i<0?`${l} (${Math.abs(i)})`:i===0?`${l} ()`:i<=7?`${l} (${i})`:l;return T.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${a} flex items-center gap-0.5`,children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c]})}function Dk({task:r,onEdit:e,isDragEnabled:t}){const{attributes:i,listeners:a,setNodeRef:l,transform:c,transition:f,isDragging:g}=Ak({id:r.id}),p={transform:ia.Translate.toString(c),transition:f};return T.jsxs("div",{ref:l,style:p,className:`relative ${g?"opacity-40 z-10":""}`,children:[t&&T.jsx("div",{...i,...a,className:"absolute top-2 left-2 z-10 p-1 rounded hover:bg-gray-100 cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500 transition",title:"",children:T.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[T.jsx("circle",{cx:"9",cy:"5",r:"1.5"}),T.jsx("circle",{cx:"15",cy:"5",r:"1.5"}),T.jsx("circle",{cx:"9",cy:"12",r:"1.5"}),T.jsx("circle",{cx:"15",cy:"12",r:"1.5"}),T.jsx("circle",{cx:"9",cy:"19",r:"1.5"}),T.jsx("circle",{cx:"15",cy:"19",r:"1.5"})]})}),T.jsx(fy,{task:r,onEdit:e})]})}function fy({task:r,onEdit:e}){const{deleteTask:t,archiveTask:i,updateTask:a,getProgressDelta:l}=yi(),[c,f]=z.useState(!1),g=Xi.find(V=>V.id===r.category),p=Kc.find(V=>V.id===r.taskType),_=r.taskType==="routine",v=r.progress>=100,x=l(r),R=V=>V?V<1024?V+" B":V<1024*1024?(V/1024).toFixed(1)+" KB":(V/(1024*1024)).toFixed(1)+" MB":"";return T.jsx("div",{className:`bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition animate-fade-in ${c?"":"h-60"}`,children:T.jsxs("div",{className:"p-4 h-full flex flex-col",children:[T.jsxs("div",{className:"flex items-start justify-between mb-2",children:[T.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap flex-1 min-w-0",children:[T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium whitespace-nowrap",style:{backgroundColor:g?.color||"#94a3b8"},children:g?.label||""}),p&&T.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full font-medium whitespace-nowrap",style:{backgroundColor:`${p.color}20`,color:p.color},children:[p.icon," ",p.label]})]}),T.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r.progress>=100&&T.jsx("button",{onClick:()=>{confirm("")&&i(r.id)},className:"p-1 text-gray-400 hover:text-emerald-600 transition cursor-pointer",title:"",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),T.jsx("button",{onClick:()=>e(r),className:"p-1 text-gray-400 hover:text-blue-600 transition cursor-pointer",title:"",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),T.jsx("button",{onClick:()=>{confirm("")&&t(r.id)},className:"p-1 text-gray-400 hover:text-red-600 transition cursor-pointer",title:"",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.priority&&T.jsx(Rk,{value:r.priority}),T.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate flex-1",children:r.title||"()"}),T.jsx(Ck,{dueDate:r.dueDate})]}),T.jsx("div",{className:"mb-3",children:_?T.jsxs("button",{type:"button",onClick:()=>a(r.id,{progress:v?0:100}),className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition cursor-pointer ${v?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[v?T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),v?"":""]}):T.jsx(Cc,{progress:r.progress,delta:x})}),T.jsxs("div",{className:"flex-1 min-h-0 overflow-hidden",children:[r.done&&T.jsxs("div",{className:"mb-2",children:[T.jsx("span",{className:"text-xs text-green-700 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5 line-clamp-2",children:r.done})]}),r.progress>=100&&r.completionNotes&&T.jsxs("div",{className:"mb-2 bg-emerald-50 rounded-lg px-2 py-1.5",children:[T.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:" :"}),T.jsx("p",{className:"text-xs text-emerald-600 mt-0.5",children:r.completionNotes})]}),T.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[r.issues&&T.jsx("span",{className:"text-xs text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded",children:" "}),r.consultation&&T.jsx("span",{className:"text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:" "}),r.relatedUrls?.length>0&&T.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:[" ",r.relatedUrls.length,""]}),r.attachments?.length>0&&T.jsxs("span",{className:"text-xs text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded",children:[" ",r.attachments.length,""]})]})]}),T.jsx("button",{onClick:()=>f(!c),className:"text-xs text-blue-600 hover:text-blue-800 cursor-pointer mt-auto flex-shrink-0 pt-1",children:c?" ":" "}),c&&T.jsxs("div",{className:"mt-3 space-y-2.5 border-t border-gray-100 pt-3",children:[r.notDone&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-red-600 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.notDone}),r.notDoneReason&&T.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 italic",children:[": ",r.notDoneReason]})]}),r.issues&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-orange-600 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.issues})]}),r.consultation&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-purple-600 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.consultation})]}),r.remarks&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r.remarks})]}),r.relatedUrls?.length>0&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"URL:"}),T.jsx("div",{className:"mt-1 space-y-0.5",children:r.relatedUrls.map((V,L)=>T.jsxs("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),V.label||V.url]},L))})]}),r.attachments?.length>0&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),T.jsx("div",{className:"mt-1 space-y-1",children:r.attachments.map(V=>T.jsxs("a",{href:V.data,download:V.name,className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1 bg-gray-50 rounded px-2 py-1",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),V.name,T.jsxs("span",{className:"text-gray-400 ml-1",children:["(",R(V.size),")"]})]},V.id))})]}),Object.keys(r.weeklyHistory||{}).length>0&&T.jsxs("div",{children:[T.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),T.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:Object.entries(r.weeklyHistory).sort().slice(-6).map(([V,L])=>T.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:[t2(V),": ",_?L.progress>=100?"":"":`${L.progress}%`]},V))})]})]})]})})}function Nk({value:r,onChange:e}){const[t,i]=z.useState(0);return T.jsxs("div",{className:"flex items-center gap-0.5",children:[[1,2,3,4,5].map(a=>T.jsx("button",{type:"button",onClick:()=>e(a),onMouseEnter:()=>i(a),onMouseLeave:()=>i(0),className:"text-xl cursor-pointer transition-transform hover:scale-110",children:T.jsx("span",{className:a<=(t||r)?"text-yellow-400":"text-gray-300",children:""})},a)),T.jsx("span",{className:"text-xs text-gray-500 ml-2",children:OO.find(a=>a.value===(t||r))?.label||""})]})}function Mk({urls:r,onChange:e}){const t=()=>e([...r,{label:"",url:""}]),i=l=>e(r.filter((c,f)=>f!==l)),a=(l,c,f)=>{const g=r.map((p,_)=>_===l?{...p,[c]:f}:p);e(g)};return T.jsxs("div",{className:"space-y-2",children:[r.map((l,c)=>T.jsxs("div",{className:"flex gap-2 items-center",children:[T.jsx("input",{type:"text",value:l.label,onChange:f=>a(c,"label",f.target.value),placeholder:"",className:"w-1/3 px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),T.jsx("input",{type:"url",value:l.url,onChange:f=>a(c,"url",f.target.value),placeholder:"https://...",className:"flex-1 px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),T.jsx("button",{type:"button",onClick:()=>i(c),className:"p-1 text-red-400 hover:text-red-600 cursor-pointer",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),T.jsxs("button",{type:"button",onClick:t,className:"text-xs text-blue-600 hover:text-blue-800 cursor-pointer flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"URL"]})]})}function Ok({attachments:r,onChange:e}){const t=l=>{Array.from(l.target.files).forEach(f=>{if(f.size>2097152){alert(`${f.name} 2MB2MB`);return}const g=new FileReader;g.onload=()=>{const p={id:Date.now().toString(36)+Math.random().toString(36).substr(2,5),name:f.name,size:f.size,type:f.type,data:g.result,addedAt:new Date().toISOString()};e(_=>[..._,p])},g.readAsDataURL(f)}),l.target.value=""},i=l=>{e(c=>c.filter(f=>f.id!==l))},a=l=>l<1024?l+" B":l<1048576?(l/1024).toFixed(1)+" KB":(l/1048576).toFixed(1)+" MB";return T.jsxs("div",{className:"space-y-2",children:[r.map(l=>T.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2",children:[T.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),T.jsx("span",{className:"text-sm text-gray-700 truncate flex-1",children:l.name}),T.jsx("span",{className:"text-xs text-gray-400",children:a(l.size)}),T.jsx("button",{type:"button",onClick:()=>i(l.id),className:"p-0.5 text-red-400 hover:text-red-600 cursor-pointer",children:T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},l.id)),T.jsxs("label",{className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 cursor-pointer",children:[T.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"2MB",T.jsx("input",{type:"file",multiple:!0,onChange:t,className:"hidden"})]})]})}function Vk({task:r,defaultMemberId:e,onClose:t}){const{addTask:i,updateTask:a}=yi(),l=!!r,[c,f]=z.useState({memberId:r?.memberId||e||Fr[0].id,category:r?.category||Xi[0].id,taskType:r?.taskType||"project",title:r?.title||"",priority:r?.priority||3,dueDate:r?.dueDate||"",progress:r?.progress||0,done:r?.done||"",notDone:r?.notDone||"",notDoneReason:r?.notDoneReason||"",issues:r?.issues||"",consultation:r?.consultation||"",completionNotes:r?.completionNotes||"",remarks:r?.remarks||"",relatedUrls:r?.relatedUrls||[],attachments:r?.attachments||[]});z.useEffect(()=>{const _=v=>{v.key==="Escape"&&t()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[t]);const g=_=>{_.preventDefault(),l?a(r.id,c):i(c),t()},p=(_,v)=>f(x=>({...x,[_]:v}));return T.jsx("div",{className:"modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4",children:T.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto animate-fade-in",children:T.jsxs("div",{className:"p-6",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsx("h2",{className:"text-lg font-bold text-gray-900",children:l?"":""}),T.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 cursor-pointer",children:T.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),T.jsxs("form",{onSubmit:g,className:"space-y-5",children:[T.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),T.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("select",{value:c.memberId,onChange:_=>p("memberId",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Fr.map(_=>T.jsx("option",{value:_.id,children:_.nameJa},_.id))})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("select",{value:c.category,onChange:_=>p("category",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Xi.map(_=>T.jsx("option",{value:_.id,children:_.label},_.id))})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("div",{className:"flex gap-2",children:Kc.map(_=>T.jsxs("button",{type:"button",onClick:()=>{p("taskType",_.id),_.id==="routine"&&f(v=>({...v,taskType:_.id,progress:v.progress>=50?100:0}))},className:`flex-1 px-3 py-2 text-sm rounded-lg border transition cursor-pointer ${c.taskType===_.id?"border-blue-500 bg-blue-50 text-blue-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[_.icon," ",_.label]},_.id))})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("input",{type:"text",value:c.title,onChange:_=>p("title",_.target.value),placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),T.jsxs("div",{className:`grid ${c.taskType==="routine"?"grid-cols-1":"grid-cols-2"} gap-4`,children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx(Nk,{value:c.priority,onChange:_=>p("priority",_)})]}),c.taskType!=="routine"&&T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),T.jsx("input",{type:"date",value:c.dueDate,onChange:_=>p("dueDate",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),c.taskType==="routine"?T.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4",children:[T.jsx("label",{className:"block text-sm font-medium text-emerald-800 mb-2",children:""}),T.jsxs("div",{className:"flex gap-3",children:[T.jsxs("button",{type:"button",onClick:()=>p("progress",100),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition cursor-pointer ${c.progress>=100?"bg-emerald-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]}),T.jsxs("button",{type:"button",onClick:()=>p("progress",0),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition cursor-pointer ${c.progress<100?"bg-gray-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),""]})]})]}):T.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[T.jsxs("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:[": ",T.jsxs("span",{className:"text-blue-600 font-bold text-lg",children:[c.progress,"%"]})]}),T.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:c.progress,onChange:_=>p("progress",Number(_.target.value)),className:"w-full accent-blue-600"}),T.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[T.jsx("span",{children:"0%"}),T.jsx("span",{children:"25%"}),T.jsx("span",{children:"50%"}),T.jsx("span",{children:"75%"}),T.jsx("span",{children:"100%"})]})]}),T.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),""]})}),T.jsx("textarea",{value:c.done,onChange:_=>p("done",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-red-600 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),""]})}),T.jsx("textarea",{value:c.notDone,onChange:_=>p("notDone",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-red-400 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-red-300"}),""]})}),T.jsx("textarea",{value:c.notDoneReason,onChange:_=>p("notDoneReason",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-400 focus:border-red-400"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-orange-600 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),""]})}),T.jsx("textarea",{value:c.issues,onChange:_=>p("issues",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-purple-600 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),""]})}),T.jsx("textarea",{value:c.consultation,onChange:_=>p("consultation",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),T.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),c.progress>=100&&T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-emerald-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),""]})}),T.jsx("textarea",{value:c.completionNotes,onChange:_=>p("completionNotes",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-400"}),""]})}),T.jsx("textarea",{value:c.remarks,onChange:_=>p("remarks",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-400 focus:border-gray-400"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"URL"]})}),T.jsx(Mk,{urls:c.relatedUrls,onChange:_=>p("relatedUrls",_)})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:T.jsxs("span",{className:"inline-flex items-center gap-1",children:[T.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),""]})}),T.jsx(Ok,{attachments:c.attachments,onChange:_=>{typeof _=="function"?f(v=>({...v,attachments:_(v.attachments)})):p("attachments",_)}})]})]}),T.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[T.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:""}),T.jsx("button",{type:"submit",className:"px-6 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition cursor-pointer",children:l?"":""})]})]})]})})})}function kk({memberId:r}){const{getTasksByMember:e,reorderTasks:t}=yi(),[i,a]=z.useState(!1),[l,c]=z.useState(null),[f,g]=z.useState("all"),[p,_]=z.useState("all"),[v,x]=z.useState("default"),[R,V]=z.useState(null),L=XO($O(x_,{activationConstraint:{distance:8}})),q=Fr.find(oe=>oe.id===r),te=e(r);let X=[...te];f!=="all"&&(X=X.filter(oe=>oe.category===f)),p!=="all"&&(X=X.filter(oe=>oe.taskType===p)),v==="priority"?X.sort((oe,Q)=>(Q.priority||0)-(oe.priority||0)):v==="dueDate"?X.sort((oe,Q)=>oe.dueDate?Q.dueDate?new Date(oe.dueDate)-new Date(Q.dueDate):-1:1):v==="progress"&&X.sort((oe,Q)=>Q.progress-oe.progress);const re=v==="default",ce=X.map(oe=>oe.id),de=R?X.find(oe=>oe.id===R):null,le=te.length>0?Math.round(te.reduce((oe,Q)=>oe+Q.progress,0)/te.length):0,C=te.filter(oe=>oe.progress>=100).length,I=te.filter(oe=>oe.issues).length,A=oe=>{c(oe),a(!0)},M=()=>{a(!1),c(null)},N=oe=>{V(oe.active.id)},k=oe=>{V(null);const{active:Q,over:se}=oe;if(!se||Q.id===se.id)return;const _e=ce.indexOf(Q.id),Ie=ce.indexOf(se.id);if(_e===-1||Ie===-1)return;const Pe=w_(ce,_e,Ie);t(Pe)},D=()=>{V(null)};if(!q)return T.jsx("div",{className:"p-6 text-gray-500",children:""});const Ce=()=>X.length===0?T.jsxs("div",{className:"text-center py-12",children:[T.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),T.jsx("p",{className:"text-gray-500",children:""}),T.jsx("button",{onClick:()=>{c(null),a(!0)},className:"mt-3 text-blue-600 hover:text-blue-800 text-sm cursor-pointer",children:"+ "})]}):re?T.jsxs(XV,{sensors:L,collisionDetection:nV,onDragStart:N,onDragEnd:k,onDragCancel:D,children:[T.jsx(vk,{items:ce,strategy:A_,children:T.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:X.map(oe=>T.jsx(Dk,{task:oe,onEdit:A,isDragEnabled:!0},oe.id))})}),T.jsx(gk,{children:de?T.jsx("div",{className:"opacity-90 rotate-2 shadow-2xl",children:T.jsx(fy,{task:de,onEdit:()=>{}})}):null})]}):T.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:X.map(oe=>T.jsx(fy,{task:oe,onEdit:A},oe.id))});return T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"shadow-lg rounded-full",children:T.jsx(y_,{member:q,size:"lg"})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900",children:q.nameJa}),T.jsxs("p",{className:"text-sm text-gray-500",children:[q.nameEn," | ",te.length," |  ",C," |  ",le,"%",I>0&&T.jsxs("span",{className:"text-orange-500 ml-1",children:["|  ",I,""]})]})]})]}),T.jsxs("button",{onClick:()=>{c(null),a(!0)},className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition flex items-center gap-1 cursor-pointer",children:[T.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),""]})]}),T.jsxs("div",{className:"flex items-center gap-4 mb-4 flex-wrap",children:[T.jsxs("div",{className:"flex gap-1.5 flex-wrap flex-1",children:[T.jsxs("button",{onClick:()=>g("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${f==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",te.length,")"]}),Xi.map(oe=>{const Q=te.filter(se=>se.category===oe.id).length;return Q===0?null:T.jsxs("button",{onClick:()=>g(oe.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${f===oe.id?"text-white":"text-gray-600 hover:opacity-80"}`,style:f===oe.id?{backgroundColor:oe.color}:{backgroundColor:`${oe.color}20`,color:oe.color},children:[oe.label," (",Q,")"]},oe.id)})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("select",{value:p,onChange:oe=>_(oe.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-lg",children:[T.jsx("option",{value:"all",children:""}),Kc.map(oe=>T.jsxs("option",{value:oe.id,children:[oe.icon," ",oe.label]},oe.id))]}),T.jsxs("select",{value:v,onChange:oe=>x(oe.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-lg",children:[T.jsx("option",{value:"default",children:""}),T.jsx("option",{value:"priority",children:""}),T.jsx("option",{value:"dueDate",children:""}),T.jsx("option",{value:"progress",children:""})]})]})]}),re&&X.length>1&&T.jsxs("p",{className:"text-xs text-gray-400 mb-3 flex items-center gap-1",children:[T.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),""]}),Ce(),i&&T.jsx(Vk,{task:l,defaultMemberId:r,onClose:M})]})}function Pk({selectedMember:r}){const{deletedTasks:e,restoreFromTrash:t,permanentlyDelete:i,emptyTrash:a}=yi(),[l,c]=z.useState("all"),g=Fr.find(R=>R.id===r)?.role==="manager",_=[...l==="all"?e:e.filter(R=>R.memberId===l)].sort((R,V)=>new Date(V.deletedAt)-new Date(R.deletedAt)),v=R=>{if(!R)return"";const V=new Date(R);return`${V.getFullYear()}/${V.getMonth()+1}/${V.getDate()} ${V.getHours()}:${String(V.getMinutes()).padStart(2,"0")}`},x=R=>{if(!R)return 0;const V=Date.now()-new Date(R).getTime();return Math.floor(V/(1e3*60*60*24))};return T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:T.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),T.jsxs("p",{className:"text-sm text-gray-500",children:[e.length,""]}),!g&&e.length>0&&T.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:" "})]})]}),e.length>0&&g&&T.jsx("button",{onClick:()=>{confirm(`
${e.length}`)&&a()},className:"px-3 py-1.5 text-xs text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition cursor-pointer",children:" "})]}),e.length>0&&T.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[T.jsxs("button",{onClick:()=>c("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${l==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",e.length,")"]}),Fr.map(R=>{const V=e.filter(L=>L.memberId===R.id).length;return V===0?null:T.jsxs("button",{onClick:()=>c(R.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${l===R.id?"text-white":"hover:opacity-80"}`,style:l===R.id?{backgroundColor:R.color}:{backgroundColor:`${R.color}20`,color:R.color},children:[R.nameJa," (",V,")"]},R.id)})]}),_.length>0?T.jsx("div",{className:"space-y-3",children:_.map(R=>{const V=Fr.find(X=>X.id===R.memberId),L=Xi.find(X=>X.id===R.category),q=Kc.find(X=>X.id===R.taskType),te=x(R.deletedAt);return T.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 opacity-75 hover:opacity-100 transition",children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 flex-wrap",children:[V&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium",style:{backgroundColor:V.color},children:V.nameJa}),L&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${L.color}20`,color:L.color},children:L.label}),q&&T.jsxs("span",{className:"text-xs text-gray-500",children:[q.icon," ",q.label]})]}),T.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:R.title||"()"}),T.jsx("div",{className:"mb-2 max-w-xs",children:T.jsx(Cc,{progress:R.progress,delta:null})}),T.jsxs("p",{className:"text-xs text-gray-400",children:[": ",v(R.deletedAt),te>0&&T.jsxs("span",{className:"ml-1",children:["(",te,")"]})]})]}),T.jsxs("div",{className:"flex flex-col gap-1.5 ml-3 flex-shrink-0",children:[T.jsxs("button",{onClick:()=>t(R.id),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition cursor-pointer flex items-center gap-1",children:[T.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),""]}),g&&T.jsx("button",{onClick:()=>{confirm("")&&i(R.id)},className:"px-3 py-1.5 text-xs text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition cursor-pointer",children:""})]})]})},R.id)})}):T.jsxs("div",{className:"text-center py-16",children:[T.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:T.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),T.jsx("p",{className:"text-gray-500 font-medium",children:""}),T.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]})]})}function jk(){const{archivedTasks:r,restoreFromArchive:e}=yi(),[t,i]=z.useState("all"),[a,l]=z.useState("all"),[c,f]=z.useState("");let g=r;if(t!=="all"&&(g=g.filter(v=>v.memberId===t)),a!=="all"&&(g=g.filter(v=>v.category===a)),c.trim()){const v=c.toLowerCase();g=g.filter(x=>(x.title||"").toLowerCase().includes(v)||(x.done||"").toLowerCase().includes(v)||(x.completionNotes||"").toLowerCase().includes(v))}const p=[...g].sort((v,x)=>new Date(x.archivedAt)-new Date(v.archivedAt)),_=v=>{if(!v)return"";const x=new Date(v);return`${x.getFullYear()}/${x.getMonth()+1}/${x.getDate()}`};return T.jsxs("div",{className:"p-6 animate-fade-in",children:[T.jsx("div",{className:"flex items-center justify-between mb-6",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:T.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),T.jsxs("p",{className:"text-sm text-gray-500",children:[r.length,""]})]})]})}),r.length>0&&T.jsxs("div",{className:"space-y-3 mb-4",children:[T.jsxs("div",{className:"relative",children:[T.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),T.jsx("input",{type:"text",value:c,onChange:v=>f(v.target.value),placeholder:"...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),T.jsxs("div",{className:"flex gap-2 flex-wrap",children:[T.jsx("button",{onClick:()=>i("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${t==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),Fr.map(v=>{const x=r.filter(R=>R.memberId===v.id).length;return x===0?null:T.jsxs("button",{onClick:()=>i(v.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${t===v.id?"text-white":"hover:opacity-80"}`,style:t===v.id?{backgroundColor:v.color}:{backgroundColor:`${v.color}20`,color:v.color},children:[v.nameJa," (",x,")"]},v.id)})]}),T.jsxs("div",{className:"flex gap-2 flex-wrap",children:[T.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${a==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),Xi.map(v=>{const x=r.filter(R=>R.category===v.id).length;return x===0?null:T.jsxs("button",{onClick:()=>l(v.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${a===v.id?"text-white":"hover:opacity-80"}`,style:a===v.id?{backgroundColor:v.color}:{backgroundColor:`${v.color}20`,color:v.color},children:[v.label," (",x,")"]},v.id)})]})]}),p.length>0?T.jsx("div",{className:"space-y-3",children:p.map(v=>{const x=Fr.find(L=>L.id===v.memberId),R=Xi.find(L=>L.id===v.category),V=Kc.find(L=>L.id===v.taskType);return T.jsx("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 hover:shadow-md transition",children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 flex-wrap",children:[x&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium",style:{backgroundColor:x.color},children:x.nameJa}),R&&T.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${R.color}20`,color:R.color},children:R.label}),V&&T.jsxs("span",{className:"text-xs text-gray-500",children:[V.icon," ",V.label]}),v.priority&&T.jsx("span",{className:"inline-flex items-center",children:[1,2,3,4,5].map(L=>T.jsx("span",{className:`text-xs ${L<=v.priority?"text-yellow-400":"text-gray-300"}`,children:""},L))})]}),T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsx("span",{className:"text-emerald-500",children:""}),T.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:v.title||"()"})]}),T.jsx("div",{className:"mb-2 max-w-xs",children:T.jsx(Cc,{progress:v.progress,delta:null})}),v.completionNotes&&T.jsxs("div",{className:"bg-emerald-50 rounded-lg px-2 py-1.5 mb-2",children:[T.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:":"}),T.jsx("p",{className:"text-xs text-emerald-600 mt-0.5",children:v.completionNotes})]}),v.done&&T.jsxs("p",{className:"text-xs text-gray-500 mb-1 line-clamp-2",children:[T.jsx("span",{className:"font-medium text-gray-600",children:": "}),v.done]}),T.jsxs("p",{className:"text-xs text-gray-400",children:[": ",_(v.archivedAt),v.createdAt&&T.jsxs("span",{className:"ml-2",children:[": ",_(v.createdAt)]})]})]}),T.jsx("div",{className:"ml-3 flex-shrink-0",children:T.jsxs("button",{onClick:()=>e(v.id),className:"px-3 py-1.5 text-xs bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition cursor-pointer flex items-center gap-1",children:[T.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),""]})})]})},v.id)})}):T.jsxs("div",{className:"text-center py-16",children:[T.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:T.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),T.jsx("p",{className:"text-gray-500 font-medium",children:r.length>0?"":""}),T.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]})]})}function Lk(){const{tasks:r,exportData:e,importData:t}=yi(),[i,a]=z.useState("idle"),[l,c]=z.useState(""),[f,g]=z.useState({instanceUrl:localStorage.getItem("sf-instance-url")||"",accessToken:localStorage.getItem("sf-access-token")||""}),[p,_]=z.useState(!1),v=()=>{localStorage.setItem("sf-instance-url",f.instanceUrl),localStorage.setItem("sf-access-token",f.accessToken),_(!1),c("")},x=async()=>{if(!f.instanceUrl||!f.accessToken){c("Salesforce"),_(!0);return}a("syncing"),c("Salesforce...");try{for(const V of r){const L={Name:V.title||"(Untitled)",Member_Id__c:V.memberId,Category__c:V.category,Progress__c:V.progress,Done__c:V.done||"",Not_Done__c:V.notDone||"",Not_Done_Reason__c:V.notDoneReason||"",Issues__c:V.issues||"",Consultation__c:V.consultation||"",External_Id__c:V.id},q=await fetch(`${f.instanceUrl}/services/data/v59.0/sobjects/Weekly_Task__c/External_Id__c/${V.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${f.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(L)});if(!q.ok&&q.status!==201&&q.status!==204)throw new Error(`Sync failed for task: ${V.title}`)}a("success"),c(`${r.length}Salesforce`)}catch(V){a("error"),c(`: ${V.message}`)}},R=async()=>{if(!f.instanceUrl||!f.accessToken){c("Salesforce"),_(!0);return}a("syncing"),c("Salesforce...");try{const V=encodeURIComponent("SELECT External_Id__c, Name, Member_Id__c, Category__c, Progress__c, Done__c, Not_Done__c, Not_Done_Reason__c, Issues__c, Consultation__c FROM Weekly_Task__c"),L=await fetch(`${f.instanceUrl}/services/data/v59.0/query/?q=${V}`,{headers:{Authorization:`Bearer ${f.accessToken}`}});if(!L.ok)throw new Error("Failed to fetch from Salesforce");const te=(await L.json()).records.map(X=>({id:X.External_Id__c,memberId:X.Member_Id__c,category:X.Category__c,title:X.Name,progress:X.Progress__c||0,done:X.Done__c||"",notDone:X.Not_Done__c||"",notDoneReason:X.Not_Done_Reason__c||"",issues:X.Issues__c||"",consultation:X.Consultation__c||"",weeklyHistory:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));t({tasks:te}),a("success"),c(`${te.length}`)}catch(V){a("error"),c(`: ${V.message}`)}};return T.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[T.jsxs("div",{className:"flex items-center justify-between mb-3",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("svg",{className:"w-5 h-5 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:T.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),T.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Salesforce"})]}),T.jsx("button",{onClick:()=>_(!p),className:"text-xs text-gray-500 hover:text-gray-700 cursor-pointer",children:p?"":""})]}),p&&T.jsxs("div",{className:"mb-3 space-y-2 p-3 bg-gray-50 rounded-lg",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-xs text-gray-600",children:"Instance URL"}),T.jsx("input",{type:"text",value:f.instanceUrl,onChange:V=>g(L=>({...L,instanceUrl:V.target.value})),placeholder:"https://your-org.my.salesforce.com",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-0.5"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs text-gray-600",children:"Access Token"}),T.jsx("input",{type:"password",value:f.accessToken,onChange:V=>g(L=>({...L,accessToken:V.target.value})),placeholder:"Your Salesforce access token",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-0.5"})]}),T.jsx("button",{onClick:v,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:""})]}),l&&T.jsx("div",{className:`text-xs mb-3 p-2 rounded ${i==="error"?"bg-red-50 text-red-600":i==="success"?"bg-green-50 text-green-600":"bg-blue-50 text-blue-600"}`,children:l}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:x,disabled:i==="syncing",className:"flex-1 px-3 py-2 text-xs bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition disabled:opacity-50 cursor-pointer",children:i==="syncing"?"...":"SF "}),T.jsx("button",{onClick:R,disabled:i==="syncing",className:"flex-1 px-3 py-2 text-xs bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition disabled:opacity-50 cursor-pointer",children:i==="syncing"?"...":"SF "})]})]})}function Uk(){const{exportData:r,importData:e,isLoading:t}=yi(),[i,a]=z.useState(Fr[0].id),[l,c]=z.useState("dashboard");if(t)return T.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),T.jsx("p",{className:"text-gray-500 text-sm",children:"..."})]})});const f=R=>{a(R),c("member")},g=()=>{c("dashboard")},p=R=>{c(R)},_=()=>{const R=r(),V=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),L=URL.createObjectURL(V),q=document.createElement("a");q.href=L,q.download=`weekly-tasks-${new Date().toISOString().slice(0,10)}.json`,q.click(),URL.revokeObjectURL(L)},v=R=>{const V=R.target.files?.[0];if(!V)return;const L=new FileReader;L.onload=q=>{try{const te=JSON.parse(q.target.result);confirm(`${te.tasks?.length||0}
`)&&e(te)}catch{alert("")}},L.readAsText(V),R.target.value=""},x=()=>{switch(l){case"dashboard":return T.jsx(tx,{onSelectMember:f});case"member":return T.jsx(kk,{memberId:i});case"trash":return T.jsx(Pk,{selectedMember:i});case"archive":return T.jsx(jk,{});default:return T.jsx(tx,{onSelectMember:f})}};return T.jsxs("div",{className:"min-h-screen bg-gray-50",children:[T.jsx(MO,{onExport:_,onImport:v}),T.jsxs("div",{className:"flex",children:[T.jsx(VO,{selectedMember:i,onSelectMember:f,showDashboard:l==="dashboard",onShowDashboard:g,activeView:l,onChangeView:p}),T.jsx("main",{className:"flex-1 min-h-[calc(100vh-57px)] overflow-y-auto",children:x()}),T.jsxs("aside",{className:"w-72 border-l border-gray-200 bg-white p-4 h-[calc(100vh-57px)] overflow-y-auto flex-shrink-0",children:[T.jsx(Lk,{}),T.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[T.jsx("h4",{className:"text-xs font-semibold text-gray-500 mb-2",children:""}),T.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" "}),T.jsx("li",{children:" /"})]})]})]})]})]})}ZI.createRoot(document.getElementById("root")).render(T.jsx(z.StrictMode,{children:T.jsx(NO,{children:T.jsx(Uk,{})})}));
