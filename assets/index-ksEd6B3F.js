(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function CR(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _p={exports:{}},Ju={};var vT;function DR(){if(vT)return Ju;vT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Ju.Fragment=e,Ju.jsx=t,Ju.jsxs=t,Ju}var bT;function NR(){return bT||(bT=1,_p.exports=DR()),_p.exports}var b=NR(),vp={exports:{}},Ve={};var TT;function OR(){if(TT)return Ve;TT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function I(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function te(P,J,se){this.props=P,this.context=J,this.refs=q,this.updater=se||V}te.prototype.isReactComponent={},te.prototype.setState=function(P,J){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,J,"setState")},te.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function X(){}X.prototype=te.prototype;function re(P,J,se){this.props=P,this.context=J,this.refs=q,this.updater=se||V}var ue=re.prototype=new X;ue.constructor=re,U(ue,te.prototype),ue.isPureReactComponent=!0;var fe=Array.isArray;function ce(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function w(P,J,se){var me=se.ref;return{$$typeof:r,type:P,key:J,ref:me!==void 0?me:null,props:se}}function O(P,J){return w(P.type,J,P.props)}function N(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function k(P){var J={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(se){return J[se]})}var D=/\/+/g;function De(P,J){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):J.toString(36)}function he(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ce,ce):(P.status="pending",P.then(function(J){P.status==="pending"&&(P.status="fulfilled",P.value=J)},function(J){P.status==="pending"&&(P.status="rejected",P.reason=J)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Q(P,J,se,me,ye){var Ae=typeof P;(Ae==="undefined"||Ae==="boolean")&&(P=null);var ke=!1;if(P===null)ke=!0;else switch(Ae){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(P.$$typeof){case r:case e:ke=!0;break;case _:return ke=P._init,Q(ke(P._payload),J,se,me,ye)}}if(ke)return ye=ye(P),ke=me===""?"."+De(P,0):me,fe(ye)?(se="",ke!=null&&(se=ke.replace(D,"$&/")+"/"),Q(ye,J,se,"",function(Be){return Be})):ye!=null&&(N(ye)&&(ye=O(ye,se+(ye.key==null||P&&P.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+ke)),J.push(ye)),1;ke=0;var Ze=me===""?".":me+":";if(fe(P))for(var Ke=0;Ke<P.length;Ke++)me=P[Ke],Ae=Ze+De(me,Ke),ke+=Q(me,J,se,Ae,ye);else if(Ke=I(P),typeof Ke=="function")for(P=Ke.call(P),Ke=0;!(me=P.next()).done;)me=me.value,Ae=Ze+De(me,Ke++),ke+=Q(me,J,se,Ae,ye);else if(Ae==="object"){if(typeof P.then=="function")return Q(he(P),J,se,me,ye);throw J=String(P),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ke}function le(P,J,se){if(P==null)return P;var me=[],ye=0;return Q(P,me,"","",function(Ae){return J.call(se,Ae,ye++)}),me}function Ee(P){if(P._status===-1){var J=P._result;J=J(),J.then(function(se){(P._status===0||P._status===-1)&&(P._status=1,P._result=se)},function(se){(P._status===0||P._status===-1)&&(P._status=2,P._result=se)}),P._status===-1&&(P._status=0,P._result=J)}if(P._status===1)return P._result.default;throw P._result}var Ne=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ze={map:le,forEach:function(P,J,se){le(P,function(){J.apply(this,arguments)},se)},count:function(P){var J=0;return le(P,function(){J++}),J},toArray:function(P){return le(P,function(J){return J})||[]},only:function(P){if(!N(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ve.Activity=v,Ve.Children=ze,Ve.Component=te,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=re,Ve.StrictMode=i,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(P){return C.H.useMemoCache(P)}},Ve.cache=function(P){return function(){return P.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(P,J,se){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var me=U({},P.props),ye=P.key;if(J!=null)for(Ae in J.key!==void 0&&(ye=""+J.key),J)!R.call(J,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&J.ref===void 0||(me[Ae]=J[Ae]);var Ae=arguments.length-2;if(Ae===1)me.children=se;else if(1<Ae){for(var ke=Array(Ae),Ze=0;Ze<Ae;Ze++)ke[Ze]=arguments[Ze+2];me.children=ke}return w(P.type,ye,me)},Ve.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Ve.createElement=function(P,J,se){var me,ye={},Ae=null;if(J!=null)for(me in J.key!==void 0&&(Ae=""+J.key),J)R.call(J,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=J[me]);var ke=arguments.length-2;if(ke===1)ye.children=se;else if(1<ke){for(var Ze=Array(ke),Ke=0;Ke<ke;Ke++)Ze[Ke]=arguments[Ke+2];ye.children=Ze}if(P&&P.defaultProps)for(me in ke=P.defaultProps,ke)ye[me]===void 0&&(ye[me]=ke[me]);return w(P,Ae,ye)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(P){return{$$typeof:f,render:P}},Ve.isValidElement=N,Ve.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:Ee}},Ve.memo=function(P,J){return{$$typeof:p,type:P,compare:J===void 0?null:J}},Ve.startTransition=function(P){var J=C.T,se={};C.T=se;try{var me=P(),ye=C.S;ye!==null&&ye(se,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ce,Ne)}catch(Ae){Ne(Ae)}finally{J!==null&&se.types!==null&&(J.types=se.types),C.T=J}},Ve.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ve.use=function(P){return C.H.use(P)},Ve.useActionState=function(P,J,se){return C.H.useActionState(P,J,se)},Ve.useCallback=function(P,J){return C.H.useCallback(P,J)},Ve.useContext=function(P){return C.H.useContext(P)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(P,J){return C.H.useDeferredValue(P,J)},Ve.useEffect=function(P,J){return C.H.useEffect(P,J)},Ve.useEffectEvent=function(P){return C.H.useEffectEvent(P)},Ve.useId=function(){return C.H.useId()},Ve.useImperativeHandle=function(P,J,se){return C.H.useImperativeHandle(P,J,se)},Ve.useInsertionEffect=function(P,J){return C.H.useInsertionEffect(P,J)},Ve.useLayoutEffect=function(P,J){return C.H.useLayoutEffect(P,J)},Ve.useMemo=function(P,J){return C.H.useMemo(P,J)},Ve.useOptimistic=function(P,J){return C.H.useOptimistic(P,J)},Ve.useReducer=function(P,J,se){return C.H.useReducer(P,J,se)},Ve.useRef=function(P){return C.H.useRef(P)},Ve.useState=function(P){return C.H.useState(P)},Ve.useSyncExternalStore=function(P,J,se){return C.H.useSyncExternalStore(P,J,se)},Ve.useTransition=function(){return C.H.useTransition()},Ve.version="19.2.4",Ve}var ET;function zy(){return ET||(ET=1,vp.exports=OR()),vp.exports}var z=zy();const qt=CR(z);var bp={exports:{}},Zu={},Tp={exports:{}},Ep={};var ST;function MR(){return ST||(ST=1,(function(r){function e(Q,le){var Ee=Q.length;Q.push(le);e:for(;0<Ee;){var Ne=Ee-1>>>1,ze=Q[Ne];if(0<a(ze,le))Q[Ne]=le,Q[Ee]=ze,Ee=Ne;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var le=Q[0],Ee=Q.pop();if(Ee!==le){Q[0]=Ee;e:for(var Ne=0,ze=Q.length,P=ze>>>1;Ne<P;){var J=2*(Ne+1)-1,se=Q[J],me=J+1,ye=Q[me];if(0>a(se,Ee))me<ze&&0>a(ye,se)?(Q[Ne]=ye,Q[me]=Ee,Ne=me):(Q[Ne]=se,Q[J]=Ee,Ne=J);else if(me<ze&&0>a(ye,Ee))Q[Ne]=ye,Q[me]=Ee,Ne=me;else break e}}return le}function a(Q,le){var Ee=Q.sortIndex-le.sortIndex;return Ee!==0?Ee:Q.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var g=[],p=[],_=1,v=null,S=3,I=!1,V=!1,U=!1,q=!1,te=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ue(Q){for(var le=t(p);le!==null;){if(le.callback===null)i(p);else if(le.startTime<=Q)i(p),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(p)}}function fe(Q){if(U=!1,ue(Q),!V)if(t(g)!==null)V=!0,ce||(ce=!0,k());else{var le=t(p);le!==null&&he(fe,le.startTime-Q)}}var ce=!1,C=-1,R=5,w=-1;function O(){return q?!0:!(r.unstable_now()-w<R)}function N(){if(q=!1,ce){var Q=r.unstable_now();w=Q;var le=!0;try{e:{V=!1,U&&(U=!1,X(C),C=-1),I=!0;var Ee=S;try{t:{for(ue(Q),v=t(g);v!==null&&!(v.expirationTime>Q&&O());){var Ne=v.callback;if(typeof Ne=="function"){v.callback=null,S=v.priorityLevel;var ze=Ne(v.expirationTime<=Q);if(Q=r.unstable_now(),typeof ze=="function"){v.callback=ze,ue(Q),le=!0;break t}v===t(g)&&i(g),ue(Q)}else i(g);v=t(g)}if(v!==null)le=!0;else{var P=t(p);P!==null&&he(fe,P.startTime-Q),le=!1}}break e}finally{v=null,S=Ee,I=!1}le=void 0}}finally{le?k():ce=!1}}}var k;if(typeof re=="function")k=function(){re(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,De=D.port2;D.port1.onmessage=N,k=function(){De.postMessage(null)}}else k=function(){te(N,0)};function he(Q,le){C=te(function(){Q(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var Ee=S;S=le;try{return Q()}finally{S=Ee}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Ee=S;S=Q;try{return le()}finally{S=Ee}},r.unstable_scheduleCallback=function(Q,le,Ee){var Ne=r.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ne+Ee:Ne):Ee=Ne,Q){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Ee+ze,Q={id:_++,callback:le,priorityLevel:Q,startTime:Ee,expirationTime:ze,sortIndex:-1},Ee>Ne?(Q.sortIndex=Ee,e(p,Q),t(g)===null&&Q===t(p)&&(U?(X(C),C=-1):U=!0,he(fe,Ee-Ne))):(Q.sortIndex=ze,e(g,Q),V||I||(V=!0,ce||(ce=!0,k()))),Q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Q){var le=S;return function(){var Ee=S;S=le;try{return Q.apply(this,arguments)}finally{S=Ee}}}})(Ep)),Ep}var xT;function VR(){return xT||(xT=1,Tp.exports=MR()),Tp.exports}var Sp={exports:{}},Yn={};var AT;function kR(){if(AT)return Yn;AT=1;var r=zy();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:p,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},Yn.flushSync=function(g){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=p,i.p=_,i.d.f()}},Yn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},Yn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Yn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,v=f(_,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:I}):_==="script"&&i.d.X(g,{crossOrigin:v,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},Yn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,v=f(_,p.crossOrigin);i.d.L(g,_,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=f(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},Yn.requestFormReset=function(g){i.d.r(g)},Yn.unstable_batchedUpdates=function(g,p){return g(p)},Yn.useFormState=function(g,p,_){return c.H.useFormState(g,p,_)},Yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Yn.version="19.2.4",Yn}var wT;function $S(){if(wT)return Sp.exports;wT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sp.exports=kR(),Sp.exports}var IT;function PR(){if(IT)return Zu;IT=1;var r=VR(),e=zy(),t=$S();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(i(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return g(d),n;if(m===u)return g(d),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=m;else{for(var T=!1,x=d.child;x;){if(x===o){T=!0,o=d,u=m;break}if(x===u){T=!0,u=d,o=m;break}x=x.sibling}if(!T){for(x=m.child;x;){if(x===o){T=!0,o=m,u=d;break}if(x===u){T=!0,u=m,o=d;break}x=x.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function De(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case te:return"Profiler";case q:return"StrictMode";case fe:return"Suspense";case ce:return"SuspenseList";case w:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case re:return n.displayName||"Context";case X:return(n._context.displayName||"Context")+".Consumer";case ue:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}var he=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Ne=[],ze=-1;function P(n){return{current:n}}function J(n){0>ze||(n.current=Ne[ze],Ne[ze]=null,ze--)}function se(n,s){ze++,Ne[ze]=n.current,n.current=s}var me=P(null),ye=P(null),Ae=P(null),ke=P(null);function Ze(n,s){switch(se(Ae,s),se(ye,n),se(me,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Fb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Fb(s),n=Hb(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(me),se(me,n)}function Ke(){J(me),J(ye),J(Ae)}function Be(n){n.memoizedState!==null&&se(ke,n);var s=me.current,o=Hb(s,n.type);s!==o&&(se(ye,n),se(me,o))}function Jn(n){ye.current===n&&(J(me),J(ye)),ke.current===n&&(J(ke),Qu._currentValue=Ee)}var rn,sn;function Ct(n){if(rn===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);rn=s&&s[1]||"",sn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rn+n+sn}var an=!1;function xn(n,s){if(!n||an)return"";an=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var Y=W}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(W){Y=W}n.call(ie.prototype)}}else{try{throw Error()}catch(W){Y=W}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),T=m[0],x=m[1];if(T&&x){var M=T.split(`
`),K=x.split(`
`);for(d=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(u===M.length||d===K.length)for(u=M.length-1,d=K.length-1;1<=u&&0<=d&&M[u]!==K[d];)d--;for(;1<=u&&0<=d;u--,d--)if(M[u]!==K[d]){if(u!==1||d!==1)do if(u--,d--,0>d||M[u]!==K[d]){var Z=`
`+M[u].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=u&&0<=d);break}}}finally{an=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ct(o):""}function Pr(n,s){switch(n.tag){case 26:case 27:case 5:return Ct(n.type);case 16:return Ct("Lazy");case 13:return n.child!==s&&s!==null?Ct("Suspense Fallback"):Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return xn(n.type,!1);case 11:return xn(n.type.render,!1);case 1:return xn(n.type,!0);case 31:return Ct("Activity");default:return""}}function Zn(n){try{var s="",o=null;do s+=Pr(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var dt=Object.prototype.hasOwnProperty,rt=r.unstable_scheduleCallback,Gn=r.unstable_cancelCallback,Jr=r.unstable_shouldYield,zi=r.unstable_requestPaint,Kt=r.unstable_now,er=r.unstable_getCurrentPriorityLevel,ur=r.unstable_ImmediatePriority,Ut=r.unstable_UserBlockingPriority,pn=r.unstable_NormalPriority,Lr=r.unstable_LowPriority,pi=r.unstable_IdlePriority,On=r.log,yi=r.unstable_setDisableYieldValue,An=null,Vt=null;function wt(n){if(typeof On=="function"&&yi(n),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(An,n)}catch{}}var at=Math.clz32?Math.clz32:bs,_i=Math.log,Tr=Math.LN2;function bs(n){return n>>>=0,n===0?32:31-(_i(n)/Tr|0)|0}var Mn=256,cr=262144,Fe=4194304;function ct(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function It(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,m=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var x=u&134217727;return x!==0?(u=x&~m,u!==0?d=ct(u):(T&=x,T!==0?d=ct(T):o||(o=x&~n,o!==0&&(d=ct(o))))):(x=u&~m,x!==0?d=ct(x):T!==0?d=ct(T):o||(o=u&~n,o!==0&&(d=ct(o)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:d}function Yt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function $e(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dt(){var n=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),n}function zt(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Vn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Nt(n,s,o,u,d,m){var T=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var x=n.entanglements,M=n.expirationTimes,K=n.hiddenUpdates;for(o=T&~o;0<o;){var Z=31-at(o),ie=1<<Z;x[Z]=0,M[Z]=-1;var Y=K[Z];if(Y!==null)for(K[Z]=null,Z=0;Z<Y.length;Z++){var W=Y[Z];W!==null&&(W.lane&=-536870913)}o&=~ie}u!==0&&yn(n,u,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(T&~s))}function yn(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-at(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function _n(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-at(o),d=1<<u;d&s|n[u]&s&&(n[u]|=s),o&=~d}}function kn(n,s){var o=s&-s;return o=(o&42)!==0?1:kt(o),(o&(n.suspendedLanes|s))!==0?0:o}function kt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Bt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Kn(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:dT(n.type))}function on(n,s){var o=le.p;try{return le.p=n,s()}finally{le.p=o}}var vn=Math.random().toString(36).slice(2),Ft="__reactFiber$"+vn,_t="__reactProps$"+vn,Er="__reactContainer$"+vn,Bi="__reactEvents$"+vn,wo="__reactListeners$"+vn,Ca="__reactHandles$"+vn,Io="__reactResources$"+vn,ve="__reactMarker$"+vn;function L(n){delete n[Ft],delete n[_t],delete n[Bi],delete n[wo],delete n[Ca]}function oe(n){var s=n[Ft];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Er]||o[Ft]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Xb(n);n!==null;){if(o=n[Ft])return o;n=Xb(n)}return s}n=o,o=n.parentNode}return null}function _e(n){if(n=n[Ft]||n[Er]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function qe(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function xt(n){var s=n[Io];return s||(s=n[Io]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function je(n){n[ve]=!0}var ln=new Set,tr={};function Pn(n,s){hr(n,s),hr(n+"Capture",s)}function hr(n,s){for(tr[n]=s,n=0;n<s.length;n++)ln.add(s[n])}var Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ts={},Es={};function mh(n){return dt.call(Es,n)?!0:dt.call(Ts,n)?!1:Ht.test(n)?Es[n]=!0:(Ts[n]=!0,!1)}function Ro(n,s,o){if(mh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Sr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function un(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ss(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function au(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(T){o=""+T,m.call(this,T)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ft(n){if(!n._valueTracker){var s=Ss(n)?"checked":"value";n._valueTracker=au(n,s,""+n[s])}}function Da(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Ss(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function vi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Na=/[\n"\\]/g;function dr(n){return n.replace(Na,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Co(n,s,o,u,d,m,T,x){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),s!=null?T==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+wn(s)):n.value!==""+wn(s)&&(n.value=""+wn(s)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),s!=null?ou(n,T,wn(s)):o!=null?ou(n,T,wn(o)):u!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+wn(x):n.removeAttribute("name")}function gh(n,s,o,u,d,m,T,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ft(n);return}o=o!=null?""+wn(o):"",s=s!=null?""+wn(s):o,x||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=x?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),ft(n)}function ou(n,s,o){s==="number"&&vi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function xs(n,s,o,u){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+wn(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function ph(n,s,o){if(s!=null&&(s=""+wn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+wn(o):""}function As(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(he(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=wn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),ft(n)}function fr(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var yh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||yh.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function uu(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&lu(n,d,u)}else for(var m in s)s.hasOwnProperty(m)&&lu(n,m,s[m])}function Do(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ws=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(n){return ws.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zr(){}var cu=null;function jr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Is=null,bi=null;function Oa(n){var s=_e(n);if(s&&(n=s.stateNode)){var o=n[_t]||null;e:switch(n=s.stateNode,s.type){case"input":if(Co(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+dr(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var d=u[_t]||null;if(!d)throw Error(i(90));Co(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Da(u)}break e;case"textarea":ph(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&xs(n,!!o.multiple,s,!1)}}}var Oo=!1;function Rs(n,s,o){if(Oo)return n(s,o);Oo=!0;try{var u=n(s);return u}finally{if(Oo=!1,(Is!==null||bi!==null)&&(hd(),Is&&(s=Is,n=bi,bi=Is=null,Oa(s),n)))for(s=0;s<n.length;s++)Oa(n[s])}}function ei(n,s){var o=n.stateNode;if(o===null)return null;var u=o[_t]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=!1;if(Ur)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{Ma=!1}var Ti=null,hu=null,Va=null;function du(){if(Va)return Va;var n,s=hu,o=s.length,u,d="value"in Ti?Ti.value:Ti.textContent,m=d.length;for(n=0;n<o&&s[n]===d[n];n++);var T=o-n;for(u=1;u<=T&&s[o-u]===d[m-u];u++);return Va=d.slice(n,1<u?1-u:void 0)}function ka(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Fi(){return!0}function ti(){return!1}function Ln(n){function s(o,u,d,m,T){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(o=n[x],this[x]=o?o(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Fi:ti,this.isPropagationStopped=ti,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),s}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Ln(Hi),Cs=v({},Hi,{view:0,detail:0}),fu=Ln(Cs),Ds,Mo,Si,Vo=v({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Si&&(Si&&n.type==="mousemove"?(Ds=n.screenX-Si.screenX,Mo=n.screenY-Si.screenY):Mo=Ds=0,Si=n),Ds)},movementY:function(n){return"movementY"in n?n.movementY:Mo}}),mu=Ln(Vo),Pa=v({},Vo,{dataTransfer:0}),vh=Ln(Pa),bh=v({},Cs,{relatedTarget:0}),La=Ln(bh),gu=v({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Th=Ln(gu),ko=v({},Hi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Eh=Ln(ko),Sh=v({},Hi,{data:0}),xi=Ln(Sh),xh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ih(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=wh[n])?!!s[n]:!1}function Ns(){return Ih}var nr=v({},Cs,{key:function(n){if(n.key){var s=xh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ka(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ah[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(n){return n.type==="keypress"?ka(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ka(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Rh=Ln(nr),Ch=v({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qi=Ln(Ch),h=v({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),y=Ln(h),E=v({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Ln(E),H=v({},Vo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Ln(H),de=v({},Hi,{newState:0,oldState:0}),Pe=Ln(de),Wt=[9,13,27,32],ot=Ur&&"CompositionEvent"in window,Pt=null;Ur&&"documentMode"in document&&(Pt=document.documentMode);var zr=Ur&&"TextEvent"in window&&!Pt,Ai=Ur&&(!ot||Pt&&8<Pt&&11>=Pt),ni=" ",ri=!1;function ja(n,s){switch(n){case"keyup":return Wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Lo=!1;function Z1(n,s){switch(n){case"compositionend":return Po(s);case"keypress":return s.which!==32?null:(ri=!0,ni);case"textInput":return n=s.data,n===ni&&ri?null:n;default:return null}}function eI(n,s){if(Lo)return n==="compositionend"||!ot&&ja(n,s)?(n=du(),Va=hu=Ti=null,Lo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ai&&s.locale!=="ko"?null:s.data;default:return null}}var tI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!tI[n.type]:s==="textarea"}function ev(n,s,o,u){Is?bi?bi.push(u):bi=[u]:Is=u,s=_d(s,"onChange"),0<s.length&&(o=new Ei("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var pu=null,yu=null;function nI(n){Pb(n,0)}function Dh(n){var s=qe(n);if(Da(s))return n}function tv(n,s){if(n==="change")return s}var nv=!1;if(Ur){var Am;if(Ur){var wm="oninput"in document;if(!wm){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),wm=typeof rv.oninput=="function"}Am=wm}else Am=!1;nv=Am&&(!document.documentMode||9<document.documentMode)}function iv(){pu&&(pu.detachEvent("onpropertychange",sv),yu=pu=null)}function sv(n){if(n.propertyName==="value"&&Dh(yu)){var s=[];ev(s,yu,n,jr(n)),Rs(nI,s)}}function rI(n,s,o){n==="focusin"?(iv(),pu=s,yu=o,pu.attachEvent("onpropertychange",sv)):n==="focusout"&&iv()}function iI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Dh(yu)}function sI(n,s){if(n==="click")return Dh(s)}function aI(n,s){if(n==="input"||n==="change")return Dh(s)}function oI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var xr=typeof Object.is=="function"?Object.is:oI;function _u(n,s){if(xr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!dt.call(s,d)||!xr(n[d],s[d]))return!1}return!0}function av(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ov(n,s){var o=av(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=av(o)}}function lv(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?lv(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function uv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=vi(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=vi(n.document)}return s}function Im(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var lI=Ur&&"documentMode"in document&&11>=document.documentMode,jo=null,Rm=null,vu=null,Cm=!1;function cv(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Cm||jo==null||jo!==vi(u)||(u=jo,"selectionStart"in u&&Im(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),vu&&_u(vu,u)||(vu=u,u=_d(Rm,"onSelect"),0<u.length&&(s=new Ei("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=jo)))}function Ua(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Uo={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionrun:Ua("Transition","TransitionRun"),transitionstart:Ua("Transition","TransitionStart"),transitioncancel:Ua("Transition","TransitionCancel"),transitionend:Ua("Transition","TransitionEnd")},Dm={},hv={};Ur&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function za(n){if(Dm[n])return Dm[n];if(!Uo[n])return n;var s=Uo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in hv)return Dm[n]=s[o];return n}var dv=za("animationend"),fv=za("animationiteration"),mv=za("animationstart"),uI=za("transitionrun"),cI=za("transitionstart"),hI=za("transitioncancel"),gv=za("transitionend"),pv=new Map,Nm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nm.push("scrollEnd");function ii(n,s){pv.set(n,s),Pn(s,[n])}var Nh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Br=[],zo=0,Om=0;function Oh(){for(var n=zo,s=Om=zo=0;s<n;){var o=Br[s];Br[s++]=null;var u=Br[s];Br[s++]=null;var d=Br[s];Br[s++]=null;var m=Br[s];if(Br[s++]=null,u!==null&&d!==null){var T=u.pending;T===null?d.next=d:(d.next=T.next,T.next=d),u.pending=d}m!==0&&yv(o,d,m)}}function Mh(n,s,o,u){Br[zo++]=n,Br[zo++]=s,Br[zo++]=o,Br[zo++]=u,Om|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Mm(n,s,o,u){return Mh(n,s,o,u),Vh(n)}function Ba(n,s){return Mh(n,null,null,s),Vh(n)}function yv(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&s!==null&&(d=31-at(o),n=m.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=o|536870912),m):null}function Vh(n){if(50<Bu)throw Bu=0,Fg=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Bo={};function dI(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(n,s,o,u){return new dI(n,s,o,u)}function Vm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gi(n,s){var o=n.alternate;return o===null?(o=Ar(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function _v(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function kh(n,s,o,u,d,m){var T=0;if(u=n,typeof n=="function")Vm(n)&&(T=1);else if(typeof n=="string")T=yR(n,o,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case w:return n=Ar(31,o,s,d),n.elementType=w,n.lanes=m,n;case U:return Fa(o.children,d,m,s);case q:T=8,d|=24;break;case te:return n=Ar(12,o,s,d|2),n.elementType=te,n.lanes=m,n;case fe:return n=Ar(13,o,s,d),n.elementType=fe,n.lanes=m,n;case ce:return n=Ar(19,o,s,d),n.elementType=ce,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:T=10;break e;case X:T=9;break e;case ue:T=11;break e;case C:T=14;break e;case R:T=16,u=null;break e}T=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Ar(T,o,s,d),s.elementType=n,s.type=u,s.lanes=m,s}function Fa(n,s,o,u){return n=Ar(7,n,u,s),n.lanes=o,n}function km(n,s,o){return n=Ar(6,n,null,s),n.lanes=o,n}function vv(n){var s=Ar(18,null,null,0);return s.stateNode=n,s}function Pm(n,s,o){return s=Ar(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var bv=new WeakMap;function Fr(n,s){if(typeof n=="object"&&n!==null){var o=bv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Zn(s)},bv.set(n,s),s)}return{value:n,source:s,stack:Zn(s)}}var Fo=[],Ho=0,Ph=null,bu=0,Hr=[],qr=0,Os=null,wi=1,Ii="";function Ki(n,s){Fo[Ho++]=bu,Fo[Ho++]=Ph,Ph=n,bu=s}function Tv(n,s,o){Hr[qr++]=wi,Hr[qr++]=Ii,Hr[qr++]=Os,Os=n;var u=wi;n=Ii;var d=32-at(u)-1;u&=~(1<<d),o+=1;var m=32-at(s)+d;if(30<m){var T=d-d%5;m=(u&(1<<T)-1).toString(32),u>>=T,d-=T,wi=1<<32-at(s)+d|o<<d|u,Ii=m+n}else wi=1<<m|o<<d|u,Ii=n}function Lm(n){n.return!==null&&(Ki(n,1),Tv(n,1,0))}function jm(n){for(;n===Ph;)Ph=Fo[--Ho],Fo[Ho]=null,bu=Fo[--Ho],Fo[Ho]=null;for(;n===Os;)Os=Hr[--qr],Hr[qr]=null,Ii=Hr[--qr],Hr[qr]=null,wi=Hr[--qr],Hr[qr]=null}function Ev(n,s){Hr[qr++]=wi,Hr[qr++]=Ii,Hr[qr++]=Os,wi=s.id,Ii=s.overflow,Os=n}var jn=null,Ot=null,et=!1,Ms=null,Gr=!1,Um=Error(i(519));function Vs(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tu(Fr(s,n)),Um}function Sv(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Ft]=n,s[_t]=u,o){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(o=0;o<Hu.length;o++)Qe(Hu[o],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),gh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),As(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||zb(s.textContent,o)?(u.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),u.onScroll!=null&&Qe("scroll",s),u.onScrollEnd!=null&&Qe("scrollend",s),u.onClick!=null&&(s.onclick=Zr),s=!0):s=!1,s||Vs(n,!0)}function xv(n){for(jn=n.return;jn;)switch(jn.tag){case 5:case 31:case 13:Gr=!1;return;case 27:case 3:Gr=!0;return;default:jn=jn.return}}function qo(n){if(n!==jn)return!1;if(!et)return xv(n),et=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||rp(n.type,n.memoizedProps)),o=!o),o&&Ot&&Vs(n),xv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ot=$b(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ot=$b(n)}else s===27?(s=Ot,Qs(n.type)?(n=lp,lp=null,Ot=n):Ot=s):Ot=jn?Yr(n.stateNode.nextSibling):null;return!0}function Ha(){Ot=jn=null,et=!1}function zm(){var n=Ms;return n!==null&&(yr===null?yr=n:yr.push.apply(yr,n),Ms=null),n}function Tu(n){Ms===null?Ms=[n]:Ms.push(n)}var Bm=P(null),qa=null,Yi=null;function ks(n,s,o){se(Bm,s._currentValue),s._currentValue=o}function Qi(n){n._currentValue=Bm.current,J(Bm)}function Fm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Hm(n,s,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var T=d.child;m=m.firstContext;e:for(;m!==null;){var x=m;m=d;for(var M=0;M<s.length;M++)if(x.context===s[M]){m.lanes|=o,x=m.alternate,x!==null&&(x.lanes|=o),Fm(m.return,o,n),u||(T=null);break e}m=x.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(i(341));T.lanes|=o,m=T.alternate,m!==null&&(m.lanes|=o),Fm(T,o,n),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===n){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Go(n,s,o,u){n=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var x=d.type;xr(d.pendingProps.value,T.value)||(n!==null?n.push(x):n=[x])}}else if(d===ke.current){if(T=d.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Qu):n=[Qu])}d=d.return}n!==null&&Hm(s,n,o,u),s.flags|=262144}function Lh(n){for(n=n.firstContext;n!==null;){if(!xr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ga(n){qa=n,Yi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Un(n){return Av(qa,n)}function jh(n,s){return qa===null&&Ga(n),Av(n,s)}function Av(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Yi===null){if(n===null)throw Error(i(308));Yi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Yi=Yi.next=s;return o}var fI=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},mI=r.unstable_scheduleCallback,gI=r.unstable_NormalPriority,cn={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qm(){return{controller:new fI,data:new Map,refCount:0}}function Eu(n){n.refCount--,n.refCount===0&&mI(gI,function(){n.controller.abort()})}var Su=null,Gm=0,Ko=0,Yo=null;function pI(n,s){if(Su===null){var o=Su=[];Gm=0,Ko=Qg(),Yo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Gm++,s.then(wv,wv),s}function wv(){if(--Gm===0&&Su!==null){Yo!==null&&(Yo.status="fulfilled");var n=Su;Su=null,Ko=0,Yo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function yI(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Iv=Q.S;Q.S=function(n,s){cb=Kt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&pI(n,s),Iv!==null&&Iv(n,s)};var Ka=P(null);function Km(){var n=Ka.current;return n!==null?n:At.pooledCache}function Uh(n,s){s===null?se(Ka,Ka.current):se(Ka,s.pool)}function Rv(){var n=Km();return n===null?null:{parent:cn._currentValue,pool:n}}var Qo=Error(i(460)),Ym=Error(i(474)),zh=Error(i(542)),Bh={then:function(){}};function Cv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Dv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Zr,Zr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ov(n),n;default:if(typeof s.status=="string")s.then(Zr,Zr);else{if(n=At,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ov(n),n}throw Qa=s,Qo}}function Ya(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Qa=o,Qo):o}}var Qa=null;function Nv(){if(Qa===null)throw Error(i(459));var n=Qa;return Qa=null,n}function Ov(n){if(n===Qo||n===zh)throw Error(i(483))}var $o=null,xu=0;function Fh(n){var s=xu;return xu+=1,$o===null&&($o=[]),Dv($o,n,s)}function Au(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Hh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Mv(n){function s(B,j){if(n){var G=B.deletions;G===null?(B.deletions=[j],B.flags|=16):G.push(j)}}function o(B,j){if(!n)return null;for(;j!==null;)s(B,j),j=j.sibling;return null}function u(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function d(B,j){return B=Gi(B,j),B.index=0,B.sibling=null,B}function m(B,j,G){return B.index=G,n?(G=B.alternate,G!==null?(G=G.index,G<j?(B.flags|=67108866,j):G):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function T(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function x(B,j,G,ee){return j===null||j.tag!==6?(j=km(G,B.mode,ee),j.return=B,j):(j=d(j,G),j.return=B,j)}function M(B,j,G,ee){var Ie=G.type;return Ie===U?Z(B,j,G.props.children,ee,G.key):j!==null&&(j.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&Ya(Ie)===j.type)?(j=d(j,G.props),Au(j,G),j.return=B,j):(j=kh(G.type,G.key,G.props,null,B.mode,ee),Au(j,G),j.return=B,j)}function K(B,j,G,ee){return j===null||j.tag!==4||j.stateNode.containerInfo!==G.containerInfo||j.stateNode.implementation!==G.implementation?(j=Pm(G,B.mode,ee),j.return=B,j):(j=d(j,G.children||[]),j.return=B,j)}function Z(B,j,G,ee,Ie){return j===null||j.tag!==7?(j=Fa(G,B.mode,ee,Ie),j.return=B,j):(j=d(j,G),j.return=B,j)}function ie(B,j,G){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=km(""+j,B.mode,G),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return G=kh(j.type,j.key,j.props,null,B.mode,G),Au(G,j),G.return=B,G;case V:return j=Pm(j,B.mode,G),j.return=B,j;case R:return j=Ya(j),ie(B,j,G)}if(he(j)||k(j))return j=Fa(j,B.mode,G,null),j.return=B,j;if(typeof j.then=="function")return ie(B,Fh(j),G);if(j.$$typeof===re)return ie(B,jh(B,j),G);Hh(B,j)}return null}function Y(B,j,G,ee){var Ie=j!==null?j.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ie!==null?null:x(B,j,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return G.key===Ie?M(B,j,G,ee):null;case V:return G.key===Ie?K(B,j,G,ee):null;case R:return G=Ya(G),Y(B,j,G,ee)}if(he(G)||k(G))return Ie!==null?null:Z(B,j,G,ee,null);if(typeof G.then=="function")return Y(B,j,Fh(G),ee);if(G.$$typeof===re)return Y(B,j,jh(B,G),ee);Hh(B,G)}return null}function W(B,j,G,ee,Ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(G)||null,x(j,B,""+ee,Ie);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return B=B.get(ee.key===null?G:ee.key)||null,M(j,B,ee,Ie);case V:return B=B.get(ee.key===null?G:ee.key)||null,K(j,B,ee,Ie);case R:return ee=Ya(ee),W(B,j,G,ee,Ie)}if(he(ee)||k(ee))return B=B.get(G)||null,Z(j,B,ee,Ie,null);if(typeof ee.then=="function")return W(B,j,G,Fh(ee),Ie);if(ee.$$typeof===re)return W(B,j,G,jh(j,ee),Ie);Hh(j,ee)}return null}function Te(B,j,G,ee){for(var Ie=null,it=null,xe=j,Ue=j=0,We=null;xe!==null&&Ue<G.length;Ue++){xe.index>Ue?(We=xe,xe=null):We=xe.sibling;var st=Y(B,xe,G[Ue],ee);if(st===null){xe===null&&(xe=We);break}n&&xe&&st.alternate===null&&s(B,xe),j=m(st,j,Ue),it===null?Ie=st:it.sibling=st,it=st,xe=We}if(Ue===G.length)return o(B,xe),et&&Ki(B,Ue),Ie;if(xe===null){for(;Ue<G.length;Ue++)xe=ie(B,G[Ue],ee),xe!==null&&(j=m(xe,j,Ue),it===null?Ie=xe:it.sibling=xe,it=xe);return et&&Ki(B,Ue),Ie}for(xe=u(xe);Ue<G.length;Ue++)We=W(xe,B,Ue,G[Ue],ee),We!==null&&(n&&We.alternate!==null&&xe.delete(We.key===null?Ue:We.key),j=m(We,j,Ue),it===null?Ie=We:it.sibling=We,it=We);return n&&xe.forEach(function(Zs){return s(B,Zs)}),et&&Ki(B,Ue),Ie}function Ce(B,j,G,ee){if(G==null)throw Error(i(151));for(var Ie=null,it=null,xe=j,Ue=j=0,We=null,st=G.next();xe!==null&&!st.done;Ue++,st=G.next()){xe.index>Ue?(We=xe,xe=null):We=xe.sibling;var Zs=Y(B,xe,st.value,ee);if(Zs===null){xe===null&&(xe=We);break}n&&xe&&Zs.alternate===null&&s(B,xe),j=m(Zs,j,Ue),it===null?Ie=Zs:it.sibling=Zs,it=Zs,xe=We}if(st.done)return o(B,xe),et&&Ki(B,Ue),Ie;if(xe===null){for(;!st.done;Ue++,st=G.next())st=ie(B,st.value,ee),st!==null&&(j=m(st,j,Ue),it===null?Ie=st:it.sibling=st,it=st);return et&&Ki(B,Ue),Ie}for(xe=u(xe);!st.done;Ue++,st=G.next())st=W(xe,B,Ue,st.value,ee),st!==null&&(n&&st.alternate!==null&&xe.delete(st.key===null?Ue:st.key),j=m(st,j,Ue),it===null?Ie=st:it.sibling=st,it=st);return n&&xe.forEach(function(RR){return s(B,RR)}),et&&Ki(B,Ue),Ie}function Et(B,j,G,ee){if(typeof G=="object"&&G!==null&&G.type===U&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case I:e:{for(var Ie=G.key;j!==null;){if(j.key===Ie){if(Ie=G.type,Ie===U){if(j.tag===7){o(B,j.sibling),ee=d(j,G.props.children),ee.return=B,B=ee;break e}}else if(j.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&Ya(Ie)===j.type){o(B,j.sibling),ee=d(j,G.props),Au(ee,G),ee.return=B,B=ee;break e}o(B,j);break}else s(B,j);j=j.sibling}G.type===U?(ee=Fa(G.props.children,B.mode,ee,G.key),ee.return=B,B=ee):(ee=kh(G.type,G.key,G.props,null,B.mode,ee),Au(ee,G),ee.return=B,B=ee)}return T(B);case V:e:{for(Ie=G.key;j!==null;){if(j.key===Ie)if(j.tag===4&&j.stateNode.containerInfo===G.containerInfo&&j.stateNode.implementation===G.implementation){o(B,j.sibling),ee=d(j,G.children||[]),ee.return=B,B=ee;break e}else{o(B,j);break}else s(B,j);j=j.sibling}ee=Pm(G,B.mode,ee),ee.return=B,B=ee}return T(B);case R:return G=Ya(G),Et(B,j,G,ee)}if(he(G))return Te(B,j,G,ee);if(k(G)){if(Ie=k(G),typeof Ie!="function")throw Error(i(150));return G=Ie.call(G),Ce(B,j,G,ee)}if(typeof G.then=="function")return Et(B,j,Fh(G),ee);if(G.$$typeof===re)return Et(B,j,jh(B,G),ee);Hh(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,j!==null&&j.tag===6?(o(B,j.sibling),ee=d(j,G),ee.return=B,B=ee):(o(B,j),ee=km(G,B.mode,ee),ee.return=B,B=ee),T(B)):o(B,j)}return function(B,j,G,ee){try{xu=0;var Ie=Et(B,j,G,ee);return $o=null,Ie}catch(xe){if(xe===Qo||xe===zh)throw xe;var it=Ar(29,xe,null,B.mode);return it.lanes=ee,it.return=B,it}}}var $a=Mv(!0),Vv=Mv(!1),Ps=!1;function Qm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $m(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ls(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function js(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(lt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Vh(n),yv(n,null,o),s}return Mh(n,u,s,o),Vh(n)}function wu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,_n(n,o)}}function Xm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=T:m=m.next=T,o=o.next}while(o!==null);m===null?d=m=s:m=m.next=s}else d=m=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Wm=!1;function Iu(){if(Wm){var n=Yo;if(n!==null)throw n}}function Ru(n,s,o,u){Wm=!1;var d=n.updateQueue;Ps=!1;var m=d.firstBaseUpdate,T=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var M=x,K=M.next;M.next=null,T===null?m=K:T.next=K,T=M;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,x=Z.lastBaseUpdate,x!==T&&(x===null?Z.firstBaseUpdate=K:x.next=K,Z.lastBaseUpdate=M))}if(m!==null){var ie=d.baseState;T=0,Z=K=M=null,x=m;do{var Y=x.lane&-536870913,W=Y!==x.lane;if(W?(Xe&Y)===Y:(u&Y)===Y){Y!==0&&Y===Ko&&(Wm=!0),Z!==null&&(Z=Z.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Te=n,Ce=x;Y=s;var Et=o;switch(Ce.tag){case 1:if(Te=Ce.payload,typeof Te=="function"){ie=Te.call(Et,ie,Y);break e}ie=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ce.payload,Y=typeof Te=="function"?Te.call(Et,ie,Y):Te,Y==null)break e;ie=v({},ie,Y);break e;case 2:Ps=!0}}Y=x.callback,Y!==null&&(n.flags|=64,W&&(n.flags|=8192),W=d.callbacks,W===null?d.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Z===null?(K=Z=W,M=ie):Z=Z.next=W,T|=Y;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;W=x,x=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);Z===null&&(M=ie),d.baseState=M,d.firstBaseUpdate=K,d.lastBaseUpdate=Z,m===null&&(d.shared.lanes=0),Hs|=T,n.lanes=T,n.memoizedState=ie}}function kv(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Pv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)kv(o[n],s)}var Xo=P(null),qh=P(0);function Lv(n,s){n=rs,se(qh,n),se(Xo,s),rs=n|s.baseLanes}function Jm(){se(qh,rs),se(Xo,Xo.current)}function Zm(){rs=qh.current,J(Xo),J(qh)}var wr=P(null),Kr=null;function Us(n){var s=n.alternate;se(Jt,Jt.current&1),se(wr,n),Kr===null&&(s===null||Xo.current!==null||s.memoizedState!==null)&&(Kr=n)}function eg(n){se(Jt,Jt.current),se(wr,n),Kr===null&&(Kr=n)}function jv(n){n.tag===22?(se(Jt,Jt.current),se(wr,n),Kr===null&&(Kr=n)):zs()}function zs(){se(Jt,Jt.current),se(wr,wr.current)}function Ir(n){J(wr),Kr===n&&(Kr=null),J(Jt)}var Jt=P(0);function Gh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ap(o)||op(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $i=0,Le=null,bt=null,hn=null,Kh=!1,Wo=!1,Xa=!1,Yh=0,Cu=0,Jo=null,_I=0;function Qt(){throw Error(i(321))}function tg(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!xr(n[o],s[o]))return!1;return!0}function ng(n,s,o,u,d,m){return $i=m,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?T0:yg,Xa=!1,m=o(u,d),Xa=!1,Wo&&(m=zv(s,o,u,d)),Uv(n),m}function Uv(n){Q.H=Ou;var s=bt!==null&&bt.next!==null;if($i=0,hn=bt=Le=null,Kh=!1,Cu=0,Jo=null,s)throw Error(i(300));n===null||dn||(n=n.dependencies,n!==null&&Lh(n)&&(dn=!0))}function zv(n,s,o,u){Le=n;var d=0;do{if(Wo&&(Jo=null),Cu=0,Wo=!1,25<=d)throw Error(i(301));if(d+=1,hn=bt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=E0,m=s(o,u)}while(Wo);return m}function vI(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?Du(s):s,n=n.useState()[0],(bt!==null?bt.memoizedState:null)!==n&&(Le.flags|=1024),s}function rg(){var n=Yh!==0;return Yh=0,n}function ig(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function sg(n){if(Kh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Kh=!1}$i=0,hn=bt=Le=null,Wo=!1,Cu=Yh=0,Jo=null}function rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Le.memoizedState=hn=n:hn=hn.next=n,hn}function Zt(){if(bt===null){var n=Le.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var s=hn===null?Le.memoizedState:hn.next;if(s!==null)hn=s,bt=n;else{if(n===null)throw Le.alternate===null?Error(i(467)):Error(i(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},hn===null?Le.memoizedState=hn=n:hn=hn.next=n}return hn}function Qh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Du(n){var s=Cu;return Cu+=1,Jo===null&&(Jo=[]),n=Dv(Jo,n,s),s=Le,(hn===null?s.memoizedState:hn.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?T0:yg),n}function $h(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Du(n);if(n.$$typeof===re)return Un(n)}throw Error(i(438,String(n)))}function ag(n){var s=null,o=Le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Qh(),Le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=O;return s.index++,o}function Xi(n,s){return typeof s=="function"?s(n):s}function Xh(n){var s=Zt();return og(s,bt,n)}function og(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=n.baseQueue,m=u.pending;if(m!==null){if(d!==null){var T=d.next;d.next=m.next,m.next=T}s.baseQueue=d=m,u.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{s=d.next;var x=T=null,M=null,K=s,Z=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(Xe&ie)===ie:($i&ie)===ie){var Y=K.revertLane;if(Y===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===Ko&&(Z=!0);else if(($i&Y)===Y){K=K.next,Y===Ko&&(Z=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(x=M=ie,T=m):M=M.next=ie,Le.lanes|=Y,Hs|=Y;ie=K.action,Xa&&o(m,ie),m=K.hasEagerState?K.eagerState:o(m,ie)}else Y={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(x=M=Y,T=m):M=M.next=Y,Le.lanes|=ie,Hs|=ie;K=K.next}while(K!==null&&K!==s);if(M===null?T=m:M.next=x,!xr(m,n.memoizedState)&&(dn=!0,Z&&(o=Yo,o!==null)))throw o;n.memoizedState=m,n.baseState=T,n.baseQueue=M,u.lastRenderedState=m}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function lg(n){var s=Zt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,m=s.memoizedState;if(d!==null){o.pending=null;var T=d=d.next;do m=n(m,T.action),T=T.next;while(T!==d);xr(m,s.memoizedState)||(dn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Bv(n,s,o){var u=Le,d=Zt(),m=et;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var T=!xr((bt||d).memoizedState,o);if(T&&(d.memoizedState=o,dn=!0),d=d.queue,hg(qv.bind(null,u,d,n),[n]),d.getSnapshot!==s||T||hn!==null&&hn.memoizedState.tag&1){if(u.flags|=2048,Zo(9,{destroy:void 0},Hv.bind(null,u,d,o,s),null),At===null)throw Error(i(349));m||($i&127)!==0||Fv(u,s,o)}return o}function Fv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Le.updateQueue,s===null?(s=Qh(),Le.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Hv(n,s,o,u){s.value=o,s.getSnapshot=u,Gv(s)&&Kv(n)}function qv(n,s,o){return o(function(){Gv(s)&&Kv(n)})}function Gv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!xr(n,o)}catch{return!0}}function Kv(n){var s=Ba(n,2);s!==null&&_r(s,n,2)}function ug(n){var s=rr();if(typeof n=="function"){var o=n;if(n=o(),Xa){wt(!0);try{o()}finally{wt(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:n},s}function Yv(n,s,o,u){return n.baseState=o,og(n,bt,typeof u=="function"?u:Xi)}function bI(n,s,o,u,d){if(Zh(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Qv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Qv(n,s){var o=s.action,u=s.payload,d=n.state;if(s.isTransition){var m=Q.T,T={};Q.T=T;try{var x=o(d,u),M=Q.S;M!==null&&M(T,x),$v(n,s,x)}catch(K){cg(n,s,K)}finally{m!==null&&T.types!==null&&(m.types=T.types),Q.T=m}}else try{m=o(d,u),$v(n,s,m)}catch(K){cg(n,s,K)}}function $v(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Xv(n,s,u)},function(u){return cg(n,s,u)}):Xv(n,s,o)}function Xv(n,s,o){s.status="fulfilled",s.value=o,Wv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Qv(n,o)))}function cg(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Wv(s),s=s.next;while(s!==u)}n.action=null}function Wv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Jv(n,s){return s}function Zv(n,s){if(et){var o=At.formState;if(o!==null){e:{var u=Le;if(et){if(Ot){t:{for(var d=Ot,m=Gr;d.nodeType!==8;){if(!m){d=null;break t}if(d=Yr(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Ot=Yr(d.nextSibling),u=d.data==="F!";break e}}Vs(u)}u=!1}u&&(s=o[0])}}return o=rr(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jv,lastRenderedState:s},o.queue=u,o=_0.bind(null,Le,u),u.dispatch=o,u=ug(!1),m=pg.bind(null,Le,!1,u.queue),u=rr(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,o=bI.bind(null,Le,d,m,o),d.dispatch=o,u.memoizedState=n,[s,o,!1]}function e0(n){var s=Zt();return t0(s,bt,n)}function t0(n,s,o){if(s=og(n,s,Jv)[0],n=Xh(Xi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Du(s)}catch(T){throw T===Qo?zh:T}else u=s;s=Zt();var d=s.queue,m=d.dispatch;return o!==s.memoizedState&&(Le.flags|=2048,Zo(9,{destroy:void 0},TI.bind(null,d,o),null)),[u,m,n]}function TI(n,s){n.action=s}function n0(n){var s=Zt(),o=bt;if(o!==null)return t0(s,o,n);Zt(),s=s.memoizedState,o=Zt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Zo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Le.updateQueue,s===null&&(s=Qh(),Le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function r0(){return Zt().memoizedState}function Wh(n,s,o,u){var d=rr();Le.flags|=n,d.memoizedState=Zo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Jh(n,s,o,u){var d=Zt();u=u===void 0?null:u;var m=d.memoizedState.inst;bt!==null&&u!==null&&tg(u,bt.memoizedState.deps)?d.memoizedState=Zo(s,m,o,u):(Le.flags|=n,d.memoizedState=Zo(1|s,m,o,u))}function i0(n,s){Wh(8390656,8,n,s)}function hg(n,s){Jh(2048,8,n,s)}function EI(n){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=Qh(),Le.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function s0(n){var s=Zt().memoizedState;return EI({ref:s,nextImpl:n}),function(){if((lt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function a0(n,s){return Jh(4,2,n,s)}function o0(n,s){return Jh(4,4,n,s)}function l0(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function u0(n,s,o){o=o!=null?o.concat([n]):null,Jh(4,4,l0.bind(null,s,n),o)}function dg(){}function c0(n,s){var o=Zt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&tg(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function h0(n,s){var o=Zt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&tg(s,u[1]))return u[0];if(u=n(),Xa){wt(!0);try{n()}finally{wt(!1)}}return o.memoizedState=[u,s],u}function fg(n,s,o){return o===void 0||($i&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=db(),Le.lanes|=n,Hs|=n,o)}function d0(n,s,o,u){return xr(o,s)?o:Xo.current!==null?(n=fg(n,o,u),xr(n,s)||(dn=!0),n):($i&42)===0||($i&1073741824)!==0&&(Xe&261930)===0?(dn=!0,n.memoizedState=o):(n=db(),Le.lanes|=n,Hs|=n,s)}function f0(n,s,o,u,d){var m=le.p;le.p=m!==0&&8>m?m:8;var T=Q.T,x={};Q.T=x,pg(n,!1,s,o);try{var M=d(),K=Q.S;if(K!==null&&K(x,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Z=yI(M,u);Nu(n,s,Z,Dr(n))}else Nu(n,s,u,Dr(n))}catch(ie){Nu(n,s,{then:function(){},status:"rejected",reason:ie},Dr())}finally{le.p=m,T!==null&&x.types!==null&&(T.types=x.types),Q.T=T}}function SI(){}function mg(n,s,o,u){if(n.tag!==5)throw Error(i(476));var d=m0(n).queue;f0(n,d,s,Ee,o===null?SI:function(){return g0(n),o(u)})}function m0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:Ee},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function g0(n){var s=m0(n);s.next===null&&(s=n.alternate.memoizedState),Nu(n,s.next.queue,{},Dr())}function gg(){return Un(Qu)}function p0(){return Zt().memoizedState}function y0(){return Zt().memoizedState}function xI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Dr();n=Ls(o);var u=js(s,n,o);u!==null&&(_r(u,s,o),wu(u,s,o)),s={cache:qm()},n.payload=s;return}s=s.return}}function AI(n,s,o){var u=Dr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zh(n)?v0(s,o):(o=Mm(n,s,o,u),o!==null&&(_r(o,n,u),b0(o,s,u)))}function _0(n,s,o){var u=Dr();Nu(n,s,o,u)}function Nu(n,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zh(n))v0(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var T=s.lastRenderedState,x=m(T,o);if(d.hasEagerState=!0,d.eagerState=x,xr(x,T))return Mh(n,s,d,0),At===null&&Oh(),!1}catch{}if(o=Mm(n,s,d,u),o!==null)return _r(o,n,u),b0(o,s,u),!0}return!1}function pg(n,s,o,u){if(u={lane:2,revertLane:Qg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zh(n)){if(s)throw Error(i(479))}else s=Mm(n,o,u,2),s!==null&&_r(s,n,2)}function Zh(n){var s=n.alternate;return n===Le||s!==null&&s===Le}function v0(n,s){Wo=Kh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function b0(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,_n(n,o)}}var Ou={readContext:Un,use:$h,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Ou.useEffectEvent=Qt;var T0={readContext:Un,use:$h,useCallback:function(n,s){return rr().memoizedState=[n,s===void 0?null:s],n},useContext:Un,useEffect:i0,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Wh(4194308,4,l0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Wh(4194308,4,n,s)},useInsertionEffect:function(n,s){Wh(4,2,n,s)},useMemo:function(n,s){var o=rr();s=s===void 0?null:s;var u=n();if(Xa){wt(!0);try{n()}finally{wt(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=rr();if(o!==void 0){var d=o(s);if(Xa){wt(!0);try{o(s)}finally{wt(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=AI.bind(null,Le,n),[u.memoizedState,n]},useRef:function(n){var s=rr();return n={current:n},s.memoizedState=n},useState:function(n){n=ug(n);var s=n.queue,o=_0.bind(null,Le,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:dg,useDeferredValue:function(n,s){var o=rr();return fg(o,n,s)},useTransition:function(){var n=ug(!1);return n=f0.bind(null,Le,n.queue,!0,!1),rr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Le,d=rr();if(et){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),At===null)throw Error(i(349));(Xe&127)!==0||Fv(u,s,o)}d.memoizedState=o;var m={value:o,getSnapshot:s};return d.queue=m,i0(qv.bind(null,u,m,n),[n]),u.flags|=2048,Zo(9,{destroy:void 0},Hv.bind(null,u,m,o,s),null),o},useId:function(){var n=rr(),s=At.identifierPrefix;if(et){var o=Ii,u=wi;o=(u&~(1<<32-at(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Yh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=_I++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:gg,useFormState:Zv,useActionState:Zv,useOptimistic:function(n){var s=rr();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=pg.bind(null,Le,!0,o),o.dispatch=s,[n,s]},useMemoCache:ag,useCacheRefresh:function(){return rr().memoizedState=xI.bind(null,Le)},useEffectEvent:function(n){var s=rr(),o={impl:n};return s.memoizedState=o,function(){if((lt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},yg={readContext:Un,use:$h,useCallback:c0,useContext:Un,useEffect:hg,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:h0,useReducer:Xh,useRef:r0,useState:function(){return Xh(Xi)},useDebugValue:dg,useDeferredValue:function(n,s){var o=Zt();return d0(o,bt.memoizedState,n,s)},useTransition:function(){var n=Xh(Xi)[0],s=Zt().memoizedState;return[typeof n=="boolean"?n:Du(n),s]},useSyncExternalStore:Bv,useId:p0,useHostTransitionStatus:gg,useFormState:e0,useActionState:e0,useOptimistic:function(n,s){var o=Zt();return Yv(o,bt,n,s)},useMemoCache:ag,useCacheRefresh:y0};yg.useEffectEvent=s0;var E0={readContext:Un,use:$h,useCallback:c0,useContext:Un,useEffect:hg,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:o0,useMemo:h0,useReducer:lg,useRef:r0,useState:function(){return lg(Xi)},useDebugValue:dg,useDeferredValue:function(n,s){var o=Zt();return bt===null?fg(o,n,s):d0(o,bt.memoizedState,n,s)},useTransition:function(){var n=lg(Xi)[0],s=Zt().memoizedState;return[typeof n=="boolean"?n:Du(n),s]},useSyncExternalStore:Bv,useId:p0,useHostTransitionStatus:gg,useFormState:n0,useActionState:n0,useOptimistic:function(n,s){var o=Zt();return bt!==null?Yv(o,bt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:ag,useCacheRefresh:y0};E0.useEffectEvent=s0;function _g(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var vg={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Dr(),d=Ls(u);d.payload=s,o!=null&&(d.callback=o),s=js(n,d,u),s!==null&&(_r(s,n,u),wu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Dr(),d=Ls(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=js(n,d,u),s!==null&&(_r(s,n,u),wu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Dr(),u=Ls(o);u.tag=2,s!=null&&(u.callback=s),s=js(n,u,o),s!==null&&(_r(s,n,o),wu(s,n,o))}};function S0(n,s,o,u,d,m,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,T):s.prototype&&s.prototype.isPureReactComponent?!_u(o,u)||!_u(d,m):!0}function x0(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&vg.enqueueReplaceState(s,s.state,null)}function Wa(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=v({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function A0(n){Nh(n)}function w0(n){console.error(n)}function I0(n){Nh(n)}function ed(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function R0(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function bg(n,s,o){return o=Ls(o),o.tag=3,o.payload={element:null},o.callback=function(){ed(n,s)},o}function C0(n){return n=Ls(n),n.tag=3,n}function D0(n,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;n.payload=function(){return d(m)},n.callback=function(){R0(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){R0(s,o,u),typeof d!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function wI(n,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Go(s,o,d,!0),o=wr.current,o!==null){switch(o.tag){case 31:case 13:return Kr===null?dd():o.alternate===null&&$t===0&&($t=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Bh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Gg(n,u,d)),!1;case 22:return o.flags|=65536,u===Bh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Gg(n,u,d)),!1}throw Error(i(435,o.tag))}return Gg(n,u,d),dd(),!1}if(et)return s=wr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Um&&(n=Error(i(422),{cause:u}),Tu(Fr(n,o)))):(u!==Um&&(s=Error(i(423),{cause:u}),Tu(Fr(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Fr(u,o),d=bg(n.stateNode,u,d),Xm(n,d),$t!==4&&($t=2)),!1;var m=Error(i(520),{cause:u});if(m=Fr(m,o),zu===null?zu=[m]:zu.push(m),$t!==4&&($t=2),s===null)return!0;u=Fr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=bg(o.stateNode,u,n),Xm(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qs===null||!qs.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=C0(d),D0(d,n,o,u),Xm(o,d),!1}o=o.return}while(o!==null);return!1}var Tg=Error(i(461)),dn=!1;function zn(n,s,o,u){s.child=n===null?Vv(s,null,o,u):$a(s,n.child,o,u)}function N0(n,s,o,u,d){o=o.render;var m=s.ref;if("ref"in u){var T={};for(var x in u)x!=="ref"&&(T[x]=u[x])}else T=u;return Ga(s),u=ng(n,s,o,T,m,d),x=rg(),n!==null&&!dn?(ig(n,s,d),Wi(n,s,d)):(et&&x&&Lm(s),s.flags|=1,zn(n,s,u,d),s.child)}function O0(n,s,o,u,d){if(n===null){var m=o.type;return typeof m=="function"&&!Vm(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,M0(n,s,m,u,d)):(n=kh(o.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Cg(n,d)){var T=m.memoizedProps;if(o=o.compare,o=o!==null?o:_u,o(T,u)&&n.ref===s.ref)return Wi(n,s,d)}return s.flags|=1,n=Gi(m,u),n.ref=s.ref,n.return=s,s.child=n}function M0(n,s,o,u,d){if(n!==null){var m=n.memoizedProps;if(_u(m,u)&&n.ref===s.ref)if(dn=!1,s.pendingProps=u=m,Cg(n,d))(n.flags&131072)!==0&&(dn=!0);else return s.lanes=n.lanes,Wi(n,s,d)}return Eg(n,s,o,u,d)}function V0(n,s,o,u){var d=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~m}else u=0,s.child=null;return k0(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Uh(s,m!==null?m.cachePool:null),m!==null?Lv(s,m):Jm(),jv(s);else return u=s.lanes=536870912,k0(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(Uh(s,m.cachePool),Lv(s,m),zs(),s.memoizedState=null):(n!==null&&Uh(s,null),Jm(),zs());return zn(n,s,d,o),s.child}function Mu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function k0(n,s,o,u,d){var m=Km();return m=m===null?null:{parent:cn._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&Uh(s,null),Jm(),jv(s),n!==null&&Go(n,s,u,!0),s.childLanes=d,null}function td(n,s){return s=rd({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function P0(n,s,o){return $a(s,n.child,null,o),n=td(s,s.pendingProps),n.flags|=2,Ir(s),s.memoizedState=null,n}function II(n,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(et){if(u.mode==="hidden")return n=td(s,u),s.lanes=536870912,Mu(null,n);if(eg(s),(n=Ot)?(n=Qb(n,Gr),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Os!==null?{id:wi,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},o=vv(n),o.return=s,s.child=o,jn=s,Ot=null)):n=null,n===null)throw Vs(s);return s.lanes=536870912,null}return td(s,u)}var m=n.memoizedState;if(m!==null){var T=m.dehydrated;if(eg(s),d)if(s.flags&256)s.flags&=-257,s=P0(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(dn||Go(n,s,o,!1),d=(o&n.childLanes)!==0,dn||d){if(u=At,u!==null&&(T=kn(u,o),T!==0&&T!==m.retryLane))throw m.retryLane=T,Ba(n,T),_r(u,n,T),Tg;dd(),s=P0(n,s,o)}else n=m.treeContext,Ot=Yr(T.nextSibling),jn=s,et=!0,Ms=null,Gr=!1,n!==null&&Ev(s,n),s=td(s,u),s.flags|=4096;return s}return n=Gi(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function nd(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Eg(n,s,o,u,d){return Ga(s),o=ng(n,s,o,u,void 0,d),u=rg(),n!==null&&!dn?(ig(n,s,d),Wi(n,s,d)):(et&&u&&Lm(s),s.flags|=1,zn(n,s,o,d),s.child)}function L0(n,s,o,u,d,m){return Ga(s),s.updateQueue=null,o=zv(s,u,o,d),Uv(n),u=rg(),n!==null&&!dn?(ig(n,s,m),Wi(n,s,m)):(et&&u&&Lm(s),s.flags|=1,zn(n,s,o,m),s.child)}function j0(n,s,o,u,d){if(Ga(s),s.stateNode===null){var m=Bo,T=o.contextType;typeof T=="object"&&T!==null&&(m=Un(T)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=vg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Qm(s),T=o.contextType,m.context=typeof T=="object"&&T!==null?Un(T):Bo,m.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(_g(s,o,T,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&vg.enqueueReplaceState(m,m.state,null),Ru(s,u,m,d),Iu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var x=s.memoizedProps,M=Wa(o,x);m.props=M;var K=m.context,Z=o.contextType;T=Bo,typeof Z=="object"&&Z!==null&&(T=Un(Z));var ie=o.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||K!==T)&&x0(s,m,u,T),Ps=!1;var Y=s.memoizedState;m.state=Y,Ru(s,u,m,d),Iu(),K=s.memoizedState,x||Y!==K||Ps?(typeof ie=="function"&&(_g(s,o,ie,u),K=s.memoizedState),(M=Ps||S0(s,o,M,u,Y,K,T))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=K),m.props=u,m.state=K,m.context=T,u=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,$m(n,s),T=s.memoizedProps,Z=Wa(o,T),m.props=Z,ie=s.pendingProps,Y=m.context,K=o.contextType,M=Bo,typeof K=="object"&&K!==null&&(M=Un(K)),x=o.getDerivedStateFromProps,(K=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ie||Y!==M)&&x0(s,m,u,M),Ps=!1,Y=s.memoizedState,m.state=Y,Ru(s,u,m,d),Iu();var W=s.memoizedState;T!==ie||Y!==W||Ps||n!==null&&n.dependencies!==null&&Lh(n.dependencies)?(typeof x=="function"&&(_g(s,o,x,u),W=s.memoizedState),(Z=Ps||S0(s,o,Z,u,Y,W,M)||n!==null&&n.dependencies!==null&&Lh(n.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,W,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,W,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=W),m.props=u,m.state=W,m.context=M,u=Z):(typeof m.componentDidUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,nd(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=$a(s,n.child,null,d),s.child=$a(s,null,o,d)):zn(n,s,o,d),s.memoizedState=m.state,n=s.child):n=Wi(n,s,d),n}function U0(n,s,o,u){return Ha(),s.flags|=256,zn(n,s,o,u),s.child}var Sg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xg(n){return{baseLanes:n,cachePool:Rv()}}function Ag(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Cr),n}function z0(n,s,o){var u=s.pendingProps,d=!1,m=(s.flags&128)!==0,T;if((T=m)||(T=n!==null&&n.memoizedState===null?!1:(Jt.current&2)!==0),T&&(d=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,n===null){if(et){if(d?Us(s):zs(),(n=Ot)?(n=Qb(n,Gr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Os!==null?{id:wi,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},o=vv(n),o.return=s,s.child=o,jn=s,Ot=null)):n=null,n===null)throw Vs(s);return op(n)?s.lanes=32:s.lanes=536870912,null}var x=u.children;return u=u.fallback,d?(zs(),d=s.mode,x=rd({mode:"hidden",children:x},d),u=Fa(u,d,o,null),x.return=s,u.return=s,x.sibling=u,s.child=x,u=s.child,u.memoizedState=xg(o),u.childLanes=Ag(n,T,o),s.memoizedState=Sg,Mu(null,u)):(Us(s),wg(s,x))}var M=n.memoizedState;if(M!==null&&(x=M.dehydrated,x!==null)){if(m)s.flags&256?(Us(s),s.flags&=-257,s=Ig(n,s,o)):s.memoizedState!==null?(zs(),s.child=n.child,s.flags|=128,s=null):(zs(),x=u.fallback,d=s.mode,u=rd({mode:"visible",children:u.children},d),x=Fa(x,d,o,null),x.flags|=2,u.return=s,x.return=s,u.sibling=x,s.child=u,$a(s,n.child,null,o),u=s.child,u.memoizedState=xg(o),u.childLanes=Ag(n,T,o),s.memoizedState=Sg,s=Mu(null,u));else if(Us(s),op(x)){if(T=x.nextSibling&&x.nextSibling.dataset,T)var K=T.dgst;T=K,u=Error(i(419)),u.stack="",u.digest=T,Tu({value:u,source:null,stack:null}),s=Ig(n,s,o)}else if(dn||Go(n,s,o,!1),T=(o&n.childLanes)!==0,dn||T){if(T=At,T!==null&&(u=kn(T,o),u!==0&&u!==M.retryLane))throw M.retryLane=u,Ba(n,u),_r(T,n,u),Tg;ap(x)||dd(),s=Ig(n,s,o)}else ap(x)?(s.flags|=192,s.child=n.child,s=null):(n=M.treeContext,Ot=Yr(x.nextSibling),jn=s,et=!0,Ms=null,Gr=!1,n!==null&&Ev(s,n),s=wg(s,u.children),s.flags|=4096);return s}return d?(zs(),x=u.fallback,d=s.mode,M=n.child,K=M.sibling,u=Gi(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,K!==null?x=Gi(K,x):(x=Fa(x,d,o,null),x.flags|=2),x.return=s,u.return=s,u.sibling=x,s.child=u,Mu(null,u),u=s.child,x=n.child.memoizedState,x===null?x=xg(o):(d=x.cachePool,d!==null?(M=cn._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=Rv(),x={baseLanes:x.baseLanes|o,cachePool:d}),u.memoizedState=x,u.childLanes=Ag(n,T,o),s.memoizedState=Sg,Mu(n.child,u)):(Us(s),o=n.child,n=o.sibling,o=Gi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(T=s.deletions,T===null?(s.deletions=[n],s.flags|=16):T.push(n)),s.child=o,s.memoizedState=null,o)}function wg(n,s){return s=rd({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function rd(n,s){return n=Ar(22,n,null,s),n.lanes=0,n}function Ig(n,s,o){return $a(s,n.child,null,o),n=wg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function B0(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Fm(n.return,s,o)}function Rg(n,s,o,u,d,m){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:m}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=d,T.treeForkCount=m)}function F0(n,s,o){var u=s.pendingProps,d=u.revealOrder,m=u.tail;u=u.children;var T=Jt.current,x=(T&2)!==0;if(x?(T=T&1|2,s.flags|=128):T&=1,se(Jt,T),zn(n,s,u,o),u=et?bu:0,!x&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&B0(n,o,s);else if(n.tag===19)B0(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&Gh(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Rg(s,!1,d,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Gh(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Rg(s,!0,o,null,m,u);break;case"together":Rg(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Wi(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Hs|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Go(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=Gi(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Gi(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Cg(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Lh(n)))}function RI(n,s,o){switch(s.tag){case 3:Ze(s,s.stateNode.containerInfo),ks(s,cn,n.memoizedState.cache),Ha();break;case 27:case 5:Be(s);break;case 4:Ze(s,s.stateNode.containerInfo);break;case 10:ks(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,eg(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Us(s),s.flags|=128,null):(o&s.child.childLanes)!==0?z0(n,s,o):(Us(s),n=Wi(n,s,o),n!==null?n.sibling:null);Us(s);break;case 19:var d=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Go(n,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return F0(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(Jt,Jt.current),u)break;return null;case 22:return s.lanes=0,V0(n,s,o,s.pendingProps);case 24:ks(s,cn,n.memoizedState.cache)}return Wi(n,s,o)}function H0(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)dn=!0;else{if(!Cg(n,o)&&(s.flags&128)===0)return dn=!1,RI(n,s,o);dn=(n.flags&131072)!==0}else dn=!1,et&&(s.flags&1048576)!==0&&Tv(s,bu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ya(s.elementType),s.type=n,typeof n=="function")Vm(n)?(u=Wa(n,u),s.tag=1,s=j0(null,s,n,u,o)):(s.tag=0,s=Eg(null,s,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===ue){s.tag=11,s=N0(null,s,n,u,o);break e}else if(d===C){s.tag=14,s=O0(null,s,n,u,o);break e}}throw s=De(n)||n,Error(i(306,s,""))}}return s;case 0:return Eg(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=Wa(u,s.pendingProps),j0(n,s,u,d,o);case 3:e:{if(Ze(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;d=m.element,$m(n,s),Ru(s,u,null,o);var T=s.memoizedState;if(u=T.cache,ks(s,cn,u),u!==m.cache&&Hm(s,[cn],o,!0),Iu(),u=T.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=U0(n,s,u,o);break e}else if(u!==d){d=Fr(Error(i(424)),s),Tu(d),s=U0(n,s,u,o);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ot=Yr(n.firstChild),jn=s,et=!0,Ms=null,Gr=!0,o=Vv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ha(),u===d){s=Wi(n,s,o);break e}zn(n,s,u,o)}s=s.child}return s;case 26:return nd(n,s),n===null?(o=eT(s.type,null,s.pendingProps,null))?s.memoizedState=o:et||(o=s.type,n=s.pendingProps,u=vd(Ae.current).createElement(o),u[Ft]=s,u[_t]=n,Bn(u,o,n),je(u),s.stateNode=u):s.memoizedState=eT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Be(s),n===null&&et&&(u=s.stateNode=Wb(s.type,s.pendingProps,Ae.current),jn=s,Gr=!0,d=Ot,Qs(s.type)?(lp=d,Ot=Yr(u.firstChild)):Ot=d),zn(n,s,s.pendingProps.children,o),nd(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&et&&((d=u=Ot)&&(u=iR(u,s.type,s.pendingProps,Gr),u!==null?(s.stateNode=u,jn=s,Ot=Yr(u.firstChild),Gr=!1,d=!0):d=!1),d||Vs(s)),Be(s),d=s.type,m=s.pendingProps,T=n!==null?n.memoizedProps:null,u=m.children,rp(d,m)?u=null:T!==null&&rp(d,T)&&(s.flags|=32),s.memoizedState!==null&&(d=ng(n,s,vI,null,null,o),Qu._currentValue=d),nd(n,s),zn(n,s,u,o),s.child;case 6:return n===null&&et&&((n=o=Ot)&&(o=sR(o,s.pendingProps,Gr),o!==null?(s.stateNode=o,jn=s,Ot=null,n=!0):n=!1),n||Vs(s)),null;case 13:return z0(n,s,o);case 4:return Ze(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=$a(s,null,u,o):zn(n,s,u,o),s.child;case 11:return N0(n,s,s.type,s.pendingProps,o);case 7:return zn(n,s,s.pendingProps,o),s.child;case 8:return zn(n,s,s.pendingProps.children,o),s.child;case 12:return zn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ks(s,s.type,u.value),zn(n,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Ga(s),d=Un(d),u=u(d),s.flags|=1,zn(n,s,u,o),s.child;case 14:return O0(n,s,s.type,s.pendingProps,o);case 15:return M0(n,s,s.type,s.pendingProps,o);case 19:return F0(n,s,o);case 31:return II(n,s,o);case 22:return V0(n,s,o,s.pendingProps);case 24:return Ga(s),u=Un(cn),n===null?(d=Km(),d===null&&(d=At,m=qm(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),s.memoizedState={parent:u,cache:d},Qm(s),ks(s,cn,d)):((n.lanes&o)!==0&&($m(n,s),Ru(s,null,null,o),Iu()),d=n.memoizedState,m=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ks(s,cn,u)):(u=m.cache,ks(s,cn,u),u!==d.cache&&Hm(s,[cn],o,!0))),zn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ji(n){n.flags|=4}function Dg(n,s,o,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(pb())n.flags|=8192;else throw Qa=Bh,Ym}else n.flags&=-16777217}function q0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!sT(s))if(pb())n.flags|=8192;else throw Qa=Bh,Ym}function id(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Dt():536870912,n.lanes|=s,rl|=s)}function Vu(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Mt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function CI(n,s,o){var u=s.pendingProps;switch(jm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Mt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Qi(cn),Ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(qo(s)?Ji(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zm())),Mt(s),null;case 26:var d=s.type,m=s.memoizedState;return n===null?(Ji(s),m!==null?(Mt(s),q0(s,m)):(Mt(s),Dg(s,d,null,u,o))):m?m!==n.memoizedState?(Ji(s),Mt(s),q0(s,m)):(Mt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ji(s),Mt(s),Dg(s,d,n,u,o)),null;case 27:if(Jn(s),o=Ae.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ji(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Mt(s),null}n=me.current,qo(s)?Sv(s):(n=Wb(d,u,o),s.stateNode=n,Ji(s))}return Mt(s),null;case 5:if(Jn(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ji(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Mt(s),null}if(m=me.current,qo(s))Sv(s);else{var T=vd(Ae.current);switch(m){case 1:m=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=T.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?T.createElement(d,{is:u.is}):T.createElement(d)}}m[Ft]=s,m[_t]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)m.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=m;e:switch(Bn(m,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ji(s)}}return Mt(s),Dg(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Ji(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=Ae.current,qo(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,d=jn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Ft]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||zb(n.nodeValue,o)),n||Vs(s,!0)}else n=vd(n).createTextNode(u),n[Ft]=s,s.stateNode=n}return Mt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=qo(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ft]=s}else Ha(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),n=!1}else o=zm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Ir(s),s):(Ir(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Mt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=qo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Ft]=s}else Ha(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),d=!1}else d=zm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ir(s),s):(Ir(s),null)}return Ir(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),id(s,s.updateQueue),Mt(s),null);case 4:return Ke(),n===null&&Jg(s.stateNode.containerInfo),Mt(s),null;case 10:return Qi(s.type),Mt(s),null;case 19:if(J(Jt),u=s.memoizedState,u===null)return Mt(s),null;if(d=(s.flags&128)!==0,m=u.rendering,m===null)if(d)Vu(u,!1);else{if($t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Gh(n),m!==null){for(s.flags|=128,Vu(u,!1),n=m.updateQueue,s.updateQueue=n,id(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)_v(o,n),o=o.sibling;return se(Jt,Jt.current&1|2),et&&Ki(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Kt()>ud&&(s.flags|=128,d=!0,Vu(u,!1),s.lanes=4194304)}else{if(!d)if(n=Gh(m),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,id(s,n),Vu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!et)return Mt(s),null}else 2*Kt()-u.renderingStartTime>ud&&o!==536870912&&(s.flags|=128,d=!0,Vu(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Kt(),n.sibling=null,o=Jt.current,se(Jt,d?o&1|2:o&1),et&&Ki(s,u.treeForkCount),n):(Mt(s),null);case 22:case 23:return Ir(s),Zm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),o=s.updateQueue,o!==null&&id(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&J(Ka),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Qi(cn),Mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function DI(n,s){switch(jm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Qi(cn),Ke(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Jn(s),null;case 31:if(s.memoizedState!==null){if(Ir(s),s.alternate===null)throw Error(i(340));Ha()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Ir(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ha()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return J(Jt),null;case 4:return Ke(),null;case 10:return Qi(s.type),null;case 22:case 23:return Ir(s),Zm(),n!==null&&J(Ka),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Qi(cn),null;case 25:return null;default:return null}}function G0(n,s){switch(jm(s),s.tag){case 3:Qi(cn),Ke();break;case 26:case 27:case 5:Jn(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&Ir(s);break;case 13:Ir(s);break;case 19:J(Jt);break;case 10:Qi(s.type);break;case 22:case 23:Ir(s),Zm(),n!==null&&J(Ka);break;case 24:Qi(cn)}}function ku(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var m=o.create,T=o.inst;u=m(),T.destroy=u}o=o.next}while(o!==d)}}catch(x){gt(s,s.return,x)}}function Bs(n,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&n)===n){var T=u.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,d=s;var M=o,K=x;try{K()}catch(Z){gt(d,M,Z)}}}u=u.next}while(u!==m)}}catch(Z){gt(s,s.return,Z)}}function K0(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Pv(s,o)}catch(u){gt(n,n.return,u)}}}function Y0(n,s,o){o.props=Wa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){gt(n,s,u)}}function Pu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){gt(n,s,d)}}function Ri(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){gt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){gt(n,s,d)}else o.current=null}function Q0(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){gt(n,n.return,d)}}function Ng(n,s,o){try{var u=n.stateNode;JI(u,n.type,o,s),u[_t]=s}catch(d){gt(n,n.return,d)}}function $0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qs(n.type)||n.tag===4}function Og(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mg(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Zr));else if(u!==4&&(u===27&&Qs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Mg(n,s,o),n=n.sibling;n!==null;)Mg(n,s,o),n=n.sibling}function sd(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Qs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(sd(n,s,o),n=n.sibling;n!==null;)sd(n,s,o),n=n.sibling}function X0(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Bn(s,u,o),s[Ft]=n,s[_t]=o}catch(m){gt(n,n.return,m)}}var Zi=!1,fn=!1,Vg=!1,W0=typeof WeakSet=="function"?WeakSet:Set,In=null;function NI(n,s){if(n=n.containerInfo,tp=wd,n=uv(n),Im(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var T=0,x=-1,M=-1,K=0,Z=0,ie=n,Y=null;t:for(;;){for(var W;ie!==o||d!==0&&ie.nodeType!==3||(x=T+d),ie!==m||u!==0&&ie.nodeType!==3||(M=T+u),ie.nodeType===3&&(T+=ie.nodeValue.length),(W=ie.firstChild)!==null;)Y=ie,ie=W;for(;;){if(ie===n)break t;if(Y===o&&++K===d&&(x=T),Y===m&&++Z===u&&(M=T),(W=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=W}o=x===-1||M===-1?null:{start:x,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(np={focusedElem:n,selectionRange:o},wd=!1,In=s;In!==null;)if(s=In,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,In=n;else for(;In!==null;){switch(s=In,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,d=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Te=Wa(o.type,d);n=u.getSnapshotBeforeUpdate(Te,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ce){gt(o,o.return,Ce)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)sp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,In=n;break}In=s.return}}function J0(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ts(n,o),u&4&&ku(5,o);break;case 1:if(ts(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(T){gt(o,o.return,T)}else{var d=Wa(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(T){gt(o,o.return,T)}}u&64&&K0(o),u&512&&Pu(o,o.return);break;case 3:if(ts(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Pv(n,s)}catch(T){gt(o,o.return,T)}}break;case 27:s===null&&u&4&&X0(o);case 26:case 5:ts(n,o),s===null&&u&4&&Q0(o),u&512&&Pu(o,o.return);break;case 12:ts(n,o);break;case 31:ts(n,o),u&4&&tb(n,o);break;case 13:ts(n,o),u&4&&nb(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=zI.bind(null,o),aR(n,o))));break;case 22:if(u=o.memoizedState!==null||Zi,!u){s=s!==null&&s.memoizedState!==null||fn,d=Zi;var m=fn;Zi=u,(fn=s)&&!m?ns(n,o,(o.subtreeFlags&8772)!==0):ts(n,o),Zi=d,fn=m}break;case 30:break;default:ts(n,o)}}function Z0(n){var s=n.alternate;s!==null&&(n.alternate=null,Z0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&L(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Lt=null,mr=!1;function es(n,s,o){for(o=o.child;o!==null;)eb(n,s,o),o=o.sibling}function eb(n,s,o){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(An,o)}catch{}switch(o.tag){case 26:fn||Ri(o,s),es(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:fn||Ri(o,s);var u=Lt,d=mr;Qs(o.type)&&(Lt=o.stateNode,mr=!1),es(n,s,o),Gu(o.stateNode),Lt=u,mr=d;break;case 5:fn||Ri(o,s);case 6:if(u=Lt,d=mr,Lt=null,es(n,s,o),Lt=u,mr=d,Lt!==null)if(mr)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(o.stateNode)}catch(m){gt(o,s,m)}else try{Lt.removeChild(o.stateNode)}catch(m){gt(o,s,m)}break;case 18:Lt!==null&&(mr?(n=Lt,Kb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),hl(n)):Kb(Lt,o.stateNode));break;case 4:u=Lt,d=mr,Lt=o.stateNode.containerInfo,mr=!0,es(n,s,o),Lt=u,mr=d;break;case 0:case 11:case 14:case 15:Bs(2,o,s),fn||Bs(4,o,s),es(n,s,o);break;case 1:fn||(Ri(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Y0(o,s,u)),es(n,s,o);break;case 21:es(n,s,o);break;case 22:fn=(u=fn)||o.memoizedState!==null,es(n,s,o),fn=u;break;default:es(n,s,o)}}function tb(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{hl(n)}catch(o){gt(s,s.return,o)}}}function nb(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{hl(n)}catch(o){gt(s,s.return,o)}}function OI(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new W0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new W0),s;default:throw Error(i(435,n.tag))}}function ad(n,s){var o=OI(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=BI.bind(null,n,u);u.then(d,d)}})}function gr(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],m=n,T=s,x=T;e:for(;x!==null;){switch(x.tag){case 27:if(Qs(x.type)){Lt=x.stateNode,mr=!1;break e}break;case 5:Lt=x.stateNode,mr=!1;break e;case 3:case 4:Lt=x.stateNode.containerInfo,mr=!0;break e}x=x.return}if(Lt===null)throw Error(i(160));eb(m,T,d),Lt=null,mr=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)rb(s,n),s=s.sibling}var si=null;function rb(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gr(s,n),pr(n),u&4&&(Bs(3,n,n.return),ku(3,n),Bs(5,n,n.return));break;case 1:gr(s,n),pr(n),u&512&&(fn||o===null||Ri(o,o.return)),u&64&&Zi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=si;if(gr(s,n),pr(n),u&512&&(fn||o===null||Ri(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[ve]||m[Ft]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),Bn(m,u,o),m[Ft]=n,je(m),u=m;break e;case"link":var T=rT("link","href",d).get(u+(o.href||""));if(T){for(var x=0;x<T.length;x++)if(m=T[x],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(x,1);break t}}m=d.createElement(u),Bn(m,u,o),d.head.appendChild(m);break;case"meta":if(T=rT("meta","content",d).get(u+(o.content||""))){for(x=0;x<T.length;x++)if(m=T[x],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(x,1);break t}}m=d.createElement(u),Bn(m,u,o),d.head.appendChild(m);break;default:throw Error(i(468,u))}m[Ft]=n,je(m),u=m}n.stateNode=u}else iT(d,n.type,n.stateNode);else n.stateNode=nT(d,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?iT(d,n.type,n.stateNode):nT(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Ng(n,n.memoizedProps,o.memoizedProps)}break;case 27:gr(s,n),pr(n),u&512&&(fn||o===null||Ri(o,o.return)),o!==null&&u&4&&Ng(n,n.memoizedProps,o.memoizedProps);break;case 5:if(gr(s,n),pr(n),u&512&&(fn||o===null||Ri(o,o.return)),n.flags&32){d=n.stateNode;try{fr(d,"")}catch(Te){gt(n,n.return,Te)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,Ng(n,d,o!==null?o.memoizedProps:d)),u&1024&&(Vg=!0);break;case 6:if(gr(s,n),pr(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Te){gt(n,n.return,Te)}}break;case 3:if(Ed=null,d=si,si=bd(s.containerInfo),gr(s,n),si=d,pr(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{hl(s.containerInfo)}catch(Te){gt(n,n.return,Te)}Vg&&(Vg=!1,ib(n));break;case 4:u=si,si=bd(n.stateNode.containerInfo),gr(s,n),pr(n),si=u;break;case 12:gr(s,n),pr(n);break;case 31:gr(s,n),pr(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ad(n,u)));break;case 13:gr(s,n),pr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ld=Kt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ad(n,u)));break;case 22:d=n.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,K=Zi,Z=fn;if(Zi=K||d,fn=Z||M,gr(s,n),fn=Z,Zi=K,pr(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||M||Zi||fn||Ja(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){M=o=s;try{if(m=M.stateNode,d)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{x=M.stateNode;var ie=M.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;x.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Te){gt(M,M.return,Te)}}}else if(s.tag===6){if(o===null){M=s;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(Te){gt(M,M.return,Te)}}}else if(s.tag===18){if(o===null){M=s;try{var W=M.stateNode;d?Yb(W,!0):Yb(M.stateNode,!1)}catch(Te){gt(M,M.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,ad(n,o))));break;case 19:gr(s,n),pr(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ad(n,u)));break;case 30:break;case 21:break;default:gr(s,n),pr(n)}}function pr(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if($0(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,m=Og(n);sd(n,m,d);break;case 5:var T=o.stateNode;o.flags&32&&(fr(T,""),o.flags&=-33);var x=Og(n);sd(n,x,T);break;case 3:case 4:var M=o.stateNode.containerInfo,K=Og(n);Mg(n,K,M);break;default:throw Error(i(161))}}catch(Z){gt(n,n.return,Z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ib(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;ib(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ts(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)J0(n,s.alternate,s),s=s.sibling}function Ja(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Bs(4,s,s.return),Ja(s);break;case 1:Ri(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Y0(s,s.return,o),Ja(s);break;case 27:Gu(s.stateNode);case 26:case 5:Ri(s,s.return),Ja(s);break;case 22:s.memoizedState===null&&Ja(s);break;case 30:Ja(s);break;default:Ja(s)}n=n.sibling}}function ns(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,m=s,T=m.flags;switch(m.tag){case 0:case 11:case 15:ns(d,m,o),ku(4,m);break;case 1:if(ns(d,m,o),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){gt(u,u.return,K)}if(u=m,d=u.updateQueue,d!==null){var x=u.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)kv(M[d],x)}catch(K){gt(u,u.return,K)}}o&&T&64&&K0(m),Pu(m,m.return);break;case 27:X0(m);case 26:case 5:ns(d,m,o),o&&u===null&&T&4&&Q0(m),Pu(m,m.return);break;case 12:ns(d,m,o);break;case 31:ns(d,m,o),o&&T&4&&tb(d,m);break;case 13:ns(d,m,o),o&&T&4&&nb(d,m);break;case 22:m.memoizedState===null&&ns(d,m,o),Pu(m,m.return);break;case 30:break;default:ns(d,m,o)}s=s.sibling}}function kg(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Eu(o))}function Pg(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Eu(n))}function ai(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sb(n,s,o,u),s=s.sibling}function sb(n,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:ai(n,s,o,u),d&2048&&ku(9,s);break;case 1:ai(n,s,o,u);break;case 3:ai(n,s,o,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Eu(n)));break;case 12:if(d&2048){ai(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,T=m.id,x=m.onPostCommit;typeof x=="function"&&x(T,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){gt(s,s.return,M)}}else ai(n,s,o,u);break;case 31:ai(n,s,o,u);break;case 13:ai(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,T=s.alternate,s.memoizedState!==null?m._visibility&2?ai(n,s,o,u):Lu(n,s):m._visibility&2?ai(n,s,o,u):(m._visibility|=2,el(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&kg(T,s);break;case 24:ai(n,s,o,u),d&2048&&Pg(s.alternate,s);break;default:ai(n,s,o,u)}}function el(n,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,T=s,x=o,M=u,K=T.flags;switch(T.tag){case 0:case 11:case 15:el(m,T,x,M,d),ku(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?el(m,T,x,M,d):Lu(m,T):(Z._visibility|=2,el(m,T,x,M,d)),d&&K&2048&&kg(T.alternate,T);break;case 24:el(m,T,x,M,d),d&&K&2048&&Pg(T.alternate,T);break;default:el(m,T,x,M,d)}s=s.sibling}}function Lu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,d=u.flags;switch(u.tag){case 22:Lu(o,u),d&2048&&kg(u.alternate,u);break;case 24:Lu(o,u),d&2048&&Pg(u.alternate,u);break;default:Lu(o,u)}s=s.sibling}}var ju=8192;function tl(n,s,o){if(n.subtreeFlags&ju)for(n=n.child;n!==null;)ab(n,s,o),n=n.sibling}function ab(n,s,o){switch(n.tag){case 26:tl(n,s,o),n.flags&ju&&n.memoizedState!==null&&_R(o,si,n.memoizedState,n.memoizedProps);break;case 5:tl(n,s,o);break;case 3:case 4:var u=si;si=bd(n.stateNode.containerInfo),tl(n,s,o),si=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=ju,ju=16777216,tl(n,s,o),ju=u):tl(n,s,o));break;default:tl(n,s,o)}}function ob(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Uu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];In=u,ub(u,n)}ob(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)lb(n),n=n.sibling}function lb(n){switch(n.tag){case 0:case 11:case 15:Uu(n),n.flags&2048&&Bs(9,n,n.return);break;case 3:Uu(n);break;case 12:Uu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,od(n)):Uu(n);break;default:Uu(n)}}function od(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];In=u,ub(u,n)}ob(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Bs(8,s,s.return),od(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,od(s));break;default:od(s)}n=n.sibling}}function ub(n,s){for(;In!==null;){var o=In;switch(o.tag){case 0:case 11:case 15:Bs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Eu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,In=u;else e:for(o=n;In!==null;){u=In;var d=u.sibling,m=u.return;if(Z0(u),u===o){In=null;break e}if(d!==null){d.return=m,In=d;break e}In=m}}}var MI={getCacheForType:function(n){var s=Un(cn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Un(cn).controller.signal}},VI=typeof WeakMap=="function"?WeakMap:Map,lt=0,At=null,Ye=null,Xe=0,mt=0,Rr=null,Fs=!1,nl=!1,Lg=!1,rs=0,$t=0,Hs=0,Za=0,jg=0,Cr=0,rl=0,zu=null,yr=null,Ug=!1,ld=0,cb=0,ud=1/0,cd=null,qs=null,bn=0,Gs=null,il=null,is=0,zg=0,Bg=null,hb=null,Bu=0,Fg=null;function Dr(){return(lt&2)!==0&&Xe!==0?Xe&-Xe:Q.T!==null?Qg():Kn()}function db(){if(Cr===0)if((Xe&536870912)===0||et){var n=cr;cr<<=1,(cr&3932160)===0&&(cr=262144),Cr=n}else Cr=536870912;return n=wr.current,n!==null&&(n.flags|=32),Cr}function _r(n,s,o){(n===At&&(mt===2||mt===9)||n.cancelPendingCommit!==null)&&(sl(n,0),Ks(n,Xe,Cr,!1)),Vn(n,o),((lt&2)===0||n!==At)&&(n===At&&((lt&2)===0&&(Za|=o),$t===4&&Ks(n,Xe,Cr,!1)),Ci(n))}function fb(n,s,o){if((lt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Yt(n,s),d=u?LI(n,s):qg(n,s,!0),m=u;do{if(d===0){nl&&!u&&Ks(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!kI(o)){d=qg(n,s,!1),m=!1;continue}if(d===2){if(m=s,n.errorRecoveryDisabledLanes&m)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var x=n;d=zu;var M=x.current.memoizedState.isDehydrated;if(M&&(sl(x,T).flags|=256),T=qg(x,T,!1),T!==2){if(Lg&&!M){x.errorRecoveryDisabledLanes|=m,Za|=m,d=4;break e}m=yr,yr=d,m!==null&&(yr===null?yr=m:yr.push.apply(yr,m))}d=T}if(m=!1,d!==2)continue}}if(d===1){sl(n,0),Ks(n,s,0,!0);break}e:{switch(u=n,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ks(u,s,Cr,!Fs);break e;case 2:yr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=ld+300-Kt(),10<d)){if(Ks(u,s,Cr,!Fs),It(u,0,!0)!==0)break e;is=s,u.timeoutHandle=qb(mb.bind(null,u,o,yr,cd,Ug,s,Cr,Za,rl,Fs,m,"Throttled",-0,0),d);break e}mb(u,o,yr,cd,Ug,s,Cr,Za,rl,Fs,m,null,-0,0)}}break}while(!0);Ci(n)}function mb(n,s,o,u,d,m,T,x,M,K,Z,ie,Y,W){if(n.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zr},ab(s,m,ie);var Te=(m&62914560)===m?ld-Kt():(m&4194048)===m?cb-Kt():0;if(Te=vR(ie,Te),Te!==null){is=m,n.cancelPendingCommit=Te(Eb.bind(null,n,s,m,o,u,d,T,x,M,Z,ie,null,Y,W)),Ks(n,m,T,!K);return}}Eb(n,s,m,o,u,d,T,x,M)}function kI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],m=d.getSnapshot;d=d.value;try{if(!xr(m(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ks(n,s,o,u){s&=~jg,s&=~Za,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var m=31-at(d),T=1<<m;u[m]=-1,d&=~T}o!==0&&yn(n,o,s)}function hd(){return(lt&6)===0?(Fu(0),!1):!0}function Hg(){if(Ye!==null){if(mt===0)var n=Ye.return;else n=Ye,Yi=qa=null,sg(n),$o=null,xu=0,n=Ye;for(;n!==null;)G0(n.alternate,n),n=n.return;Ye=null}}function sl(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,tR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),is=0,Hg(),At=n,Ye=o=Gi(n.current,null),Xe=s,mt=0,Rr=null,Fs=!1,nl=Yt(n,s),Lg=!1,rl=Cr=jg=Za=Hs=$t=0,yr=zu=null,Ug=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-at(u),m=1<<d;s|=n[d],u&=~m}return rs=s,Oh(),o}function gb(n,s){Le=null,Q.H=Ou,s===Qo||s===zh?(s=Nv(),mt=3):s===Ym?(s=Nv(),mt=4):mt=s===Tg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rr=s,Ye===null&&($t=1,ed(n,Fr(s,n.current)))}function pb(){var n=wr.current;return n===null?!0:(Xe&4194048)===Xe?Kr===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===Kr:!1}function yb(){var n=Q.H;return Q.H=Ou,n===null?Ou:n}function _b(){var n=Q.A;return Q.A=MI,n}function dd(){$t=4,Fs||(Xe&4194048)!==Xe&&wr.current!==null||(nl=!0),(Hs&134217727)===0&&(Za&134217727)===0||At===null||Ks(At,Xe,Cr,!1)}function qg(n,s,o){var u=lt;lt|=2;var d=yb(),m=_b();(At!==n||Xe!==s)&&(cd=null,sl(n,s)),s=!1;var T=$t;e:do try{if(mt!==0&&Ye!==null){var x=Ye,M=Rr;switch(mt){case 8:Hg(),T=6;break e;case 3:case 2:case 9:case 6:wr.current===null&&(s=!0);var K=mt;if(mt=0,Rr=null,al(n,x,M,K),o&&nl){T=0;break e}break;default:K=mt,mt=0,Rr=null,al(n,x,M,K)}}PI(),T=$t;break}catch(Z){gb(n,Z)}while(!0);return s&&n.shellSuspendCounter++,Yi=qa=null,lt=u,Q.H=d,Q.A=m,Ye===null&&(At=null,Xe=0,Oh()),T}function PI(){for(;Ye!==null;)vb(Ye)}function LI(n,s){var o=lt;lt|=2;var u=yb(),d=_b();At!==n||Xe!==s?(cd=null,ud=Kt()+500,sl(n,s)):nl=Yt(n,s);e:do try{if(mt!==0&&Ye!==null){s=Ye;var m=Rr;t:switch(mt){case 1:mt=0,Rr=null,al(n,s,m,1);break;case 2:case 9:if(Cv(m)){mt=0,Rr=null,bb(s);break}s=function(){mt!==2&&mt!==9||At!==n||(mt=7),Ci(n)},m.then(s,s);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Cv(m)?(mt=0,Rr=null,bb(s)):(mt=0,Rr=null,al(n,s,m,7));break;case 5:var T=null;switch(Ye.tag){case 26:T=Ye.memoizedState;case 5:case 27:var x=Ye;if(T?sT(T):x.stateNode.complete){mt=0,Rr=null;var M=x.sibling;if(M!==null)Ye=M;else{var K=x.return;K!==null?(Ye=K,fd(K)):Ye=null}break t}}mt=0,Rr=null,al(n,s,m,5);break;case 6:mt=0,Rr=null,al(n,s,m,6);break;case 8:Hg(),$t=6;break e;default:throw Error(i(462))}}jI();break}catch(Z){gb(n,Z)}while(!0);return Yi=qa=null,Q.H=u,Q.A=d,lt=o,Ye!==null?0:(At=null,Xe=0,Oh(),$t)}function jI(){for(;Ye!==null&&!Jr();)vb(Ye)}function vb(n){var s=H0(n.alternate,n,rs);n.memoizedProps=n.pendingProps,s===null?fd(n):Ye=s}function bb(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=L0(o,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=L0(o,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:sg(s);default:G0(o,s),s=Ye=_v(s,rs),s=H0(o,s,rs)}n.memoizedProps=n.pendingProps,s===null?fd(n):Ye=s}function al(n,s,o,u){Yi=qa=null,sg(s),$o=null,xu=0;var d=s.return;try{if(wI(n,d,s,o,Xe)){$t=1,ed(n,Fr(o,n.current)),Ye=null;return}}catch(m){if(d!==null)throw Ye=d,m;$t=1,ed(n,Fr(o,n.current)),Ye=null;return}s.flags&32768?(et||u===1?n=!0:nl||(Xe&536870912)!==0?n=!1:(Fs=n=!0,(u===2||u===9||u===3||u===6)&&(u=wr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Tb(s,n)):fd(s)}function fd(n){var s=n;do{if((s.flags&32768)!==0){Tb(s,Fs);return}n=s.return;var o=CI(s.alternate,s,rs);if(o!==null){Ye=o;return}if(s=s.sibling,s!==null){Ye=s;return}Ye=s=n}while(s!==null);$t===0&&($t=5)}function Tb(n,s){do{var o=DI(n.alternate,n);if(o!==null){o.flags&=32767,Ye=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ye=n;return}Ye=n=o}while(n!==null);$t=6,Ye=null}function Eb(n,s,o,u,d,m,T,x,M){n.cancelPendingCommit=null;do md();while(bn!==0);if((lt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Om,Nt(n,o,m,T,x,M),n===At&&(Ye=At=null,Xe=0),il=s,Gs=n,is=o,zg=m,Bg=d,hb=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,FI(pn,function(){return Ib(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,d=le.p,le.p=2,T=lt,lt|=4;try{NI(n,s,o)}finally{lt=T,le.p=d,Q.T=u}}bn=1,Sb(),xb(),Ab()}}function Sb(){if(bn===1){bn=0;var n=Gs,s=il,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=le.p;le.p=2;var d=lt;lt|=4;try{rb(s,n);var m=np,T=uv(n.containerInfo),x=m.focusedElem,M=m.selectionRange;if(T!==x&&x&&x.ownerDocument&&lv(x.ownerDocument.documentElement,x)){if(M!==null&&Im(x)){var K=M.start,Z=M.end;if(Z===void 0&&(Z=K),"selectionStart"in x)x.selectionStart=K,x.selectionEnd=Math.min(Z,x.value.length);else{var ie=x.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),Te=x.textContent.length,Ce=Math.min(M.start,Te),Et=M.end===void 0?Ce:Math.min(M.end,Te);!W.extend&&Ce>Et&&(T=Et,Et=Ce,Ce=T);var B=ov(x,Ce),j=ov(x,Et);if(B&&j&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==j.node||W.focusOffset!==j.offset)){var G=ie.createRange();G.setStart(B.node,B.offset),W.removeAllRanges(),Ce>Et?(W.addRange(G),W.extend(j.node,j.offset)):(G.setEnd(j.node,j.offset),W.addRange(G))}}}}for(ie=[],W=x;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ie.length;x++){var ee=ie[x];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}wd=!!tp,np=tp=null}finally{lt=d,le.p=u,Q.T=o}}n.current=s,bn=2}}function xb(){if(bn===2){bn=0;var n=Gs,s=il,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=le.p;le.p=2;var d=lt;lt|=4;try{J0(n,s.alternate,s)}finally{lt=d,le.p=u,Q.T=o}}bn=3}}function Ab(){if(bn===4||bn===3){bn=0,zi();var n=Gs,s=il,o=is,u=hb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?bn=5:(bn=0,il=Gs=null,wb(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(qs=null),Bt(o),s=s.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(An,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,d=le.p,le.p=2,Q.T=null;try{for(var m=n.onRecoverableError,T=0;T<u.length;T++){var x=u[T];m(x.value,{componentStack:x.stack})}}finally{Q.T=s,le.p=d}}(is&3)!==0&&md(),Ci(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===Fg?Bu++:(Bu=0,Fg=n):Bu=0,Fu(0)}}function wb(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Eu(s)))}function md(){return Sb(),xb(),Ab(),Ib()}function Ib(){if(bn!==5)return!1;var n=Gs,s=zg;zg=0;var o=Bt(is),u=Q.T,d=le.p;try{le.p=32>o?32:o,Q.T=null,o=Bg,Bg=null;var m=Gs,T=is;if(bn=0,il=Gs=null,is=0,(lt&6)!==0)throw Error(i(331));var x=lt;if(lt|=4,lb(m.current),sb(m,m.current,T,o),lt=x,Fu(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(An,m)}catch{}return!0}finally{le.p=d,Q.T=u,wb(n,s)}}function Rb(n,s,o){s=Fr(o,s),s=bg(n.stateNode,s,2),n=js(n,s,2),n!==null&&(Vn(n,2),Ci(n))}function gt(n,s,o){if(n.tag===3)Rb(n,n,o);else for(;s!==null;){if(s.tag===3){Rb(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qs===null||!qs.has(u))){n=Fr(o,n),o=C0(2),u=js(s,o,2),u!==null&&(D0(o,u,s,n),Vn(u,2),Ci(u));break}}s=s.return}}function Gg(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new VI;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Lg=!0,d.add(o),n=UI.bind(null,n,s,o),s.then(n,n))}function UI(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,At===n&&(Xe&o)===o&&($t===4||$t===3&&(Xe&62914560)===Xe&&300>Kt()-ld?(lt&2)===0&&sl(n,0):jg|=o,rl===Xe&&(rl=0)),Ci(n)}function Cb(n,s){s===0&&(s=Dt()),n=Ba(n,s),n!==null&&(Vn(n,s),Ci(n))}function zI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Cb(n,o)}function BI(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Cb(n,o)}function FI(n,s){return rt(n,s)}var gd=null,ol=null,Kg=!1,pd=!1,Yg=!1,Ys=0;function Ci(n){n!==ol&&n.next===null&&(ol===null?gd=ol=n:ol=ol.next=n),pd=!0,Kg||(Kg=!0,qI())}function Fu(n,s){if(!Yg&&pd){Yg=!0;do for(var o=!1,u=gd;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var T=u.suspendedLanes,x=u.pingedLanes;m=(1<<31-at(42|n)+1)-1,m&=d&~(T&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Mb(u,m))}else m=Xe,m=It(u,u===At?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Yt(u,m)||(o=!0,Mb(u,m));u=u.next}while(o);Yg=!1}}function HI(){Db()}function Db(){pd=Kg=!1;var n=0;Ys!==0&&eR()&&(n=Ys);for(var s=Kt(),o=null,u=gd;u!==null;){var d=u.next,m=Nb(u,s);m===0?(u.next=null,o===null?gd=d:o.next=d,d===null&&(ol=o)):(o=u,(n!==0||(m&3)!==0)&&(pd=!0)),u=d}bn!==0&&bn!==5||Fu(n),Ys!==0&&(Ys=0)}function Nb(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var T=31-at(m),x=1<<T,M=d[T];M===-1?((x&o)===0||(x&u)!==0)&&(d[T]=$e(x,s)):M<=s&&(n.expiredLanes|=x),m&=~x}if(s=At,o=Xe,o=It(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(mt===2||mt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Gn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Yt(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Gn(u),Bt(o)){case 2:case 8:o=Ut;break;case 32:o=pn;break;case 268435456:o=pi;break;default:o=pn}return u=Ob.bind(null,n),o=rt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Gn(u),n.callbackPriority=2,n.callbackNode=null,2}function Ob(n,s){if(bn!==0&&bn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(md()&&n.callbackNode!==o)return null;var u=Xe;return u=It(n,n===At?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(fb(n,u,s),Nb(n,Kt()),n.callbackNode!=null&&n.callbackNode===o?Ob.bind(null,n):null)}function Mb(n,s){if(md())return null;fb(n,s,!0)}function qI(){nR(function(){(lt&6)!==0?rt(ur,HI):Db()})}function Qg(){if(Ys===0){var n=Ko;n===0&&(n=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),Ys=n}return Ys}function Vb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:No(""+n)}function kb(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function GI(n,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var m=Vb((d[_t]||null).action),T=u.submitter;T&&(s=(s=T[_t]||null)?Vb(s.formAction):T.getAttribute("formAction"),s!==null&&(m=s,T=null));var x=new Ei("action","action",null,u,d);n.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ys!==0){var M=T?kb(d,T):new FormData(d);mg(o,{pending:!0,data:M,method:d.method,action:m},null,M)}}else typeof m=="function"&&(x.preventDefault(),M=T?kb(d,T):new FormData(d),mg(o,{pending:!0,data:M,method:d.method,action:m},m,M))},currentTarget:d}]})}}for(var $g=0;$g<Nm.length;$g++){var Xg=Nm[$g],KI=Xg.toLowerCase(),YI=Xg[0].toUpperCase()+Xg.slice(1);ii(KI,"on"+YI)}ii(dv,"onAnimationEnd"),ii(fv,"onAnimationIteration"),ii(mv,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(uI,"onTransitionRun"),ii(cI,"onTransitionStart"),ii(hI,"onTransitionCancel"),ii(gv,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hu));function Pb(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var T=u.length-1;0<=T;T--){var x=u[T],M=x.instance,K=x.currentTarget;if(x=x.listener,M!==m&&d.isPropagationStopped())break e;m=x,d.currentTarget=K;try{m(d)}catch(Z){Nh(Z)}d.currentTarget=null,m=M}else for(T=0;T<u.length;T++){if(x=u[T],M=x.instance,K=x.currentTarget,x=x.listener,M!==m&&d.isPropagationStopped())break e;m=x,d.currentTarget=K;try{m(d)}catch(Z){Nh(Z)}d.currentTarget=null,m=M}}}}function Qe(n,s){var o=s[Bi];o===void 0&&(o=s[Bi]=new Set);var u=n+"__bubble";o.has(u)||(Lb(s,n,2,!1),o.add(u))}function Wg(n,s,o){var u=0;s&&(u|=4),Lb(o,n,u,s)}var yd="_reactListening"+Math.random().toString(36).slice(2);function Jg(n){if(!n[yd]){n[yd]=!0,ln.forEach(function(o){o!=="selectionchange"&&(QI.has(o)||Wg(o,!1,n),Wg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[yd]||(s[yd]=!0,Wg("selectionchange",!1,s))}}function Lb(n,s,o,u){switch(dT(s)){case 2:var d=ER;break;case 8:d=SR;break;default:d=fp}o=d.bind(null,s,o,n),d=void 0,!Ma||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function Zg(n,s,o,u,d){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var x=u.stateNode.containerInfo;if(x===d)break;if(T===4)for(T=u.return;T!==null;){var M=T.tag;if((M===3||M===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;x!==null;){if(T=oe(x),T===null)return;if(M=T.tag,M===5||M===6||M===26||M===27){u=m=T;continue e}x=x.parentNode}}u=u.return}Rs(function(){var K=m,Z=jr(o),ie=[];e:{var Y=pv.get(n);if(Y!==void 0){var W=Ei,Te=n;switch(n){case"keypress":if(ka(o)===0)break e;case"keydown":case"keyup":W=Rh;break;case"focusin":Te="focus",W=La;break;case"focusout":Te="blur",W=La;break;case"beforeblur":case"afterblur":W=La;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case dv:case fv:case mv:W=Th;break;case gv:W=A;break;case"scroll":case"scrollend":W=fu;break;case"wheel":W=$;break;case"copy":case"cut":case"paste":W=Eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=qi;break;case"toggle":case"beforetoggle":W=Pe}var Ce=(s&4)!==0,Et=!Ce&&(n==="scroll"||n==="scrollend"),B=Ce?Y!==null?Y+"Capture":null:Y;Ce=[];for(var j=K,G;j!==null;){var ee=j;if(G=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||G===null||B===null||(ee=ei(j,B),ee!=null&&Ce.push(qu(j,ee,G))),Et)break;j=j.return}0<Ce.length&&(Y=new W(Y,Te,null,o,Z),ie.push({event:Y,listeners:Ce}))}}if((s&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",Y&&o!==cu&&(Te=o.relatedTarget||o.fromElement)&&(oe(Te)||Te[Er]))break e;if((W||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(Te=o.relatedTarget||o.toElement,W=K,Te=Te?oe(Te):null,Te!==null&&(Et=l(Te),Ce=Te.tag,Te!==Et||Ce!==5&&Ce!==27&&Ce!==6)&&(Te=null)):(W=null,Te=K),W!==Te)){if(Ce=mu,ee="onMouseLeave",B="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=qi,ee="onPointerLeave",B="onPointerEnter",j="pointer"),Et=W==null?Y:qe(W),G=Te==null?Y:qe(Te),Y=new Ce(ee,j+"leave",W,o,Z),Y.target=Et,Y.relatedTarget=G,ee=null,oe(Z)===K&&(Ce=new Ce(B,j+"enter",Te,o,Z),Ce.target=G,Ce.relatedTarget=Et,ee=Ce),Et=ee,W&&Te)t:{for(Ce=$I,B=W,j=Te,G=0,ee=B;ee;ee=Ce(ee))G++;ee=0;for(var Ie=j;Ie;Ie=Ce(Ie))ee++;for(;0<G-ee;)B=Ce(B),G--;for(;0<ee-G;)j=Ce(j),ee--;for(;G--;){if(B===j||j!==null&&B===j.alternate){Ce=B;break t}B=Ce(B),j=Ce(j)}Ce=null}else Ce=null;W!==null&&jb(ie,Y,W,Ce,!1),Te!==null&&Et!==null&&jb(ie,Et,Te,Ce,!0)}}e:{if(Y=K?qe(K):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var it=tv;else if(Z_(Y))if(nv)it=aI;else{it=iI;var xe=rI}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?K&&Do(K.elementType)&&(it=tv):it=sI;if(it&&(it=it(n,K))){ev(ie,it,o,Z);break e}xe&&xe(n,Y,K),n==="focusout"&&K&&Y.type==="number"&&K.memoizedProps.value!=null&&ou(Y,"number",Y.value)}switch(xe=K?qe(K):window,n){case"focusin":(Z_(xe)||xe.contentEditable==="true")&&(jo=xe,Rm=K,vu=null);break;case"focusout":vu=Rm=jo=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,cv(ie,o,Z);break;case"selectionchange":if(lI)break;case"keydown":case"keyup":cv(ie,o,Z)}var Ue;if(ot)e:{switch(n){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Lo?ja(n,o)&&(We="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(We="onCompositionStart");We&&(Ai&&o.locale!=="ko"&&(Lo||We!=="onCompositionStart"?We==="onCompositionEnd"&&Lo&&(Ue=du()):(Ti=Z,hu="value"in Ti?Ti.value:Ti.textContent,Lo=!0)),xe=_d(K,We),0<xe.length&&(We=new xi(We,n,null,o,Z),ie.push({event:We,listeners:xe}),Ue?We.data=Ue:(Ue=Po(o),Ue!==null&&(We.data=Ue)))),(Ue=zr?Z1(n,o):eI(n,o))&&(We=_d(K,"onBeforeInput"),0<We.length&&(xe=new xi("onBeforeInput","beforeinput",null,o,Z),ie.push({event:xe,listeners:We}),xe.data=Ue)),GI(ie,n,K,o,Z)}Pb(ie,s)})}function qu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function _d(n,s){for(var o=s+"Capture",u=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=ei(n,o),d!=null&&u.unshift(qu(n,d,m)),d=ei(n,s),d!=null&&u.push(qu(n,d,m))),n.tag===3)return u;n=n.return}return[]}function $I(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function jb(n,s,o,u,d){for(var m=s._reactName,T=[];o!==null&&o!==u;){var x=o,M=x.alternate,K=x.stateNode;if(x=x.tag,M!==null&&M===u)break;x!==5&&x!==26&&x!==27||K===null||(M=K,d?(K=ei(o,m),K!=null&&T.unshift(qu(o,K,M))):d||(K=ei(o,m),K!=null&&T.push(qu(o,K,M)))),o=o.return}T.length!==0&&n.push({event:s,listeners:T})}var XI=/\r\n?/g,WI=/\u0000|\uFFFD/g;function Ub(n){return(typeof n=="string"?n:""+n).replace(XI,`
`).replace(WI,"")}function zb(n,s){return s=Ub(s),Ub(n)===s}function Tt(n,s,o,u,d,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||fr(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&fr(n,""+u);break;case"className":Sr(n,"class",u);break;case"tabIndex":Sr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(n,o,u);break;case"style":uu(n,u,m);break;case"data":if(s!=="object"){Sr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=No(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Tt(n,s,"name",d.name,d,null),Tt(n,s,"formEncType",d.formEncType,d,null),Tt(n,s,"formMethod",d.formMethod,d,null),Tt(n,s,"formTarget",d.formTarget,d,null)):(Tt(n,s,"encType",d.encType,d,null),Tt(n,s,"method",d.method,d,null),Tt(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=No(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Zr);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=No(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Ro(n,"popover",u);break;case"xlinkActuate":un(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":un(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":un(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":un(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":un(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":un(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":un(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":un(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":un(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ro(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_h.get(o)||o,Ro(n,o,u))}}function ep(n,s,o,u,d,m){switch(o){case"style":uu(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?fr(n,u):(typeof u=="number"||typeof u=="bigint")&&fr(n,""+u);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),m=n[_t]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ro(n,o,u)}}}function Bn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var u=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var T=o[m];if(T!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Tt(n,s,m,T,o,null)}}d&&Tt(n,s,"srcSet",o.srcSet,o,null),u&&Tt(n,s,"src",o.src,o,null);return;case"input":Qe("invalid",n);var x=m=T=d=null,M=null,K=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":d=Z;break;case"type":T=Z;break;case"checked":M=Z;break;case"defaultChecked":K=Z;break;case"value":m=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Tt(n,s,u,Z,o,null)}}gh(n,m,x,M,K,T,d,!1);return;case"select":Qe("invalid",n),u=T=m=null;for(d in o)if(o.hasOwnProperty(d)&&(x=o[d],x!=null))switch(d){case"value":m=x;break;case"defaultValue":T=x;break;case"multiple":u=x;default:Tt(n,s,d,x,o,null)}s=m,o=T,n.multiple=!!u,s!=null?xs(n,!!u,s,!1):o!=null&&xs(n,!!u,o,!0);return;case"textarea":Qe("invalid",n),m=d=u=null;for(T in o)if(o.hasOwnProperty(T)&&(x=o[T],x!=null))switch(T){case"value":u=x;break;case"defaultValue":d=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:Tt(n,s,T,x,o,null)}As(n,u,d,m);return;case"option":for(M in o)o.hasOwnProperty(M)&&(u=o[M],u!=null)&&(M==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":Tt(n,s,M,u,o,null));return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(u=0;u<Hu.length;u++)Qe(Hu[u],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(u=o[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Tt(n,s,K,u,o,null)}return;default:if(Do(s)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&ep(n,s,Z,u,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null&&Tt(n,s,x,u,o,null))}function JI(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,T=null,x=null,M=null,K=null,Z=null;for(W in o){var ie=o[W];if(o.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=ie;default:u.hasOwnProperty(W)||Tt(n,s,W,null,u,ie)}}for(var Y in u){var W=u[Y];if(ie=o[Y],u.hasOwnProperty(Y)&&(W!=null||ie!=null))switch(Y){case"type":m=W;break;case"name":d=W;break;case"checked":K=W;break;case"defaultChecked":Z=W;break;case"value":T=W;break;case"defaultValue":x=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ie&&Tt(n,s,Y,W,u,ie)}}Co(n,T,x,M,K,Z,m,d);return;case"select":W=T=x=Y=null;for(m in o)if(M=o[m],o.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":W=M;default:u.hasOwnProperty(m)||Tt(n,s,m,null,u,M)}for(d in u)if(m=u[d],M=o[d],u.hasOwnProperty(d)&&(m!=null||M!=null))switch(d){case"value":Y=m;break;case"defaultValue":x=m;break;case"multiple":T=m;default:m!==M&&Tt(n,s,d,m,u,M)}s=x,o=T,u=W,Y!=null?xs(n,!!o,Y,!1):!!u!=!!o&&(s!=null?xs(n,!!o,s,!0):xs(n,!!o,o?[]:"",!1));return;case"textarea":W=Y=null;for(x in o)if(d=o[x],o.hasOwnProperty(x)&&d!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Tt(n,s,x,null,u,d)}for(T in u)if(d=u[T],m=o[T],u.hasOwnProperty(T)&&(d!=null||m!=null))switch(T){case"value":Y=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&Tt(n,s,T,d,u,m)}ph(n,Y,W);return;case"option":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!u.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:Tt(n,s,Te,null,u,Y));for(M in u)Y=u[M],W=o[M],u.hasOwnProperty(M)&&Y!==W&&(Y!=null||W!=null)&&(M==="selected"?n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":Tt(n,s,M,Y,u,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in o)Y=o[Ce],o.hasOwnProperty(Ce)&&Y!=null&&!u.hasOwnProperty(Ce)&&Tt(n,s,Ce,null,u,Y);for(K in u)if(Y=u[K],W=o[K],u.hasOwnProperty(K)&&Y!==W&&(Y!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Tt(n,s,K,Y,u,W)}return;default:if(Do(s)){for(var Et in o)Y=o[Et],o.hasOwnProperty(Et)&&Y!==void 0&&!u.hasOwnProperty(Et)&&ep(n,s,Et,void 0,u,Y);for(Z in u)Y=u[Z],W=o[Z],!u.hasOwnProperty(Z)||Y===W||Y===void 0&&W===void 0||ep(n,s,Z,Y,u,W);return}}for(var B in o)Y=o[B],o.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&Tt(n,s,B,null,u,Y);for(ie in u)Y=u[ie],W=o[ie],!u.hasOwnProperty(ie)||Y===W||Y==null&&W==null||Tt(n,s,ie,Y,u,W)}function Bb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],m=d.transferSize,T=d.initiatorType,x=d.duration;if(m&&x&&Bb(T)){for(T=0,x=d.responseEnd,u+=1;u<o.length;u++){var M=o[u],K=M.startTime;if(K>x)break;var Z=M.transferSize,ie=M.initiatorType;Z&&Bb(ie)&&(M=M.responseEnd,T+=Z*(M<x?1:(x-K)/(M-K)))}if(--u,s+=8*(m+T)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var tp=null,np=null;function vd(n){return n.nodeType===9?n:n.ownerDocument}function Fb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hb(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function rp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ip=null;function eR(){var n=window.event;return n&&n.type==="popstate"?n===ip?!1:(ip=n,!0):(ip=null,!1)}var qb=typeof setTimeout=="function"?setTimeout:void 0,tR=typeof clearTimeout=="function"?clearTimeout:void 0,Gb=typeof Promise=="function"?Promise:void 0,nR=typeof queueMicrotask=="function"?queueMicrotask:typeof Gb<"u"?function(n){return Gb.resolve(null).then(n).catch(rR)}:qb;function rR(n){setTimeout(function(){throw n})}function Qs(n){return n==="head"}function Kb(n,s){var o=s,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),hl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Gu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Gu(o);for(var m=o.firstChild;m;){var T=m.nextSibling,x=m.nodeName;m[ve]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=T}}else o==="body"&&Gu(n.ownerDocument.body);o=d}while(o);hl(s)}function Yb(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function sp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":sp(o),L(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function iR(n,s,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ve])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Yr(n.nextSibling),n===null)break}return null}function sR(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Yr(n.nextSibling),n===null))return null;return n}function Qb(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Yr(n.nextSibling),n===null))return null;return n}function ap(n){return n.data==="$?"||n.data==="$~"}function op(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function aR(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Yr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var lp=null;function $b(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Yr(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Xb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function Wb(n,s,o){switch(s=vd(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Gu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);L(n)}var Qr=new Map,Jb=new Set;function bd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ss=le.d;le.d={f:oR,r:lR,D:uR,C:cR,L:hR,m:dR,X:mR,S:fR,M:gR};function oR(){var n=ss.f(),s=hd();return n||s}function lR(n){var s=_e(n);s!==null&&s.tag===5&&s.type==="form"?g0(s):ss.r(n)}var ll=typeof document>"u"?null:document;function Zb(n,s,o){var u=ll;if(u&&typeof s=="string"&&s){var d=dr(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Jb.has(d)||(Jb.add(d),n={rel:n,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Bn(s,"link",n),je(s),u.head.appendChild(s)))}}function uR(n){ss.D(n),Zb("dns-prefetch",n,null)}function cR(n,s){ss.C(n,s),Zb("preconnect",n,s)}function hR(n,s,o){ss.L(n,s,o);var u=ll;if(u&&n&&s){var d='link[rel="preload"][as="'+dr(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+dr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+dr(o.imageSizes)+'"]')):d+='[href="'+dr(n)+'"]';var m=d;switch(s){case"style":m=ul(n);break;case"script":m=cl(n)}Qr.has(m)||(n=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Qr.set(m,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Ku(m))||s==="script"&&u.querySelector(Yu(m))||(s=u.createElement("link"),Bn(s,"link",n),je(s),u.head.appendChild(s)))}}function dR(n,s){ss.m(n,s);var o=ll;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+dr(u)+'"][href="'+dr(n)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=cl(n)}if(!Qr.has(m)&&(n=v({rel:"modulepreload",href:n},s),Qr.set(m,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yu(m)))return}u=o.createElement("link"),Bn(u,"link",n),je(u),o.head.appendChild(u)}}}function fR(n,s,o){ss.S(n,s,o);var u=ll;if(u&&n){var d=xt(u).hoistableStyles,m=ul(n);s=s||"default";var T=d.get(m);if(!T){var x={loading:0,preload:null};if(T=u.querySelector(Ku(m)))x.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Qr.get(m))&&up(n,o);var M=T=u.createElement("link");je(M),Bn(M,"link",n),M._p=new Promise(function(K,Z){M.onload=K,M.onerror=Z}),M.addEventListener("load",function(){x.loading|=1}),M.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Td(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:x},d.set(m,T)}}}function mR(n,s){ss.X(n,s);var o=ll;if(o&&n){var u=xt(o).hoistableScripts,d=cl(n),m=u.get(d);m||(m=o.querySelector(Yu(d)),m||(n=v({src:n,async:!0},s),(s=Qr.get(d))&&cp(n,s),m=o.createElement("script"),je(m),Bn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function gR(n,s){ss.M(n,s);var o=ll;if(o&&n){var u=xt(o).hoistableScripts,d=cl(n),m=u.get(d);m||(m=o.querySelector(Yu(d)),m||(n=v({src:n,async:!0,type:"module"},s),(s=Qr.get(d))&&cp(n,s),m=o.createElement("script"),je(m),Bn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function eT(n,s,o,u){var d=(d=Ae.current)?bd(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ul(o.href),o=xt(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ul(o.href);var m=xt(d).hoistableStyles,T=m.get(n);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,T),(m=d.querySelector(Ku(n)))&&!m._p&&(T.instance=m,T.state.loading=5),Qr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qr.set(n,o),m||pR(d,n,o,T.state))),s&&u===null)throw Error(i(528,""));return T}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=cl(o),o=xt(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ul(n){return'href="'+dr(n)+'"'}function Ku(n){return'link[rel="stylesheet"]['+n+"]"}function tT(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function pR(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Bn(s,"link",o),je(s),n.head.appendChild(s))}function cl(n){return'[src="'+dr(n)+'"]'}function Yu(n){return"script[async]"+n}function nT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+dr(o.href)+'"]');if(u)return s.instance=u,je(u),u;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),je(u),Bn(u,"style",d),Td(u,o.precedence,n),s.instance=u;case"stylesheet":d=ul(o.href);var m=n.querySelector(Ku(d));if(m)return s.state.loading|=4,s.instance=m,je(m),m;u=tT(o),(d=Qr.get(d))&&up(u,d),m=(n.ownerDocument||n).createElement("link"),je(m);var T=m;return T._p=new Promise(function(x,M){T.onload=x,T.onerror=M}),Bn(m,"link",u),s.state.loading|=4,Td(m,o.precedence,n),s.instance=m;case"script":return m=cl(o.src),(d=n.querySelector(Yu(m)))?(s.instance=d,je(d),d):(u=o,(d=Qr.get(m))&&(u=v({},o),cp(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),je(d),Bn(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Td(u,o.precedence,n));return s.instance}function Td(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,T=0;T<u.length;T++){var x=u[T];if(x.dataset.precedence===s)m=x;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function up(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function cp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ed=null;function rT(n,s,o){if(Ed===null){var u=new Map,d=Ed=new Map;d.set(o,u)}else d=Ed,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var m=o[d];if(!(m[ve]||m[Ft]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(s)||"";T=n+T;var x=u.get(T);x?x.push(m):u.set(T,[m])}}return u}function iT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function yR(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function sT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function _R(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=ul(u.href),m=s.querySelector(Ku(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Sd.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,je(m);return}m=s.ownerDocument||s,u=tT(u),(d=Qr.get(d))&&up(u,d),m=m.createElement("link"),je(m);var T=m;T._p=new Promise(function(x,M){T.onload=x,T.onerror=M}),Bn(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Sd.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var hp=0;function vR(n,s){return n.stylesheets&&n.count===0&&Ad(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Ad(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&hp===0&&(hp=62500*ZI());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ad(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>hp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Sd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ad(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var xd=null;function Ad(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,xd=new Map,s.forEach(bR,n),xd=null,Sd.call(n))}function bR(n,s){if(!(s.state.loading&4)){var o=xd.get(n);if(o)var u=o.get(null);else{o=new Map,xd.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var T=d[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}d=s.instance,T=d.getAttribute("data-precedence"),m=o.get(T)||u,m===u&&o.set(null,d),o.set(T,d),this.count++,u=Sd.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Qu={$$typeof:re,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function TR(n,s,o,u,d,m,T,x,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function aT(n,s,o,u,d,m,T,x,M,K,Z,ie){return n=new TR(n,s,o,T,M,K,Z,ie,x),s=1,m===!0&&(s|=24),m=Ar(3,null,null,s),n.current=m,m.stateNode=n,s=qm(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Qm(m),n}function oT(n){return n?(n=Bo,n):Bo}function lT(n,s,o,u,d,m){d=oT(d),u.context===null?u.context=d:u.pendingContext=d,u=Ls(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=js(n,u,s),o!==null&&(_r(o,n,s),wu(o,n,s))}function uT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function dp(n,s){uT(n,s),(n=n.alternate)&&uT(n,s)}function cT(n){if(n.tag===13||n.tag===31){var s=Ba(n,67108864);s!==null&&_r(s,n,67108864),dp(n,67108864)}}function hT(n){if(n.tag===13||n.tag===31){var s=Dr();s=kt(s);var o=Ba(n,s);o!==null&&_r(o,n,s),dp(n,s)}}var wd=!0;function ER(n,s,o,u){var d=Q.T;Q.T=null;var m=le.p;try{le.p=2,fp(n,s,o,u)}finally{le.p=m,Q.T=d}}function SR(n,s,o,u){var d=Q.T;Q.T=null;var m=le.p;try{le.p=8,fp(n,s,o,u)}finally{le.p=m,Q.T=d}}function fp(n,s,o,u){if(wd){var d=mp(u);if(d===null)Zg(n,s,u,Id,o),fT(n,u);else if(AR(d,n,s,o,u))u.stopPropagation();else if(fT(n,u),s&4&&-1<xR.indexOf(n)){for(;d!==null;){var m=_e(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=ct(m.pendingLanes);if(T!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var M=1<<31-at(T);x.entanglements[1]|=M,T&=~M}Ci(m),(lt&6)===0&&(ud=Kt()+500,Fu(0))}}break;case 31:case 13:x=Ba(m,2),x!==null&&_r(x,m,2),hd(),dp(m,2)}if(m=mp(u),m===null&&Zg(n,s,u,Id,o),m===d)break;d=m}d!==null&&u.stopPropagation()}else Zg(n,s,u,null,o)}}function mp(n){return n=jr(n),gp(n)}var Id=null;function gp(n){if(Id=null,n=oe(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Id=n,null}function dT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case ur:return 2;case Ut:return 8;case pn:case Lr:return 32;case pi:return 268435456;default:return 32}default:return 32}}var pp=!1,$s=null,Xs=null,Ws=null,$u=new Map,Xu=new Map,Js=[],xR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fT(n,s){switch(n){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":$u.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xu.delete(s.pointerId)}}function Wu(n,s,o,u,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},s!==null&&(s=_e(s),s!==null&&cT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function AR(n,s,o,u,d){switch(s){case"focusin":return $s=Wu($s,n,s,o,u,d),!0;case"dragenter":return Xs=Wu(Xs,n,s,o,u,d),!0;case"mouseover":return Ws=Wu(Ws,n,s,o,u,d),!0;case"pointerover":var m=d.pointerId;return $u.set(m,Wu($u.get(m)||null,n,s,o,u,d)),!0;case"gotpointercapture":return m=d.pointerId,Xu.set(m,Wu(Xu.get(m)||null,n,s,o,u,d)),!0}return!1}function mT(n){var s=oe(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,on(n.priority,function(){hT(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,on(n.priority,function(){hT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=mp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);cu=u,o.target.dispatchEvent(u),cu=null}else return s=_e(o),s!==null&&cT(s),n.blockedOn=o,!1;s.shift()}return!0}function gT(n,s,o){Rd(n)&&o.delete(s)}function wR(){pp=!1,$s!==null&&Rd($s)&&($s=null),Xs!==null&&Rd(Xs)&&(Xs=null),Ws!==null&&Rd(Ws)&&(Ws=null),$u.forEach(gT),Xu.forEach(gT)}function Cd(n,s){n.blockedOn===s&&(n.blockedOn=null,pp||(pp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wR)))}var Dd=null;function pT(n){Dd!==n&&(Dd=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Dd===n&&(Dd=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(gp(u||o)===null)continue;break}var m=_e(o);m!==null&&(n.splice(s,3),s-=3,mg(m,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function hl(n){function s(M){return Cd(M,n)}$s!==null&&Cd($s,n),Xs!==null&&Cd(Xs,n),Ws!==null&&Cd(Ws,n),$u.forEach(s),Xu.forEach(s);for(var o=0;o<Js.length;o++){var u=Js[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Js.length&&(o=Js[0],o.blockedOn===null);)mT(o),o.blockedOn===null&&Js.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],m=o[u+1],T=d[_t]||null;if(typeof m=="function")T||pT(o);else if(T){var x=null;if(m&&m.hasAttribute("formAction")){if(d=m,T=m[_t]||null)x=T.formAction;else if(gp(d)!==null)continue}else x=T.action;typeof x=="function"?o[u+1]=x:(o.splice(u,3),u-=3),pT(o)}}}function yT(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(T){return d=T})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function yp(n){this._internalRoot=n}Nd.prototype.render=yp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Dr();lT(o,u,n,s,null,null)},Nd.prototype.unmount=yp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;lT(n.current,2,null,n,null,null),hd(),s[Er]=null}};function Nd(n){this._internalRoot=n}Nd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Kn();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Js.length&&s!==0&&s<Js[o].priority;o++);Js.splice(o,0,n),o===0&&mT(n)}};var _T=e.version;if(_T!=="19.2.4")throw Error(i(527,_T,"19.2.4"));le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var IR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{An=Od.inject(IR),Vt=Od}catch{}}return Zu.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",d=A0,m=w0,T=I0;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=aT(n,1,!1,null,null,o,u,null,d,m,T,yT),n[Er]=s.current,Jg(n),new yp(s)},Zu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,d="",m=A0,T=w0,x=I0,M=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.formState!==void 0&&(M=o.formState)),s=aT(n,1,!0,s,o??null,u,d,M,m,T,x,yT),s.context=oT(null),o=s.current,u=Dr(),u=kt(u),d=Ls(u),d.callback=null,js(o,d,u),o=u,s.current.lanes=o,Vn(s,o),Ci(s),n[Er]=s.current,Jg(n),new Nd(s)},Zu.version="19.2.4",Zu}var RT;function LR(){if(RT)return bp.exports;RT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bp.exports=PR(),bp.exports}var jR=LR();function CT(r=new Date){const e=new Date(r);e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);const t=new Date(e.getFullYear(),0,4),i=1+Math.round(((e-t)/864e5-3+(t.getDay()+6)%7)/7);return`${e.getFullYear()}-W${String(i).padStart(2,"0")}`}function UR(r=new Date){const e=new Date(r);e.setHours(0,0,0,0);const t=e.getDay(),i=e.getDate()-((t===0?7:t)-1),a=new Date(e);a.setDate(i);const l=a.getFullYear()%100,c=a.getMonth()+1,f=a.getDate();return`${l}${c}${f}`}function zR(r){const e=r.match(/^(\d{4})-W(\d{2})$/);if(!e)return r;const t=parseInt(e[1],10),i=parseInt(e[2],10),a=new Date(t,0,4),l=a.getDay()||7,c=new Date(a);c.setDate(a.getDate()-(l-1)+(i-1)*7);const f=c.getFullYear()%100,g=c.getMonth()+1,p=c.getDate();return`${f}${g}${p}`}function BR(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}const FR=()=>{};var DT={};const XS=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},HR=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],f=r[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},WS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,f=c?r[a+1]:0,g=a+2<r.length,p=g?r[a+2]:0,_=l>>2,v=(l&3)<<4|f>>4;let S=(f&15)<<2|p>>6,I=p&63;g||(I=64,c||(S=64)),i.push(t[_],t[v],t[S],t[I])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(XS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):HR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],f=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const v=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||f==null||p==null||v==null)throw new qR;const S=l<<2|f>>4;if(i.push(S),p!==64){const I=f<<4&240|p>>2;if(i.push(I),v!==64){const V=p<<6&192|v;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GR=function(r){const e=XS(r);return WS.encodeByteArray(e,!0)},uf=function(r){return GR(r).replace(/\./g,"")},JS=function(r){try{return WS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const KR=()=>ZS().__FIREBASE_DEFAULTS__,YR=()=>{if(typeof process>"u"||typeof DT>"u")return;const r=DT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},QR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&JS(r[1]);return e&&JSON.parse(e)},Hf=()=>{try{return FR()||KR()||YR()||QR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ex=r=>Hf()?.emulatorHosts?.[r],$R=r=>{const e=ex(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},tx=()=>Hf()?.config,nx=r=>Hf()?.[`_${r}`];class XR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function $l(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rx(r){return(await fetch(r,{credentials:"include"})).ok}function WR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[uf(JSON.stringify(t)),uf(JSON.stringify(c)),""].join(".")}const _c={};function JR(){const r={prod:[],emulator:[]};for(const e of Object.keys(_c))_c[e]?r.emulator.push(e):r.prod.push(e);return r}function ZR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let NT=!1;function ix(r,e){if(typeof window>"u"||typeof document>"u"||!$l(window.location.host)||_c[r]===e||_c[r]||NT)return;_c[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=JR().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{NT=!0,c()},S}function _(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function v(){const S=ZR(i),I=t("text"),V=document.getElementById(I)||document.createElement("span"),U=t("learnmore"),q=document.getElementById(U)||document.createElement("a"),te=t("preprendIcon"),X=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;f(re),_(q,U);const ue=p();g(X,te),re.append(X,V,q,ue),document.body.appendChild(re)}l?(V.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function sx(){const r=Hf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function r2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i2(){const r=En();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ax(){return!sx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ox(){return!sx()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function lx(){try{return typeof indexedDB=="object"}catch{return!1}}function s2(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const a2="FirebaseError";class ys extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=a2,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?o2(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new ys(a,f,i)}}function o2(r,e){return r.replace(l2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const l2=/\{\$([^}]+)}/g;function u2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function go(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(OT(l)&&OT(c)){if(!go(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function OT(r){return r!==null&&typeof r=="object"}function Xc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function c2(r,e){const t=new h2(r,e);return t.subscribe.bind(t)}class h2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");d2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=xp),a.error===void 0&&(a.error=xp),a.complete===void 0&&(a.complete=xp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d2(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function xp(){}function Hn(r){return r&&r._delegate?r._delegate:r}class po{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const no="[DEFAULT]";class f2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new XR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g2(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:m2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m2(r){return r===no?void 0:r}function g2(r){return r.instantiationMode==="EAGER"}class p2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new f2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const y2={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},_2=Je.INFO,v2={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},b2=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=v2[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class By{constructor(e){this.name=e,this._logLevel=_2,this._logHandler=b2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const T2=(r,e)=>e.some(t=>r instanceof t);let MT,VT;function E2(){return MT||(MT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S2(){return VT||(VT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ux=new WeakMap,Wp=new WeakMap,cx=new WeakMap,Ap=new WeakMap,Fy=new WeakMap;function x2(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(ha(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&ux.set(t,r)}).catch(()=>{}),Fy.set(e,r),e}function A2(r){if(Wp.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Wp.set(r,e)}let Jp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Wp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||cx.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ha(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function w2(r){Jp=r(Jp)}function I2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(wp(this),e,...t);return cx.set(i,e.sort?e.sort():[e]),ha(i)}:S2().includes(r)?function(...e){return r.apply(wp(this),e),ha(ux.get(this))}:function(...e){return ha(r.apply(wp(this),e))}}function R2(r){return typeof r=="function"?I2(r):(r instanceof IDBTransaction&&A2(r),T2(r,E2())?new Proxy(r,Jp):r)}function ha(r){if(r instanceof IDBRequest)return x2(r);if(Ap.has(r))return Ap.get(r);const e=R2(r);return e!==r&&(Ap.set(r,e),Fy.set(e,r)),e}const wp=r=>Fy.get(r);function C2(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),f=ha(c);return i&&c.addEventListener("upgradeneeded",g=>{i(ha(c.result),g.oldVersion,g.newVersion,ha(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const D2=["get","getKey","getAll","getAllKeys","count"],N2=["put","add","delete","clear"],Ip=new Map;function kT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ip.get(e))return Ip.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=N2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||D2.includes(t)))return;const l=async function(c,...f){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&g.done]))[0]};return Ip.set(e,l),l}w2(r=>({...r,get:(e,t,i)=>kT(e,t)||r.get(e,t,i),has:(e,t)=>!!kT(e,t)||r.has(e,t)}));class O2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(M2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function M2(r){return r.getComponent()?.type==="VERSION"}const Zp="@firebase/app",PT="0.14.8";const cs=new By("@firebase/app"),V2="@firebase/app-compat",k2="@firebase/analytics-compat",P2="@firebase/analytics",L2="@firebase/app-check-compat",j2="@firebase/app-check",U2="@firebase/auth",z2="@firebase/auth-compat",B2="@firebase/database",F2="@firebase/data-connect",H2="@firebase/database-compat",q2="@firebase/functions",G2="@firebase/functions-compat",K2="@firebase/installations",Y2="@firebase/installations-compat",Q2="@firebase/messaging",$2="@firebase/messaging-compat",X2="@firebase/performance",W2="@firebase/performance-compat",J2="@firebase/remote-config",Z2="@firebase/remote-config-compat",eC="@firebase/storage",tC="@firebase/storage-compat",nC="@firebase/firestore",rC="@firebase/ai",iC="@firebase/firestore-compat",sC="firebase",aC="12.9.0";const ey="[DEFAULT]",oC={[Zp]:"fire-core",[V2]:"fire-core-compat",[P2]:"fire-analytics",[k2]:"fire-analytics-compat",[j2]:"fire-app-check",[L2]:"fire-app-check-compat",[U2]:"fire-auth",[z2]:"fire-auth-compat",[B2]:"fire-rtdb",[F2]:"fire-data-connect",[H2]:"fire-rtdb-compat",[q2]:"fire-fn",[G2]:"fire-fn-compat",[K2]:"fire-iid",[Y2]:"fire-iid-compat",[Q2]:"fire-fcm",[$2]:"fire-fcm-compat",[X2]:"fire-perf",[W2]:"fire-perf-compat",[J2]:"fire-rc",[Z2]:"fire-rc-compat",[eC]:"fire-gcs",[tC]:"fire-gcs-compat",[nC]:"fire-fst",[iC]:"fire-fst-compat",[rC]:"fire-vertex","fire-js":"fire-js",[sC]:"fire-js-all"};const cf=new Map,lC=new Map,ty=new Map;function LT(r,e){try{r.container.addComponent(e)}catch(t){cs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Nl(r){const e=r.name;if(ty.has(e))return cs.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,r);for(const t of cf.values())LT(t,r);for(const t of lC.values())LT(t,r);return!0}function Hy(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ui(r){return r==null?!1:r.settings!==void 0}const uC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},da=new $c("app","Firebase",uC);class cC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw da.create("app-deleted",{appName:this._name})}}const Xl=aC;function hx(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:ey,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw da.create("bad-app-name",{appName:String(a)});if(t||(t=tx()),!t)throw da.create("no-options");const l=cf.get(a);if(l){if(go(t,l.options)&&go(i,l.config))return l;throw da.create("duplicate-app",{appName:a})}const c=new p2(a);for(const g of ty.values())c.addComponent(g);const f=new cC(t,i,c);return cf.set(a,f),f}function dx(r=ey){const e=cf.get(r);if(!e&&r===ey&&tx())return hx();if(!e)throw da.create("no-app",{appName:r});return e}function fa(r,e,t){let i=oC[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cs.warn(c.join(" "));return}Nl(new po(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const hC="firebase-heartbeat-database",dC=1,Oc="firebase-heartbeat-store";let Rp=null;function fx(){return Rp||(Rp=C2(hC,dC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Oc)}catch(t){console.warn(t)}}}}).catch(r=>{throw da.create("idb-open",{originalErrorMessage:r.message})})),Rp}async function fC(r){try{const t=(await fx()).transaction(Oc),i=await t.objectStore(Oc).get(mx(r));return await t.done,i}catch(e){if(e instanceof ys)cs.warn(e.message);else{const t=da.create("idb-get",{originalErrorMessage:e?.message});cs.warn(t.message)}}}async function jT(r,e){try{const i=(await fx()).transaction(Oc,"readwrite");await i.objectStore(Oc).put(e,mx(r)),await i.done}catch(t){if(t instanceof ys)cs.warn(t.message);else{const i=da.create("idb-set",{originalErrorMessage:t?.message});cs.warn(i.message)}}}function mx(r){return`${r.name}!${r.options.appId}`}const mC=1024,gC=30;class pC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _C(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=UT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>gC){const a=vC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){cs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=UT(),{heartbeatsToSend:t,unsentEntries:i}=yC(this._heartbeatsCache.heartbeats),a=uf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return cs.warn(e),""}}}function UT(){return new Date().toISOString().substring(0,10)}function yC(r,e=mC){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),zT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),zT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _C{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lx()?s2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zT(r){return uf(JSON.stringify({version:2,heartbeats:r})).length}function vC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function bC(r){Nl(new po("platform-logger",e=>new O2(e),"PRIVATE")),Nl(new po("heartbeat",e=>new pC(e),"PRIVATE")),fa(Zp,PT,r),fa(Zp,PT,"esm2020"),fa("fire-js","")}bC("");var TC="firebase",EC="12.9.0";fa(TC,EC,"app");var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ma,gx;(function(){var r;function e(C,R){function w(){}w.prototype=R.prototype,C.F=R.prototype,C.prototype=new w,C.prototype.constructor=C,C.D=function(O,N,k){for(var D=Array(arguments.length-2),De=2;De<arguments.length;De++)D[De-2]=arguments[De];return R.prototype[N].apply(O,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,R,w){w||(w=0);const O=Array(16);if(typeof R=="string")for(var N=0;N<16;++N)O[N]=R.charCodeAt(w++)|R.charCodeAt(w++)<<8|R.charCodeAt(w++)<<16|R.charCodeAt(w++)<<24;else for(N=0;N<16;++N)O[N]=R[w++]|R[w++]<<8|R[w++]<<16|R[w++]<<24;R=C.g[0],w=C.g[1],N=C.g[2];let k=C.g[3],D;D=R+(k^w&(N^k))+O[0]+3614090360&4294967295,R=w+(D<<7&4294967295|D>>>25),D=k+(N^R&(w^N))+O[1]+3905402710&4294967295,k=R+(D<<12&4294967295|D>>>20),D=N+(w^k&(R^w))+O[2]+606105819&4294967295,N=k+(D<<17&4294967295|D>>>15),D=w+(R^N&(k^R))+O[3]+3250441966&4294967295,w=N+(D<<22&4294967295|D>>>10),D=R+(k^w&(N^k))+O[4]+4118548399&4294967295,R=w+(D<<7&4294967295|D>>>25),D=k+(N^R&(w^N))+O[5]+1200080426&4294967295,k=R+(D<<12&4294967295|D>>>20),D=N+(w^k&(R^w))+O[6]+2821735955&4294967295,N=k+(D<<17&4294967295|D>>>15),D=w+(R^N&(k^R))+O[7]+4249261313&4294967295,w=N+(D<<22&4294967295|D>>>10),D=R+(k^w&(N^k))+O[8]+1770035416&4294967295,R=w+(D<<7&4294967295|D>>>25),D=k+(N^R&(w^N))+O[9]+2336552879&4294967295,k=R+(D<<12&4294967295|D>>>20),D=N+(w^k&(R^w))+O[10]+4294925233&4294967295,N=k+(D<<17&4294967295|D>>>15),D=w+(R^N&(k^R))+O[11]+2304563134&4294967295,w=N+(D<<22&4294967295|D>>>10),D=R+(k^w&(N^k))+O[12]+1804603682&4294967295,R=w+(D<<7&4294967295|D>>>25),D=k+(N^R&(w^N))+O[13]+4254626195&4294967295,k=R+(D<<12&4294967295|D>>>20),D=N+(w^k&(R^w))+O[14]+2792965006&4294967295,N=k+(D<<17&4294967295|D>>>15),D=w+(R^N&(k^R))+O[15]+1236535329&4294967295,w=N+(D<<22&4294967295|D>>>10),D=R+(N^k&(w^N))+O[1]+4129170786&4294967295,R=w+(D<<5&4294967295|D>>>27),D=k+(w^N&(R^w))+O[6]+3225465664&4294967295,k=R+(D<<9&4294967295|D>>>23),D=N+(R^w&(k^R))+O[11]+643717713&4294967295,N=k+(D<<14&4294967295|D>>>18),D=w+(k^R&(N^k))+O[0]+3921069994&4294967295,w=N+(D<<20&4294967295|D>>>12),D=R+(N^k&(w^N))+O[5]+3593408605&4294967295,R=w+(D<<5&4294967295|D>>>27),D=k+(w^N&(R^w))+O[10]+38016083&4294967295,k=R+(D<<9&4294967295|D>>>23),D=N+(R^w&(k^R))+O[15]+3634488961&4294967295,N=k+(D<<14&4294967295|D>>>18),D=w+(k^R&(N^k))+O[4]+3889429448&4294967295,w=N+(D<<20&4294967295|D>>>12),D=R+(N^k&(w^N))+O[9]+568446438&4294967295,R=w+(D<<5&4294967295|D>>>27),D=k+(w^N&(R^w))+O[14]+3275163606&4294967295,k=R+(D<<9&4294967295|D>>>23),D=N+(R^w&(k^R))+O[3]+4107603335&4294967295,N=k+(D<<14&4294967295|D>>>18),D=w+(k^R&(N^k))+O[8]+1163531501&4294967295,w=N+(D<<20&4294967295|D>>>12),D=R+(N^k&(w^N))+O[13]+2850285829&4294967295,R=w+(D<<5&4294967295|D>>>27),D=k+(w^N&(R^w))+O[2]+4243563512&4294967295,k=R+(D<<9&4294967295|D>>>23),D=N+(R^w&(k^R))+O[7]+1735328473&4294967295,N=k+(D<<14&4294967295|D>>>18),D=w+(k^R&(N^k))+O[12]+2368359562&4294967295,w=N+(D<<20&4294967295|D>>>12),D=R+(w^N^k)+O[5]+4294588738&4294967295,R=w+(D<<4&4294967295|D>>>28),D=k+(R^w^N)+O[8]+2272392833&4294967295,k=R+(D<<11&4294967295|D>>>21),D=N+(k^R^w)+O[11]+1839030562&4294967295,N=k+(D<<16&4294967295|D>>>16),D=w+(N^k^R)+O[14]+4259657740&4294967295,w=N+(D<<23&4294967295|D>>>9),D=R+(w^N^k)+O[1]+2763975236&4294967295,R=w+(D<<4&4294967295|D>>>28),D=k+(R^w^N)+O[4]+1272893353&4294967295,k=R+(D<<11&4294967295|D>>>21),D=N+(k^R^w)+O[7]+4139469664&4294967295,N=k+(D<<16&4294967295|D>>>16),D=w+(N^k^R)+O[10]+3200236656&4294967295,w=N+(D<<23&4294967295|D>>>9),D=R+(w^N^k)+O[13]+681279174&4294967295,R=w+(D<<4&4294967295|D>>>28),D=k+(R^w^N)+O[0]+3936430074&4294967295,k=R+(D<<11&4294967295|D>>>21),D=N+(k^R^w)+O[3]+3572445317&4294967295,N=k+(D<<16&4294967295|D>>>16),D=w+(N^k^R)+O[6]+76029189&4294967295,w=N+(D<<23&4294967295|D>>>9),D=R+(w^N^k)+O[9]+3654602809&4294967295,R=w+(D<<4&4294967295|D>>>28),D=k+(R^w^N)+O[12]+3873151461&4294967295,k=R+(D<<11&4294967295|D>>>21),D=N+(k^R^w)+O[15]+530742520&4294967295,N=k+(D<<16&4294967295|D>>>16),D=w+(N^k^R)+O[2]+3299628645&4294967295,w=N+(D<<23&4294967295|D>>>9),D=R+(N^(w|~k))+O[0]+4096336452&4294967295,R=w+(D<<6&4294967295|D>>>26),D=k+(w^(R|~N))+O[7]+1126891415&4294967295,k=R+(D<<10&4294967295|D>>>22),D=N+(R^(k|~w))+O[14]+2878612391&4294967295,N=k+(D<<15&4294967295|D>>>17),D=w+(k^(N|~R))+O[5]+4237533241&4294967295,w=N+(D<<21&4294967295|D>>>11),D=R+(N^(w|~k))+O[12]+1700485571&4294967295,R=w+(D<<6&4294967295|D>>>26),D=k+(w^(R|~N))+O[3]+2399980690&4294967295,k=R+(D<<10&4294967295|D>>>22),D=N+(R^(k|~w))+O[10]+4293915773&4294967295,N=k+(D<<15&4294967295|D>>>17),D=w+(k^(N|~R))+O[1]+2240044497&4294967295,w=N+(D<<21&4294967295|D>>>11),D=R+(N^(w|~k))+O[8]+1873313359&4294967295,R=w+(D<<6&4294967295|D>>>26),D=k+(w^(R|~N))+O[15]+4264355552&4294967295,k=R+(D<<10&4294967295|D>>>22),D=N+(R^(k|~w))+O[6]+2734768916&4294967295,N=k+(D<<15&4294967295|D>>>17),D=w+(k^(N|~R))+O[13]+1309151649&4294967295,w=N+(D<<21&4294967295|D>>>11),D=R+(N^(w|~k))+O[4]+4149444226&4294967295,R=w+(D<<6&4294967295|D>>>26),D=k+(w^(R|~N))+O[11]+3174756917&4294967295,k=R+(D<<10&4294967295|D>>>22),D=N+(R^(k|~w))+O[2]+718787259&4294967295,N=k+(D<<15&4294967295|D>>>17),D=w+(k^(N|~R))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+k&4294967295}i.prototype.v=function(C,R){R===void 0&&(R=C.length);const w=R-this.blockSize,O=this.C;let N=this.h,k=0;for(;k<R;){if(N==0)for(;k<=w;)a(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<R;)if(O[N++]=C.charCodeAt(k++),N==this.blockSize){a(this,O),N=0;break}}else for(;k<R;)if(O[N++]=C[k++],N==this.blockSize){a(this,O),N=0;break}}this.h=N,this.o+=R},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var w=C.length-8;w<C.length;++w)C[w]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,w=0;w<4;++w)for(let O=0;O<32;O+=8)C[R++]=this.g[w]>>>O&255;return C};function l(C,R){var w=f;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=R(C)}function c(C,R){this.h=R;const w=[];let O=!0;for(let N=C.length-1;N>=0;N--){const k=C[N]|0;O&&k==R||(w[N]=k,O=!1)}this.g=w}var f={};function g(C){return-128<=C&&C<128?l(C,function(R){return new c([R|0],R<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return q(p(-C));const R=[];let w=1;for(let O=0;C>=w;O++)R[O]=C/w|0,w*=4294967296;return new c(R,0)}function _(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return q(_(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=p(Math.pow(R,8));let O=v;for(let k=0;k<C.length;k+=8){var N=Math.min(8,C.length-k);const D=parseInt(C.substring(k,k+N),R);N<8?(N=p(Math.pow(R,N)),O=O.j(N).add(p(D))):(O=O.j(w),O=O.add(p(D)))}return O}var v=g(0),S=g(1),I=g(16777216);r=c.prototype,r.m=function(){if(U(this))return-q(this).m();let C=0,R=1;for(let w=0;w<this.g.length;w++){const O=this.i(w);C+=(O>=0?O:4294967296+O)*R,R*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(U(this))return"-"+q(this).toString(C);const R=p(Math.pow(C,6));var w=this;let O="";for(;;){const N=ue(w,R).g;w=te(w,N.j(R));let k=((w.g.length>0?w.g[0]:w.h)>>>0).toString(C);if(w=N,V(w))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function U(C){return C.h==-1}r.l=function(C){return C=te(this,C),U(C)?-1:V(C)?0:1};function q(C){const R=C.g.length,w=[];for(let O=0;O<R;O++)w[O]=~C.g[O];return new c(w,~C.h).add(S)}r.abs=function(){return U(this)?q(this):this},r.add=function(C){const R=Math.max(this.g.length,C.g.length),w=[];let O=0;for(let N=0;N<=R;N++){let k=O+(this.i(N)&65535)+(C.i(N)&65535),D=(k>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);O=D>>>16,k&=65535,D&=65535,w[N]=D<<16|k}return new c(w,w[w.length-1]&-2147483648?-1:0)};function te(C,R){return C.add(q(R))}r.j=function(C){if(V(this)||V(C))return v;if(U(this))return U(C)?q(this).j(q(C)):q(q(this).j(C));if(U(C))return q(this.j(q(C)));if(this.l(I)<0&&C.l(I)<0)return p(this.m()*C.m());const R=this.g.length+C.g.length,w=[];for(var O=0;O<2*R;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<C.g.length;N++){const k=this.i(O)>>>16,D=this.i(O)&65535,De=C.i(N)>>>16,he=C.i(N)&65535;w[2*O+2*N]+=D*he,X(w,2*O+2*N),w[2*O+2*N+1]+=k*he,X(w,2*O+2*N+1),w[2*O+2*N+1]+=D*De,X(w,2*O+2*N+1),w[2*O+2*N+2]+=k*De,X(w,2*O+2*N+2)}for(C=0;C<R;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=R;C<2*R;C++)w[C]=0;return new c(w,0)};function X(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function re(C,R){this.g=C,this.h=R}function ue(C,R){if(V(R))throw Error("division by zero");if(V(C))return new re(v,v);if(U(C))return R=ue(q(C),R),new re(q(R.g),q(R.h));if(U(R))return R=ue(C,q(R)),new re(q(R.g),R.h);if(C.g.length>30){if(U(C)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var w=S,O=R;O.l(C)<=0;)w=fe(w),O=fe(O);var N=ce(w,1),k=ce(O,1);for(O=ce(O,2),w=ce(w,2);!V(O);){var D=k.add(O);D.l(C)<=0&&(N=N.add(w),k=D),O=ce(O,1),w=ce(w,1)}return R=te(C,N.j(R)),new re(N,R)}for(N=v;C.l(R)>=0;){for(w=Math.max(1,Math.floor(C.m()/R.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(w),D=k.j(R);U(D)||D.l(C)>0;)w-=O,k=p(w),D=k.j(R);V(k)&&(k=S),N=N.add(k),C=te(C,D)}return new re(N,C)}r.B=function(C){return ue(this,C).h},r.and=function(C){const R=Math.max(this.g.length,C.g.length),w=[];for(let O=0;O<R;O++)w[O]=this.i(O)&C.i(O);return new c(w,this.h&C.h)},r.or=function(C){const R=Math.max(this.g.length,C.g.length),w=[];for(let O=0;O<R;O++)w[O]=this.i(O)|C.i(O);return new c(w,this.h|C.h)},r.xor=function(C){const R=Math.max(this.g.length,C.g.length),w=[];for(let O=0;O<R;O++)w[O]=this.i(O)^C.i(O);return new c(w,this.h^C.h)};function fe(C){const R=C.g.length+1,w=[];for(let O=0;O<R;O++)w[O]=C.i(O)<<1|C.i(O-1)>>>31;return new c(w,C.h)}function ce(C,R){const w=R>>5;R%=32;const O=C.g.length-w,N=[];for(let k=0;k<O;k++)N[k]=R>0?C.i(k+w)>>>R|C.i(k+w+1)<<32-R:C.i(k+w);return new c(N,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,gx=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,ma=c}).apply(typeof BT<"u"?BT:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var px,dc,yx,qd,ny,_x,vx,bx;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var H=h[A];if(!(H in E))break e;E=E[H]}h=h[h.length-1],A=E[h],y=y(A),y!=A&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,E){return h.call.apply(h.bind,arguments)}function p(h,y,E){return p=g,p.apply(null,arguments)}function _(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function v(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,H,$){for(var de=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)de[Pe-2]=arguments[Pe];return y.prototype[H].apply(A,de)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=h[A];return E}return[]}function V(h,y){for(let A=1;A<arguments.length;A++){const H=arguments[A];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=h.length||0;const $=H.length||0;h.length=E+$;for(let de=0;de<$;de++)h[E+de]=H[de]}else h.push(H)}}class U{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){c.setTimeout(()=>{throw h},0)}function te(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class X{constructor(){this.h=this.g=null}add(y,E){const A=re.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var re=new U(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ce=!1,C=new X,R=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(w)}};function w(){for(var h;h=te();){try{h.h.call(h.g)}catch(E){q(E)}var y=re;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ce=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function De(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}v(De,N),De.prototype.init=function(h,y){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),Q=0;function le(h,y,E,A,H){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=H,this.key=++Q,this.da=this.fa=!1}function Ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ne(h,y,E){for(const A in h)y.call(E,h[A],A,h)}function ze(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function P(h){const y={};for(const E in h)y[E]=h[E];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(h,y){let E,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(E in A)h[E]=A[E];for(let $=0;$<J.length;$++)E=J[$],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,y,E,A,H){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const de=Ae(h,y,A,H);return de>-1?(y=h[de],E||(y.fa=!1)):(y=new le(y,this.src,$,!!A,H),y.fa=E,h.push(y)),y};function ye(h,y){const E=y.type;if(E in h.g){var A=h.g[E],H=Array.prototype.indexOf.call(A,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(A,H,1),$&&(Ee(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Ae(h,y,E,A){for(let H=0;H<h.length;++H){const $=h[H];if(!$.da&&$.listener==y&&$.capture==!!E&&$.ha==A)return H}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Ze={};function Ke(h,y,E,A,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)Ke(h,y[$],E,A,H);return null}return E=Zn(E),h&&h[he]?h.J(y,E,f(A)?!!A.capture:!1,H):Be(h,y,E,!1,A,H)}function Be(h,y,E,A,H,$){if(!y)throw Error("Invalid event type");const de=f(H)?!!H.capture:!!H;let Pe=xn(h);if(Pe||(h[ke]=Pe=new me(h)),E=Pe.add(y,E,A,de,$),E.proxy)return E;if(A=Jn(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)k||(H=de),H===void 0&&(H=!1),h.addEventListener(y.toString(),A,H);else if(h.attachEvent)h.attachEvent(Ct(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Jn(){function h(E){return y.call(h.src,h.listener,E)}const y=an;return h}function rn(h,y,E,A,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)rn(h,y[$],E,A,H);else A=f(A)?!!A.capture:!!A,E=Zn(E),h&&h[he]?(h=h.i,$=String(y).toString(),$ in h.g&&(y=h.g[$],E=Ae(y,E,A,H),E>-1&&(Ee(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[$],h.h--)))):h&&(h=xn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,E,A,H)),(E=h>-1?y[h]:null)&&sn(E))}function sn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[he])ye(y.i,h);else{var E=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(E,A,h.capture):y.detachEvent?y.detachEvent(Ct(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=xn(y))?(ye(E,h),E.h==0&&(E.src=null,y[ke]=null)):Ee(h)}}}function Ct(h){return h in Ze?Ze[h]:Ze[h]="on"+h}function an(h,y){if(h.da)h=!0;else{y=new De(y,this);const E=h.listener,A=h.ha||h.src;h.fa&&sn(h),h=E.call(A,y)}return h}function xn(h){return h=h[ke],h instanceof me?h:null}var Pr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zn(h){return typeof h=="function"?h:(h[Pr]||(h[Pr]=function(y){return h.handleEvent(y)}),h[Pr])}function dt(){O.call(this),this.i=new me(this),this.M=this,this.G=null}v(dt,O),dt.prototype[he]=!0,dt.prototype.removeEventListener=function(h,y,E,A){rn(this,h,y,E,A)};function rt(h,y){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var H=y;y=new N(A,h),se(y,H)}H=!0;let $,de;if(E)for(de=E.length-1;de>=0;de--)$=y.g=E[de],H=Gn($,A,!0,y)&&H;if($=y.g=h,H=Gn($,A,!0,y)&&H,H=Gn($,A,!1,y)&&H,E)for(de=0;de<E.length;de++)$=y.g=E[de],H=Gn($,A,!1,y)&&H}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let A=0;A<E.length;A++)Ee(E[A]);delete h.g[y],h.h--}}this.G=null},dt.prototype.J=function(h,y,E,A){return this.i.add(String(h),y,!1,E,A)},dt.prototype.K=function(h,y,E,A){return this.i.add(String(h),y,!0,E,A)};function Gn(h,y,E,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const de=y[$];if(de&&!de.da&&de.capture==E){const Pe=de.listener,Wt=de.ha||de.src;de.fa&&ye(h.i,de),H=Pe.call(Wt,A)!==!1&&H}}return H&&!A.defaultPrevented}function Jr(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function zi(h){h.g=Jr(()=>{h.g=null,h.i&&(h.i=!1,zi(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Kt extends O{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(h){O.call(this),this.h=h,this.g={}}v(er,O);var ur=[];function Ut(h){Ne(h.g,function(y,E){this.g.hasOwnProperty(E)&&sn(y)},h),h.g={}}er.prototype.N=function(){er.Z.N.call(this),Ut(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=c.JSON.stringify,Lr=c.JSON.parse,pi=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function On(){}function yi(){}var An={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vt(){N.call(this,"d")}v(Vt,N);function wt(){N.call(this,"c")}v(wt,N);var at={},_i=null;function Tr(){return _i=_i||new dt}at.Ia="serverreachability";function bs(h){N.call(this,at.Ia,h)}v(bs,N);function Mn(h){const y=Tr();rt(y,new bs(y))}at.STAT_EVENT="statevent";function cr(h,y){N.call(this,at.STAT_EVENT,h),this.stat=y}v(cr,N);function Fe(h){const y=Tr();rt(y,new cr(y,h))}at.Ja="timingevent";function ct(h,y){N.call(this,at.Ja,h),this.size=y}v(ct,N);function It(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Yt(){this.g=!0}Yt.prototype.ua=function(){this.g=!1};function $e(h,y,E,A,H,$){h.info(function(){if(h.g)if($){var de="",Pe=$.split("&");for(let ot=0;ot<Pe.length;ot++){var Wt=Pe[ot].split("=");if(Wt.length>1){const Pt=Wt[0];Wt=Wt[1];const zr=Pt.split("_");de=zr.length>=2&&zr[1]=="type"?de+(Pt+"="+Wt+"&"):de+(Pt+"=redacted&")}}}else de=null;else de=$;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+y+`
`+E+`
`+de})}function Dt(h,y,E,A,H,$,de){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+y+`
`+E+`
`+$+" "+de})}function zt(h,y,E,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Nt(h,E)+(A?" "+A:"")})}function Vn(h,y){h.info(function(){return"TIMEOUT: "+y})}Yt.prototype.info=function(){};function Nt(h,y){if(!h.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var E=$[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return pn($)}catch{return y}}var yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kn;function kt(){}v(kt,On),kt.prototype.g=function(){return new XMLHttpRequest},kn=new kt;function Bt(h){return encodeURIComponent(String(h))}function Kn(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function on(h,y,E,A){this.j=h,this.i=y,this.l=E,this.S=A||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vn}function vn(){this.i=null,this.g="",this.h=!1}var Ft={},_t={};function Er(h,y,E){h.M=1,h.A=Da(un(y)),h.u=E,h.R=!0,Bi(h,null)}function Bi(h,y){h.F=Date.now(),ve(h),h.B=un(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Do(E.i,"t",A),h.C=0,E=h.j.L,h.h=new vn,h.g=wh(h.j,E?y:null,!h.u),h.P>0&&(h.O=new Kt(p(h.Y,h,h.g),h.P)),y=h.V,E=h.g,A=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(ur[0]=H.toString()),H=ur);for(let $=0;$<H.length;$++){const de=Ke(E,H[$],A||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Mn(),$e(h.i,h.v,h.B,h.l,h.S,h.u)}on.prototype.ba=function(h){h=h.target;const y=this.O;y&&ti(h)==3?y.j():this.Y(h)},on.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=ti(this.g),Wt=this.g.ya(),ot=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Ln(this.g)))){this.K||Pe!=4||Wt==7||(Wt==8||ot<=0?Mn(3):Mn(2)),oe(this);var y=this.g.ca();this.X=y;var E=wo(this);if(this.o=y==200,Dt(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var $=A;break t}}$=null}if(h=$)zt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xt(this,h);else{this.o=!1,this.m=3,Fe(12),qe(this),_e(this);break e}}if(this.R){h=!0;let Pt;for(;!this.K&&this.C<E.length;)if(Pt=Io(this,E),Pt==_t){Pe==4&&(this.m=4,Fe(14),h=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==Ft){this.m=4,Fe(15),zt(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else zt(this.i,this.l,Pt,null),xt(this,Pt);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,Fe(16),h=!1),this.o=this.o&&h,!h)zt(this.i,this.l,E,"[Invalid Chunked Response]"),qe(this),_e(this);else if(E.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),gu(de),de.P=!0,Fe(11))}}else zt(this.i,this.l,E,null),xt(this,E);Pe==4&&qe(this),this.o&&!this.K&&(Pe==4?Eh(this.j,this):(this.o=!1,ve(this)))}else Hi(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Fe(12)):(this.m=0,Fe(13)),qe(this),_e(this)}}}catch{}};function wo(h){if(!Ca(h))return h.g.la();const y=Ln(h.g);if(y==="")return"";let E="";const A=y.length,H=ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return qe(h),_e(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<A;$++)h.h.h=!0,E+=h.h.i.decode(y[$],{stream:!(H&&$==A-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Ca(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Io(h,y){var E=h.C,A=y.indexOf(`
`,E);return A==-1?_t:(E=Number(y.substring(E,A)),isNaN(E)?Ft:(A+=1,A+E>y.length?_t:(y=y.slice(A,A+E),h.C=A+E,y)))}on.prototype.cancel=function(){this.K=!0,qe(this)};function ve(h){h.T=Date.now()+h.H,L(h,h.H)}function L(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=It(p(h.aa,h),y)}function oe(h){h.D&&(c.clearTimeout(h.D),h.D=null)}on.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vn(this.i,this.B),this.M!=2&&(Mn(),Fe(17)),qe(this),this.m=2,_e(this)):L(this,this.T-h)};function _e(h){h.j.I==0||h.K||Eh(h.j,h)}function qe(h){oe(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Ut(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function xt(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||hr(E.h,h))){if(!h.L&&hr(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)ko(E),Ds(E);else break e;La(E),Fe(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=It(p(E.Va,E),6e3));Pn(E.h)<=1&&E.ta&&(E.ta=void 0)}else xi(E,11)}else if((h.L||E.g==h)&&ko(E),!D(y))for(H=E.Ba.g.parse(y),y=0;y<H.length;y++){let ot=H[y];const Pt=ot[0];if(!(Pt<=E.K))if(E.K=Pt,ot=ot[1],E.I==2)if(ot[0]=="c"){E.M=ot[1],E.ba=ot[2];const zr=ot[3];zr!=null&&(E.ka=zr,E.j.info("VER="+E.ka));const Ai=ot[4];Ai!=null&&(E.za=Ai,E.j.info("SVER="+E.za));const ni=ot[5];ni!=null&&typeof ni=="number"&&ni>0&&(A=1.5*ni,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const ri=h.g;if(ri){const ja=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var $=A.h;$.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ht($,$.h),$.h=null))}if(A.G){const Po=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(A.wa=Po,ft(A.J,A.G,Po))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var de=h;if(A.na=Ah(A,A.L?A.ba:null,A.W),de.L){Ts(A.h,de);var Pe=de,Wt=A.O;Wt&&(Pe.H=Wt),Pe.D&&(oe(Pe),ve(Pe)),A.g=de}else bh(A);E.i.length>0&&Si(E)}else ot[0]!="stop"&&ot[0]!="close"||xi(E,7);else E.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?xi(E,7):fu(E):ot[0]!="noop"&&E.l&&E.l.qa(ot),E.A=0)}}Mn(4)}catch{}}var je=class{constructor(h,y){this.g=h,this.map=y}};function ln(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pn(h){return h.h?1:h.g?h.g.size:0}function hr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ht(h,y){h.g?h.g.add(y):h.h=y}function Ts(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ln.prototype.cancel=function(){if(this.i=Es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Es(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return I(h.i)}var mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ro(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let H,$=null;A>=0?(H=h[E].substring(0,A),$=h[E].substring(A+1)):H=h[E],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Sr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Sr?(this.l=h.l,wn(this,h.j),this.o=h.o,this.g=h.g,Ss(this,h.u),this.h=h.h,au(this,_h(h.i)),this.m=h.m):h&&(y=String(h).match(mh))?(this.l=!1,wn(this,y[1]||"",!0),this.o=vi(y[2]||""),this.g=vi(y[3]||"",!0),Ss(this,y[4]),this.h=vi(y[5]||"",!0),au(this,y[6]||"",!0),this.m=vi(y[7]||"")):(this.l=!1,this.i=new As(null,this.l))}Sr.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Na(y,Co,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Na(y,Co,!0),"@"),h.push(Bt(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Na(E,E.charAt(0)=="/"?ou:gh,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Na(E,ph)),h.join("")},Sr.prototype.resolve=function(h){const y=un(this);let E=!!h.j;E?wn(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var A=h.h;if(E)Ss(y,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=y.h.lastIndexOf("/");H!=-1&&(A=y.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let de=0;de<H.length;){const Pe=H[de++];Pe=="."?A&&de==H.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&de==H.length&&$.push("")):($.push(Pe),A=!0)}A=$.join("/")}else A=H}return E?y.h=A:E=h.i.toString()!=="",E?au(y,_h(h.i)):E=!!h.m,E&&(y.m=h.m),y};function un(h){return new Sr(h)}function wn(h,y,E){h.j=E?vi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ss(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function au(h,y,E){y instanceof As?(h.i=y,No(h.i,h.l)):(E||(y=Na(y,xs)),h.i=new As(y,h.l))}function ft(h,y,E){h.i.set(y,E)}function Da(h){return ft(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function vi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Na(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,dr),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Co=/[#\/\?@]/g,gh=/[#\?:]/g,ou=/[#\?]/g,xs=/[#\?@]/g,ph=/#/g;function As(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function fr(h){h.g||(h.g=new Map,h.h=0,h.i&&Ro(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=As.prototype,r.add=function(h,y){fr(this),this.i=null,h=ws(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function yh(h,y){fr(h),y=ws(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function lu(h,y){return fr(h),y=ws(h,y),h.g.has(y)}r.forEach=function(h,y){fr(this),this.g.forEach(function(E,A){E.forEach(function(H){h.call(y,H,A,this)},this)},this)};function uu(h,y){fr(h);let E=[];if(typeof y=="string")lu(h,y)&&(E=E.concat(h.g.get(ws(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}r.set=function(h,y){return fr(this),this.i=null,h=ws(this,h),lu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=uu(this,h),h.length>0?String(h[0]):y):y};function Do(h,y,E){yh(h,y),E.length>0&&(h.i=null,h.g.set(ws(h,y),I(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const H=Bt(E);E=uu(this,E);for(let $=0;$<E.length;$++){let de=H;E[$]!==""&&(de+="="+Bt(E[$])),h.push(de)}}return this.i=h.join("&")};function _h(h){const y=new As;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ws(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function No(h,y){y&&!h.j&&(fr(h),h.i=null,h.g.forEach(function(E,A){const H=A.toLowerCase();A!=H&&(yh(this,A),Do(this,H,E))},h)),h.j=y}function Zr(h,y){const E=new Yt;if(c.Image){const A=new Image;A.onload=_(jr,E,"TestLoadImage: loaded",!0,y,A),A.onerror=_(jr,E,"TestLoadImage: error",!1,y,A),A.onabort=_(jr,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=_(jr,E,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function cu(h,y){const E=new Yt,A=new AbortController,H=setTimeout(()=>{A.abort(),jr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then($=>{clearTimeout(H),$.ok?jr(E,"TestPingServer: ok",!0,y):jr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),jr(E,"TestPingServer: error",!1,y)})}function jr(h,y,E,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(E)}catch{}}function Is(){this.g=new pi}function bi(h){this.i=h.Sb||null,this.h=h.ab||!1}v(bi,On),bi.prototype.g=function(){return new Oa(this.i,this.h)};function Oa(h,y){dt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Oa,dt),r=Oa.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ei(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Rs(this):ei(this),this.readyState==3&&Oo(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Rs(this))},r.Na=function(h){this.g&&(this.response=h,Rs(this))},r.ga=function(){this.g&&Rs(this)};function Rs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ei(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ur(h){let y="";return Ne(h,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function Ma(h,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Ur(E),typeof h=="string"?E!=null&&Bt(E):ft(h,y,E))}function vt(h){dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(vt,dt);var Ti=/^https?$/i,hu=["POST","PUT"];r=vt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kn.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){Va(this,$);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)E.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())E.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),H=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(hu,y,void 0)>=0)||A||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,de]of E)this.g.setRequestHeader($,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Va(this,$)}};function Va(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,du(h),Fi(h)}function du(h){h.A||(h.A=!0,rt(h,"complete"),rt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,rt(this,"complete"),rt(this,"abort"),Fi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),vt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ka(this):this.Xa())},r.Xa=function(){ka(this)};function ka(h){if(h.h&&typeof l<"u"){if(h.v&&ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(rt(h,"readystatechange"),ti(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=$===0){let de=String(h.D).match(mh)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),A=!Ti.test(de?de.toLowerCase():"")}E=A}if(E)rt(h,"complete"),rt(h,"success");else{h.o=6;try{var H=ti(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",du(h)}}finally{Fi(h)}}}}function Fi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||rt(h,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ti(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Lr(y)}};function Ln(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(h){const y={};h=(h.g&&ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(D(h[A]))continue;var E=Kn(h[A]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=y[H]||[];y[H]=$,$.push(E)}ze(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Cs(h){this.za=0,this.i=[],this.j=new Yt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,h),this.Za=Ei("retryDelaySeedMs",1e4,h),this.Ta=Ei("forwardChannelMaxRetries",2,h),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ln(h&&h.concurrentRequestLimit),this.Ba=new Is,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Cs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,E,A){Fe(0),this.W=h,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Ah(this,null,this.W),Si(this)};function fu(h){if(Mo(h),h.I==3){var y=h.V++,E=un(h.J);if(ft(E,"SID",h.M),ft(E,"RID",y),ft(E,"TYPE","terminate"),Pa(h,E),y=new on(h,h.j,y),y.M=2,y.A=Da(un(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=wh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ve(y)}xh(h)}function Ds(h){h.g&&(gu(h),h.g.cancel(),h.g=null)}function Mo(h){Ds(h),h.v&&(c.clearTimeout(h.v),h.v=null),ko(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Si(h){if(!tr(h.h)&&!h.m){h.m=!0;var y=h.Ea;fe||R(),ce||(fe(),ce=!0),C.add(y,h),h.D=0}}function Vo(h,y){return Pn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=It(p(h.Ea,h,y),Sh(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new on(this,this.j,h);let $=this.o;if(this.U&&($?($=P($),se($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=vh(this,H,y),E=un(this.J),ft(E,"RID",h),ft(E,"CVER",22),this.G&&ft(E,"X-HTTP-Session-Id",this.G),Pa(this,E),$&&(this.R?y="headers="+Bt(Ur($))+"&"+y:this.u&&Ma(E,this.u,$)),Ht(this.h,H),this.Ra&&ft(E,"TYPE","init"),this.S?(ft(E,"$req",y),ft(E,"SID","null"),H.U=!0,Er(H,E,null)):Er(H,E,y),this.I=2}}else this.I==3&&(h?mu(this,h):this.i.length==0||tr(this.h)||mu(this))};function mu(h,y){var E;y?E=y.l:E=h.V++;const A=un(h.J);ft(A,"SID",h.M),ft(A,"RID",E),ft(A,"AID",h.K),Pa(h,A),h.u&&h.o&&Ma(A,h.u,h.o),E=new on(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=vh(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ht(h.h,E),Er(E,A,y)}function Pa(h,y){h.H&&Ne(h.H,function(E,A){ft(y,A,E)}),h.l&&Ne({},function(E,A){ft(y,A,E)})}function vh(h,y,E){E=Math.min(h.i.length,E);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var H=h.i;let Pe=-1;for(;;){const Wt=["count="+E];Pe==-1?E>0?(Pe=H[0].g,Wt.push("ofs="+Pe)):Pe=0:Wt.push("ofs="+Pe);let ot=!0;for(let Pt=0;Pt<E;Pt++){var $=H[Pt].g;const zr=H[Pt].map;if($-=Pe,$<0)Pe=Math.max(0,H[Pt].g-100),ot=!1;else try{$="req"+$+"_"||"";try{var de=zr instanceof Map?zr:Object.entries(zr);for(const[Ai,ni]of de){let ri=ni;f(ni)&&(ri=pn(ni)),Wt.push($+Ai+"="+encodeURIComponent(ri))}}catch(Ai){throw Wt.push($+"type="+encodeURIComponent("_badmap")),Ai}}catch{A&&A(zr)}}if(ot){de=Wt.join("&");break e}}de=void 0}return h=h.i.splice(0,E),y.G=h,de}function bh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;fe||R(),ce||(fe(),ce=!0),C.add(y,h),h.A=0}}function La(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=It(p(h.Da,h),Sh(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Th(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=It(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Fe(10),Ds(this),Th(this))};function gu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Th(h){h.g=new on(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=un(h.na);ft(y,"RID","rpc"),ft(y,"SID",h.M),ft(y,"AID",h.K),ft(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ft(y,"TO",h.ia),ft(y,"TYPE","xmlhttp"),Pa(h,y),h.u&&h.o&&Ma(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Da(un(y)),E.u=null,E.R=!0,Bi(E,h)}r.Va=function(){this.C!=null&&(this.C=null,Ds(this),La(this),Fe(19))};function ko(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Eh(h,y){var E=null;if(h.g==y){ko(h),gu(h),h.g=null;var A=2}else if(hr(h.h,y))E=y.G,Ts(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;A=Tr(),rt(A,new ct(A,E)),Si(h)}else bh(h);else if(H=y.m,H==3||H==0&&y.X>0||!(A==1&&Vo(h,y)||A==2&&La(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),H){case 1:xi(h,5);break;case 4:xi(h,10);break;case 3:xi(h,6);break;default:xi(h,2)}}}function Sh(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function xi(h,y){if(h.j.info("Error code "+y),y==2){var E=p(h.bb,h),A=h.Ua;const H=!A;A=new Sr(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wn(A,"https"),Da(A),H?Zr(A.toString(),E):cu(A.toString(),E)}else Fe(2);h.I=0,h.l&&h.l.pa(y),xh(h),Mo(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function xh(h){if(h.I=0,h.ja=[],h.l){const y=Es(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Ah(h,y,E){var A=E instanceof Sr?un(E):new Sr(E);if(A.g!="")y&&(A.g=y+"."+A.g),Ss(A,A.u);else{var H=c.location;A=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new Sr(null);A&&wn($,A),y&&($.g=y),H&&Ss($,H),E&&($.h=E),A=$}return E=h.G,y=h.wa,E&&y&&ft(A,E,y),ft(A,"VER",h.ka),Pa(h,A),A}function wh(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new vt(new bi({ab:E})):new vt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ih(){}r=Ih.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ns(){}Ns.prototype.g=function(h,y){return new nr(h,y)};function nr(h,y){dt.call(this),this.g=new Cs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qi(this)}v(nr,dt),nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){fu(this.g)},nr.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=pn(h),h=E);y.i.push(new je(y.Ya++,h)),y.I==3&&Si(y)},nr.prototype.N=function(){this.g.l=null,delete this.j,fu(this.g),delete this.g,nr.Z.N.call(this)};function Rh(h){Vt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}v(Rh,Vt);function Ch(){wt.call(this),this.status=1}v(Ch,wt);function qi(h){this.g=h}v(qi,Ih),qi.prototype.ra=function(){rt(this.g,"a")},qi.prototype.qa=function(h){rt(this.g,new Rh(h))},qi.prototype.pa=function(h){rt(this.g,new Ch)},qi.prototype.oa=function(){rt(this.g,"b")},Ns.prototype.createWebChannel=Ns.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,bx=function(){return new Ns},vx=function(){return Tr()},_x=at,ny={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yn.NO_ERROR=0,yn.TIMEOUT=8,yn.HTTP_ERROR=6,qd=yn,_n.COMPLETE="complete",yx=_n,yi.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",dt.prototype.listen=dt.prototype.J,dc=yi,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,px=vt}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let Wl="12.9.0";function SC(r){Wl=r}const yo=new By("@firebase/firestore");function _l(){return yo.logLevel}function ae(r,...e){if(yo.logLevel<=Je.DEBUG){const t=e.map(qy);yo.debug(`Firestore (${Wl}): ${r}`,...t)}}function en(r,...e){if(yo.logLevel<=Je.ERROR){const t=e.map(qy);yo.error(`Firestore (${Wl}): ${r}`,...t)}}function _a(r,...e){if(yo.logLevel<=Je.WARN){const t=e.map(qy);yo.warn(`Firestore (${Wl}): ${r}`,...t)}}function qy(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function be(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Tx(r,i,t)}function Tx(r,e,t){let i=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw en(i),new Error(i)}function we(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Tx(e,a,i)}function Se(r,e){return r}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class us{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ex{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class AC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class wC{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0,42304);let i=this.i;const a=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new us;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new us,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},f=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new us)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(we(typeof i.accessToken=="string",31837,{l:i}),new Ex(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class IC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class RC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new IC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class FT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ui(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){we(this.o===void 0,3512);const i=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new FT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(we(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new FT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function DC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class Gy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=DC(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Me(r,e){return r<e?-1:r>e?1:0}function ry(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return Cp(a)===Cp(l)?Me(a,l):Cp(a)?1:-1}return Me(r.length,e.length)}const NC=55296,OC=57343;function Cp(r){const e=r.charCodeAt(0);return e>=NC&&e<=OC}function Ol(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function Sx(r){return r+"\0"}const HT="__name__";class Ni{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Ni.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const i=Ni.isNumericId(e),a=Ni.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):ry(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ma.fromString(e.substring(4,e.length-2))}}class ht extends Ni{construct(e,t,i){return new ht(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const MC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Ni{construct(e,t,i){return new Gt(e,t,i)}static isValidIdentifier(e){return MC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HT}static keyField(){return new Gt([HT])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(ht.fromString(e))}static fromName(e){return new pe(ht.fromString(e).popFirst(5))}static empty(){return new pe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new ht(e.slice()))}}function xx(r,e,t){if(!t)throw new ge(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function VC(r,e,t,i){if(e===!0&&i===!0)throw new ge(ne.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function qT(r){if(!pe.isDocumentKey(r))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function GT(r){if(pe.isDocumentKey(r))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Ax(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ky(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be(12329,{type:typeof r})}function Mr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ky(r);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function gn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Wc(r,e){if(!Ax(r))throw new ge(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ge(ne.INVALID_ARGUMENT,t);return!0}const KT=-62135596800,YT=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*YT);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KT)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YT}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:gn("string",pt._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new pt(0,0))}static max(){return new Re(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ml=-1;class hf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function iy(r){return r.fields.find((e=>e.kind===2))}function ro(r){return r.fields.filter((e=>e.kind!==2))}hf.UNKNOWN_ID=-1;class Gd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mc(0,kr.min())}}function wx(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new kr(a,pe.empty(),e)}function Ix(r){return new kr(r.readTime,r.key,Ml)}class kr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new kr(Re.min(),pe.empty(),Ml)}static max(){return new kr(Re.max(),pe.empty(),Ml)}}function Yy(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}const Rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Aa(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==Rx)throw r;ae("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,i)=>{t(e)}))}static reject(e){return new F(((t,i)=>{i(e)}))}static waitFor(e){return new F(((t,i)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(g=>i(g)))})),c=!0,l===a&&t()}))}static or(e){let t=F.resolve(!1);for(const i of e)t=t.next((a=>a?F.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new F(((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((_=>{c[p]=_,++f,f===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new F(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}const Nr="SimpleDb";class qf{static open(e,t,i,a){try{return new qf(t,e.transaction(a,i))}catch(l){throw new vc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new us,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new vc(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=Qy(i.target.error);this.S.reject(new vc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ae(Nr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PC(t)}}class ga{static delete(e){return ae(Nr,"Removing database:",e),so(ZS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!lx())return!1;if(ga.F())return!0;const e=En(),t=ga.M(e),i=0<t&&t<10,a=Dx(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,ga.M(En())===12.2&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ae(Nr,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ge(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ge(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new vc(e,c))},a.onupgradeneeded=l=>{ae(Nr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ae(Nr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=qf.open(this.db,e,l?"readonly":"readwrite",i),g=a(f).next((p=>(f.C(),p))).catch((p=>(f.abort(p),F.reject(p)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,p=g.name!=="FirebaseError"&&c<3;if(ae(Nr,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Dx(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class kC{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return so(this.U.delete())}}class vc extends ge{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wa(r){return r.name==="IndexedDbTransactionError"}class PC{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ae(Nr,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ae(Nr,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),so(i)}add(e){return ae(Nr,"ADD",this.store.name,e,e),so(this.store.add(e))}get(e){return so(this.store.get(e)).next((t=>(t===void 0&&(t=null),ae(Nr,"GET",this.store.name,e,t),t)))}delete(e){return ae(Nr,"DELETE",this.store.name,e),so(this.store.delete(e))}count(){return ae(Nr,"COUNT",this.store.name),so(this.store.count())}H(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new F(((c,f)=>{l.onerror=g=>{f(g.target.error)},l.onsuccess=g=>{c(g.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((f,g)=>{c.push(g)})).next((()=>c))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new F(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(e,t){ae(Nr,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,f)=>f.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.J(a,t)}te(e){const t=this.cursor({});return new F(((i,a)=>{t.onerror=l=>{const c=Qy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():i()})):i()}}))}J(e,t){const i=[];return new F(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void a();const g=new kC(f),p=t(f.primaryKey,f.value,g);if(p instanceof F){const _=p.catch((v=>(g.done(),F.reject(v))));i.push(_)}g.isDone?a():g.G===null?f.continue():f.continue(g.G)}})).next((()=>F.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function so(r){return new F(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=Qy(i.target.error);t(a)}}))}let QT=!1;function Qy(r){const e=ga.M(En());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QT||(QT=!0,setTimeout((()=>{throw i}),0)),i}}return r}const bc="IndexBackfiller";class LC{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ae(bc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ae(bc,`Documents written: ${t}`)}catch(t){wa(t)?ae(bc,"Ignoring IndexedDB error during index backfill: ",t):await Aa(t)}await this.re(6e4)}))}}class jC{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return F.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return ae(bc,`Processing collection: ${c}`),this.oe(e,c,a).next((f=>{a-=f,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((f=>(ae(bc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=Ix(l);Yy(c,i)>0&&(i=c)})),new kr(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vr.ce=-1;const co=-1;function Gf(r){return r==null}function Vc(r){return r===0&&1/r==-1/0}function Nx(r){return typeof r=="number"&&Number.isInteger(r)&&!Vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const df="";function Wn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=$T(e)),e=UC(r.get(t),e);return $T(e)}function UC(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case df:t+="";break;default:t+=l}}return t}function $T(r){return r+df+""}function Mi(r){const e=r.length;if(we(e>=2,64408,{path:r}),e===2)return we(r.charAt(0)===df&&r.charAt(1)==="",56145,{path:r}),ht.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(df,l);switch((c<0||c>t)&&be(50515,{path:r}),r.charAt(c+1)){case"":const f=r.substring(l,c);let g;a.length===0?g=f:(a+=f,g=a,a=""),i.push(g);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:be(61167,{path:r})}l=c+2}return new ht(i)}const io="remoteDocuments",Jc="owner",dl="owner",kc="mutationQueues",zC="userId",li="mutations",XT="batchId",uo="userMutationsIndex",WT=["userId","batchId"];function Kd(r,e){return[r,Wn(e)]}function Ox(r,e,t){return[r,Wn(e),t]}const BC={},Vl="documentMutations",ff="remoteDocumentsV14",FC=["prefixPath","collectionGroup","readTime","documentId"],Yd="documentKeyIndex",HC=["prefixPath","collectionGroup","documentId"],Mx="collectionGroupIndex",qC=["collectionGroup","readTime","prefixPath","documentId"],Pc="remoteDocumentGlobal",sy="remoteDocumentGlobalKey",kl="targets",Vx="queryTargetsIndex",GC=["canonicalId","targetId"],Pl="targetDocuments",KC=["targetId","path"],$y="documentTargetsIndex",YC=["path","targetId"],mf="targetGlobalKey",ho="targetGlobal",Lc="collectionParents",QC=["collectionId","parent"],Ll="clientMetadata",$C="clientId",Kf="bundles",XC="bundleId",Yf="namedQueries",WC="name",Xy="indexConfiguration",JC="indexId",ay="collectionGroupIndex",ZC="collectionGroup",Tc="indexState",eD=["indexId","uid"],kx="sequenceNumberIndex",tD=["uid","sequenceNumber"],Ec="indexEntries",nD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Px="documentKeyIndex",rD=["indexId","uid","orderedDocumentKey"],Qf="documentOverlays",iD=["userId","collectionPath","documentId"],oy="collectionPathOverlayIndex",sD=["userId","collectionPath","largestBatchId"],Lx="collectionGroupOverlayIndex",aD=["userId","collectionGroup","largestBatchId"],Wy="globals",oD="name",jx=[kc,li,Vl,io,kl,Jc,ho,Pl,Ll,Pc,Lc,Kf,Yf],lD=[...jx,Qf],Ux=[kc,li,Vl,ff,kl,Jc,ho,Pl,Ll,Pc,Lc,Kf,Yf,Qf],zx=Ux,Jy=[...zx,Xy,Tc,Ec],uD=Jy,Bx=[...Jy,Wy],cD=Bx;class ly extends Cx{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Sn(r,e){const t=Se(r);return ga.O(t.le,e)}function JT(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ia(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Fx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Rt{constructor(e,t){this.comparator=e,this.root=t||Fn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Fn.RED,this.left=a??Fn.EMPTY,this.right=l??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Fn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Fn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZT(this.data.getIterator())}getIteratorFrom(e){return new ZT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yt(this.comparator);return t.data=e,t}}class ZT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(r){return r.hasNext()?r.getNext():void 0}class br{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new br([])}unionWith(e){let t=new yt(Gt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Hx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Hx("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const hD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(we(!!r,39018),typeof r=="string"){let e=0;const t=hD.exec(r);if(we(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:jt(r.seconds),nanos:jt(r.nanos)}}function jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ds(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}const qx="server_timestamp",Gx="__type__",Kx="__previous_value__",Yx="__local_write_time__";function Zy(r){return(r?.mapValue?.fields||{})[Gx]?.stringValue===qx}function $f(r){const e=r.mapValue.fields[Kx];return Zy(e)?$f(e):e}function jc(r){const e=hs(r.mapValue.fields[Yx].timestampValue);return new pt(e.seconds,e.nanos)}class dD{constructor(e,t,i,a,l,c,f,g,p,_,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_,this.apiKey=v}}const gf="(default)";class _o{constructor(e,t){this.projectId=e,this.database=t||gf}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database===gf}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}function fD(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(r.options.projectId,e)}const e_="__type__",Qx="__max__",ca={mapValue:{fields:{__type__:{stringValue:Qx}}}},t_="__vector__",jl="value",Qd={nullValue:"NULL_VALUE"};function va(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Zy(r)?4:$x(r)?9007199254740991:Xf(r)?10:11:be(28295,{value:r})}function ji(r,e){if(r===e)return!0;const t=va(r);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return jc(r).isEqual(jc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=hs(a.timestampValue),f=hs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return ds(a.bytesValue).isEqual(ds(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return jt(a.geoPointValue.latitude)===jt(l.geoPointValue.latitude)&&jt(a.geoPointValue.longitude)===jt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return jt(a.integerValue)===jt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=jt(a.doubleValue),f=jt(l.doubleValue);return c===f?Vc(c)===Vc(f):isNaN(c)&&isNaN(f)}return!1})(r,e);case 9:return Ol(r.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(JT(c)!==JT(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!ji(c[g],f[g])))return!1;return!0})(r,e);default:return be(52216,{left:r})}}function Uc(r,e){return(r.values||[]).find((t=>ji(t,e)))!==void 0}function ba(r,e){if(r===e)return 0;const t=va(r),i=va(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=jt(l.integerValue||l.doubleValue),g=jt(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return eE(r.timestampValue,e.timestampValue);case 4:return eE(jc(r),jc(e));case 5:return ry(r.stringValue,e.stringValue);case 6:return(function(l,c){const f=ds(l),g=ds(c);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),g=c.split("/");for(let p=0;p<f.length&&p<g.length;p++){const _=Me(f[p],g[p]);if(_!==0)return _}return Me(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Me(jt(l.latitude),jt(c.latitude));return f!==0?f:Me(jt(l.longitude),jt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return tE(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},g=c.fields||{},p=f[jl]?.arrayValue,_=g[jl]?.arrayValue,v=Me(p?.values?.length||0,_?.values?.length||0);return v!==0?v:tE(p,_)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ca.mapValue&&c===ca.mapValue)return 0;if(l===ca.mapValue)return 1;if(c===ca.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),p=c.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let v=0;v<g.length&&v<_.length;++v){const S=ry(g[v],_[v]);if(S!==0)return S;const I=ba(f[g[v]],p[_[v]]);if(I!==0)return I}return Me(g.length,_.length)})(r.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function eE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=hs(r),i=hs(e),a=Me(t.seconds,i.seconds);return a!==0?a:Me(t.nanos,i.nanos)}function tE(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=ba(t[a],i[a]);if(l)return l}return Me(t.length,i.length)}function Ul(r){return uy(r)}function uy(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=hs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ds(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return pe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=uy(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${uy(t.fields[c])}`;return a+"}"})(r.mapValue):be(61005,{value:r})}function $d(r){switch(va(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$f(r);return e?16+$d(e):16;case 5:return 2*r.stringValue.length;case 6:return ds(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+$d(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Ia(i.fields,((l,c)=>{a+=l.length+$d(c)})),a})(r.mapValue);default:throw be(13486,{value:r})}}function n_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function cy(r){return!!r&&"integerValue"in r}function zc(r){return!!r&&"arrayValue"in r}function nE(r){return!!r&&"nullValue"in r}function rE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Xd(r){return!!r&&"mapValue"in r}function Xf(r){return(r?.mapValue?.fields||{})[e_]?.stringValue===t_}function Sc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ia(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Sc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sc(r.arrayValue.values[t]);return e}return{...r}}function $x(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Qx}const Xx={mapValue:{fields:{[e_]:{stringValue:t_},[jl]:{arrayValue:{}}}}};function mD(r){return"nullValue"in r?Qd:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?n_(_o.empty(),pe.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Xf(r)?Xx:{mapValue:{}}:be(35942,{value:r})}function gD(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?n_(_o.empty(),pe.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Xx:"mapValue"in r?Xf(r)?{mapValue:{}}:ca:be(61959,{value:r})}function iE(r,e){const t=ba(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function sE(r,e){const t=ba(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(t)}setAll(e){let t=Gt.emptyPath(),i={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=Sc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Xd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ia(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Xn(Sc(this.value))}}function Wx(r){const e=[];return Ia(r.fields,((t,i)=>{const a=new Gt([t]);if(Xd(i)){const l=Wx(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new br(e)}class Xt{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Xt(e,0,Re.min(),Re.min(),Re.min(),Xn.empty(),0)}static newFoundDocument(e,t,i,a){return new Xt(e,1,t,Re.min(),i,a,0)}static newNoDocument(e,t){return new Xt(e,2,t,Re.min(),Re.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,Re.min(),Re.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zl{constructor(e,t){this.position=e,this.inclusive=t}}function aE(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=pe.comparator(pe.fromName(c.referenceValue),t.key):i=ba(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function oE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ji(r.position[t],e.position[t]))return!1;return!0}class pf{constructor(e,t="asc"){this.field=e,this.dir=t}}function pD(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Jx{}class tt extends Jx{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yD(e,t,i):t==="array-contains"?new bD(e,i):t==="in"?new iA(e,i):t==="not-in"?new TD(e,i):t==="array-contains-any"?new ED(e,i):new tt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _D(e,i):new vD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ba(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends Jx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new St(e,t)}matches(e){return Bl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bl(r){return r.op==="and"}function hy(r){return r.op==="or"}function r_(r){return Zx(r)&&Bl(r)}function Zx(r){for(const e of r.filters)if(e instanceof St)return!1;return!0}function dy(r){if(r instanceof tt)return r.field.canonicalString()+r.op.toString()+Ul(r.value);if(r_(r))return r.filters.map((e=>dy(e))).join(",");{const e=r.filters.map((t=>dy(t))).join(",");return`${r.op}(${e})`}}function eA(r,e){return r instanceof tt?(function(i,a){return a instanceof tt&&i.op===a.op&&i.field.isEqual(a.field)&&ji(i.value,a.value)})(r,e):r instanceof St?(function(i,a){return a instanceof St&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,f)=>l&&eA(c,a.filters[f])),!0):!1})(r,e):void be(19439)}function tA(r,e){const t=r.filters.concat(e);return St.create(t,r.op)}function nA(r){return r instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ul(t.value)}`})(r):r instanceof St?(function(t){return t.op.toString()+" {"+t.getFilters().map(nA).join(" ,")+"}"})(r):"Filter"}class yD extends tt{constructor(e,t,i){super(e,t,i),this.key=pe.fromName(i.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class _D extends tt{constructor(e,t){super(e,"in",t),this.keys=rA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vD extends tt{constructor(e,t){super(e,"not-in",t),this.keys=rA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rA(r,e){return(e.arrayValue?.values||[]).map((t=>pe.fromName(t.referenceValue)))}class bD extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zc(t)&&Uc(t.arrayValue,this.value)}}class iA extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}}class TD extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uc(this.value.arrayValue,t)}}class ED extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Uc(this.value.arrayValue,i)))}}class SD{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function fy(r,e=null,t=[],i=[],a=null,l=null,c=null){return new SD(r,e,t,i,a,l,c)}function vo(r){const e=Se(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>dy(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ul(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ul(i))).join(",")),e.Te=t}return e.Te}function Zc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!pD(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!eA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!oE(r.startAt,e.startAt)&&oE(r.endAt,e.endAt)}function yf(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function _f(r,e){return r.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function lE(r,e,t){let i=Qd,a=!0;for(const l of _f(r,e)){let c=Qd,f=!0;switch(l.op){case"<":case"<=":c=mD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Qd}iE({value:i,inclusive:a},{value:c,inclusive:f})<0&&(i=c,a=f)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];iE({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function uE(r,e,t){let i=ca,a=!0;for(const l of _f(r,e)){let c=ca,f=!0;switch(l.op){case">=":case">":c=gD(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=ca}sE({value:i,inclusive:a},{value:c,inclusive:f})>0&&(i=c,a=f)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];sE({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}class Wf{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function sA(r,e,t,i,a,l,c,f){return new Wf(r,e,t,i,a,l,c,f)}function eh(r){return new Wf(r)}function cE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xD(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function AD(r){return r.collectionGroup!==null}function xc(r){const e=Se(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new yt(Gt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pf(l,i))})),t.has(Gt.keyField().canonicalString())||e.Ie.push(new pf(Gt.keyField(),i))}return e.Ie}function Vr(r){const e=Se(r);return e.Ee||(e.Ee=wD(e,xc(r))),e.Ee}function wD(r,e){if(r.limitType==="F")return fy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new pf(a.field,l)}));const t=r.endAt?new zl(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new zl(r.startAt.position,r.startAt.inclusive):null;return fy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function my(r,e,t){return new Wf(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Jf(r,e){return Zc(Vr(r),Vr(e))&&r.limitType===e.limitType}function aA(r){return`${vo(Vr(r))}|lt:${r.limitType}`}function vl(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>nA(a))).join(", ")}]`),Gf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Ul(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Ul(a))).join(",")),`Target(${i})`})(Vr(r))}; limitType=${r.limitType})`}function th(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):pe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of xc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,f,g){const p=aE(c,f,g);return c.inclusive?p<=0:p<0})(i.startAt,xc(i),a)||i.endAt&&!(function(c,f,g){const p=aE(c,f,g);return c.inclusive?p>=0:p>0})(i.endAt,xc(i),a))})(r,e)}function oA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function lA(r){return(e,t)=>{let i=!1;for(const a of xc(r)){const l=ID(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function ID(r,e,t){const i=r.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,c,f){const g=c.data.field(l),p=f.data.field(l);return g!==null&&p!==null?ba(g,p):be(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:r.dir})}}class _s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Fx(this.inner)}size(){return this.innerSize}}const RD=new Rt(pe.comparator);function Or(){return RD}const uA=new Rt(pe.comparator);function fc(...r){let e=uA;for(const t of r)e=e.insert(t.key,t);return e}function cA(r){let e=uA;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Vi(){return Ac()}function hA(){return Ac()}function Ac(){return new _s((r=>r.toString()),((r,e)=>r.isEqual(e)))}const CD=new Rt(pe.comparator),DD=new yt(pe.comparator);function He(...r){let e=DD;for(const t of r)e=e.add(t);return e}const ND=new yt(Me);function i_(){return ND}function s_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function dA(r){return{integerValue:""+r}}function OD(r,e){return Nx(e)?dA(e):s_(r,e)}class Zf{constructor(){this._=void 0}}function MD(r,e,t){return r instanceof Bc?(function(a,l){const c={fields:{[Gx]:{stringValue:qx},[Yx]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Zy(l)&&(l=$f(l)),l&&(c.fields[Kx]=l),{mapValue:c}})(t,e):r instanceof Fl?mA(r,e):r instanceof Hl?gA(r,e):(function(a,l){const c=fA(a,l),f=hE(c)+hE(a.Ae);return cy(c)&&cy(a.Ae)?dA(f):s_(a.serializer,f)})(r,e)}function VD(r,e,t){return r instanceof Fl?mA(r,e):r instanceof Hl?gA(r,e):t}function fA(r,e){return r instanceof Fc?(function(i){return cy(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Bc extends Zf{}class Fl extends Zf{constructor(e){super(),this.elements=e}}function mA(r,e){const t=pA(e);for(const i of r.elements)t.some((a=>ji(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Hl extends Zf{constructor(e){super(),this.elements=e}}function gA(r,e){let t=pA(e);for(const i of r.elements)t=t.filter((a=>!ji(a,i)));return{arrayValue:{values:t}}}class Fc extends Zf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function hE(r){return jt(r.integerValue||r.doubleValue)}function pA(r){return zc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class kD{constructor(e,t){this.field=e,this.transform=t}}function PD(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Fl&&a instanceof Fl||i instanceof Hl&&a instanceof Hl?Ol(i.elements,a.elements,ji):i instanceof Fc&&a instanceof Fc?ji(i.Ae,a.Ae):i instanceof Bc&&a instanceof Bc})(r.transform,e.transform)}class LD{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class em{}function yA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new nh(r.key,Nn.none()):new Jl(r.key,r.data,Nn.none());{const t=r.data,i=Xn.empty();let a=new yt(Gt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new vs(r.key,i,new br(a.toArray()),Nn.none())}}function jD(r,e,t){r instanceof Jl?(function(a,l,c){const f=a.value.clone(),g=fE(a.fieldTransforms,l,c.transformResults);f.setAll(g),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):r instanceof vs?(function(a,l,c){if(!Wd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=fE(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(_A(a)),g.setAll(f),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function wc(r,e,t,i){return r instanceof Jl?(function(l,c,f,g){if(!Wd(l.precondition,c))return f;const p=l.value.clone(),_=mE(l.fieldTransforms,g,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,i):r instanceof vs?(function(l,c,f,g){if(!Wd(l.precondition,c))return f;const p=mE(l.fieldTransforms,g,c),_=c.data;return _.setAll(_A(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(r,e,t,i):(function(l,c,f){return Wd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(r,e,t)}function UD(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=fA(i.transform,a||null);l!=null&&(t===null&&(t=Xn.empty()),t.set(i.field,l))}return t||null}function dE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Ol(i,a,((l,c)=>PD(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Jl extends em{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class vs extends em{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function _A(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function fE(r,e,t){const i=new Map;we(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,VD(c,f,t[a]))}return i}function mE(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,MD(l,c,e))}return i}class nh extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class a_{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&jD(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=hA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const g=yA(c,f);g!==null&&i.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,((t,i)=>dE(t,i)))&&Ol(this.baseMutations,e.baseMutations,((t,i)=>dE(t,i)))}}class o_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){we(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return CD})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new o_(e,t,i,a)}}class l_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class zD{constructor(e,t){this.count=e,this.unchangedNames=t}}var mn,nt;function BD(r){switch(r){case ne.OK:return be(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return be(15467,{code:r})}}function bA(r){if(r===void 0)return en("GRPC error has no .code"),ne.UNKNOWN;switch(r){case mn.OK:return ne.OK;case mn.CANCELLED:return ne.CANCELLED;case mn.UNKNOWN:return ne.UNKNOWN;case mn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case mn.INTERNAL:return ne.INTERNAL;case mn.UNAVAILABLE:return ne.UNAVAILABLE;case mn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case mn.NOT_FOUND:return ne.NOT_FOUND;case mn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case mn.ABORTED:return ne.ABORTED;case mn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case mn.DATA_LOSS:return ne.DATA_LOSS;default:return be(39323,{code:r})}}(nt=mn||(mn={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function FD(){return new TextEncoder}const HD=new ma([4294967295,4294967295],0);function gE(r){const e=FD().encode(r),t=new gx;return t.update(e),new Uint8Array(t.digest())}function pE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ma([t,i],0),new ma([a,l],0)]}class u_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(i<0)throw new mc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ma.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ma.fromNumber(i)));return a.compare(HD)===1&&(a=new ma([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=gE(e),[i,a]=pE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new u_(l,a,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=gE(e),[i,a]=pE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,ih.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new rh(Re.min(),a,new Rt(Me),Or(),He())}}class ih{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ih(i,t,He(),He(),He())}}class Jd{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class TA{constructor(e,t){this.targetId=e,this.Ce=t}}class EA{constructor(e,t,i=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class yE{constructor(){this.ve=0,this.Fe=_E(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),i=He();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:be(38017,{changeType:l})}})),new ih(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=_E()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class qD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Or(),this.He=kd(),this.Je=kd(),this.Ze=new Rt(Me)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(yf(l))if(i===0){const c=new pe(l.path);this.et(t,c,Xt.newNoDocument(c,Re.min()))}else we(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),g=f?this.ct(f,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=ds(i).toUint8Array()}catch(g){if(g instanceof Hx)return _a("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new u_(c,a,l)}catch(g){return _a(g instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&yf(f.target)){const g=new pe(f.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Xt.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=He();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new rh(e,t,this.Ze,this.je,i);return this.je=Or(),this.He=kd(),this.Je=kd(),this.Ze=new Rt(Me),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new yE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new yt(Me),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new yt(Me),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kd(){return new Rt(pe.comparator)}function _E(){return new Rt(pe.comparator)}const GD={asc:"ASCENDING",desc:"DESCENDING"},KD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YD={and:"AND",or:"OR"};class QD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gy(r,e){return r.useProto3Json||Gf(e)?e:{value:e}}function ql(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function $D(r,e){return ql(r,e.toTimestamp())}function sr(r){return we(!!r,49232),Re.fromTimestamp((function(t){const i=hs(t);return new pt(i.seconds,i.nanos)})(r))}function c_(r,e){return py(r,e).canonicalString()}function py(r,e){const t=(function(a){return new ht(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function xA(r){const e=ht.fromString(r);return we(MA(e),10190,{key:e.toString()}),e}function vf(r,e){return c_(r.databaseId,e.path)}function fo(r,e){const t=xA(e);if(t.get(1)!==r.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new pe(IA(t))}function AA(r,e){return c_(r.databaseId,e)}function wA(r){const e=xA(r);return e.length===4?ht.emptyPath():IA(e)}function yy(r){return new ht(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function IA(r){return we(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function vE(r,e,t){return{name:vf(r,e),fields:t.value.mapValue.fields}}function XD(r,e,t){const i=fo(r,e.name),a=sr(e.updateTime),l=e.createTime?sr(e.createTime):Re.min(),c=new Xn({mapValue:{fields:e.fields}}),f=Xt.newFoundDocument(i,a,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function WD(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:be(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(we(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(we(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const _=p.code===void 0?ne.UNKNOWN:bA(p.code);return new ge(_,p.message||"")})(c);t=new EA(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=fo(r,i.document.name),l=sr(i.document.updateTime),c=i.document.createTime?sr(i.document.createTime):Re.min(),f=new Xn({mapValue:{fields:i.document.fields}}),g=Xt.newFoundDocument(a,l,c,f),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Jd(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=fo(r,i.document),l=i.readTime?sr(i.readTime):Re.min(),c=Xt.newNoDocument(a,l),f=i.removedTargetIds||[];t=new Jd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=fo(r,i.document),l=i.removedTargetIds||[];t=new Jd([],l,a,null)}else{if(!("filter"in e))return be(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new zD(a,l),f=i.targetId;t=new TA(f,c)}}return t}function bf(r,e){let t;if(e instanceof Jl)t={update:vE(r,e.key,e.value)};else if(e instanceof nh)t={delete:vf(r,e.key)};else if(e instanceof vs)t={update:vE(r,e.key,e.data),updateMask:rN(e.fieldMask)};else{if(!(e instanceof vA))return be(16599,{dt:e.type});t={verify:vf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof Bc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Fl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Hl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Fc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw be(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:$D(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(r,e.precondition)),t}function _y(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Nn.updateTime(sr(l.updateTime)):l.exists!==void 0?Nn.exists(l.exists):Nn.none()})(e.currentDocument):Nn.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,f){let g=null;if("setToServerValue"in f)we(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new Bc;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];g=new Fl(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];g=new Hl(_)}else"increment"in f?g=new Fc(c,f.increment):be(16584,{proto:f});const p=Gt.fromServerFormat(f.fieldPath);return new kD(p,g)})(r,a))):[];if(e.update){e.update.name;const a=fo(r,e.update.name),l=new Xn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new br(p.map((_=>Gt.fromServerFormat(_))))})(e.updateMask);return new vs(a,l,c,t,i)}return new Jl(a,l,t,i)}if(e.delete){const a=fo(r,e.delete);return new nh(a,t)}if(e.verify){const a=fo(r,e.verify);return new vA(a,t)}return be(1463,{proto:e})}function JD(r,e){return r&&r.length>0?(we(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?sr(a.updateTime):sr(l);return c.isEqual(Re.min())&&(c=sr(l)),new LD(c,a.transformResults||[])})(t,e)))):[]}function RA(r,e){return{documents:[AA(r,e.path)]}}function CA(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=AA(r,a);const l=(function(p){if(p.length!==0)return OA(St.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((_=>(function(S){return{field:bl(S.field),direction:eN(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=gy(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function DA(r){let e=wA(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){we(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(v){const S=NA(v);return S instanceof St&&r_(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((S=>(function(V){return new pf(Tl(V.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let S;return S=typeof v=="object"?v.value:v,Gf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(v){const S=!!v.before,I=v.values||[];return new zl(I,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const S=!v.before,I=v.values||[];return new zl(I,S)})(t.endAt)),sA(e,a,c,l,f,"F",g,p)}function ZD(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NA(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Tl(t.unaryFilter.field);return tt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Tl(t.unaryFilter.field);return tt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Tl(t.unaryFilter.field);return tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Tl(t.unaryFilter.field);return tt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(r):r.fieldFilter!==void 0?(function(t){return tt.create(Tl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return St.create(t.compositeFilter.filters.map((i=>NA(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(r):be(30097,{filter:r})}function eN(r){return GD[r]}function tN(r){return KD[r]}function nN(r){return YD[r]}function bl(r){return{fieldPath:r.canonicalString()}}function Tl(r){return Gt.fromServerFormat(r.fieldPath)}function OA(r){return r instanceof tt?(function(t){if(t.op==="=="){if(rE(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NAN"}};if(nE(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rE(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NOT_NAN"}};if(nE(t.value))return{unaryFilter:{field:bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(t.field),op:tN(t.op),value:t.value}}})(r):r instanceof St?(function(t){const i=t.getFilters().map((a=>OA(a)));return i.length===1?i[0]:{compositeFilter:{op:nN(t.op),filters:i}}})(r):be(54877,{filter:r})}function rN(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function MA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function VA(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class as{constructor(e,t,i,a,l=Re.min(),c=Re.min(),f=nn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kA{constructor(e){this.yt=e}}function iN(r,e){let t;if(e.document)t=XD(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=pe.fromSegments(e.noDocument.path),a=To(e.noDocument.readTime);t=Xt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return be(56709);{const i=pe.fromSegments(e.unknownDocument.path),a=To(e.unknownDocument.version);t=Xt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new pt(a[0],a[1]);return Re.fromTimestamp(l)})(e.readTime)),t}function bE(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:vf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:ql(l,c.version.toTimestamp()),createTime:ql(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:bo(e.version)};else{if(!e.isUnknownDocument())return be(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:bo(e.version)}}return i}function Tf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function bo(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function To(r){const e=new pt(r.seconds,r.nanoseconds);return Re.fromTimestamp(e)}function ao(r,e){const t=(e.baseMutations||[]).map((l=>_y(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>_y(r.yt,l))),a=pt.fromMillis(e.localWriteTimeMs);return new a_(e.batchId,a,t,i)}function gc(r){const e=To(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?To(r.lastLimboFreeSnapshotVersion):Re.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return we(c===1,1966,{count:c}),Vr(eh(wA(l.documents[0])))})(r.query):(function(l){return Vr(DA(l))})(r.query),new as(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,nn.fromBase64String(r.resumeToken))}function PA(r,e){const t=bo(e.snapshotVersion),i=bo(e.lastLimboFreeSnapshotVersion);let a;a=yf(e.target)?RA(r.yt,e.target):CA(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function LA(r){const e=DA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?my(e,e.limit,"L"):e}function Dp(r,e){return new l_(e.largestBatchId,_y(r.yt,e.overlayMutation))}function TE(r,e){const t=e.path.lastSegment();return[r,Wn(e.path.popLast()),t]}function EE(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:bo(i.readTime),documentKey:Wn(i.documentKey.path),largestBatchId:i.largestBatchId}}class sN{getBundleMetadata(e,t){return SE(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:To(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return SE(e).put((function(a){return{bundleId:a.id,createTime:bo(sr(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return xE(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:LA(l.bundledQuery),readTime:To(l.readTime)}})(i)}))}saveNamedQuery(e,t){return xE(e).put((function(a){return{name:a.name,readTime:bo(sr(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function SE(r){return Sn(r,Kf)}function xE(r){return Sn(r,Yf)}class tm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new tm(e,i)}getOverlay(e,t){return ec(e).get(TE(this.userId,t)).next((i=>i?Dp(this.serializer,i):null))}getOverlays(e,t){const i=Vi();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const f=new l_(t,c);a.push(this.bt(e,f))})),F.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(Wn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(ec(e).X(oy,f))})),F.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Vi(),l=Wn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ec(e).H(oy,c).next((f=>{for(const g of f){const p=Dp(this.serializer,g);a.set(p.getKey(),p)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Vi();let c;const f=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ec(e).ee({index:Lx,range:f},((g,p,_)=>{const v=Dp(this.serializer,p);l.size()<a||v.largestBatchId===c?(l.set(v.getKey(),v),c=v.largestBatchId):_.done()})).next((()=>l))}bt(e,t){return ec(e).put((function(a,l,c){const[f,g,p]=TE(l,c.mutation.key);return{userId:l,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:bf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function ec(r){return Sn(r,Qf)}class aN{St(e){return Sn(e,Wy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t?.value;return i?nn.fromUint8Array(i):nn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class oo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(jt(e.integerValue));else if("doubleValue"in e){const i=jt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Vc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=hs(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ds(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?$x(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Xf(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):be(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=jl,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(jt(l)),this.Ot(a,t),this.Ct(i[a],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}oo.Wt=new oo;const ml=255;function oN(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function AE(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=oN(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class lN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),i=AE(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=AE(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(ml),this.sn(255)}_n(){this.an(ml),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ml?(this.sn(ml),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ml?(this.an(ml),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class uN{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class cN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class tc{constructor(){this.cn=new lN,this.ascending=new uN(this.cn),this.descending=new cN(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class lo{constructor(e,t,i,a){this.hn=e,this.Pn=t,this.Tn=i,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new lo(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:Zd(this.Tn),directionalValue:Zd(this.In),orderedDocumentKey:Zd(t),documentKey:i.path.toArray()}}An(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ea(r,e){let t=r.hn-e.hn;return t!==0?t:(t=wE(r.Tn,e.Tn),t!==0?t:(t=wE(r.In,e.In),t!==0?t:pe.comparator(r.Pn,e.Pn)))}function wE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function Zd(r){return ox()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function IE(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class RE{constructor(e){this.Vn=new yt(((t,i)=>Gt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(we(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=iy(e);if(t!==void 0&&!this.pn(t))return!1;const i=ro(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const g=i[l];if(!this.yn(f,g)||!this.wn(this.dn[c++],g))return!1}++l}for(;l<i.length;++l){const f=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new yt(Gt.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Gd(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Gd(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Gd(i.field,i.dir==="asc"?0:1)));return new hf(hf.UNKNOWN_ID,this.collectionId,t,Mc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function jA(r){if(we(r instanceof tt||r instanceof St,20012),r instanceof tt){if(r instanceof iA){const t=r.value.arrayValue?.values?.map((i=>tt.create(r.field,"==",i)))||[];return St.create(t,"or")}return r}const e=r.filters.map((t=>jA(t)));return St.create(e,r.op)}function hN(r){if(r.getFilters().length===0)return[];const e=Ty(jA(r));return we(UA(e),7391),vy(e)||by(e)?[e]:e.getFilters()}function vy(r){return r instanceof tt}function by(r){return r instanceof St&&r_(r)}function UA(r){return vy(r)||by(r)||(function(t){if(t instanceof St&&hy(t)){for(const i of t.getFilters())if(!vy(i)&&!by(i))return!1;return!0}return!1})(r)}function Ty(r){if(we(r instanceof tt||r instanceof St,34018),r instanceof tt)return r;if(r.filters.length===1)return Ty(r.filters[0]);const e=r.filters.map((i=>Ty(i)));let t=St.create(e,r.op);return t=Ef(t),UA(t)?t:(we(t instanceof St,64498),we(Bl(t),40251),we(t.filters.length>1,57927),t.filters.reduce(((i,a)=>h_(i,a))))}function h_(r,e){let t;return we(r instanceof tt||r instanceof St,38388),we(e instanceof tt||e instanceof St,25473),t=r instanceof tt?e instanceof tt?(function(a,l){return St.create([a,l],"and")})(r,e):CE(r,e):e instanceof tt?CE(e,r):(function(a,l){if(we(a.filters.length>0&&l.filters.length>0,48005),Bl(a)&&Bl(l))return tA(a,l.getFilters());const c=hy(a)?a:l,f=hy(a)?l:a,g=c.filters.map((p=>h_(p,f)));return St.create(g,"or")})(r,e),Ef(t)}function CE(r,e){if(Bl(e))return tA(e,r.getFilters());{const t=e.filters.map((i=>h_(r,i)));return St.create(t,"or")}}function Ef(r){if(we(r instanceof tt||r instanceof St,11850),r instanceof tt)return r;const e=r.getFilters();if(e.length===1)return Ef(e[0]);if(Zx(r))return r;const t=e.map((a=>Ef(a))),i=[];return t.forEach((a=>{a instanceof tt?i.push(a):a instanceof St&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:St.create(i,r.op)}class dN{constructor(){this.Sn=new d_}addToCollectionParentIndex(e,t){return this.Sn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(kr.min())}updateCollectionGroup(e,t,i){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class d_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new yt(ht.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new yt(ht.comparator)).toArray()}}const DE="IndexedDbIndexManager",Pd=new Uint8Array(0);class fN{constructor(e,t){this.databaseId=t,this.Dn=new d_,this.Cn=new _s((i=>vo(i)),((i,a)=>Zc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:i,parent:Wn(a)};return NE(e).put(l)}return F.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Sx(t),""],!1,!0);return NE(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Mi(c.parent))}return i}))}addFieldIndex(e,t){const i=nc(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=pl(e);return l.next((f=>{c.put(EE(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=nc(e),a=pl(e),l=gl(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=nc(e),i=gl(e),a=pl(e);return t.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(e,t){return F.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new RE(i).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=gl(e);let a=!0;const l=new Map;return F.forEach(this.vn(t),(c=>this.Fn(e,c).next((f=>{a&&(a=!!f),l.set(c,f)})))).next((()=>{if(a){let c=He();const f=[];return F.forEach(l,((g,p)=>{ae(DE,`Using index ${(function(re){return`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map((ue=>`${ue.fieldPath}:${ue.kind}`)).join(",")}`})(g)} to execute ${vo(t)}`);const _=(function(re,ue){const fe=iy(ue);if(fe===void 0)return null;for(const ce of _f(re,fe.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null})(p,g),v=(function(re,ue){const fe=new Map;for(const ce of ro(ue))for(const C of _f(re,ce.fieldPath))switch(C.op){case"==":case"in":fe.set(ce.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return fe.set(ce.fieldPath.canonicalString(),C.value),Array.from(fe.values())}return null})(p,g),S=(function(re,ue){const fe=[];let ce=!0;for(const C of ro(ue)){const R=C.kind===0?lE(re,C.fieldPath,re.startAt):uE(re,C.fieldPath,re.startAt);fe.push(R.value),ce&&(ce=R.inclusive)}return new zl(fe,ce)})(p,g),I=(function(re,ue){const fe=[];let ce=!0;for(const C of ro(ue)){const R=C.kind===0?uE(re,C.fieldPath,re.endAt):lE(re,C.fieldPath,re.endAt);fe.push(R.value),ce&&(ce=R.inclusive)}return new zl(fe,ce)})(p,g),V=this.Mn(g,p,S),U=this.Mn(g,p,I),q=this.xn(g,p,v),te=this.On(g.indexId,_,V,S.inclusive,U,I.inclusive,q);return F.forEach(te,(X=>i.Z(X,t.limit).next((re=>{re.forEach((ue=>{const fe=pe.fromSegments(ue.documentKey);c.has(fe)||(c=c.add(fe),f.push(fe))}))}))))})).next((()=>f))}return F.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=hN(St.create(e.filters,"and")).map((i=>fy(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,a,l,c,f){const g=(t!=null?t.length:1)*Math.max(i.length,l.length),p=g/(t!=null?t.length:1),_=[];for(let v=0;v<g;++v){const S=t?this.Nn(t[v/p]):Pd,I=this.Bn(e,S,i[v%p],a),V=this.Ln(e,S,l[v%p],c),U=f.map((q=>this.Bn(e,S,q,!0)));_.push(...this.createRange(I,V,U))}return _}Bn(e,t,i,a){const l=new lo(e,pe.empty(),t,i);return a?l:l.En()}Ln(e,t,i,a){const l=new lo(e,pe.empty(),t,i);return a?l.En():l}Fn(e,t){const i=new RE(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const f of l)i.gn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let i=2;const a=this.vn(t);return F.forEach(a,(l=>this.Fn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(g){let p=new yt(Gt.comparator),_=!1;for(const v of g.filters)for(const S of v.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?_=!0:p=p.add(S.field));for(const v of g.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}kn(e,t){const i=new tc;for(const a of ro(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);oo.Wt.Dt(l,c)}return i.un()}Nn(e){const t=new tc;return oo.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new tc;return oo.Wt.Dt(n_(this.databaseId,t),i.ln((function(l){const c=ro(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let a=[];a.push(new tc);let l=0;for(const c of ro(e)){const f=i[l++];for(const g of a)if(this.qn(t,c.fieldPath)&&zc(f))a=this.Un(a,c,f);else{const p=g.ln(c.kind);oo.Wt.Dt(f,p)}}return this.$n(a)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const f of a){const g=new tc;g.seed(f.un()),oo.Wt.Dt(c,g.ln(t.kind)),l.push(g)}return l}qn(e,t){return!!e.filters.find((i=>i instanceof tt&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=nc(e),a=pl(e);return(t?i.H(ay,IDBKeyRange.bound(t,t)):i.H()).next((l=>{const c=[];return F.forEach(l,(f=>a.get([f.indexId,this.uid]).next((g=>{c.push((function(_,v){const S=v?new Mc(v.sequenceNumber,new kr(To(v.readTime),new pe(Mi(v.documentKey)),v.largestBatchId)):Mc.empty(),I=_.fields.map((([V,U])=>new Gd(Gt.fromServerFormat(V),U)));return new hf(_.indexId,_.collectionGroup,I,S)})(f,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Me(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=nc(e),l=pl(e);return this.Wn(e).next((c=>a.H(ay,IDBKeyRange.bound(t,t)).next((f=>F.forEach(f,(g=>l.put(EE(g.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return F.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?F.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(i.set(a.collectionGroup,f),F.forEach(f,(g=>this.Qn(e,a,g).next((p=>{const _=this.Gn(l,g);return p.isEqual(_)?F.resolve():this.zn(e,l,g,p,_)})))))))}))}jn(e,t,i,a){return gl(e).put(a.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,a){return gl(e).delete(a.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const a=gl(e);let l=new yt(ea);return a.ee({index:Px,range:IDBKeyRange.only([i.indexId,this.uid,Zd(this.Kn(i,t))])},((c,f)=>{l=l.add(new lo(i.indexId,t,IE(f.arrayValue),IE(f.directionalValue)))})).next((()=>l))}Gn(e,t){let i=new yt(ea);const a=this.kn(t,e);if(a==null)return i;const l=iy(t);if(l!=null){const c=e.data.field(l.fieldPath);if(zc(c))for(const f of c.arrayValue.values||[])i=i.add(new lo(t.indexId,e.key,this.Nn(f),a))}else i=i.add(new lo(t.indexId,e.key,Pd,a));return i}zn(e,t,i,a,l){ae(DE,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,_,v,S){const I=g.getIterator(),V=p.getIterator();let U=fl(I),q=fl(V);for(;U||q;){let te=!1,X=!1;if(U&&q){const re=_(U,q);re<0?X=!0:re>0&&(te=!0)}else U!=null?X=!0:te=!0;te?(v(q),q=fl(V)):X?(S(U),U=fl(I)):(U=fl(I),q=fl(V))}})(a,l,ea,(f=>{c.push(this.jn(e,t,i,f))}),(f=>{c.push(this.Hn(e,t,i,f))})),F.waitFor(c)}Wn(e){let t=1;return pl(e).ee({index:kx,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,f)=>ea(c,f))).filter(((c,f,g)=>!f||ea(c,g[f-1])!==0));const a=[];a.push(e);for(const c of i){const f=ea(c,e),g=ea(c,t);if(f===0)a[0]=e.En();else if(f>0&&g<0)a.push(c),a.push(c.En());else if(g>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const f=a[c].An(this.uid,Pd,pe.empty()),g=a[c+1].An(this.uid,Pd,pe.empty());l.push(IDBKeyRange.bound(f,g))}return l}Jn(e,t){return ea(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(OE)}getMinOffset(e,t){return F.mapArray(this.vn(t),(i=>this.Fn(e,i).next((a=>a||be(44426))))).next(OE)}}function NE(r){return Sn(r,Lc)}function gl(r){return Sn(r,Ec)}function nc(r){return Sn(r,Xy)}function pl(r){return Sn(r,Tc)}function OE(r){we(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;Yy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new kr(e.readTime,e.documentKey,t)}const ME={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zA=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function BA(r,e,t){const i=r.store(li),a=r.store(Vl),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const g=i.ee({range:c},((_,v,S)=>(f++,S.delete())));l.push(g.next((()=>{we(f===1,47070,{batchId:t.batchId})})));const p=[];for(const _ of t.mutations){const v=Ox(e,_.key.path,t.batchId);l.push(a.delete(v)),p.push(_.key)}return F.waitFor(l).next((()=>p))}function Sf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw be(14731);e=r.noDocument}return JSON.stringify(e).length}$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(zA,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);class nm{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(e,t,i,a){we(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new nm(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).ee({index:uo,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=El(e),c=ta(e);return c.add({}).next((f=>{we(typeof f=="number",49019);const g=new a_(f,t,i,a),p=(function(I,V,U){const q=U.baseMutations.map((X=>bf(I.yt,X))),te=U.mutations.map((X=>bf(I.yt,X)));return{userId:V,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:q,mutations:te}})(this.serializer,this.userId,g),_=[];let v=new yt(((S,I)=>Me(S.canonicalString(),I.canonicalString())));for(const S of a){const I=Ox(this.userId,S.key.path,f);v=v.add(S.key.path.popLast()),_.push(c.put(p)),_.push(l.put(I,BC))}return v.forEach((S=>{_.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[f]=g.keys()})),F.waitFor(_).next((()=>g))}))}lookupMutationBatch(e,t){return ta(e).get(t).next((i=>i?(we(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ao(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?F.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return ta(e).ee({index:uo,range:a},((c,f,g)=>{f.userId===this.userId&&(we(f.batchId>=i,47524,{Yn:i}),l=ao(this.serializer,f)),g.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=co;return ta(e).ee({index:uo,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,co],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).H(uo,t).next((i=>i.map((a=>ao(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Kd(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return El(e).ee({range:a},((c,f,g)=>{const[p,_,v]=c,S=Mi(_);if(p===this.userId&&t.path.isEqual(S))return ta(e).get(v).next((I=>{if(!I)throw be(61480,{er:c,batchId:v});we(I.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:I.userId,batchId:v}),l.push(ao(this.serializer,I))}));g.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new yt(Me);const a=[];return t.forEach((l=>{const c=Kd(this.userId,l.path),f=IDBKeyRange.lowerBound(c),g=El(e).ee({range:f},((p,_,v)=>{const[S,I,V]=p,U=Mi(I);S===this.userId&&l.path.isEqual(U)?i=i.add(V):v.done()}));a.push(g)})),F.waitFor(a).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Kd(this.userId,i),c=IDBKeyRange.lowerBound(l);let f=new yt(Me);return El(e).ee({range:c},((g,p,_)=>{const[v,S,I]=g,V=Mi(S);v===this.userId&&i.isPrefixOf(V)?V.length===a&&(f=f.add(I)):_.done()})).next((()=>this.tr(e,f)))}tr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(ta(e).get(l).next((c=>{if(c===null)throw be(35274,{batchId:l});we(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(ao(this.serializer,c))})))})),F.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return BA(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),F.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return El(e).ee({range:i},((l,c,f)=>{if(l[0]===this.userId){const g=Mi(l[1]);a.push(g)}else f.done()})).next((()=>{we(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return FA(e,this.userId,t)}ir(e){return HA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:co,lastStreamToken:""}))}}function FA(r,e,t){const i=Kd(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return El(r).ee({range:l,Y:!0},((f,g,p)=>{const[_,v,S]=f;_===e&&v===a&&(c=!0),p.done()})).next((()=>c))}function ta(r){return Sn(r,li)}function El(r){return Sn(r,Vl)}function HA(r){return Sn(r,kc)}class Eo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Eo(0)}static ar(){return new Eo(-1)}}class mN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new Eo(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Re.fromTimestamp(new pt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>yl(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(we(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return yl(e).ee(((c,f)=>{const g=gc(f);g.sequenceNumber<=t&&i.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(e,g)))})).next((()=>F.waitFor(l))).next((()=>a))}forEachTarget(e,t){return yl(e).ee(((i,a)=>{const l=gc(a);t(l)}))}ur(e){return VE(e).get(mf).next((t=>(we(t!==null,2888),t)))}cr(e,t){return VE(e).put(mf,t)}lr(e,t){return yl(e).put(PA(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=vo(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return yl(e).ee({range:a,index:Vx},((c,f,g)=>{const p=gc(f);Zc(t,p.target)&&(l=p,g.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=sa(e);return t.forEach((c=>{const f=Wn(c.path);a.push(l.put({targetId:i,path:f})),a.push(this.referenceDelegate.addReference(e,i,c))})),F.waitFor(a)}removeMatchingKeys(e,t,i){const a=sa(e);return F.forEach(t,(l=>{const c=Wn(l.path);return F.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=sa(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=sa(e);let l=He();return a.ee({range:i,Y:!0},((c,f,g)=>{const p=Mi(c[1]),_=new pe(p);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=Wn(t.path),a=IDBKeyRange.bound([i],[Sx(i)],!1,!0);let l=0;return sa(e).ee({index:$y,Y:!0,range:a},(([c,f],g,p)=>{c!==0&&(l++,p.done())})).next((()=>l>0))}At(e,t){return yl(e).get(t).next((i=>i?gc(i):null))}}function yl(r){return Sn(r,kl)}function VE(r){return Sn(r,ho)}function sa(r){return Sn(r,Pl)}const kE="LruGarbageCollector",gN=1048576;function PE([r,e],[t,i]){const a=Me(r,t);return a===0?Me(e,i):a}class pN{constructor(e){this.Pr=e,this.buffer=new yt(PE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();PE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ae(kE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wa(t)?ae(kE,"Ignoring IndexedDB error during garbage collection: ",t):await Aa(t)}await this.Ar(3e5)}))}}class yN{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(vr.ce);const i=new pN(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(ME)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ME):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,f,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),_l()<=Je.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${v} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function GA(r,e){return new yN(r,e)}class _N{constructor(e,t){this.db=e,this.garbageCollector=GA(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,a)=>t(a)))}addReference(e,t,i){return Ld(e,i)}removeReference(e,t,i){return Ld(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Ld(e,t)}wr(e,t){return(function(a,l){let c=!1;return HA(a).te((f=>FA(a,f,l).next((g=>(g&&(c=!0),F.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,f)=>{if(f<=t){const g=this.wr(e,c).next((p=>{if(!p)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Re.min()),sa(e).delete((function(v){return[0,Wn(v.path)]})(c)))))}));a.push(g)}})).next((()=>F.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Ld(e,t)}yr(e,t){const i=sa(e);let a,l=vr.ce;return i.ee({index:$y},(([c,f],{path:g,sequenceNumber:p})=>{c===0?(l!==vr.ce&&t(new pe(Mi(a)),l),l=p,a=g):l=vr.ce})).next((()=>{l!==vr.ce&&t(new pe(Mi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ld(r,e){return sa(r).put((function(i,a){return{targetId:0,path:Wn(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}class KA{constructor(){this.changes=new _s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?F.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return eo(e).put(i)}removeEntry(e,t,i){return eo(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Tf(c),f[f.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=Xt.newInvalidDocument(t);return eo(e).ee({index:Yd,range:IDBKeyRange.only(rc(t))},((a,l)=>{i=this.Sr(t,l)})).next((()=>i))}Dr(e,t){let i={size:0,document:Xt.newInvalidDocument(t)};return eo(e).ee({index:Yd,range:IDBKeyRange.only(rc(t))},((a,l)=>{i={document:this.Sr(t,l),size:Sf(l)}})).next((()=>i))}getEntries(e,t){let i=Or();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(e,t){let i=Or(),a=new Rt(pe.comparator);return this.Cr(e,t,((l,c)=>{const f=this.Sr(l,c);i=i.insert(l,f),a=a.insert(l,Sf(c))})).next((()=>({documents:i,Fr:a})))}Cr(e,t,i){if(t.isEmpty())return F.resolve();let a=new yt(UE);t.forEach((g=>a=a.add(g)));const l=IDBKeyRange.bound(rc(a.first()),rc(a.last())),c=a.getIterator();let f=c.getNext();return eo(e).ee({index:Yd,range:l},((g,p,_)=>{const v=pe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;f&&UE(f,v)<0;)i(f,null),f=c.getNext();f&&f.isEqual(v)&&(i(f,p),f=c.hasNext()?c.getNext():null),f?_.j(rc(f)):_.done()})).next((()=>{for(;f;)i(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Tf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eo(e).H(IDBKeyRange.bound(f,g,!0)).next((p=>{l?.incrementDocumentReadCount(p.length);let _=Or();for(const v of p){const S=this.Sr(pe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);S.isFoundDocument()&&(th(t,S)||a.has(S.key))&&(_=_.insert(S.key,S))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=Or();const c=jE(t,i),f=jE(t,kr.max());return eo(e).ee({index:Mx,range:IDBKeyRange.bound(c,f,!0)},((g,p,_)=>{const v=this.Sr(pe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(v.key,v),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new bN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return LE(e).get(sy).next((t=>(we(!!t,20021),t)))}br(e,t){return LE(e).put(sy,t)}Sr(e,t){if(t){const i=iN(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Re.min())))return i}return Xt.newInvalidDocument(e)}}function YA(r){return new vN(r)}class bN extends KA{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new _s((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new yt(((l,c)=>Me(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const g=bE(this.Mr.serializer,c);a=a.add(l.path.popLast());const p=Sf(g);i+=p-f.size,t.push(this.Mr.addEntry(e,l,g))}else if(i-=f.size,this.trackRemovals){const g=bE(this.Mr.serializer,c.convertToNoDocument(Re.min()));t.push(this.Mr.addEntry(e,l,g))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,i)),F.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function LE(r){return Sn(r,Pc)}function eo(r){return Sn(r,ff)}function rc(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jE(r,e){const t=e.documentKey.path.toArray();return[r,Tf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function UE(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Me(t[l],i[l]),a)return a;return a=Me(t.length,i.length),a||(a=Me(t[t.length-2],i[i.length-2]),a||Me(t[t.length-1],i[i.length-1]))}class TN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class QA{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&wc(i.mutation,a,br.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,He()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=He()){const a=Vi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=fc();return l.forEach(((f,g)=>{c=c.insert(f,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Vi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,He())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,a){let l=Or();const c=Ac(),f=(function(){return Ac()})();return t.forEach(((g,p)=>{const _=i.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof vs)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),wc(_.mutation,p,_.mutation.getFieldMask(),pt.now())):c.set(p.key,br.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,_)=>c.set(p,_))),t.forEach(((p,_)=>f.set(p,new TN(_,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Ac();let a=new Rt(((c,f)=>c-f)),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let _=i.get(g)||br.empty();_=f.applyToLocalView(p,_),i.set(g,_);const v=(a.get(f.batchId)||He()).add(g);a=a.insert(f.batchId,v)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),p=g.key,_=g.value,v=hA();_.forEach((S=>{if(!l.has(S)){const I=yA(t.get(S),i.get(S));I!==null&&v.set(S,I),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return F.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return xD(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):F.resolve(Vi());let f=Ml,g=l;return c.next((p=>F.forEach(p,((_,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(_)?F.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,He()))).next((_=>({batchId:f,changes:cA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((i=>{let a=fc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=fc();return this.indexManager.getCollectionParents(e,l).next((f=>F.forEach(f,(g=>{const p=(function(v,S){return new Wf(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((_=>{_.forEach(((v,S)=>{c=c.insert(v,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((g,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,Xt.newInvalidDocument(_)))}));let f=fc();return c.forEach(((g,p)=>{const _=l.get(g);_!==void 0&&wc(_.mutation,p,br.empty(),pt.now()),th(t,p)&&(f=f.insert(g,p))})),f}))}}class EN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return F.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:sr(a.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:LA(a.bundledQuery),readTime:sr(a.readTime)}})(t)),F.resolve()}}class SN{constructor(){this.overlays=new Rt(pe.comparator),this.Lr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Vi();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),F.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),F.resolve()}getOverlaysForCollection(e,t,i){const a=Vi(),l=t.length+1,c=new pe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>i&&a.set(g.getKey(),g)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Rt(((p,_)=>p-_));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=Vi(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const f=Vi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>f.set(p,_))),!(f.size()>=a)););return F.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new l_(t,i));let l=this.Lr.get(t);l===void 0&&(l=He(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}class xN{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}class f_{constructor(){this.kr=new yt(Rn.Kr),this.qr=new yt(Rn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Rn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Rn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new pe(new ht([])),i=new Rn(t,e),a=new Rn(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new pe(new ht([])),i=new Rn(t,e),a=new Rn(t,e+1);let l=He();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Rn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Rn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return pe.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}}class AN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new yt(Rn.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new a_(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new Rn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return F.resolve(c)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?co:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Rn(t,0),a=new Rn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new yt(Me);return t.forEach((a=>{const l=new Rn(a,0),c=new Rn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{i=i.add(f.Hr)}))})),F.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;pe.isDocumentKey(l)||(l=l.child(""));const c=new Rn(new pe(l),0);let f=new yt(Me);return this.Jr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(g.Hr)),!0)}),c),F.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){we(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return F.forEach(t.mutations,(a=>{const l=new Rn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Rn(t,0),a=this.Jr.firstAfterOrEqual(i);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wN{constructor(e){this.ti=e,this.docs=(function(){return new Rt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return F.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let i=Or();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Xt.newInvalidDocument(a))})),F.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Or();const c=t.path,f=new pe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Yy(Ix(_),i)<=0||(a.has(_.key)||th(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(e,t,i,a){be(9500)}ni(e,t){return F.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new IN(this)}getSize(e){return F.resolve(this.size)}}class IN extends KA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),F.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class RN{constructor(e){this.persistence=e,this.ri=new _s((t=>vo(t)),Zc),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new f_,this.targetCount=0,this.oi=Eo._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),F.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Eo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.lr(t),F.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),F.waitFor(l).next((()=>a))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return F.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),F.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),F.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return F.resolve(i)}containsKey(e,t){return F.resolve(this.si.containsKey(t))}}class m_{constructor(e,t){this._i={},this.overlays={},this.ai=new vr(0),this.ui=!1,this.ui=!0,this.ci=new xN,this.referenceDelegate=e(this),this.li=new RN(this),this.indexManager=new dN,this.remoteDocumentCache=(function(a){return new wN(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new kA(t),this.Pi=new EN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new AN(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);const a=new CN(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return F.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class CN extends Cx{constructor(e){super(),this.currentSequenceNumber=e}}class rm{constructor(e){this.persistence=e,this.Ri=new f_,this.Ai=null}static Vi(e){return new rm(e)}get di(){if(this.Ai)return this.Ai;throw be(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),F.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,(i=>{const a=pe.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class xf{constructor(e,t){this.persistence=e,this.fi=new _s((i=>Wn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=GA(this,t)}static Vi(e,t){return new xf(e,t)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return F.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?F.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(i++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),F.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$d(e.data.value)),t}wr(e,t,i){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return F.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class DN{constructor(e){this.serializer=e}k(e,t,i,a){const l=new qf("createOrUpgrade",t);i<1&&a>=1&&((function(g){g.createObjectStore(Jc)})(e),(function(g){g.createObjectStore(kc,{keyPath:zC}),g.createObjectStore(li,{keyPath:XT,autoIncrement:!0}).createIndex(uo,WT,{unique:!0}),g.createObjectStore(Vl)})(e),zE(e),(function(g){g.createObjectStore(io)})(e));let c=F.resolve();return i<3&&a>=3&&(i!==0&&((function(g){g.deleteObjectStore(Pl),g.deleteObjectStore(kl),g.deleteObjectStore(ho)})(e),zE(e)),c=c.next((()=>(function(g){const p=g.store(ho),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return p.put(mf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(g,p){return p.store(li).H().next((v=>{g.deleteObjectStore(li),g.createObjectStore(li,{keyPath:XT,autoIncrement:!0}).createIndex(uo,WT,{unique:!0});const S=p.store(li),I=v.map((V=>S.put(V)));return F.waitFor(I)}))})(e,l)))),c=c.next((()=>{(function(g){g.createObjectStore(Ll,{keyPath:$C})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Pc)})(e),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Kf,{keyPath:XC})})(e),(function(g){g.createObjectStore(Yf,{keyPath:WC})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Qf,{keyPath:iD});p.createIndex(oy,sD,{unique:!1}),p.createIndex(Lx,aD,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(ff,{keyPath:FC});p.createIndex(Yd,HC),p.createIndex(Mx,qC)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(io)))),i<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Xy,{keyPath:JC,autoIncrement:!0}).createIndex(ay,ZC,{unique:!1}),g.createObjectStore(Tc,{keyPath:eD}).createIndex(kx,tD,{unique:!1}),g.createObjectStore(Ec,{keyPath:nD}).createIndex(Px,rD,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Tc).clear()})).next((()=>{t.objectStore(Ec).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Wy,{keyPath:oD})})(e)}))),i<18&&a>=18&&ox()&&(c=c.next((()=>{t.objectStore(Tc).clear()})).next((()=>{t.objectStore(Ec).clear()}))),c}pi(e){let t=0;return e.store(io).ee(((i,a)=>{t+=Sf(a)})).next((()=>{const i={byteSize:t};return e.store(Pc).put(sy,i)}))}gi(e){const t=e.store(kc),i=e.store(li);return t.H().next((a=>F.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,co],[l.userId,l.lastAcknowledgedBatchId]);return i.H(uo,c).next((f=>F.forEach(f,(g=>{we(g.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=ao(this.serializer,g);return BA(e,l.userId,p).next((()=>{}))}))))}))))}yi(e){const t=e.store(Pl),i=e.store(io);return e.store(ho).get(mf).next((a=>{const l=[];return i.ee(((c,f)=>{const g=new ht(c),p=(function(v){return[0,Wn(v)]})(g);l.push(t.get(p).next((_=>_?F.resolve():(v=>t.put({targetId:0,path:Wn(v),sequenceNumber:a.highestListenSequenceNumber}))(g))))})).next((()=>F.waitFor(l)))}))}wi(e,t){e.createObjectStore(Lc,{keyPath:QC});const i=t.store(Lc),a=new d_,l=c=>{if(a.add(c)){const f=c.lastSegment(),g=c.popLast();return i.put({collectionId:f,parent:Wn(g)})}};return t.store(io).ee({Y:!0},((c,f)=>{const g=new ht(c);return l(g.popLast())})).next((()=>t.store(Vl).ee({Y:!0},(([c,f,g],p)=>{const _=Mi(f);return l(_.popLast())}))))}bi(e){const t=e.store(kl);return t.ee(((i,a)=>{const l=gc(a),c=PA(this.serializer,l);return t.put(c)}))}Si(e,t){const i=t.store(io),a=[];return i.ee(((l,c)=>{const f=t.store(ff),g=(function(v){return v.document?new pe(ht.fromString(v.document.name).popFirst(5)):v.noDocument?pe.fromSegments(v.noDocument.path):v.unknownDocument?pe.fromSegments(v.unknownDocument.path):be(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(f.put(p))})).next((()=>F.waitFor(a)))}Di(e,t){const i=t.store(li),a=YA(this.serializer),l=new m_(rm.Vi,this.serializer.yt);return i.H().next((c=>{const f=new Map;return c.forEach((g=>{let p=f.get(g.userId)??He();ao(this.serializer,g).keys().forEach((_=>p=p.add(_))),f.set(g.userId,p)})),F.forEach(f,((g,p)=>{const _=new Cn(p),v=tm.wt(this.serializer,_),S=l.getIndexManager(_),I=nm.wt(_,this.serializer,S,l.referenceDelegate);return new QA(a,I,v,S).recalculateAndSaveOverlaysForDocumentKeys(new ly(t,vr.ce),g).next()}))}))}}function zE(r){r.createObjectStore(Pl,{keyPath:KC}).createIndex($y,YC,{unique:!0}),r.createObjectStore(kl,{keyPath:"targetId"}).createIndex(Vx,GC,{unique:!0}),r.createObjectStore(ho)}const na="IndexedDbPersistence",Np=18e5,Op=5e3,Mp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",NN="main";class g_{constructor(e,t,i,a,l,c,f,g,p,_,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=l,this.window=c,this.document=f,this.Fi=p,this.Mi=_,this.xi=v,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!g_.v())throw new ge(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _N(this,a),this.Ki=t+NN,this.serializer=new kA(g),this.qi=new ga(this.Ki,this.xi,new DN(this.serializer)),this.ci=new aN,this.li=new mN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YA(this.serializer),this.Pi=new sN,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&en(na,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ne.FAILED_PRECONDITION,Mp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new vr(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>jd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(wa(e))return ae(na,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae(na,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return ic(e).get(dl).next((t=>F.resolve(this.Xi(t))))}Yi(e){return jd(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Np)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Sn(t,Ll);return i.H().next((a=>{const l=this.ns(a,Np),c=a.filter((f=>l.indexOf(f)===-1));return F.forEach(c,(f=>i.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?F.resolve(!0):ic(e).get(dl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Op)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ge(ne.FAILED_PRECONDITION,Mp);return!1}}return!(!this.networkEnabled||!this.inForeground)||jd(e).H().next((i=>this.ns(i,Op).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ae(na,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Jc,Ll],(e=>{const t=new ly(e,vr.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>jd(e).H().next((t=>this.ns(t,Np).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return nm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return tm.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){ae(na,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(g){return g===18?cD:g===17?Bx:g===16?uD:g===15?Jy:g===14?zx:g===13?Ux:g===12?lD:g===11?jx:void be(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(f=>(c=new ly(f,this.ai?this.ai.next():vr.ce),t==="readwrite-primary"?this.ji(c).next((g=>!!g||this.Hi(c))).next((g=>{if(!g)throw en(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ge(ne.FAILED_PRECONDITION,Rx);return i(c)})).next((g=>this.Zi(c).next((()=>g)))):this.Ps(c).next((()=>i(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Ps(e){return ic(e).get(dl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Op)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(ne.FAILED_PRECONDITION,Mp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ic(e).put(dl,t)}static v(){return ga.v()}Ji(e){const t=ic(e);return t.get(dl).next((i=>this.Xi(i)?(ae(na,"Releasing primary lease."),t.delete(dl)):F.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(en(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;ax()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ae(na,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return en(na,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){en("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ic(r){return Sn(r,Jc)}function jd(r){return Sn(r,Ll)}function $A(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class p_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=He(),a=He();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new p_(e,t.fromCache,i,a)}}class ON{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class XA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return ax()?8:Dx(En())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new ON;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(_l()<=Je.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",vl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(_l()<=Je.DEBUG&&ae("QueryEngine","Query:",vl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(_l()<=Je.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",vl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(t))):F.resolve())}gs(e,t){if(cE(t))return F.resolve(null);let i=Vr(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=my(t,null,"F"),i=Vr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=He(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.bs(t,f);return this.Ss(t,p,c,g.readTime)?this.gs(e,my(t,null,"F")):this.Ds(e,p,t,g)}))))})))))}ps(e,t,i,a){return cE(t)||a.isEqual(Re.min())?F.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?F.resolve(null):(_l()<=Je.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),vl(t)),this.Ds(e,c,t,wx(a,Ml)).next((f=>f)))}))}bs(e,t){let i=new yt(lA(e));return t.forEach(((a,l)=>{th(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return _l()<=Je.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",vl(t)),this.fs.getDocumentsMatchingQuery(e,t,kr.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const y_="LocalStore",MN=3e8;class VN{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Rt(Me),this.Fs=new _s((l=>vo(l)),Zc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function WA(r,e,t,i){return new VN(r,e,t,i)}async function JA(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let g=He();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of l){f.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function kN(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,g,p,_){const v=p.batch,S=v.keys();let I=F.resolve();return S.forEach((V=>{I=I.next((()=>_.getEntry(g,V))).next((U=>{const q=p.docVersions.get(V);we(q!==null,48541),U.version.compareTo(q)<0&&(v.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(g,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=He();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(g=g.add(f.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function ZA(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function PN(r,e){const t=Se(r),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((_,v)=>{const S=a.get(v);if(!S)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,v))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(nn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),a=a.insert(v,I),(function(U,q,te){return U.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=MN?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(S,I,_)&&f.push(t.li.updateTargetData(l,I))}));let g=Or(),p=He();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(LN(l,c,e.documentUpdates).next((_=>{g=_.Bs,p=_.Ls}))),!i.isEqual(Re.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return F.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.vs=a,l)))}function LN(r,e,t){let i=He(),a=He();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Or();return t.forEach(((f,g)=>{const p=l.get(f);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):ae(y_,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",g.version)})),{Bs:c,Ls:a}}))}function jN(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=co),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Af(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,F.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new as(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Gl(r,e,t){const i=Se(r),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!wa(c))throw c;ae(y_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Ey(r,e,t){const i=Se(r);let a=Re.min(),l=He();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,_){const v=Se(g),S=v.Fs.get(_);return S!==void 0?F.resolve(v.vs.get(S)):v.li.getTargetData(p,_)})(i,c,Vr(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((g=>{l=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:He()))).next((f=>(nw(i,oA(e),f),{documents:f,ks:l})))))}function ew(r,e){const t=Se(r),i=Se(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function tw(r,e){const t=Se(r),i=t.Ms.get(e)||Re.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,wx(i,Ml),Number.MAX_SAFE_INTEGER))).then((a=>(nw(t,e,a),a)))}function nw(r,e,t){let i=r.Ms.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}const rw="firestore_clients";function BE(r,e){return`${rw}_${r}_${e}`}const iw="firestore_mutations";function FE(r,e,t){let i=`${iw}_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const sw="firestore_targets";function Vp(r,e){return`${sw}_${r}_${e}`}const Oi="SharedClientState";class wf{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static $s(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ge(a.error.code,a.error.message))),c?new wf(e,t,a.state,l):(en(Oi,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ic{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new ge(i.error.code,i.error.message))),l?new Ic(e,i.state,a):(en(Oi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class If{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=i_();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=Nx(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new If(e,l):(en(Oi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class __{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new __(t.clientId,t.onlineState):(en(Oi,`Failed to parse online state: ${e}`),null)}}class Sy{constructor(){this.activeTargetIds=i_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kp{constructor(e,t,i,a,l){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Rt(Me),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=BE(this.persistenceKey,this.zs),this.Ys=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Sy),this.eo=new RegExp(`^${rw}_${c}_([^_]*)$`),this.no=new RegExp(`^${iw}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${sw}_${c}_(\\d+)$`),this.io=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this.so=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const a=this.getItem(BE(this.persistenceKey,i));if(a){const l=If.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Vp(this.persistenceKey,e));if(a){const l=Ic.$s(e,a);l&&(i=l.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vp(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.lo(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ae(Oi,"READ",e,t),t}setItem(e,t){ae(Oi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ae(Oi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ae(Oi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void en("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(l){let c=vr.ce;if(l!=null)try{const f=JSON.parse(l);we(typeof f=="number",30636,{yo:l}),c=f}catch(f){en(Oi,"Failed to read sequence number from WebStorage",f)}return c})(t.newValue);i!==vr.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const a=new wf(this.currentUser,e,t,i),l=FE(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=FE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const a=Vp(this.persistenceKey,e),l=new Ic(e,t,i);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return If.$s(i,t)}Vo(e,t){const i=this.no.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return wf.$s(new Cn(l),a,t)}fo(e,t){const i=this.ro.exec(e),a=Number(i[1]);return Ic.$s(a,t)}_o(e){return __.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ae(Oi,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(i),c=[],f=[];return l.forEach((g=>{a.has(g)||c.push(g)})),a.forEach((g=>{l.has(g)||f.push(g)})),this.syncEngine.Co(c,f).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=i_();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class aw{constructor(){this.vo=new Sy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UN{Mo(e){}shutdown(){}}const HE="ConnectivityMonitor";class qE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ae(HE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ae(HE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ud=null;function xy(){return Ud===null?Ud=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ud++,"0x"+Ud.toString(16)}const Pp="RestConnection",zN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class BN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===gf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=xy(),f=this.Qo(e,t.toUriEncodedString());ae(Pp,`Sending RPC '${e}' ${c}:`,f,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:p}=new URL(f),_=$l(p);return this.zo(e,f,g,i,_).then((v=>(ae(Pp,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw _a(Pp,`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",i),v}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=zN[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class FN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Qn="WebChannelConnection",sc=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class xl extends BN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xl.c_){const e=vx();sc(e,_x.STAT_EVENT,(t=>{t.stat===ny.PROXY?ae(Qn,"STAT_EVENT: detected buffering proxy"):t.stat===ny.NOPROXY&&ae(Qn,"STAT_EVENT: detected no buffering proxy")})),xl.c_=!0}}zo(e,t,i,a,l){const c=xy();return new Promise(((f,g)=>{const p=new px;p.setWithCredentials(!0),p.listenOnce(yx.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case qd.NO_ERROR:const v=p.getResponseJson();ae(Qn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),f(v);break;case qd.TIMEOUT:ae(Qn,`RPC '${e}' ${c} timed out`),g(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const S=p.getStatus();if(ae(Qn,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const V=I?.error;if(V&&V.status&&V.message){const U=(function(te){const X=te.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(X)>=0?X:ne.UNKNOWN})(V.status);g(new ge(U,V.message))}else g(new ge(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ae(Qn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ae(Qn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=xy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=l.join("");ae(Qn,`Creating RPC '${e}' stream ${a}: ${p}`,f);const _=c.createWebChannel(p,f);this.I_(_);let v=!1,S=!1;const I=new FN({Ho:V=>{S?ae(Qn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(v||(ae(Qn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),v=!0),ae(Qn,`RPC '${e}' stream ${a} sending:`,V),_.send(V))},Jo:()=>_.close()});return sc(_,dc.EventType.OPEN,(()=>{S||(ae(Qn,`RPC '${e}' stream ${a} transport opened.`),I.i_())})),sc(_,dc.EventType.CLOSE,(()=>{S||(S=!0,ae(Qn,`RPC '${e}' stream ${a} transport closed`),I.o_(),this.E_(_))})),sc(_,dc.EventType.ERROR,(V=>{S||(S=!0,_a(Qn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),I.o_(new ge(ne.UNAVAILABLE,"The operation could not be completed")))})),sc(_,dc.EventType.MESSAGE,(V=>{if(!S){const U=V.data[0];we(!!U,16349);const q=U,te=q?.error||q[0]?.error;if(te){ae(Qn,`RPC '${e}' stream ${a} received error:`,te);const X=te.status;let re=(function(ce){const C=mn[ce];if(C!==void 0)return bA(C)})(X),ue=te.message;X==="NOT_FOUND"&&ue.includes("database")&&ue.includes("does not exist")&&ue.includes(this.databaseId.database)&&_a(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),re===void 0&&(re=ne.INTERNAL,ue="Unknown error status: "+X+" with message "+te.message),S=!0,I.o_(new ge(re,ue)),_.close()}else ae(Qn,`RPC '${e}' stream ${a} received:`,U),I.__(U)}})),xl.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return bx()}}function HN(r){return new xl(r)}function ow(){return typeof window<"u"?window:null}function ef(){return typeof document<"u"?document:null}function im(r){return new QD(r,!0)}xl.c_=!1;class lw{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const GE="PersistentStream";class uw{constructor(e,t,i,a,l,c,f,g){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(en(t.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new ge(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(GE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ae(GE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qN extends uw{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=WD(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?sr(c.readTime):Re.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=yy(this.serializer),t.addTarget=(function(l,c){let f;const g=c.target;if(f=yf(g)?{documents:RA(l,g)}:{query:CA(l,g).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=SA(l,c.resumeToken);const p=gy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Re.min())>0){f.readTime=ql(l,c.snapshotVersion.toTimestamp());const p=gy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=ZD(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=yy(this.serializer),t.removeTarget=e,this.K_(t)}}class GN extends uw{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=JD(e.writeResults,e.commitTime),i=sr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=yy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bf(this.serializer,i)))};this.K_(t)}}class KN{}class YN extends KN{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,py(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ne.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,py(t,i),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function QN(r,e,t,i){return new YN(r,e,t,i)}class $N{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(en(t),this.aa=!1):ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const So="RemoteStore";class XN{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{Ao(this)&&(ae(So,"Restarting streams for network reachability change."),await(async function(g){const p=Se(g);p.Ea.add(4),await sh(p),p.Va.set("Unknown"),p.Ea.delete(4),await sm(p)})(this))}))})),this.Va=new $N(i,a)}}async function sm(r){if(Ao(r))for(const e of r.Ra)await e(!0)}async function sh(r){for(const e of r.Ra)await e(!1)}function am(r,e){const t=Se(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),T_(t)?b_(t):eu(t).O_()&&v_(t,e))}function Kl(r,e){const t=Se(r),i=eu(t);t.Ia.delete(e),i.O_()&&cw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ao(t)&&t.Va.set("Unknown"))}function v_(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}eu(r).Z_(e)}function cw(r,e){r.da.$e(e),eu(r).X_(e)}function b_(r){r.da=new qD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),eu(r).start(),r.Va.ua()}function T_(r){return Ao(r)&&!eu(r).x_()&&r.Ia.size>0}function Ao(r){return Se(r).Ea.size===0}function hw(r){r.da=void 0}async function WN(r){r.Va.set("Online")}async function JN(r){r.Ia.forEach(((e,t)=>{v_(r,e)}))}async function ZN(r,e){hw(r),T_(r)?(r.Va.ha(e),b_(r)):r.Va.set("Unknown")}async function eO(r,e,t){if(r.Va.set("Online"),e instanceof EA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(r,e)}catch(i){ae(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rf(r,i)}else if(e instanceof Jd?r.da.Xe(e):e instanceof TA?r.da.st(e):r.da.tt(e),!t.isEqual(Re.min()))try{const i=await ZA(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(g.resumeToken,c))}})),f.targetMismatches.forEach(((g,p)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),cw(l,g);const v=new as(_.target,g,p,_.sequenceNumber);v_(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ae(So,"Failed to raise snapshot:",i),await Rf(r,i)}}async function Rf(r,e,t){if(!wa(e))throw e;r.Ea.add(1),await sh(r),r.Va.set("Offline"),t||(t=()=>ZA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ae(So,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await sm(r)}))}function dw(r,e){return e().catch((t=>Rf(r,t,e)))}async function Zl(r){const e=Se(r),t=Ta(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:co;for(;tO(e);)try{const a=await jN(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,nO(e,a)}catch(a){await Rf(e,a)}fw(e)&&mw(e)}function tO(r){return Ao(r)&&r.Ta.length<10}function nO(r,e){r.Ta.push(e);const t=Ta(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function fw(r){return Ao(r)&&!Ta(r).x_()&&r.Ta.length>0}function mw(r){Ta(r).start()}async function rO(r){Ta(r).ra()}async function iO(r){const e=Ta(r);for(const t of r.Ta)e.ea(t.mutations)}async function sO(r,e,t){const i=r.Ta.shift(),a=o_.from(i,e,t);await dw(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Zl(r)}async function aO(r,e){e&&Ta(r).Y_&&await(async function(i,a){if((function(c){return BD(c)&&c!==ne.ABORTED})(a.code)){const l=i.Ta.shift();Ta(i).B_(),await dw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Zl(i)}})(r,e),fw(r)&&mw(r)}async function KE(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),ae(So,"RemoteStore received new credentials");const i=Ao(t);t.Ea.add(3),await sh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sm(t)}async function Ay(r,e){const t=Se(r);e?(t.Ea.delete(2),await sm(t)):e||(t.Ea.add(2),await sh(t),t.Va.set("Unknown"))}function eu(r){return r.ma||(r.ma=(function(t,i,a){const l=Se(t);return l.sa(),new qN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:WN.bind(null,r),Yo:JN.bind(null,r),t_:ZN.bind(null,r),J_:eO.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),T_(r)?b_(r):r.Va.set("Unknown")):(await r.ma.stop(),hw(r))}))),r.ma}function Ta(r){return r.fa||(r.fa=(function(t,i,a){const l=Se(t);return l.sa(),new GN(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:rO.bind(null,r),t_:aO.bind(null,r),ta:iO.bind(null,r),na:sO.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Zl(r)):(await r.fa.stop(),r.Ta.length>0&&(ae(So,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class E_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new E_(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S_(r,e){if(en("AsyncQueue",`${e}: ${r}`),wa(r))return new ge(ne.UNAVAILABLE,`${e}: ${r}`);throw r}class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||pe.comparator(t.key,i.key):(t,i)=>pe.comparator(t.key,i.key),this.keyedMap=fc(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Al;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class YE{constructor(){this.ga=new Rt(pe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Yl{constructor(e,t,i,a,l,c,f,g,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Yl(e,t,Al.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class oO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class lO{constructor(){this.queries=QE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Se(t),l=a.queries;a.queries=QE(),l.forEach(((c,f)=>{for(const g of f.ba)g.onError(i)}))})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function QE(){return new _s((r=>aA(r)),Jf)}async function gw(r,e){const t=Se(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new oO,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=S_(c,`Initialization of query '${vl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&x_(t)}async function pw(r,e){const t=Se(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function uO(r,e){const t=Se(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(i=!0);c.wa=a}}i&&x_(t)}function cO(r,e,t){const i=Se(r),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function x_(r){r.Ca.forEach((e=>{e.next()}))}var wy,$E;($E=wy||(wy={})).Ma="default",$E.Cache="cache";class yw{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wy.Cache}}class _w{constructor(e){this.key=e}}class vw{constructor(e){this.key=e}}class hO{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.eu=lA(e),this.tu=new Al(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new YE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,v)=>{const S=a.get(_),I=th(this.query,v)?v:null,V=!!S&&this.mutatedKeys.has(S.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let q=!1;S&&I?S.data.isEqual(I.data)?V!==U&&(i.track({type:3,doc:I}),q=!0):this.su(S,I)||(i.track({type:2,doc:I}),q=!0,(g&&this.eu(I,g)>0||p&&this.eu(I,p)<0)&&(f=!0)):!S&&I?(i.track({type:0,doc:I}),q=!0):S&&!I&&(i.track({type:1,doc:S}),q=!0,(g||p)&&(f=!0)),q&&(I?(c=c.add(I),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,v)=>(function(I,V){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Vt:q})}};return U(I)-U(V)})(_.type,v.type)||this.eu(_.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,p=g!==this.Xa;return this.Xa=g,c.length!==0||p?{snapshot:new Yl(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=He(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new vw(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new _w(i))})),t}cu(e){this.Za=e.ks,this.Ya=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const tu="SyncEngine";class dO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fO{constructor(e){this.key=e,this.hu=!1}}class mO{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new _s((f=>aA(f)),Jf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Rt(pe.comparator),this.Au=new Map,this.Vu=new f_,this.du={},this.mu=new Map,this.fu=Eo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gO(r,e,t=!0){const i=om(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await bw(i,e,t,!0),a}async function pO(r,e){const t=om(r);await bw(t,e,!0,!1)}async function bw(r,e,t,i){const a=await Af(r.localStore,Vr(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await A_(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&am(r.remoteStore,a),f}async function A_(r,e,t,i,a){r.pu=(v,S,I)=>(async function(U,q,te,X){let re=q.view.ru(te);re.Ss&&(re=await Ey(U.localStore,q.query,!1).then((({documents:C})=>q.view.ru(C,re))));const ue=X&&X.targetChanges.get(q.targetId),fe=X&&X.targetMismatches.get(q.targetId)!=null,ce=q.view.applyChanges(re,U.isPrimaryClient,ue,fe);return Iy(U,q.targetId,ce.au),ce.snapshot})(r,v,S,I);const l=await Ey(r.localStore,e,!0),c=new hO(e,l.ks),f=c.ru(l.documents),g=ih.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),p=c.applyChanges(f,r.isPrimaryClient,g);Iy(r,t,p.au);const _=new dO(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function yO(r,e,t){const i=Se(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Jf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Gl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Kl(i.remoteStore,a.targetId),Ql(i,a.targetId)})).catch(Aa)):(Ql(i,a.targetId),await Gl(i.localStore,a.targetId,!0))}async function _O(r,e){const t=Se(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Kl(t.remoteStore,i.targetId))}async function vO(r,e,t){const i=C_(r);try{const a=await(function(c,f){const g=Se(c),p=pt.now(),_=f.reduce(((I,V)=>I.add(V.key)),He());let v,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let V=Or(),U=He();return g.xs.getEntries(I,_).next((q=>{V=q,V.forEach(((te,X)=>{X.isValidDocument()||(U=U.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,V))).next((q=>{v=q;const te=[];for(const X of f){const re=UD(X,v.get(X.key).overlayedDocument);re!=null&&te.push(new vs(X.key,re,Wx(re.value.mapValue),Nn.exists(!0)))}return g.mutationQueue.addMutationBatch(I,p,te,f)})).next((q=>{S=q;const te=q.applyToLocalDocumentSet(v,U);return g.documentOverlayCache.saveOverlays(I,q.batchId,te)}))})).then((()=>({batchId:S.batchId,changes:cA(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,f,g){let p=c.du[c.currentUser.toKey()];p||(p=new Rt(Me)),p=p.insert(f,g),c.du[c.currentUser.toKey()]=p})(i,a.batchId,t),await Ra(i,a.changes),await Zl(i.remoteStore)}catch(a){const l=S_(a,"Failed to persist write");t.reject(l)}}async function Tw(r,e){const t=Se(r);try{const i=await PN(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(we(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?we(c.hu,14607):a.removedDocuments.size>0&&(we(c.hu,42227),c.hu=!1))})),await Ra(t,i,e)}catch(i){await Aa(i)}}function XE(r,e,t){const i=Se(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const g=Se(c);g.onlineState=f;let p=!1;g.queries.forEach(((_,v)=>{for(const S of v.ba)S.va(f)&&(p=!0)})),p&&x_(g)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function bO(r,e,t){const i=Se(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new Rt(pe.comparator);c=c.insert(l,Xt.newNoDocument(l,Re.min()));const f=He().add(l),g=new rh(Re.min(),new Map,new Rt(Me),c,f);await Tw(i,g),i.Ru=i.Ru.remove(l),i.Au.delete(e),R_(i)}else await Gl(i.localStore,e,!1).then((()=>Ql(i,e,t))).catch(Aa)}async function TO(r,e){const t=Se(r),i=e.batch.batchId;try{const a=await kN(t.localStore,e);I_(t,i,null),w_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ra(t,a)}catch(a){await Aa(a)}}async function EO(r,e,t){const i=Se(r);try{const a=await(function(c,f){const g=Se(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,f).next((v=>(we(v!==null,37113),_=v.keys(),g.mutationQueue.removeMutationBatch(p,v)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);I_(i,e,t),w_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ra(i,a)}catch(a){await Aa(a)}}function w_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function I_(r,e,t){const i=Se(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function Ql(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||Ew(r,i)}))}function Ew(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Kl(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),R_(r))}function Iy(r,e,t){for(const i of t)i instanceof _w?(r.Vu.addReference(i.key,e),SO(r,i)):i instanceof vw?(ae(tu,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||Ew(r,i.key)):be(19791,{wu:i})}function SO(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(ae(tu,"New document in limbo: "+t),r.Eu.add(i),R_(r))}function R_(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new pe(ht.fromString(e)),i=r.fu.next();r.Au.set(i,new fO(t)),r.Ru=r.Ru.insert(t,i),am(r.remoteStore,new as(Vr(eh(t.path)),i,"TargetPurposeLimboResolution",vr.ce))}}async function Ra(r,e,t){const i=Se(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{c.push(i.pu(g,e,t).then((p=>{if((p||t)&&i.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(p){a.push(p);const _=p_.Es(g.targetId,p);l.push(_)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(g,p){const _=Se(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>F.forEach(p,(S=>F.forEach(S.Ts,(I=>_.persistence.referenceDelegate.addReference(v,S.targetId,I))).next((()=>F.forEach(S.Is,(I=>_.persistence.referenceDelegate.removeReference(v,S.targetId,I)))))))))}catch(v){if(!wa(v))throw v;ae(y_,"Failed to update sequence numbers: "+v)}for(const v of p){const S=v.targetId;if(!v.fromCache){const I=_.vs.get(S),V=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(V);_.vs=_.vs.insert(S,U)}}})(i.localStore,l))}async function xO(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){ae(tu,"User change. New user:",e.toKey());const i=await JA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ge(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ra(t,i.Ns)}}function AO(r,e){const t=Se(r),i=t.Au.get(e);if(i&&i.hu)return He().add(i.key);{let a=He();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}async function wO(r,e){const t=Se(r),i=await Ey(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&Iy(t,e.targetId,a.au),a}async function IO(r,e){const t=Se(r);return tw(t.localStore,e).then((i=>Ra(t,i)))}async function RO(r,e,t,i){const a=Se(r),l=await(function(f,g){const p=Se(f),_=Se(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(v=>_.Xn(v,g).next((S=>S?p.localDocuments.getDocuments(v,S):F.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Zl(a.remoteStore):t==="acknowledged"||t==="rejected"?(I_(a,e,i||null),w_(a,e),(function(f,g){Se(Se(f).mutationQueue).nr(g)})(a.localStore,e)):be(6720,"Unknown batchState",{bu:t}),await Ra(a,l)):ae(tu,"Cannot apply mutation batch with id: "+e)}async function CO(r,e){const t=Se(r);if(om(t),C_(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await WE(t,i.toArray());t.gu=!0,await Ay(t.remoteStore,!0);for(const l of a)am(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(Ql(t,c),Gl(t.localStore,c,!0)))),Kl(t.remoteStore,c)})),await a,await WE(t,i),(function(c){const f=Se(c);f.Au.forEach(((g,p)=>{Kl(f.remoteStore,p)})),f.Vu.zr(),f.Au=new Map,f.Ru=new Rt(pe.comparator)})(t),t.gu=!1,await Ay(t.remoteStore,!1)}}async function WE(r,e,t){const i=Se(r),a=[],l=[];for(const c of e){let f;const g=i.Iu.get(c);if(g&&g.length!==0){f=await Af(i.localStore,Vr(g[0]));for(const p of g){const _=i.Tu.get(p),v=await wO(i,_);v.snapshot&&l.push(v.snapshot)}}else{const p=await ew(i.localStore,c);f=await Af(i.localStore,p),await A_(i,Sw(p),c,!1,f.resumeToken)}a.push(f)}return i.Pu.J_(l),a}function Sw(r){return sA(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function DO(r){return(function(t){return Se(Se(t).persistence).hs()})(Se(r).localStore)}async function NO(r,e,t,i){const a=Se(r);if(a.gu)return void ae(tu,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await tw(a.localStore,oA(l[0])),f=rh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",nn.EMPTY_BYTE_STRING);await Ra(a,c,f);break}case"rejected":await Gl(a.localStore,e,!0),Ql(a,e,i);break;default:be(64155,t)}}async function OO(r,e,t){const i=om(r);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){ae(tu,"Adding an already active target "+a);continue}const l=await ew(i.localStore,a),c=await Af(i.localStore,l);await A_(i,Sw(l),c.targetId,!1,c.resumeToken),am(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await Gl(i.localStore,a,!1).then((()=>{Kl(i.remoteStore,a),Ql(i,a)})).catch(Aa)}}function om(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bO.bind(null,e),e.Pu.J_=uO.bind(null,e.eventManager),e.Pu.yu=cO.bind(null,e.eventManager),e}function C_(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EO.bind(null,e),e}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=im(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return WA(this.persistence,new XA,e.initialUser,this.serializer)}Cu(e){return new m_(rm.Vi,this.serializer)}Du(e){return new aw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class MO extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){we(this.persistence.referenceDelegate instanceof xf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new qA(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new m_((i=>xf.Vi(i,t)),this.serializer)}}class VO extends Hc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await C_(this.xu.syncEngine),await Zl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return WA(this.persistence,new XA,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new qA(i,e.asyncQueue,t)}Mu(e,t){const i=new jC(t,this.persistence);return new LC(e.asyncQueue,i)}Cu(e){const t=$A(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new g_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,ow(),ef(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new aw}}class kO extends VO{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof kp&&(this.sharedClientState.syncEngine={So:RO.bind(null,t),Do:NO.bind(null,t),Co:OO.bind(null,t),hs:DO.bind(null,t),bo:IO.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await CO(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=ow();if(!kp.v(t))throw new ge(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=$A(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kp(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xO.bind(null,this.syncEngine),await Ay(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lO})()}createDatastore(e){const t=im(e.databaseInfo.databaseId),i=HN(e.databaseInfo);return QN(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,f){return new XN(i,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>XE(this.syncEngine,t,0)),(function(){return qE.v()?new qE:new UN})())}createSyncEngine(e,t){return(function(a,l,c,f,g,p,_){const v=new mO(a,l,c,f,g,p);return _&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Se(t);ae(So,"RemoteStore shutting down."),i.Ea.add(5),await sh(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Cf.provider={build:()=>new Cf};class xw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ea="FirestoreClient";class PO{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=Cn.UNAUTHENTICATED,this.clientId=Gy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ae(Ea,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ae(Ea,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=S_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Lp(r,e){r.asyncQueue.verifyOperationInProgress(),ae(Ea,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await JA(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function JE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await LO(r);ae(Ea,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>KE(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>KE(e.remoteStore,a))),r._onlineComponents=e}async function LO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae(Ea,"Using user provided OfflineComponentProvider");try{await Lp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;_a("Error using user provided cache. Falling back to memory cache: "+t),await Lp(r,new Hc)}}else ae(Ea,"Using default OfflineComponentProvider"),await Lp(r,new MO(void 0));return r._offlineComponents}async function Aw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae(Ea,"Using user provided OnlineComponentProvider"),await JE(r,r._uninitializedComponentsProvider._online)):(ae(Ea,"Using default OnlineComponentProvider"),await JE(r,new Cf))),r._onlineComponents}function jO(r){return Aw(r).then((e=>e.syncEngine))}async function Ry(r){const e=await Aw(r),t=e.eventManager;return t.onListen=gO.bind(null,e.syncEngine),t.onUnlisten=yO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_O.bind(null,e.syncEngine),t}function UO(r,e,t,i){const a=new xw(i),l=new yw(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>gw(await Ry(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>pw(await Ry(r),l)))}}function zO(r,e,t={}){const i=new us;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,p){const _=new xw({next:S=>{_.Nu(),c.enqueueAndForget((()=>pw(l,v)));const I=S.docs.has(f);!I&&S.fromCache?p.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&g&&g.source==="server"?p.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),v=new yw(eh(f.path),_,{includeMetadataChanges:!0,Ka:!0});return gw(l,v)})(await Ry(r),r.asyncQueue,e,t,i))),i.promise}function BO(r,e){const t=new us;return r.asyncQueue.enqueueAndForget((async()=>vO(await jO(r),e,t))),t.promise}function ww(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const FO="ComponentProvider",ZE=new Map;function HO(r,e,t,i,a){return new dD(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,ww(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}const Iw="firestore.googleapis.com",eS=!0;class tS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iw,this.ssl=eS}else this.host=e.host,this.ssl=e.ssl??eS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gN)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ww(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new xC;switch(i.type){case"firstParty":return new RC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ZE.get(t);i&&(ae(FO,"Removing Datastore"),ZE.delete(t),i.terminate())})(this),Promise.resolve()}}function qO(r,e,t,i={}){r=Mr(r,lm);const a=$l(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;a&&(rx(`https://${f}`),ix("Firestore",!0)),l.host!==Iw&&l.host!==f&&_a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:a,emulatorOptions:i};if(!go(g,c)&&(r._setSettings(g),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=Cn.MOCK_USER;else{p=WR(i.mockUserToken,r._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Cn(v)}r._authCredentials=new AC(new Ex(p,_))}}class um{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new um(this.firestore,e,this._query)}}class tn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}toJSON(){return{type:tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Wc(t,tn._jsonSchema))return new tn(e,i||null,new pe(ht.fromString(t.referencePath)))}}tn._jsonSchemaVersion="firestore/documentReference/1.0",tn._jsonSchema={type:gn("string",tn._jsonSchemaVersion),referencePath:gn("string")};class pa extends um{constructor(e,t,i){super(e,t,eh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new pe(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function Rw(r,e,...t){if(r=Hn(r),xx("collection","path",e),r instanceof lm){const i=ht.fromString(e,...t);return GT(i),new pa(r,null,i)}{if(!(r instanceof tn||r instanceof pa))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ht.fromString(e,...t));return GT(i),new pa(r.firestore,null,i)}}function gi(r,e,...t){if(r=Hn(r),arguments.length===1&&(e=Gy.newId()),xx("doc","path",e),r instanceof lm){const i=ht.fromString(e,...t);return qT(i),new tn(r,null,new pe(i))}{if(!(r instanceof tn||r instanceof pa))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ht.fromString(e,...t));return qT(i),new tn(r.firestore,r instanceof pa?r.converter:null,new pe(i))}}const nS="AsyncQueue";class rS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lw(this,"async_queue_retry"),this._c=()=>{const i=ef();i&&ae(nS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new us;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wa(e))throw e;ae(nS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,en("INTERNAL UNHANDLED ERROR: ",iS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=E_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&be(47125,{Pc:iS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function iS(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class fs extends lm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new rS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rS(e),this._firestoreClient=void 0,await e}}}function GO(r,e){const t=typeof r=="object"?r:dx(),i=typeof r=="string"?r:gf,a=Hy(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=$R("firestore");l&&qO(a,...l)}return a}function cm(r){if(r._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Cw(r),r._firestoreClient}function Cw(r){const e=r._freezeSettings(),t=HO(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new PO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(r._componentsProvider))}async function KO(r){_a("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();YO(r,Cf.provider,{build:t=>new kO(t,e.cacheSizeBytes)})}function YO(r,e,t){if((r=Mr(r,fs))._firestoreClient||r._terminated)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ge(ne.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},Cw(r)}class Xr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xr(nn.fromBase64String(e))}catch(t){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xr(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,Xr._jsonSchema))return Xr.fromBase64String(e.bytes)}}Xr._jsonSchemaVersion="firestore/bytes/1.0",Xr._jsonSchema={type:gn("string",Xr._jsonSchemaVersion),bytes:gn("string")};class hm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class D_{constructor(e){this._methodName=e}}class ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:gn("string",ki._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};class hi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hi(e.vectorValues);throw new ge(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:gn("string",hi._jsonSchemaVersion),vectorValues:gn("object")};const QO=/^__.*__$/;class $O{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jl(e,this.data,t,this.fieldTransforms)}}class Dw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{dataSource:r})}}class N_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new N_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Df(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Nw(this.dataSource)&&QO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class XO{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||im(e)}createContext(e,t,i,a=!1){return new N_({dataSource:e,methodName:t,targetDoc:i,path:Gt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function O_(r){const e=r._freezeSettings(),t=im(r._databaseId);return new XO(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Ow(r,e,t,i,a,l={}){const c=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);M_("Data must be an object, but it was:",c,i);const f=kw(i,c);let g,p;if(l.merge)g=new br(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const v of l.mergeFields){const S=qc(e,v,t);if(!c.contains(S))throw new ge(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);jw(_,S)||_.push(S)}g=new br(_),p=c.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,p=c.fieldTransforms;return new $O(new Xn(f),g,p)}class dm extends D_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dm}}function Mw(r,e,t,i){const a=r.createContext(1,e,t);M_("Data must be an object, but it was:",a,i);const l=[],c=Xn.empty();Ia(i,((g,p)=>{const _=Lw(e,g,t);p=Hn(p);const v=a.childContextForFieldPath(_);if(p instanceof dm)l.push(_);else{const S=fm(p,v);S!=null&&(l.push(_),c.set(_,S))}}));const f=new br(l);return new Dw(c,f,a.fieldTransforms)}function Vw(r,e,t,i,a,l){const c=r.createContext(1,e,t),f=[qc(e,i,t)],g=[a];if(l.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(qc(e,l[S])),g.push(l[S+1]);const p=[],_=Xn.empty();for(let S=f.length-1;S>=0;--S)if(!jw(p,f[S])){const I=f[S];let V=g[S];V=Hn(V);const U=c.childContextForFieldPath(I);if(V instanceof dm)p.push(I);else{const q=fm(V,U);q!=null&&(p.push(I),_.set(I,q))}}const v=new br(p);return new Dw(_,v,c.fieldTransforms)}function fm(r,e){if(Pw(r=Hn(r)))return M_("Unsupported field value:",e,r),kw(r,e);if(r instanceof D_)return(function(i,a){if(!Nw(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const f of i){let g=fm(f,a.childContextForArray(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=Hn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return OD(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:ql(a.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ql(a.serializer,l)}}if(i instanceof ki)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xr)return{bytesValue:SA(a.serializer,i._byteString)};if(i instanceof tn){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:c_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof hi)return(function(c,f){const g=c instanceof hi?c.toArray():c;return{mapValue:{fields:{[e_]:{stringValue:t_},[jl]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return s_(f.serializer,_)}))}}}}}})(i,a);if(VA(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Ky(i)}`)})(r,e)}function kw(r,e){const t={};return Fx(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(r,((i,a)=>{const l=fm(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Pw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof ki||r instanceof Xr||r instanceof tn||r instanceof D_||r instanceof hi||VA(r))}function M_(r,e,t){if(!Pw(t)||!Ax(t)){const i=Ky(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function qc(r,e,t){if((e=Hn(e))instanceof hm)return e._internalPath;if(typeof e=="string")return Lw(r,e);throw Df("Field path arguments must be of type string or ",r,!1,void 0,t)}const WO=new RegExp("[~\\*/\\[\\]]");function Lw(r,e,t){if(e.search(WO)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new hm(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Df(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${i}`),c&&(g+=` in document ${a}`),g+=")"),new ge(ne.INVALID_ARGUMENT,f+r+g)}function jw(r,e){return r.some((t=>t.isEqual(e)))}class JO{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ia(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[jl].arrayValue?.values?.map((i=>jt(i.doubleValue)));return new hi(t)}convertGeoPoint(e){return new ki(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$f(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=hs(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ht.fromString(e);we(MA(i),9688,{name:e});const a=new _o(i.get(1),i.get(3)),l=new pe(i.popFirst(5));return a.isEqual(t)||en(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Uw extends JO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}const sS="@firebase/firestore",aS="4.11.0";function oS(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class zw{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(qc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ZO extends zw{data(){return super.data()}}function eM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Bw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mo extends zw{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(qc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=mo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",mo._jsonSchema={type:gn("string",mo._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class tf extends mo{data(e={}){return super.data(e)}}class wl{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new pc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new tf(this._firestore,this._userDataWriter,i.key,i,new pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const g=new tf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new pc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new tf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new pc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:tM(f.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:r})}}wl._jsonSchemaVersion="firestore/querySnapshot/1.0",wl._jsonSchema={type:gn("string",wl._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class nM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=O_(e)}set(e,t,i){this._verifyNotCommitted();const a=jp(e,this._firestore),l=Bw(a.converter,t,i),c=Ow(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Nn.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=jp(e,this._firestore);let c;return c=typeof(t=Hn(t))=="string"||t instanceof hm?Vw(this._dataReader,"WriteBatch.update",l._key,t,i,a):Mw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jp(e,this._firestore);return this._mutations=this._mutations.concat(new nh(t._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jp(r,e){if((r=Hn(r)).firestore!==e)throw new ge(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function rM(r){r=Mr(r,tn);const e=Mr(r.firestore,fs),t=cm(e);return zO(t,r._key).then((i=>Hw(e,r,i)))}function V_(r,e,t){r=Mr(r,tn);const i=Mr(r.firestore,fs),a=Bw(r.converter,e,t),l=O_(i);return gm(i,[Ow(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Nn.none())])}function mm(r,e,t,...i){r=Mr(r,tn);const a=Mr(r.firestore,fs),l=O_(a);let c;return c=typeof(e=Hn(e))=="string"||e instanceof hm?Vw(l,"updateDoc",r._key,e,t,i):Mw(l,"updateDoc",r._key,e),gm(a,[c.toMutation(r._key,Nn.exists(!0))])}function iM(r){return gm(Mr(r.firestore,fs),[new nh(r._key,Nn.none())])}function Fw(r,...e){r=Hn(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||oS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(oS(e[i])){const p=e[i];e[i]=p.next?.bind(p),e[i+1]=p.error?.bind(p),e[i+2]=p.complete?.bind(p)}let l,c,f;if(r instanceof tn)c=Mr(r.firestore,fs),f=eh(r._key.path),l={next:p=>{e[i]&&e[i](Hw(c,r,p))},error:e[i+1],complete:e[i+2]};else{const p=Mr(r,um);c=Mr(p.firestore,fs),f=p._query;const _=new Uw(c);l={next:v=>{e[i]&&e[i](new wl(c,_,p,v))},error:e[i+1],complete:e[i+2]},eM(r._query)}const g=cm(c);return UO(g,f,a,l)}function gm(r,e){const t=cm(r);return BO(t,e)}function Hw(r,e,t){const i=t.docs.get(e._key),a=new Uw(r);return new mo(r,a,e._key,i,new pc(t.hasPendingWrites,t.fromCache),e.converter)}function k_(r){return r=Mr(r,fs),cm(r),new nM(r,(e=>gm(r,e)))}(function(e,t=!0){SC(Xl),Nl(new po("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new fs(new wC(i.getProvider("auth-internal")),new CC(c,i.getProvider("app-check-internal")),fD(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),fa(sS,aS,e),fa(sS,aS,"esm2020")})();function qw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sM=qw,Gw=new $c("auth","Firebase",qw());const Nf=new By("@firebase/auth");function aM(r,...e){Nf.logLevel<=Je.WARN&&Nf.warn(`Auth (${Xl}): ${r}`,...e)}function nf(r,...e){Nf.logLevel<=Je.ERROR&&Nf.error(`Auth (${Xl}): ${r}`,...e)}function ms(r,...e){throw P_(r,...e)}function Pi(r,...e){return P_(r,...e)}function Kw(r,e,t){const i={...sM(),[e]:t};return new $c("auth","Firebase",i).create(e,{appName:r.name})}function ya(r){return Kw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function P_(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Gw.create(r,...e)}function Oe(r,e,...t){if(!r)throw P_(e,...t)}function os(r){const e="INTERNAL ASSERTION FAILED: "+r;throw nf(e),new Error(e)}function gs(r,e){r||os(e)}function Cy(){return typeof self<"u"&&self.location?.href||""}function oM(){return lS()==="http:"||lS()==="https:"}function lS(){return typeof self<"u"&&self.location?.protocol||null}function lM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oM()||n2()||"connection"in navigator)?navigator.onLine:!0}function uM(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class ah{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=e2()||r2()}get(){return lM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function L_(r,e){gs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Yw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const hM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dM=new ah(3e4,6e4);function pm(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function nu(r,e,t,i,a={}){return Qw(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Xc({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...l};return t2()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&$l(r.emulatorConfig.host)&&(p.credentials="include"),Yw.fetch()(await Xw(r,r.config.apiHost,t,f),p)})}async function Qw(r,e,t){r._canInitEmulator=!1;const i={...cM,...e};try{const a=new fM(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw zd(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[g,p]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zd(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw zd(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw zd(r,"user-disabled",c);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Kw(r,_,p);ms(r,_)}}catch(a){if(a instanceof ys)throw a;ms(r,"network-request-failed",{message:String(a)})}}async function $w(r,e,t,i,a={}){const l=await nu(r,e,t,i,a);return"mfaPendingCredential"in l&&ms(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Xw(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?L_(r.config,a):`${r.config.apiScheme}://${a}`;return hM.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class fM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Pi(this.auth,"network-request-failed")),dM.get())})}}function zd(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Pi(r,e,i);return a.customData._tokenResponse=t,a}async function mM(r,e){return nu(r,"POST","/v1/accounts:delete",e)}async function Of(r,e){return nu(r,"POST","/v1/accounts:lookup",e)}function Rc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gM(r,e=!1){const t=Hn(r),i=await t.getIdToken(e),a=j_(i);Oe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Rc(Up(a.auth_time)),issuedAtTime:Rc(Up(a.iat)),expirationTime:Rc(Up(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Up(r){return Number(r)*1e3}function j_(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const a=JS(t);return a?JSON.parse(a):(nf("Failed to decode base64 JWT payload"),null)}catch(a){return nf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function uS(r){const e=j_(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ys&&pM(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function pM({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class yM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Dy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rc(this.lastLoginAt),this.creationTime=Rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Mf(r){const e=r.auth,t=await r.getIdToken(),i=await Gc(r,Of(e,{idToken:t}));Oe(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?Ww(a.providerUserInfo):[],c=vM(r.providerData,l),f=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!c?.length,p=f?g:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Dy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(r,_)}async function _M(r){const e=Hn(r);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vM(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Ww(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function bM(r,e){const t=await Qw(r,{},async()=>{const i=Xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await Xw(r,a,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return r.emulatorConfig&&$l(r.emulatorConfig.host)&&(g.credentials="include"),Yw.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TM(r,e){return nu(r,"POST","/v2/accounts:revokeToken",pm(r,e))}class Il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=uS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await bM(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Il;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Oe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Oe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Il,this.toJSON())}_performRefresh(){return os("not implemented")}}function ra(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new yM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Dy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gM(this,e)}reload(){return _M(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(ya(this.auth));const e=await this.getIdToken();return await Gc(this,mM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:v,emailVerified:S,isAnonymous:I,providerData:V,stsTokenManager:U}=t;Oe(v&&U,e,"internal-error");const q=Il.fromJSON(this.name,U);Oe(typeof v=="string",e,"internal-error"),ra(i,e.name),ra(a,e.name),Oe(typeof S=="boolean",e,"internal-error"),Oe(typeof I=="boolean",e,"internal-error"),ra(l,e.name),ra(c,e.name),ra(f,e.name),ra(g,e.name),ra(p,e.name),ra(_,e.name);const te=new ci({uid:v,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:I,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:q,createdAt:p,lastLoginAt:_});return V&&Array.isArray(V)&&(te.providerData=V.map(X=>({...X}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,t,i=!1){const a=new Il;a.updateFromServerResponse(t);const l=new ci({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Mf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Ww(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new Il;f.updateFromIdToken(i);const g=new ci({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Dy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,p),g}}const cS=new Map;function ls(r){gs(r instanceof Function,"Expected a class definition");let e=cS.get(r);return e?(gs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,cS.set(r,e),e)}class Jw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jw.type="NONE";const hS=Jw;function rf(r,e,t){return`firebase:${r}:${e}:${t}`}class Rl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=rf(this.userKey,a.apiKey,l),this.fullPersistenceKey=rf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Of(this.auth,{idToken:e}).catch(()=>{});return t?ci._fromGetAccountInfoResponse(this.auth,t,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Rl(ls(hS),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ls(hS);const c=rf(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const _=await p._get(c);if(_){let v;if(typeof _=="string"){const S=await Of(e,{idToken:_}).catch(()=>{});if(!S)break;v=await ci._fromGetAccountInfoResponse(e,S,_)}else v=ci._fromJSON(e,_);p!==l&&(f=v),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Rl(l,e,i):(l=g[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Rl(l,e,i))}}function dS(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i1(e))return"Blackberry";if(s1(e))return"Webos";if(e1(e))return"Safari";if((e.includes("chrome/")||t1(e))&&!e.includes("edge/"))return"Chrome";if(r1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function Zw(r=En()){return/firefox\//i.test(r)}function e1(r=En()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t1(r=En()){return/crios\//i.test(r)}function n1(r=En()){return/iemobile/i.test(r)}function r1(r=En()){return/android/i.test(r)}function i1(r=En()){return/blackberry/i.test(r)}function s1(r=En()){return/webos/i.test(r)}function U_(r=En()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function EM(r=En()){return U_(r)&&!!window.navigator?.standalone}function SM(){return i2()&&document.documentMode===10}function a1(r=En()){return U_(r)||r1(r)||s1(r)||i1(r)||/windows phone/i.test(r)||n1(r)}function o1(r,e=[]){let t;switch(r){case"Browser":t=dS(En());break;case"Worker":t=`${dS(En())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xl}/${i}`}class xM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const g=e(l);c(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function AM(r,e={}){return nu(r,"GET","/v2/passwordPolicy",pm(r,e))}const wM=6;class IM{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??wM,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class RM{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fS(this),this.idTokenSubscription=new fS(this),this.beforeStateQueue=new xM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Of(this,{idToken:e}),i=await ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ui(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ui(this.app))return Promise.reject(ya(this));const t=e?Hn(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(ya(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ui(this.app)?Promise.reject(ya(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AM(this),t=new IM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await TM(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ls(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aM(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ym(r){return Hn(r)}class fS{constructor(e){this.auth=e,this.observer=null,this.addObserver=c2(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let z_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CM(r){z_=r}function DM(r){return z_.loadJS(r)}function NM(){return z_.gapiScript}function OM(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function MM(r,e){const t=Hy(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(go(l,e??{}))return a;ms(a,"already-initialized")}return t.initialize({options:e})}function VM(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ls);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function kM(r,e,t){const i=ym(r);Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=l1(e),{host:c,port:f}=PM(e),g=f===null?"":`:${f}`,p={url:`${l}//${c}${g}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Oe(go(p,i.config.emulator)&&go(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,$l(c)?(rx(`${l}//${c}${g}`),ix("Auth",!0)):LM()}function l1(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function PM(r){const e=l1(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:mS(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:mS(c)}}}function mS(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function LM(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class u1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,t){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function Cl(r,e){return $w(r,"POST","/v1/accounts:signInWithIdp",pm(r,e))}const jM="http://localhost";class xo extends u1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new xo(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Cl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Cl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cl(e,t)}buildRequest(){const e={requestUri:jM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}}class c1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class oh extends c1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class aa extends oh{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aa.credential(e.oauthAccessToken)}catch{return null}}}aa.FACEBOOK_SIGN_IN_METHOD="facebook.com";aa.PROVIDER_ID="facebook.com";class oa extends oh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return oa.credential(t,i)}catch{return null}}}oa.GOOGLE_SIGN_IN_METHOD="google.com";oa.PROVIDER_ID="google.com";class la extends oh{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.GITHUB_SIGN_IN_METHOD="github.com";la.PROVIDER_ID="github.com";class ua extends oh{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ua.credential(t,i)}catch{return null}}}ua.TWITTER_SIGN_IN_METHOD="twitter.com";ua.PROVIDER_ID="twitter.com";async function UM(r,e){return $w(r,"POST","/v1/accounts:signUp",pm(r,e))}class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await ci._fromIdTokenResponse(e,i,a),c=gS(i);return new Sa({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=gS(i);return new Sa({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function gS(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function zM(r){if(ui(r.app))return Promise.reject(ya(r));const e=ym(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Sa({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await UM(e,{returnSecureToken:!0}),i=await Sa._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}class Vf extends ys{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Vf(e,t,i,a)}}function h1(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vf._fromErrorAndOperation(r,l,e,i):l})}async function BM(r,e,t=!1){const i=await Gc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Sa._forOperation(r,"link",i)}async function FM(r,e,t=!1){const{auth:i}=r;if(ui(i.app))return Promise.reject(ya(i));const a="reauthenticate";try{const l=await Gc(r,h1(i,a,e,r),t);Oe(l.idToken,i,"internal-error");const c=j_(l.idToken);Oe(c,i,"internal-error");const{sub:f}=c;return Oe(r.uid===f,i,"user-mismatch"),Sa._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ms(i,"user-mismatch"),l}}async function HM(r,e,t=!1){if(ui(r.app))return Promise.reject(ya(r));const i="signIn",a=await h1(r,i,e),l=await Sa._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}function qM(r,e,t,i){return Hn(r).onIdTokenChanged(e,t,i)}function GM(r,e,t){return Hn(r).beforeAuthStateChanged(e,t)}const kf="__sak";class d1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const KM=1e3,YM=10;class f1 extends d1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,g)=>{this.notifyListeners(c,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);SM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,YM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},KM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}f1.type="LOCAL";const QM=f1;class m1 extends d1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}m1.type="SESSION";const g1=m1;function $M(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class _m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new _m(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),g=await $M(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_m.receivers=[];function B_(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class XM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,g)=>{const p=B_("",20);a.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const S=v;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Li(){return window}function WM(r){Li().location.href=r}function p1(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function JM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZM(){return navigator?.serviceWorker?.controller||null}function e4(){return p1()?self:null}const y1="firebaseLocalStorageDb",t4=1,Pf="firebaseLocalStorage",_1="fbase_key";class lh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vm(r,e){return r.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function n4(){const r=indexedDB.deleteDatabase(y1);return new lh(r).toPromise()}function Ny(){const r=indexedDB.open(y1,t4);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Pf,{keyPath:_1})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Pf)?e(i):(i.close(),await n4(),e(await Ny()))})})}async function pS(r,e,t){const i=vm(r,!0).put({[_1]:e,value:t});return new lh(i).toPromise()}async function r4(r,e){const t=vm(r,!1).get(e),i=await new lh(t).toPromise();return i===void 0?null:i.value}function yS(r,e){const t=vm(r,!0).delete(e);return new lh(t).toPromise()}const i4=800,s4=3;class v1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ny(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>s4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return p1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_m._getInstance(e4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await JM(),!this.activeServiceWorker)return;this.sender=new XM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ny();return await pS(e,kf,"1"),await yS(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>pS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>r4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=vm(a,!1).getAll();return new lh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v1.type="LOCAL";const a4=v1;new ah(3e4,6e4);function o4(r,e){return e?ls(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class F_ extends u1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function l4(r){return HM(r.auth,new F_(r),r.bypassAuthState)}function u4(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),FM(t,new F_(r),r.bypassAuthState)}async function c4(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),BM(t,new F_(r),r.bypassAuthState)}class b1{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l4;case"linkViaPopup":case"linkViaRedirect":return c4;case"reauthViaPopup":case"reauthViaRedirect":return u4;default:ms(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const h4=new ah(2e3,1e4);class Sl extends b1{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=B_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h4.get())};e()}}Sl.currentPopupAction=null;const d4="pendingRedirect",sf=new Map;class f4 extends b1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=sf.get(this.auth._key());if(!e){try{const i=await m4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}sf.set(this.auth._key(),e)}return this.bypassAuthState||sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m4(r,e){const t=y4(e),i=p4(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function g4(r,e){sf.set(r._key(),e)}function p4(r){return ls(r._redirectPersistence)}function y4(r){return rf(d4,r.config.apiKey,r.name)}async function _4(r,e,t=!1){if(ui(r.app))return Promise.reject(ya(r));const i=ym(r),a=o4(i,e),c=await new f4(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const v4=600*1e3;class b4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!T1(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Pi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v4&&this.cachedEventUids.clear(),this.cachedEventUids.has(_S(e))}saveEventToCache(e){this.cachedEventUids.add(_S(e)),this.lastProcessedEventTime=Date.now()}}function _S(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function T1({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function T4(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T1(r);default:return!1}}async function E4(r,e={}){return nu(r,"GET","/v1/projects",e)}const S4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,x4=/^https?/;async function A4(r){if(r.config.emulator)return;const{authorizedDomains:e}=await E4(r);for(const t of e)try{if(w4(t))return}catch{}ms(r,"unauthorized-domain")}function w4(r){const e=Cy(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!x4.test(t))return!1;if(S4.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const I4=new ah(3e4,6e4);function vS(){const r=Li().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function R4(r){return new Promise((e,t)=>{function i(){vS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vS(),t(Pi(r,"network-request-failed"))},timeout:I4.get()})}if(Li().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Li().gapi?.load)i();else{const a=OM("iframefcb");return Li()[a]=()=>{gapi.load?i():t(Pi(r,"network-request-failed"))},DM(`${NM()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw af=null,e})}let af=null;function C4(r){return af=af||R4(r),af}const D4=new ah(5e3,15e3),N4="__/auth/iframe",O4="emulator/auth/iframe",M4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k4(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?L_(e,O4):`https://${r.config.authDomain}/${N4}`,i={apiKey:e.apiKey,appName:r.name,v:Xl},a=V4.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Xc(i).slice(1)}`}async function P4(r){const e=await C4(r),t=Li().gapi;return Oe(t,r,"internal-error"),e.open({where:document.body,url:k4(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M4,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Pi(r,"network-request-failed"),f=Li().setTimeout(()=>{l(c)},D4.get());function g(){Li().clearTimeout(f),a(i)}i.ping(g).then(g,()=>{l(c)})}))}const L4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j4=500,U4=600,z4="_blank",B4="http://localhost";class bS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F4(r,e,t,i=j4,a=U4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...L4,width:i.toString(),height:a.toString(),top:l,left:c},p=En().toLowerCase();t&&(f=t1(p)?z4:t),Zw(p)&&(e=e||B4,g.scrollbars="yes");const _=Object.entries(g).reduce((S,[I,V])=>`${S}${I}=${V},`,"");if(EM(p)&&f!=="_self")return H4(e||"",f),new bS(null);const v=window.open(e||"",f,_);Oe(v,r,"popup-blocked");try{v.focus()}catch{}return new bS(v)}function H4(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const q4="__/auth/handler",G4="emulator/auth/handler",K4=encodeURIComponent("fac");async function TS(r,e,t,i,a,l){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Xl,eventId:a};if(e instanceof c1){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",u2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(e instanceof oh){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await r._getAppCheckToken(),p=g?`#${K4}=${encodeURIComponent(g)}`:"";return`${Y4(r)}?${Xc(f).slice(1)}${p}`}function Y4({config:r}){return r.emulator?L_(r,G4):`https://${r.authDomain}/${q4}`}const zp="webStorageSupport";class Q4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g1,this._completeRedirectFn=_4,this._overrideRedirectResult=g4}async _openPopup(e,t,i,a){gs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await TS(e,t,i,Cy(),a);return F4(e,l,B_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await TS(e,t,i,Cy(),a);return WM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(gs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await P4(e),i=new b4(e);return t.register("authEvent",a=>(Oe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zp,{type:zp},a=>{const l=a?.[0]?.[zp];l!==void 0&&t(!!l),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return a1()||e1()||U_()}}const $4=Q4;var ES="@firebase/auth",SS="1.12.0";class X4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function W4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J4(r){Nl(new po("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Oe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o1(r)},p=new RM(i,a,l,g);return VM(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Nl(new po("auth-internal",e=>{const t=ym(e.getProvider("auth").getImmediate());return(i=>new X4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fa(ES,SS,W4(r)),fa(ES,SS,"esm2020")}const Z4=300,eV=nx("authIdTokenMaxAge")||Z4;let xS=null;const tV=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>eV)return;const a=t?.token;xS!==a&&(xS=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function nV(r=dx()){const e=Hy(r,"auth");if(e.isInitialized())return e.getImmediate();const t=MM(r,{popupRedirectResolver:$4,persistence:[a4,QM,g1]}),i=nx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=tV(l.toString());GM(t,c,()=>c(t.currentUser)),qM(t,f=>c(f))}}const a=ex("auth");return a&&kM(t,`http://${a}`),t}function rV(){return document.getElementsByTagName("head")?.[0]??document}CM({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Pi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",rV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J4("Browser");const iV={apiKey:"AIzaSyDGvL7gs3AMDRV3qxnYfo9msTBUS5rXmkU",authDomain:"weekly-task-manager-76f3f.firebaseapp.com",projectId:"weekly-task-manager-76f3f",storageBucket:"weekly-task-manager-76f3f.firebasestorage.app",messagingSenderId:"795879343853",appId:"1:795879343853:web:e5d538a14446d7502daee4"},E1=hx(iV),qn=GO(E1),sV=nV(E1);KO(qn).catch(r=>{r.code==="failed-precondition"?console.warn("Firestore persistence: Multiple tabs open"):r.code==="unimplemented"&&console.warn("Firestore persistence: Browser not supported")});async function aV(){try{await zM(sV)}catch(r){console.error("Anonymous auth failed:",r)}}function oV(r){const e=Rw(qn,"tasks");return Fw(e,t=>{const i=t.docs.map(l=>({...l.data(),id:l.id})),a={fromCache:t.metadata.fromCache,hasPendingWrites:t.metadata.hasPendingWrites};r(i,a)})}function lV(r){const e=Rw(qn,"weekSnapshots");return Fw(e,t=>{const i={};t.docs.forEach(a=>{i[a.id]=a.data()}),r(i)})}async function uV(r){const e=gi(qn,"tasks",r.id);await V_(e,{...r,status:"active"})}async function cV(r,e){const t=gi(qn,"tasks",r);await mm(t,{...e,updatedAt:new Date().toISOString()})}async function hV(r){const e=gi(qn,"tasks",r);await mm(e,{status:"deleted",deletedAt:new Date().toISOString()})}async function dV(r){const e=gi(qn,"tasks",r);await mm(e,{status:"archived",archivedAt:new Date().toISOString()})}async function AS(r){const e=gi(qn,"tasks",r);await mm(e,{status:"active",deletedAt:null,archivedAt:null,updatedAt:new Date().toISOString()})}async function fV(r){const e=gi(qn,"tasks",r);await iM(e)}async function mV(r){const e=k_(qn);r.forEach(t=>{const i=gi(qn,"tasks",t);e.delete(i)}),await e.commit()}async function Oy(r,e,t){const i=gi(qn,"weekSnapshots",r);await V_(i,{...e,savedBy:t||"anonymous",savedAt:new Date().toISOString()})}async function wS(r){const e=k_(qn);r.forEach(({id:t,data:i})=>{const a=gi(qn,"tasks",t);e.update(a,{...i,updatedAt:new Date().toISOString()})}),await e.commit()}async function S1(r){const e=k_(qn);r.forEach(t=>{const i=gi(qn,"tasks",t.id);e.set(i,t)}),await e.commit()}async function gV(){try{const r=gi(qn,"metadata","migration"),e=await rM(r);if(e.exists())return console.log("Migration already completed:",e.data()),!1;const t=localStorage.getItem("wtm-tasks"),i=localStorage.getItem("wtm-deleted"),a=localStorage.getItem("wtm-archived"),l=localStorage.getItem("wtm-snapshots");if(!t&&!i&&!a&&!l)return console.log("No localStorage data found, skipping migration"),!1;const c=t?JSON.parse(t):[],f=i?JSON.parse(i):[],g=a?JSON.parse(a):[],p=l?JSON.parse(l):{},_=[...c.map(S=>({...S,status:"active"})),...f.map(S=>({...S,status:"deleted"})),...g.map(S=>({...S,status:"archived"}))];if(_.length>0)for(let I=0;I<_.length;I+=500){const V=_.slice(I,I+500);await S1(V)}const v=Object.keys(p);for(const S of v)await Oy(S,p[S],"migration");return await V_(r,{migratedAt:new Date().toISOString(),taskCount:_.length,snapshotCount:v.length,activeTasks:c.length,deletedTasks:f.length,archivedTasks:g.length}),console.log(`Migration complete: ${_.length} tasks, ${v.length} snapshots`),!0}catch(r){throw console.error("Migration failed:",r),r}}const x1=z.createContext(null);function pV({children:r}){const[e,t]=z.useState([]),[i,a]=z.useState({}),[l,c]=z.useState(!0),f=z.useMemo(()=>e.filter(w=>w.status==="active"),[e]),g=z.useMemo(()=>e.filter(w=>w.status==="deleted"),[e]),p=z.useMemo(()=>e.filter(w=>w.status==="archived"),[e]);z.useEffect(()=>{let w,O;async function N(){await aV(),await gV(),w=oV(k=>{t(k),c(!1)}),O=lV(k=>{a(k)})}return N(),()=>{w?.(),O?.()}},[]);const _=z.useCallback(async w=>{const O=new Date().toISOString(),k=f.filter(De=>De.memberId===w.memberId).reduce((De,he)=>Math.max(De,he.displayOrder||0),0),D={id:BR(),...w,progress:w.progress||0,displayOrder:k+1,weeklyHistory:{},status:"active",createdAt:O,updatedAt:O};return await uV(D),D},[f]),v=z.useCallback(async(w,O)=>{await cV(w,O)},[]),S=z.useCallback(async w=>{await hV(w)},[]),I=z.useCallback(async w=>{await dV(w)},[]),V=z.useCallback(async w=>{await AS(w)},[]),U=z.useCallback(async w=>{await AS(w)},[]),q=z.useCallback(async w=>{await fV(w)},[]),te=z.useCallback(async()=>{const w=g.map(O=>O.id);await mV(w)},[g]),X=z.useCallback(async w=>{const O=w||CT(),N={};f.forEach(D=>{N[D.id]={progress:D.progress,done:D.done,notDone:D.notDone,notDoneReason:D.notDoneReason,issues:D.issues,consultation:D.consultation}}),await Oy(O,N);const k=f.map(D=>({id:D.id,data:{weeklyHistory:{...D.weeklyHistory,[O]:{progress:D.progress}}}}));k.length>0&&await wS(k)},[f]),re=z.useCallback(w=>{const O=CT(),N=w.weeklyHistory||{},k=Object.keys(N).sort(),D=k.indexOf(O);if(D<=0){const he=k.filter(le=>le<O);if(he.length===0)return null;const Q=he[he.length-1];return w.progress-(N[Q]?.progress||0)}const De=k[D-1];return w.progress-(N[De]?.progress||0)},[]),ue=z.useCallback(async w=>{const O=w.map((N,k)=>({id:N,data:{displayOrder:k+1}}));await wS(O)},[]),fe=z.useCallback(w=>f.filter(N=>N.memberId===w).sort((N,k)=>{const D=N.displayOrder??new Date(N.createdAt).getTime(),De=k.displayOrder??new Date(k.createdAt).getTime();return D-De}),[f]),ce=z.useCallback(w=>f.filter(O=>O.category===w),[f]),C=z.useCallback(async w=>{const O=new Date().toISOString(),N=[];if(w.tasks&&N.push(...w.tasks.map(k=>({...k,status:"active",updatedAt:k.updatedAt||O,createdAt:k.createdAt||O}))),w.deletedTasks&&N.push(...w.deletedTasks.map(k=>({...k,status:"deleted",deletedAt:k.deletedAt||O,updatedAt:k.updatedAt||O,createdAt:k.createdAt||O}))),w.archivedTasks&&N.push(...w.archivedTasks.map(k=>({...k,status:"archived",archivedAt:k.archivedAt||O,updatedAt:k.updatedAt||O,createdAt:k.createdAt||O}))),N.length>0)for(let D=0;D<N.length;D+=500)await S1(N.slice(D,D+500));if(w.weekSnapshots)for(const[k,D]of Object.entries(w.weekSnapshots))await Oy(k,D,"import")},[]),R=z.useCallback(()=>({tasks:f,weekSnapshots:i,deletedTasks:g,archivedTasks:p,exportedAt:new Date().toISOString()}),[f,i,g,p]);return b.jsx(x1.Provider,{value:{tasks:f,weekSnapshots:i,deletedTasks:g,archivedTasks:p,addTask:_,updateTask:v,deleteTask:S,archiveTask:I,restoreFromTrash:V,restoreFromArchive:U,permanentlyDelete:q,emptyTrash:te,saveWeeklySnapshot:X,getProgressDelta:re,reorderTasks:ue,getTasksByMember:fe,getTasksByCategory:ce,importData:C,exportData:R,isLoading:l},children:r})}function Ui(){const r=z.useContext(x1);if(!r)throw new Error("useTaskContext must be used within TaskProvider");return r}function yV({onExport:r,onImport:e}){const{saveWeeklySnapshot:t}=Ui();return b.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-30",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center",children:b.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),b.jsxs("div",{children:[b.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Weekly Task Manager"}),b.jsx("p",{className:"text-xs text-gray-500",children:UR()})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:()=>t(),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition cursor-pointer",children:""}),b.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:""}),b.jsxs("label",{className:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:["",b.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:e})]})]})]})})}const di=[{id:"tanaka_k",nameJa:"",nameEn:"Keisuke Tanaka",role:"manager",color:"#3b82f6",sfUserId:"0055h000005vdi3AAA",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvuN/T"},{id:"mochizuki",nameJa:"",nameEn:"Takashi Mochizuki",role:"member",color:"#8b5cf6",sfUserId:"0055h000001USjaAAG",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h0000019WFm/T"},{id:"tanaka_j",nameJa:"",nameEn:"Jun Tanaka",role:"member",color:"#06b6d4",sfUserId:"0055h000005vdTDAAY",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvuX/T"},{id:"tago",nameJa:"",nameEn:"Shoichiro Tago",role:"member",color:"#f59e0b",sfUserId:"005J20000011BmCIAU",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/729J2000000kB3i/T"},{id:"tsubosaka",nameJa:"",nameEn:"Seiko Tsubosaka",role:"member",color:"#ec4899",sfUserId:"0055h000005KHzPAAW",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000MvwO/T"},{id:"osawa",nameJa:"",nameEn:"Naoko Osawa",role:"member",color:"#10b981",sfUserId:"0055h00000BPJdVAAX",sfPhotoUrl:"https://altenergyinc.file.force.com/profilephoto/7295h000000USCE/T"}],ps=[{id:"oandm",label:"O&M",color:"#3b82f6"},{id:"power_gen",label:"",color:"#10b981"},{id:"estimate_report",label:"",color:"#f59e0b"},{id:"ai_asset",label:"AI",color:"#8b5cf6"},{id:"equipment",label:"",color:"#06b6d4"},{id:"operation",label:"",color:"#64748b"},{id:"smart_meter",label:"",color:"#ec4899"},{id:"transfer",label:"V1V2PPH",color:"#f97316"},{id:"other",label:"",color:"#94a3b8"}],uh=[{id:"project",label:"",color:"#3b82f6",icon:""},{id:"routine",label:"",color:"#10b981",icon:""}],_V=[{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""}];function H_({member:r,size:e="sm"}){const[t,i]=z.useState(!1),a={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-14 h-14 text-xl"},l=a[e]||a.sm;return r.sfPhotoUrl&&!t?b.jsx("img",{src:r.sfPhotoUrl,alt:r.nameJa,onError:()=>i(!0),className:`${l} rounded-full object-cover`}):b.jsx("div",{className:`${l} rounded-full flex items-center justify-center text-white font-bold`,style:{backgroundColor:r.color},children:r.nameJa.charAt(0)})}function vV({selectedMember:r,onSelectMember:e,showDashboard:t,onShowDashboard:i,activeView:a,onChangeView:l}){const{tasks:c,deletedTasks:f,archivedTasks:g}=Ui(),p=v=>c.filter(S=>S.memberId===v).length,_=v=>{const S=c.filter(I=>I.memberId===v);return S.length===0?0:Math.round(S.reduce((I,V)=>I+V.progress,0)/S.length)};return b.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 h-[calc(100vh-57px)] overflow-y-auto flex-shrink-0",children:b.jsxs("nav",{className:"p-3",children:[b.jsxs("button",{onClick:i,className:`w-full text-left px-3 py-2.5 rounded-lg mb-1 flex items-center gap-2 transition cursor-pointer ${a==="dashboard"?"bg-blue-50 text-blue-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),""]}),b.jsx("div",{className:"mt-4 mb-2 px-3",children:b.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:""})}),di.map(v=>b.jsxs("button",{onClick:()=>e(v.id),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${a==="member"&&r===v.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(H_,{member:v,size:"sm"}),b.jsxs("div",{children:[b.jsx("div",{className:"text-sm font-medium",children:v.nameJa}),b.jsxs("div",{className:"text-xs text-gray-400",children:[p(v.id),""]})]})]}),b.jsxs("div",{className:"text-xs text-gray-500",children:[_(v.id),"%"]})]},v.id)),b.jsx("div",{className:"mt-4 mb-2 border-t border-gray-200 pt-3 px-3",children:b.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:""})}),b.jsxs("button",{onClick:()=>l("archive"),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${a==="archive"?"bg-emerald-50 text-emerald-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),b.jsx("span",{className:"text-sm",children:""})]}),g.length>0&&b.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-1.5 py-0.5 rounded-full",children:g.length})]}),b.jsxs("button",{onClick:()=>l("trash"),className:`w-full text-left px-3 py-2.5 rounded-lg mb-0.5 flex items-center justify-between transition cursor-pointer ${a==="trash"?"bg-red-50 text-red-700 font-semibold":"text-gray-700 hover:bg-gray-50"}`,children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),b.jsx("span",{className:"text-sm",children:""})]}),f.length>0&&b.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-1.5 py-0.5 rounded-full",children:f.length})]})]})})}function Kc({progress:r,delta:e,size:t="md"}){const i=l=>l>=80?"bg-green-500":l>=50?"bg-blue-500":l>=25?"bg-yellow-500":"bg-red-400",a=t==="sm"?"h-2":t==="lg"?"h-5":"h-3";return b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:`flex-1 ${a} bg-gray-200 rounded-full overflow-hidden`,children:b.jsx("div",{className:`${a} ${i(r)} progress-bar-fill rounded-full`,style:{width:`${Math.min(100,Math.max(0,r))}%`}})}),b.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[40px] text-right",children:[r,"%"]}),e!=null&&b.jsx("span",{className:`text-xs font-medium min-w-[42px] text-right ${e>0?"text-green-600":e<0?"text-red-600":"text-gray-400"}`,children:e>0?`+${e}%`:e<0?`${e}%`:"0%"})]})}function IS({onSelectMember:r}){const{tasks:e}=Ui(),t=_=>{const v=e.filter(X=>X.memberId===_),S=v.length,I=S>0?Math.round(v.reduce((X,re)=>X+re.progress,0)/S):0,V=v.filter(X=>X.progress>=100).length,U=v.filter(X=>X.issues).length,q=v.filter(X=>X.consultation).length,te=v.filter(X=>X.dueDate?new Date(X.dueDate)<new Date&&X.progress<100:!1).length;return{count:S,avg:I,completed:V,hasIssues:U,hasConsultation:q,overdue:te}},i=_=>{const v=e.filter(V=>V.category===_),S=v.length,I=S>0?Math.round(v.reduce((V,U)=>V+U.progress,0)/S):0;return{count:S,avg:I}},a=e.length,l=a>0?Math.round(e.reduce((_,v)=>_+v.progress,0)/a):0,c=e.filter(_=>_.progress>=100).length,f=e.filter(_=>_.dueDate?new Date(_.dueDate)<new Date&&_.progress<100:!1).length,g=e.filter(_=>_.taskType==="project").length,p=e.filter(_=>_.taskType==="routine").length;return b.jsxs("div",{className:"p-6 animate-fade-in",children:[b.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:""}),b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-8",children:[b.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[b.jsx("p",{className:"text-xs text-gray-500",children:""}),b.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a})]}),b.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[b.jsx("p",{className:"text-xs text-gray-500",children:""}),b.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[l,"%"]})]}),b.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[b.jsx("p",{className:"text-xs text-gray-500",children:""}),b.jsx("p",{className:"text-2xl font-bold text-green-600",children:c})]}),b.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[b.jsx("p",{className:"text-xs text-gray-500",children:""}),b.jsx("p",{className:`text-2xl font-bold ${f>0?"text-red-600":"text-gray-400"}`,children:f})]}),b.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[b.jsx("p",{className:"text-xs text-gray-500",children:" "}),b.jsx("p",{className:"text-2xl font-bold text-blue-500",children:g})]}),b.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[b.jsx("p",{className:"text-xs text-gray-500",children:" "}),b.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:p})]})]}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:di.map(_=>{const v=t(_.id);return b.jsxs("div",{onClick:()=>r(_.id),className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition cursor-pointer",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[b.jsx(H_,{member:_,size:"md"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900",children:_.nameJa}),b.jsx("p",{className:"text-xs text-gray-500",children:_.nameEn})]}),b.jsxs("div",{className:"ml-auto text-right",children:[b.jsxs("span",{className:"text-sm text-gray-500",children:[v.count,""]}),b.jsxs("span",{className:"text-xs text-gray-400 block",children:[v.completed,""]})]})]}),b.jsx(Kc,{progress:v.avg,delta:null}),b.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[v.hasIssues>0&&b.jsxs("span",{className:"text-xs text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded",children:[" : ",v.hasIssues,""]}),v.hasConsultation>0&&b.jsxs("span",{className:"text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:[" : ",v.hasConsultation,""]}),v.overdue>0&&b.jsxs("span",{className:"text-xs text-red-600 bg-red-50 px-1.5 py-0.5 rounded",children:[" : ",v.overdue,""]})]})]},_.id)})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),b.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:b.jsxs("div",{className:"space-y-3",children:[ps.map(_=>{const v=i(_.id);return v.count===0?null:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium min-w-[140px] text-center",style:{backgroundColor:_.color},children:_.label}),b.jsx("div",{className:"flex-1",children:b.jsx(Kc,{progress:v.avg,delta:null,size:"sm"})}),b.jsxs("span",{className:"text-xs text-gray-500 min-w-[30px] text-right",children:[v.count,""]})]},_.id)}),ps.every(_=>e.filter(v=>v.category===_.id).length===0)&&b.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:""})]})})]})}var yc=$S();function bV(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return z.useMemo(()=>i=>{e.forEach(a=>a(i))},e)}const bm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ru(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function q_(r){return"nodeType"in r}function lr(r){var e,t;return r?ru(r)?r:q_(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function G_(r){const{Document:e}=lr(r);return r instanceof e}function ch(r){return ru(r)?!1:r instanceof lr(r).HTMLElement}function A1(r){return r instanceof lr(r).SVGElement}function iu(r){return r?ru(r)?r.document:q_(r)?G_(r)?r:ch(r)||A1(r)?r.ownerDocument:document:document:document}const fi=bm?z.useLayoutEffect:z.useEffect;function Tm(r){const e=z.useRef(r);return fi(()=>{e.current=r}),z.useCallback(function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function TV(){const r=z.useRef(null),e=z.useCallback((i,a)=>{r.current=setInterval(i,a)},[]),t=z.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function Yc(r,e){e===void 0&&(e=[r]);const t=z.useRef(r);return fi(()=>{t.current!==r&&(t.current=r)},e),t}function hh(r,e){const t=z.useRef();return z.useMemo(()=>{const i=r(t.current);return t.current=i,i},[...e])}function Lf(r){const e=Tm(r),t=z.useRef(null),i=z.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,i]}function jf(r){const e=z.useRef();return z.useEffect(()=>{e.current=r},[r]),e.current}let Bp={};function dh(r,e){return z.useMemo(()=>{if(e)return e;const t=Bp[r]==null?0:Bp[r]+1;return Bp[r]=t,r+"-"+t},[r,e])}function w1(r){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return i.reduce((l,c)=>{const f=Object.entries(c);for(const[g,p]of f){const _=l[g];_!=null&&(l[g]=_+r*p)}return l},{...e})}}const Dl=w1(1),Uf=w1(-1);function EV(r){return"clientX"in r&&"clientY"in r}function Em(r){if(!r)return!1;const{KeyboardEvent:e}=lr(r.target);return e&&r instanceof e}function SV(r){if(!r)return!1;const{TouchEvent:e}=lr(r.target);return e&&r instanceof e}function zf(r){if(SV(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return EV(r)?{x:r.clientX,y:r.clientY}:null}const xa=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[xa.Translate.toString(r),xa.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:i}=r;return e+" "+t+"ms "+i}}}),RS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xV(r){return r.matches(RS)?r:r.querySelector(RS)}const AV={display:"none"};function wV(r){let{id:e,value:t}=r;return qt.createElement("div",{id:e,style:AV},t)}function IV(r){let{id:e,announcement:t,ariaLiveType:i="assertive"}=r;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return qt.createElement("div",{id:e,style:a,role:"status","aria-live":i,"aria-atomic":!0},t)}function RV(){const[r,e]=z.useState("");return{announce:z.useCallback(i=>{i!=null&&e(i)},[]),announcement:r}}const I1=z.createContext(null);function CV(r){const e=z.useContext(I1);z.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function DV(){const[r]=z.useState(()=>new Set),e=z.useCallback(i=>(r.add(i),()=>r.delete(i)),[r]);return[z.useCallback(i=>{let{type:a,event:l}=i;r.forEach(c=>{var f;return(f=c[a])==null?void 0:f.call(c,l)})},[r]),e]}const NV={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},OV={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function MV(r){let{announcements:e=OV,container:t,hiddenTextDescribedById:i,screenReaderInstructions:a=NV}=r;const{announce:l,announcement:c}=RV(),f=dh("DndLiveRegion"),[g,p]=z.useState(!1);if(z.useEffect(()=>{p(!0)},[]),CV(z.useMemo(()=>({onDragStart(v){let{active:S}=v;l(e.onDragStart({active:S}))},onDragMove(v){let{active:S,over:I}=v;e.onDragMove&&l(e.onDragMove({active:S,over:I}))},onDragOver(v){let{active:S,over:I}=v;l(e.onDragOver({active:S,over:I}))},onDragEnd(v){let{active:S,over:I}=v;l(e.onDragEnd({active:S,over:I}))},onDragCancel(v){let{active:S,over:I}=v;l(e.onDragCancel({active:S,over:I}))}}),[l,e])),!g)return null;const _=qt.createElement(qt.Fragment,null,qt.createElement(wV,{id:i,value:a.draggable}),qt.createElement(IV,{id:f,announcement:c}));return t?yc.createPortal(_,t):_}var Tn;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Tn||(Tn={}));function Bf(){}function VV(r,e){return z.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function kV(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return z.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const mi=Object.freeze({x:0,y:0});function PV(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function LV(r,e){const t=zf(r);if(!t)return"0 0";const i={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function jV(r,e){let{data:{value:t}}=r,{data:{value:i}}=e;return t-i}function UV(r,e){let{data:{value:t}}=r,{data:{value:i}}=e;return i-t}function zV(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}function CS(r,e,t){return e===void 0&&(e=r.left),t===void 0&&(t=r.top),{x:e+r.width*.5,y:t+r.height*.5}}const BV=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=r;const a=CS(e,e.left,e.top),l=[];for(const c of i){const{id:f}=c,g=t.get(f);if(g){const p=PV(CS(g),a);l.push({id:f,data:{droppableContainer:c,value:p}})}}return l.sort(jV)};function FV(r,e){const t=Math.max(e.top,r.top),i=Math.max(e.left,r.left),a=Math.min(e.left+e.width,r.left+r.width),l=Math.min(e.top+e.height,r.top+r.height),c=a-i,f=l-t;if(i<a&&t<l){const g=e.width*e.height,p=r.width*r.height,_=c*f,v=_/(g+p-_);return Number(v.toFixed(4))}return 0}const HV=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=r;const a=[];for(const l of i){const{id:c}=l,f=t.get(c);if(f){const g=FV(f,e);g>0&&a.push({id:c,data:{droppableContainer:l,value:g}})}}return a.sort(UV)};function qV(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function R1(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:mi}function GV(r){return function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return a.reduce((c,f)=>({...c,top:c.top+r*f.y,bottom:c.bottom+r*f.y,left:c.left+r*f.x,right:c.right+r*f.x}),{...t})}}const KV=GV(1);function C1(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function YV(r,e,t){const i=C1(e);if(!i)return r;const{scaleX:a,scaleY:l,x:c,y:f}=i,g=r.left-c-(1-a)*parseFloat(t),p=r.top-f-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),_=a?r.width/a:r.width,v=l?r.height/l:r.height;return{width:_,height:v,top:p,right:g+_,bottom:p+v,left:g}}const QV={ignoreTransform:!1};function su(r,e){e===void 0&&(e=QV);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:_}=lr(r).getComputedStyle(r);p&&(t=YV(t,p,_))}const{top:i,left:a,width:l,height:c,bottom:f,right:g}=t;return{top:i,left:a,width:l,height:c,bottom:f,right:g}}function DS(r){return su(r,{ignoreTransform:!0})}function $V(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function XV(r,e){return e===void 0&&(e=lr(r).getComputedStyle(r)),e.position==="fixed"}function WV(r,e){e===void 0&&(e=lr(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?t.test(l):!1})}function K_(r,e){const t=[];function i(a){if(e!=null&&t.length>=e||!a)return t;if(G_(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!ch(a)||A1(a)||t.includes(a))return t;const l=lr(r).getComputedStyle(a);return a!==r&&WV(a,l)&&t.push(a),XV(a,l)?t:i(a.parentNode)}return r?i(r):t}function D1(r){const[e]=K_(r,1);return e??null}function Fp(r){return!bm||!r?null:ru(r)?r:q_(r)?G_(r)||r===iu(r).scrollingElement?window:ch(r)?r:null:null}function N1(r){return ru(r)?r.scrollX:r.scrollLeft}function O1(r){return ru(r)?r.scrollY:r.scrollTop}function My(r){return{x:N1(r),y:O1(r)}}var Dn;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Dn||(Dn={}));function M1(r){return!bm||!r?!1:r===document.scrollingElement}function V1(r){const e={x:0,y:0},t=M1(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},i={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},a=r.scrollTop<=e.y,l=r.scrollLeft<=e.x,c=r.scrollTop>=i.y,f=r.scrollLeft>=i.x;return{isTop:a,isLeft:l,isBottom:c,isRight:f,maxScroll:i,minScroll:e}}const JV={x:.2,y:.2};function ZV(r,e,t,i,a){let{top:l,left:c,right:f,bottom:g}=t;i===void 0&&(i=10),a===void 0&&(a=JV);const{isTop:p,isBottom:_,isLeft:v,isRight:S}=V1(r),I={x:0,y:0},V={x:0,y:0},U={height:e.height*a.y,width:e.width*a.x};return!p&&l<=e.top+U.height?(I.y=Dn.Backward,V.y=i*Math.abs((e.top+U.height-l)/U.height)):!_&&g>=e.bottom-U.height&&(I.y=Dn.Forward,V.y=i*Math.abs((e.bottom-U.height-g)/U.height)),!S&&f>=e.right-U.width?(I.x=Dn.Forward,V.x=i*Math.abs((e.right-U.width-f)/U.width)):!v&&c<=e.left+U.width&&(I.x=Dn.Backward,V.x=i*Math.abs((e.left+U.width-c)/U.width)),{direction:I,speed:V}}function ek(r){if(r===document.scrollingElement){const{innerWidth:l,innerHeight:c}=window;return{top:0,left:0,right:l,bottom:c,width:l,height:c}}const{top:e,left:t,right:i,bottom:a}=r.getBoundingClientRect();return{top:e,left:t,right:i,bottom:a,width:r.clientWidth,height:r.clientHeight}}function k1(r){return r.reduce((e,t)=>Dl(e,My(t)),mi)}function tk(r){return r.reduce((e,t)=>e+N1(t),0)}function nk(r){return r.reduce((e,t)=>e+O1(t),0)}function P1(r,e){if(e===void 0&&(e=su),!r)return;const{top:t,left:i,bottom:a,right:l}=e(r);D1(r)&&(a<=0||l<=0||t>=window.innerHeight||i>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const rk=[["x",["left","right"],tk],["y",["top","bottom"],nk]];class Y_{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=K_(t),a=k1(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,c,f]of rk)for(const g of c)Object.defineProperty(this,g,{get:()=>{const p=f(i),_=a[l]-p;return this.rect[g]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var a;(a=this.target)==null||a.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function ik(r){const{EventTarget:e}=lr(r);return r instanceof e?r:iu(r)}function Hp(r,e){const t=Math.abs(r.x),i=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var $r;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})($r||($r={}));function NS(r){r.preventDefault()}function sk(r){r.stopPropagation()}var ut;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(ut||(ut={}));const L1={start:[ut.Space,ut.Enter],cancel:[ut.Esc],end:[ut.Space,ut.Enter,ut.Tab]},ak=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case ut.Right:return{...t,x:t.x+25};case ut.Left:return{...t,x:t.x-25};case ut.Down:return{...t,y:t.y+25};case ut.Up:return{...t,y:t.y-25}}};class j1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Cc(iu(t)),this.windowListeners=new Cc(lr(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add($r.Resize,this.handleCancel),this.windowListeners.add($r.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add($r.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&P1(i),t(mi)}handleKeyDown(e){if(Em(e)){const{active:t,context:i,options:a}=this.props,{keyboardCodes:l=L1,coordinateGetter:c=ak,scrollBehavior:f="smooth"}=a,{code:g}=e;if(l.end.includes(g)){this.handleEnd(e);return}if(l.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=i.current,_=p?{x:p.left,y:p.top}:mi;this.referenceCoordinates||(this.referenceCoordinates=_);const v=c(e,{active:t,context:i.current,currentCoordinates:_});if(v){const S=Uf(v,_),I={x:0,y:0},{scrollableAncestors:V}=i.current;for(const U of V){const q=e.code,{isTop:te,isRight:X,isLeft:re,isBottom:ue,maxScroll:fe,minScroll:ce}=V1(U),C=ek(U),R={x:Math.min(q===ut.Right?C.right-C.width/2:C.right,Math.max(q===ut.Right?C.left:C.left+C.width/2,v.x)),y:Math.min(q===ut.Down?C.bottom-C.height/2:C.bottom,Math.max(q===ut.Down?C.top:C.top+C.height/2,v.y))},w=q===ut.Right&&!X||q===ut.Left&&!re,O=q===ut.Down&&!ue||q===ut.Up&&!te;if(w&&R.x!==v.x){const N=U.scrollLeft+S.x,k=q===ut.Right&&N<=fe.x||q===ut.Left&&N>=ce.x;if(k&&!S.y){U.scrollTo({left:N,behavior:f});return}k?I.x=U.scrollLeft-N:I.x=q===ut.Right?U.scrollLeft-fe.x:U.scrollLeft-ce.x,I.x&&U.scrollBy({left:-I.x,behavior:f});break}else if(O&&R.y!==v.y){const N=U.scrollTop+S.y,k=q===ut.Down&&N<=fe.y||q===ut.Up&&N>=ce.y;if(k&&!S.x){U.scrollTo({top:N,behavior:f});return}k?I.y=U.scrollTop-N:I.y=q===ut.Down?U.scrollTop-fe.y:U.scrollTop-ce.y,I.y&&U.scrollBy({top:-I.y,behavior:f});break}}this.handleMove(e,Dl(Uf(v,this.referenceCoordinates),I))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}j1.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:i=L1,onActivation:a}=e,{active:l}=t;const{code:c}=r.nativeEvent;if(i.start.includes(c)){const f=l.activatorNode.current;return f&&r.target!==f?!1:(r.preventDefault(),a?.({event:r.nativeEvent}),!0)}return!1}}];function OS(r){return!!(r&&"distance"in r)}function MS(r){return!!(r&&"delay"in r)}class Q_{constructor(e,t,i){var a;i===void 0&&(i=ik(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:c}=l;this.props=e,this.events=t,this.document=iu(c),this.documentListeners=new Cc(this.document),this.listeners=new Cc(i),this.windowListeners=new Cc(lr(c)),this.initialCoordinates=(a=zf(l))!=null?a:mi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add($r.Resize,this.handleCancel),this.windowListeners.add($r.DragStart,NS),this.windowListeners.add($r.VisibilityChange,this.handleCancel),this.windowListeners.add($r.ContextMenu,NS),this.documentListeners.add($r.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(MS(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(OS(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:a}=this.props;a(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add($r.Click,sk,{capture:!0}),this.removeTextSelection(),this.documentListeners.add($r.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:a,props:l}=this,{onMove:c,options:{activationConstraint:f}}=l;if(!a)return;const g=(t=zf(e))!=null?t:mi,p=Uf(a,g);if(!i&&f){if(OS(f)){if(f.tolerance!=null&&Hp(p,f.tolerance))return this.handleCancel();if(Hp(p,f.distance))return this.handleStart()}if(MS(f)&&Hp(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}e.cancelable&&e.preventDefault(),c(g)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ut.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const ok={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class $_ extends Q_{constructor(e){const{event:t}=e,i=iu(t.target);super(e,ok,i)}}$_.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const lk={move:{name:"mousemove"},end:{name:"mouseup"}};var Vy;(function(r){r[r.RightClick=2]="RightClick"})(Vy||(Vy={}));class uk extends Q_{constructor(e){super(e,lk,iu(e.event.target))}}uk.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:i}=e;return t.button===Vy.RightClick?!1:(i?.({event:t}),!0)}}];const qp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ck extends Q_{constructor(e){super(e,qp)}static setup(){return window.addEventListener(qp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(qp.move.name,e)};function e(){}}}ck.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:i}=e;const{touches:a}=t;return a.length>1?!1:(i?.({event:t}),!0)}}];var Dc;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Dc||(Dc={}));var Ff;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ff||(Ff={}));function hk(r){let{acceleration:e,activator:t=Dc.Pointer,canScroll:i,draggingRect:a,enabled:l,interval:c=5,order:f=Ff.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:_,delta:v,threshold:S}=r;const I=fk({delta:v,disabled:!l}),[V,U]=TV(),q=z.useRef({x:0,y:0}),te=z.useRef({x:0,y:0}),X=z.useMemo(()=>{switch(t){case Dc.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Dc.DraggableRect:return a}},[t,a,g]),re=z.useRef(null),ue=z.useCallback(()=>{const ce=re.current;if(!ce)return;const C=q.current.x*te.current.x,R=q.current.y*te.current.y;ce.scrollBy(C,R)},[]),fe=z.useMemo(()=>f===Ff.TreeOrder?[...p].reverse():p,[f,p]);z.useEffect(()=>{if(!l||!p.length||!X){U();return}for(const ce of fe){if(i?.(ce)===!1)continue;const C=p.indexOf(ce),R=_[C];if(!R)continue;const{direction:w,speed:O}=ZV(ce,R,X,e,S);for(const N of["x","y"])I[N][w[N]]||(O[N]=0,w[N]=0);if(O.x>0||O.y>0){U(),re.current=ce,V(ue,c),q.current=O,te.current=w;return}}q.current={x:0,y:0},te.current={x:0,y:0},U()},[e,ue,i,U,l,c,JSON.stringify(X),JSON.stringify(I),V,p,fe,_,JSON.stringify(S)])}const dk={x:{[Dn.Backward]:!1,[Dn.Forward]:!1},y:{[Dn.Backward]:!1,[Dn.Forward]:!1}};function fk(r){let{delta:e,disabled:t}=r;const i=jf(e);return hh(a=>{if(t||!i||!a)return dk;const l={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Dn.Backward]:a.x[Dn.Backward]||l.x===-1,[Dn.Forward]:a.x[Dn.Forward]||l.x===1},y:{[Dn.Backward]:a.y[Dn.Backward]||l.y===-1,[Dn.Forward]:a.y[Dn.Forward]||l.y===1}}},[t,e,i])}function mk(r,e){const t=e!=null?r.get(e):void 0,i=t?t.node.current:null;return hh(a=>{var l;return e==null?null:(l=i??a)!=null?l:null},[i,e])}function gk(r,e){return z.useMemo(()=>r.reduce((t,i)=>{const{sensor:a}=i,l=a.activators.map(c=>({eventName:c.eventName,handler:e(c.handler,i)}));return[...t,...l]},[]),[r,e])}var Qc;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Qc||(Qc={}));var ky;(function(r){r.Optimized="optimized"})(ky||(ky={}));const VS=new Map;function pk(r,e){let{dragging:t,dependencies:i,config:a}=e;const[l,c]=z.useState(null),{frequency:f,measure:g,strategy:p}=a,_=z.useRef(r),v=q(),S=Yc(v),I=z.useCallback(function(te){te===void 0&&(te=[]),!S.current&&c(X=>X===null?te:X.concat(te.filter(re=>!X.includes(re))))},[S]),V=z.useRef(null),U=hh(te=>{if(v&&!t)return VS;if(!te||te===VS||_.current!==r||l!=null){const X=new Map;for(let re of r){if(!re)continue;if(l&&l.length>0&&!l.includes(re.id)&&re.rect.current){X.set(re.id,re.rect.current);continue}const ue=re.node.current,fe=ue?new Y_(g(ue),ue):null;re.rect.current=fe,fe&&X.set(re.id,fe)}return X}return te},[r,l,t,v,g]);return z.useEffect(()=>{_.current=r},[r]),z.useEffect(()=>{v||I()},[t,v]),z.useEffect(()=>{l&&l.length>0&&c(null)},[JSON.stringify(l)]),z.useEffect(()=>{v||typeof f!="number"||V.current!==null||(V.current=setTimeout(()=>{I(),V.current=null},f))},[f,v,I,...i]),{droppableRects:U,measureDroppableContainers:I,measuringScheduled:l!=null};function q(){switch(p){case Qc.Always:return!1;case Qc.BeforeDragging:return t;default:return!t}}}function X_(r,e){return hh(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function yk(r,e){return X_(r,e)}function _k(r){let{callback:e,disabled:t}=r;const i=Tm(e),a=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(i)},[i,t]);return z.useEffect(()=>()=>a?.disconnect(),[a]),a}function Sm(r){let{callback:e,disabled:t}=r;const i=Tm(e),a=z.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(i)},[t]);return z.useEffect(()=>()=>a?.disconnect(),[a]),a}function vk(r){return new Y_(su(r),r)}function kS(r,e,t){e===void 0&&(e=vk);const[i,a]=z.useState(null);function l(){a(g=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=g??t)!=null?p:null}const _=e(r);return JSON.stringify(g)===JSON.stringify(_)?g:_})}const c=_k({callback(g){if(r)for(const p of g){const{type:_,target:v}=p;if(_==="childList"&&v instanceof HTMLElement&&v.contains(r)){l();break}}}}),f=Sm({callback:l});return fi(()=>{l(),r?(f?.observe(r),c?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),c?.disconnect())},[r]),i}function bk(r){const e=X_(r);return R1(r,e)}const PS=[];function Tk(r){const e=z.useRef(r),t=hh(i=>r?i&&i!==PS&&r&&e.current&&r.parentNode===e.current.parentNode?i:K_(r):PS,[r]);return z.useEffect(()=>{e.current=r},[r]),t}function Ek(r){const[e,t]=z.useState(null),i=z.useRef(r),a=z.useCallback(l=>{const c=Fp(l.target);c&&t(f=>f?(f.set(c,My(c)),new Map(f)):null)},[]);return z.useEffect(()=>{const l=i.current;if(r!==l){c(l);const f=r.map(g=>{const p=Fp(g);return p?(p.addEventListener("scroll",a,{passive:!0}),[p,My(p)]):null}).filter(g=>g!=null);t(f.length?new Map(f):null),i.current=r}return()=>{c(r),c(l)};function c(f){f.forEach(g=>{const p=Fp(g);p?.removeEventListener("scroll",a)})}},[a,r]),z.useMemo(()=>r.length?e?Array.from(e.values()).reduce((l,c)=>Dl(l,c),mi):k1(r):mi,[r,e])}function LS(r,e){e===void 0&&(e=[]);const t=z.useRef(null);return z.useEffect(()=>{t.current=null},e),z.useEffect(()=>{const i=r!==mi;i&&!t.current&&(t.current=r),!i&&t.current&&(t.current=null)},[r]),t.current?Uf(r,t.current):mi}function Sk(r){z.useEffect(()=>{if(!bm)return;const e=r.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function xk(r,e){return z.useMemo(()=>r.reduce((t,i)=>{let{eventName:a,handler:l}=i;return t[a]=c=>{l(c,e)},t},{}),[r,e])}function U1(r){return z.useMemo(()=>r?$V(r):null,[r])}const jS=[];function Ak(r,e){e===void 0&&(e=su);const[t]=r,i=U1(t?lr(t):null),[a,l]=z.useState(jS);function c(){l(()=>r.length?r.map(g=>M1(g)?i:new Y_(e(g),g)):jS)}const f=Sm({callback:c});return fi(()=>{f?.disconnect(),c(),r.forEach(g=>f?.observe(g))},[r]),a}function z1(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return ch(e)?e:r}function wk(r){let{measure:e}=r;const[t,i]=z.useState(null),a=z.useCallback(p=>{for(const{target:_}of p)if(ch(_)){i(v=>{const S=e(_);return v?{...v,width:S.width,height:S.height}:S});break}},[e]),l=Sm({callback:a}),c=z.useCallback(p=>{const _=z1(p);l?.disconnect(),_&&l?.observe(_),i(_?e(_):null)},[e,l]),[f,g]=Lf(c);return z.useMemo(()=>({nodeRef:f,rect:t,setRef:g}),[t,f,g])}const Ik=[{sensor:$_,options:{}},{sensor:j1,options:{}}],Rk={current:{}},of={draggable:{measure:DS},droppable:{measure:DS,strategy:Qc.WhileDragging,frequency:ky.Optimized},dragOverlay:{measure:su}};class Nc extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const Ck={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:of,measureDroppableContainers:Bf,windowRect:null,measuringScheduled:!1},B1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bf,draggableNodes:new Map,over:null,measureDroppableContainers:Bf},fh=z.createContext(B1),F1=z.createContext(Ck);function Dk(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nc}}}function Nk(r,e){switch(e.type){case Tn.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Tn.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case Tn.DragEnd:case Tn.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Tn.RegisterDroppable:{const{element:t}=e,{id:i}=t,a=new Nc(r.droppable.containers);return a.set(i,t),{...r,droppable:{...r.droppable,containers:a}}}case Tn.SetDroppableDisabled:{const{id:t,key:i,disabled:a}=e,l=r.droppable.containers.get(t);if(!l||i!==l.key)return r;const c=new Nc(r.droppable.containers);return c.set(t,{...l,disabled:a}),{...r,droppable:{...r.droppable,containers:c}}}case Tn.UnregisterDroppable:{const{id:t,key:i}=e,a=r.droppable.containers.get(t);if(!a||i!==a.key)return r;const l=new Nc(r.droppable.containers);return l.delete(t),{...r,droppable:{...r.droppable,containers:l}}}default:return r}}function Ok(r){let{disabled:e}=r;const{active:t,activatorEvent:i,draggableNodes:a}=z.useContext(fh),l=jf(i),c=jf(t?.id);return z.useEffect(()=>{if(!e&&!i&&l&&c!=null){if(!Em(l)||document.activeElement===l.target)return;const f=a.get(c);if(!f)return;const{activatorNode:g,node:p}=f;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const _ of[g.current,p.current]){if(!_)continue;const v=xV(_);if(v){v.focus();break}}})}},[i,e,a,c,l]),null}function H1(r,e){let{transform:t,...i}=e;return r!=null&&r.length?r.reduce((a,l)=>l({transform:a,...i}),t):t}function Mk(r){return z.useMemo(()=>({draggable:{...of.draggable,...r?.draggable},droppable:{...of.droppable,...r?.droppable},dragOverlay:{...of.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function Vk(r){let{activeNode:e,measure:t,initialRect:i,config:a=!0}=r;const l=z.useRef(!1),{x:c,y:f}=typeof a=="boolean"?{x:a,y:a}:a;fi(()=>{if(!c&&!f||!e){l.current=!1;return}if(l.current||!i)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const _=t(p),v=R1(_,i);if(c||(v.x=0),f||(v.y=0),l.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const S=D1(p);S&&S.scrollBy({top:v.y,left:v.x})}},[e,c,f,i,t])}const xm=z.createContext({...mi,scaleX:1,scaleY:1});var ia;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(ia||(ia={}));const kk=z.memo(function(e){var t,i,a,l;let{id:c,accessibility:f,autoScroll:g=!0,children:p,sensors:_=Ik,collisionDetection:v=HV,measuring:S,modifiers:I,...V}=e;const U=z.useReducer(Nk,void 0,Dk),[q,te]=U,[X,re]=DV(),[ue,fe]=z.useState(ia.Uninitialized),ce=ue===ia.Initialized,{draggable:{active:C,nodes:R,translate:w},droppable:{containers:O}}=q,N=C!=null?R.get(C):null,k=z.useRef({initial:null,translated:null}),D=z.useMemo(()=>{var Fe;return C!=null?{id:C,data:(Fe=N?.data)!=null?Fe:Rk,rect:k}:null},[C,N]),De=z.useRef(null),[he,Q]=z.useState(null),[le,Ee]=z.useState(null),Ne=Yc(V,Object.values(V)),ze=dh("DndDescribedBy",c),P=z.useMemo(()=>O.getEnabled(),[O]),J=Mk(S),{droppableRects:se,measureDroppableContainers:me,measuringScheduled:ye}=pk(P,{dragging:ce,dependencies:[w.x,w.y],config:J.droppable}),Ae=mk(R,C),ke=z.useMemo(()=>le?zf(le):null,[le]),Ze=cr(),Ke=yk(Ae,J.draggable.measure);Vk({activeNode:C!=null?R.get(C):null,config:Ze.layoutShiftCompensation,initialRect:Ke,measure:J.draggable.measure});const Be=kS(Ae,J.draggable.measure,Ke),Jn=kS(Ae?Ae.parentElement:null),rn=z.useRef({activatorEvent:null,active:null,activeNode:Ae,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),sn=O.getNodeFor((t=rn.current.over)==null?void 0:t.id),Ct=wk({measure:J.dragOverlay.measure}),an=(i=Ct.nodeRef.current)!=null?i:Ae,xn=ce?(a=Ct.rect)!=null?a:Be:null,Pr=!!(Ct.nodeRef.current&&Ct.rect),Zn=bk(Pr?null:Be),dt=U1(an?lr(an):null),rt=Tk(ce?sn??Ae:null),Gn=Ak(rt),Jr=H1(I,{transform:{x:w.x-Zn.x,y:w.y-Zn.y,scaleX:1,scaleY:1},activatorEvent:le,active:D,activeNodeRect:Be,containerNodeRect:Jn,draggingNodeRect:xn,over:rn.current.over,overlayNodeRect:Ct.rect,scrollableAncestors:rt,scrollableAncestorRects:Gn,windowRect:dt}),zi=ke?Dl(ke,w):null,Kt=Ek(rt),er=LS(Kt),ur=LS(Kt,[Be]),Ut=Dl(Jr,er),pn=xn?KV(xn,Jr):null,Lr=D&&pn?v({active:D,collisionRect:pn,droppableRects:se,droppableContainers:P,pointerCoordinates:zi}):null,pi=zV(Lr,"id"),[On,yi]=z.useState(null),An=Pr?Jr:Dl(Jr,ur),Vt=qV(An,(l=On?.rect)!=null?l:null,Be),wt=z.useRef(null),at=z.useCallback((Fe,ct)=>{let{sensor:It,options:Yt}=ct;if(De.current==null)return;const $e=R.get(De.current);if(!$e)return;const Dt=Fe.nativeEvent,zt=new It({active:De.current,activeNode:$e,event:Dt,options:Yt,context:rn,onAbort(Nt){if(!R.get(Nt))return;const{onDragAbort:_n}=Ne.current,kn={id:Nt};_n?.(kn),X({type:"onDragAbort",event:kn})},onPending(Nt,yn,_n,kn){if(!R.get(Nt))return;const{onDragPending:Bt}=Ne.current,Kn={id:Nt,constraint:yn,initialCoordinates:_n,offset:kn};Bt?.(Kn),X({type:"onDragPending",event:Kn})},onStart(Nt){const yn=De.current;if(yn==null)return;const _n=R.get(yn);if(!_n)return;const{onDragStart:kn}=Ne.current,kt={activatorEvent:Dt,active:{id:yn,data:_n.data,rect:k}};yc.unstable_batchedUpdates(()=>{kn?.(kt),fe(ia.Initializing),te({type:Tn.DragStart,initialCoordinates:Nt,active:yn}),X({type:"onDragStart",event:kt}),Q(wt.current),Ee(Dt)})},onMove(Nt){te({type:Tn.DragMove,coordinates:Nt})},onEnd:Vn(Tn.DragEnd),onCancel:Vn(Tn.DragCancel)});wt.current=zt;function Vn(Nt){return async function(){const{active:_n,collisions:kn,over:kt,scrollAdjustedTranslate:Bt}=rn.current;let Kn=null;if(_n&&Bt){const{cancelDrop:on}=Ne.current;Kn={activatorEvent:Dt,active:_n,collisions:kn,delta:Bt,over:kt},Nt===Tn.DragEnd&&typeof on=="function"&&await Promise.resolve(on(Kn))&&(Nt=Tn.DragCancel)}De.current=null,yc.unstable_batchedUpdates(()=>{te({type:Nt}),fe(ia.Uninitialized),yi(null),Q(null),Ee(null),wt.current=null;const on=Nt===Tn.DragEnd?"onDragEnd":"onDragCancel";if(Kn){const vn=Ne.current[on];vn?.(Kn),X({type:on,event:Kn})}})}}},[R]),_i=z.useCallback((Fe,ct)=>(It,Yt)=>{const $e=It.nativeEvent,Dt=R.get(Yt);if(De.current!==null||!Dt||$e.dndKit||$e.defaultPrevented)return;const zt={active:Dt};Fe(It,ct.options,zt)===!0&&($e.dndKit={capturedBy:ct.sensor},De.current=Yt,at(It,ct))},[R,at]),Tr=gk(_,_i);Sk(_),fi(()=>{Be&&ue===ia.Initializing&&fe(ia.Initialized)},[Be,ue]),z.useEffect(()=>{const{onDragMove:Fe}=Ne.current,{active:ct,activatorEvent:It,collisions:Yt,over:$e}=rn.current;if(!ct||!It)return;const Dt={active:ct,activatorEvent:It,collisions:Yt,delta:{x:Ut.x,y:Ut.y},over:$e};yc.unstable_batchedUpdates(()=>{Fe?.(Dt),X({type:"onDragMove",event:Dt})})},[Ut.x,Ut.y]),z.useEffect(()=>{const{active:Fe,activatorEvent:ct,collisions:It,droppableContainers:Yt,scrollAdjustedTranslate:$e}=rn.current;if(!Fe||De.current==null||!ct||!$e)return;const{onDragOver:Dt}=Ne.current,zt=Yt.get(pi),Vn=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Nt={active:Fe,activatorEvent:ct,collisions:It,delta:{x:$e.x,y:$e.y},over:Vn};yc.unstable_batchedUpdates(()=>{yi(Vn),Dt?.(Nt),X({type:"onDragOver",event:Nt})})},[pi]),fi(()=>{rn.current={activatorEvent:le,active:D,activeNode:Ae,collisionRect:pn,collisions:Lr,droppableRects:se,draggableNodes:R,draggingNode:an,draggingNodeRect:xn,droppableContainers:O,over:On,scrollableAncestors:rt,scrollAdjustedTranslate:Ut},k.current={initial:xn,translated:pn}},[D,Ae,Lr,pn,R,an,xn,se,O,On,rt,Ut]),hk({...Ze,delta:w,draggingRect:pn,pointerCoordinates:zi,scrollableAncestors:rt,scrollableAncestorRects:Gn});const bs=z.useMemo(()=>({active:D,activeNode:Ae,activeNodeRect:Be,activatorEvent:le,collisions:Lr,containerNodeRect:Jn,dragOverlay:Ct,draggableNodes:R,droppableContainers:O,droppableRects:se,over:On,measureDroppableContainers:me,scrollableAncestors:rt,scrollableAncestorRects:Gn,measuringConfiguration:J,measuringScheduled:ye,windowRect:dt}),[D,Ae,Be,le,Lr,Jn,Ct,R,O,se,On,me,rt,Gn,J,ye,dt]),Mn=z.useMemo(()=>({activatorEvent:le,activators:Tr,active:D,activeNodeRect:Be,ariaDescribedById:{draggable:ze},dispatch:te,draggableNodes:R,over:On,measureDroppableContainers:me}),[le,Tr,D,Be,te,ze,R,On,me]);return qt.createElement(I1.Provider,{value:re},qt.createElement(fh.Provider,{value:Mn},qt.createElement(F1.Provider,{value:bs},qt.createElement(xm.Provider,{value:Vt},p)),qt.createElement(Ok,{disabled:f?.restoreFocus===!1})),qt.createElement(MV,{...f,hiddenTextDescribedById:ze}));function cr(){const Fe=he?.autoScrollEnabled===!1,ct=typeof g=="object"?g.enabled===!1:g===!1,It=ce&&!Fe&&!ct;return typeof g=="object"?{...g,enabled:It}:{enabled:It}}}),Pk=z.createContext(null),US="button",Lk="Draggable";function jk(r){let{id:e,data:t,disabled:i=!1,attributes:a}=r;const l=dh(Lk),{activators:c,activatorEvent:f,active:g,activeNodeRect:p,ariaDescribedById:_,draggableNodes:v,over:S}=z.useContext(fh),{role:I=US,roleDescription:V="draggable",tabIndex:U=0}=a??{},q=g?.id===e,te=z.useContext(q?xm:Pk),[X,re]=Lf(),[ue,fe]=Lf(),ce=xk(c,e),C=Yc(t);fi(()=>(v.set(e,{id:e,key:l,node:X,activatorNode:ue,data:C}),()=>{const w=v.get(e);w&&w.key===l&&v.delete(e)}),[v,e]);const R=z.useMemo(()=>({role:I,tabIndex:U,"aria-disabled":i,"aria-pressed":q&&I===US?!0:void 0,"aria-roledescription":V,"aria-describedby":_.draggable}),[i,I,U,q,V,_.draggable]);return{active:g,activatorEvent:f,activeNodeRect:p,attributes:R,isDragging:q,listeners:i?void 0:ce,node:X,over:S,setNodeRef:re,setActivatorNodeRef:fe,transform:te}}function q1(){return z.useContext(F1)}const Uk="Droppable",zk={timeout:25};function Bk(r){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:a}=r;const l=dh(Uk),{active:c,dispatch:f,over:g,measureDroppableContainers:p}=z.useContext(fh),_=z.useRef({disabled:t}),v=z.useRef(!1),S=z.useRef(null),I=z.useRef(null),{disabled:V,updateMeasurementsFor:U,timeout:q}={...zk,...a},te=Yc(U??i),X=z.useCallback(()=>{if(!v.current){v.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{p(Array.isArray(te.current)?te.current:[te.current]),I.current=null},q)},[q]),re=Sm({callback:X,disabled:V||!c}),ue=z.useCallback((R,w)=>{re&&(w&&(re.unobserve(w),v.current=!1),R&&re.observe(R))},[re]),[fe,ce]=Lf(ue),C=Yc(e);return z.useEffect(()=>{!re||!fe.current||(re.disconnect(),v.current=!1,re.observe(fe.current))},[fe,re]),z.useEffect(()=>(f({type:Tn.RegisterDroppable,element:{id:i,key:l,disabled:t,node:fe,rect:S,data:C}}),()=>f({type:Tn.UnregisterDroppable,key:l,id:i})),[i]),z.useEffect(()=>{t!==_.current.disabled&&(f({type:Tn.SetDroppableDisabled,id:i,key:l,disabled:t}),_.current.disabled=t)},[i,l,t,f]),{active:c,rect:S,isOver:g?.id===i,node:fe,over:g,setNodeRef:ce}}function Fk(r){let{animation:e,children:t}=r;const[i,a]=z.useState(null),[l,c]=z.useState(null),f=jf(t);return!t&&!i&&f&&a(f),fi(()=>{if(!l)return;const g=i?.key,p=i?.props.id;if(g==null||p==null){a(null);return}Promise.resolve(e(p,l)).then(()=>{a(null)})},[e,i,l]),qt.createElement(qt.Fragment,null,t,i?z.cloneElement(i,{ref:c}):null)}const Hk={x:0,y:0,scaleX:1,scaleY:1};function qk(r){let{children:e}=r;return qt.createElement(fh.Provider,{value:B1},qt.createElement(xm.Provider,{value:Hk},e))}const Gk={position:"fixed",touchAction:"none"},Kk=r=>Em(r)?"transform 250ms ease":void 0,Yk=z.forwardRef((r,e)=>{let{as:t,activatorEvent:i,adjustScale:a,children:l,className:c,rect:f,style:g,transform:p,transition:_=Kk}=r;if(!f)return null;const v=a?p:{...p,scaleX:1,scaleY:1},S={...Gk,width:f.width,height:f.height,top:f.top,left:f.left,transform:xa.Transform.toString(v),transformOrigin:a&&i?LV(i,f):void 0,transition:typeof _=="function"?_(i):_,...g};return qt.createElement(t,{className:c,style:S,ref:e},l)}),Qk=r=>e=>{let{active:t,dragOverlay:i}=e;const a={},{styles:l,className:c}=r;if(l!=null&&l.active)for(const[f,g]of Object.entries(l.active))g!==void 0&&(a[f]=t.node.style.getPropertyValue(f),t.node.style.setProperty(f,g));if(l!=null&&l.dragOverlay)for(const[f,g]of Object.entries(l.dragOverlay))g!==void 0&&i.node.style.setProperty(f,g);return c!=null&&c.active&&t.node.classList.add(c.active),c!=null&&c.dragOverlay&&i.node.classList.add(c.dragOverlay),function(){for(const[g,p]of Object.entries(a))t.node.style.setProperty(g,p);c!=null&&c.active&&t.node.classList.remove(c.active)}},$k=r=>{let{transform:{initial:e,final:t}}=r;return[{transform:xa.Transform.toString(e)},{transform:xa.Transform.toString(t)}]},Xk={duration:250,easing:"ease",keyframes:$k,sideEffects:Qk({styles:{active:{opacity:"0"}}})};function Wk(r){let{config:e,draggableNodes:t,droppableContainers:i,measuringConfiguration:a}=r;return Tm((l,c)=>{if(e===null)return;const f=t.get(l);if(!f)return;const g=f.node.current;if(!g)return;const p=z1(c);if(!p)return;const{transform:_}=lr(c).getComputedStyle(c),v=C1(_);if(!v)return;const S=typeof e=="function"?e:Jk(e);return P1(g,a.draggable.measure),S({active:{id:l,data:f.data,node:g,rect:a.draggable.measure(g)},draggableNodes:t,dragOverlay:{node:c,rect:a.dragOverlay.measure(p)},droppableContainers:i,measuringConfiguration:a,transform:v})})}function Jk(r){const{duration:e,easing:t,sideEffects:i,keyframes:a}={...Xk,...r};return l=>{let{active:c,dragOverlay:f,transform:g,...p}=l;if(!e)return;const _={x:f.rect.left-c.rect.left,y:f.rect.top-c.rect.top},v={scaleX:g.scaleX!==1?c.rect.width*g.scaleX/f.rect.width:1,scaleY:g.scaleY!==1?c.rect.height*g.scaleY/f.rect.height:1},S={x:g.x-_.x,y:g.y-_.y,...v},I=a({...p,active:c,dragOverlay:f,transform:{initial:g,final:S}}),[V]=I,U=I[I.length-1];if(JSON.stringify(V)===JSON.stringify(U))return;const q=i?.({active:c,dragOverlay:f,...p}),te=f.node.animate(I,{duration:e,easing:t,fill:"forwards"});return new Promise(X=>{te.onfinish=()=>{q?.(),X()}})}}let zS=0;function Zk(r){return z.useMemo(()=>{if(r!=null)return zS++,zS},[r])}const e6=qt.memo(r=>{let{adjustScale:e=!1,children:t,dropAnimation:i,style:a,transition:l,modifiers:c,wrapperElement:f="div",className:g,zIndex:p=999}=r;const{activatorEvent:_,active:v,activeNodeRect:S,containerNodeRect:I,draggableNodes:V,droppableContainers:U,dragOverlay:q,over:te,measuringConfiguration:X,scrollableAncestors:re,scrollableAncestorRects:ue,windowRect:fe}=q1(),ce=z.useContext(xm),C=Zk(v?.id),R=H1(c,{activatorEvent:_,active:v,activeNodeRect:S,containerNodeRect:I,draggingNodeRect:q.rect,over:te,overlayNodeRect:q.rect,scrollableAncestors:re,scrollableAncestorRects:ue,transform:ce,windowRect:fe}),w=X_(S),O=Wk({config:i,draggableNodes:V,droppableContainers:U,measuringConfiguration:X}),N=w?q.setRef:void 0;return qt.createElement(qk,null,qt.createElement(Fk,{animation:O},v&&C?qt.createElement(Yk,{key:C,id:v.id,ref:N,as:f,activatorEvent:_,adjustScale:e,className:g,transition:l,rect:w,style:{zIndex:p,...a},transform:R},t):null))});function W_(r,e,t){const i=r.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function t6(r,e){return r.reduce((t,i,a)=>{const l=e.get(i);return l&&(t[a]=l),t},Array(r.length))}function Bd(r){return r!==null&&r>=0}function n6(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function r6(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const J_=r=>{let{rects:e,activeIndex:t,overIndex:i,index:a}=r;const l=W_(e,i,t),c=e[a],f=l[a];return!f||!c?null:{x:f.left-c.left,y:f.top-c.top,scaleX:f.width/c.width,scaleY:f.height/c.height}},G1="Sortable",K1=qt.createContext({activeIndex:-1,containerId:G1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:J_,disabled:{draggable:!1,droppable:!1}});function i6(r){let{children:e,id:t,items:i,strategy:a=J_,disabled:l=!1}=r;const{active:c,dragOverlay:f,droppableRects:g,over:p,measureDroppableContainers:_}=q1(),v=dh(G1,t),S=f.rect!==null,I=z.useMemo(()=>i.map(ce=>typeof ce=="object"&&"id"in ce?ce.id:ce),[i]),V=c!=null,U=c?I.indexOf(c.id):-1,q=p?I.indexOf(p.id):-1,te=z.useRef(I),X=!n6(I,te.current),re=q!==-1&&U===-1||X,ue=r6(l);fi(()=>{X&&V&&_(I)},[X,I,V,_]),z.useEffect(()=>{te.current=I},[I]);const fe=z.useMemo(()=>({activeIndex:U,containerId:v,disabled:ue,disableTransforms:re,items:I,overIndex:q,useDragOverlay:S,sortedRects:t6(I,g),strategy:a}),[U,v,ue.draggable,ue.droppable,re,I,q,g,S,a]);return qt.createElement(K1.Provider,{value:fe},e)}const s6=r=>{let{id:e,items:t,activeIndex:i,overIndex:a}=r;return W_(t,i,a).indexOf(e)},a6=r=>{let{containerId:e,isSorting:t,wasDragging:i,index:a,items:l,newIndex:c,previousItems:f,previousContainerId:g,transition:p}=r;return!p||!i||f!==l&&a===c?!1:t?!0:c!==a&&e===g},o6={duration:200,easing:"ease"},Y1="transform",l6=xa.Transition.toString({property:Y1,duration:0,easing:"linear"}),u6={roleDescription:"sortable"};function c6(r){let{disabled:e,index:t,node:i,rect:a}=r;const[l,c]=z.useState(null),f=z.useRef(t);return fi(()=>{if(!e&&t!==f.current&&i.current){const g=a.current;if(g){const p=su(i.current,{ignoreTransform:!0}),_={x:g.left-p.left,y:g.top-p.top,scaleX:g.width/p.width,scaleY:g.height/p.height};(_.x||_.y)&&c(_)}}t!==f.current&&(f.current=t)},[e,t,i,a]),z.useEffect(()=>{l&&c(null)},[l]),l}function h6(r){let{animateLayoutChanges:e=a6,attributes:t,disabled:i,data:a,getNewIndex:l=s6,id:c,strategy:f,resizeObserverConfig:g,transition:p=o6}=r;const{items:_,containerId:v,activeIndex:S,disabled:I,disableTransforms:V,sortedRects:U,overIndex:q,useDragOverlay:te,strategy:X}=z.useContext(K1),re=d6(i,I),ue=_.indexOf(c),fe=z.useMemo(()=>({sortable:{containerId:v,index:ue,items:_},...a}),[v,a,ue,_]),ce=z.useMemo(()=>_.slice(_.indexOf(c)),[_,c]),{rect:C,node:R,isOver:w,setNodeRef:O}=Bk({id:c,data:fe,disabled:re.droppable,resizeObserverConfig:{updateMeasurementsFor:ce,...g}}),{active:N,activatorEvent:k,activeNodeRect:D,attributes:De,setNodeRef:he,listeners:Q,isDragging:le,over:Ee,setActivatorNodeRef:Ne,transform:ze}=jk({id:c,data:fe,attributes:{...u6,...t},disabled:re.draggable}),P=bV(O,he),J=!!N,se=J&&!V&&Bd(S)&&Bd(q),me=!te&&le,ye=me&&se?ze:null,ke=se?ye??(f??X)({rects:U,activeNodeRect:D,activeIndex:S,overIndex:q,index:ue}):null,Ze=Bd(S)&&Bd(q)?l({id:c,items:_,activeIndex:S,overIndex:q}):ue,Ke=N?.id,Be=z.useRef({activeId:Ke,items:_,newIndex:Ze,containerId:v}),Jn=_!==Be.current.items,rn=e({active:N,containerId:v,isDragging:le,isSorting:J,id:c,index:ue,items:_,newIndex:Be.current.newIndex,previousItems:Be.current.items,previousContainerId:Be.current.containerId,transition:p,wasDragging:Be.current.activeId!=null}),sn=c6({disabled:!rn,index:ue,node:R,rect:C});return z.useEffect(()=>{J&&Be.current.newIndex!==Ze&&(Be.current.newIndex=Ze),v!==Be.current.containerId&&(Be.current.containerId=v),_!==Be.current.items&&(Be.current.items=_)},[J,Ze,v,_]),z.useEffect(()=>{if(Ke===Be.current.activeId)return;if(Ke!=null&&Be.current.activeId==null){Be.current.activeId=Ke;return}const an=setTimeout(()=>{Be.current.activeId=Ke},50);return()=>clearTimeout(an)},[Ke]),{active:N,activeIndex:S,attributes:De,data:fe,rect:C,index:ue,newIndex:Ze,items:_,isOver:w,isSorting:J,isDragging:le,listeners:Q,node:R,overIndex:q,over:Ee,setNodeRef:P,setActivatorNodeRef:Ne,setDroppableNodeRef:O,setDraggableNodeRef:he,transform:sn??ke,transition:Ct()};function Ct(){if(sn||Jn&&Be.current.newIndex===ue)return l6;if(!(me&&!Em(k)||!p)&&(J||rn))return xa.Transition.toString({...p,property:Y1})}}function d6(r,e){var t,i;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(i=r?.droppable)!=null?i:e.droppable}}ut.Down,ut.Right,ut.Up,ut.Left;const{entries:Q1,setPrototypeOf:BS,isFrozen:f6,getPrototypeOf:m6,getOwnPropertyDescriptor:g6}=Object;let{freeze:ar,seal:Wr,create:Py}=Object,{apply:Ly,construct:jy}=typeof Reflect<"u"&&Reflect;ar||(ar=function(e){return e});Wr||(Wr=function(e){return e});Ly||(Ly=function(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return e.apply(t,a)});jy||(jy=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return new e(...i)});const Fd=or(Array.prototype.forEach),p6=or(Array.prototype.lastIndexOf),FS=or(Array.prototype.pop),ac=or(Array.prototype.push),y6=or(Array.prototype.splice),lf=or(String.prototype.toLowerCase),Gp=or(String.prototype.toString),Kp=or(String.prototype.match),oc=or(String.prototype.replace),_6=or(String.prototype.indexOf),v6=or(String.prototype.trim),oi=or(Object.prototype.hasOwnProperty),ir=or(RegExp.prototype.test),lc=b6(TypeError);function or(r){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return Ly(r,e,i)}}function b6(r){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return jy(r,t)}}function Ge(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lf;BS&&BS(r,null);let i=e.length;for(;i--;){let a=e[i];if(typeof a=="string"){const l=t(a);l!==a&&(f6(e)||(e[i]=l),a=l)}r[a]=!0}return r}function T6(r){for(let e=0;e<r.length;e++)oi(r,e)||(r[e]=null);return r}function Di(r){const e=Py(null);for(const[t,i]of Q1(r))oi(r,t)&&(Array.isArray(i)?e[t]=T6(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=Di(i):e[t]=i);return e}function uc(r,e){for(;r!==null;){const i=g6(r,e);if(i){if(i.get)return or(i.get);if(typeof i.value=="function")return or(i.value)}r=m6(r)}function t(){return null}return t}const HS=ar(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Yp=ar(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qp=ar(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E6=ar(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$p=ar(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),S6=ar(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),qS=ar(["#text"]),GS=ar(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Xp=ar(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),KS=ar(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Hd=ar(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),x6=Wr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),A6=Wr(/<%[\w\W]*|[\w\W]*%>/gm),w6=Wr(/\$\{[\w\W]*/gm),I6=Wr(/^data-[\-\w.\u00B7-\uFFFF]+$/),R6=Wr(/^aria-[\-\w]+$/),$1=Wr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),C6=Wr(/^(?:\w+script|data):/i),D6=Wr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X1=Wr(/^html$/i),N6=Wr(/^[a-z][.\w]*(-[.\w]+)+$/i);var YS=Object.freeze({__proto__:null,ARIA_ATTR:R6,ATTR_WHITESPACE:D6,CUSTOM_ELEMENT:N6,DATA_ATTR:I6,DOCTYPE_NAME:X1,ERB_EXPR:A6,IS_ALLOWED_URI:$1,IS_SCRIPT_OR_DATA:C6,MUSTACHE_EXPR:x6,TMPLIT_EXPR:w6});const cc={element:1,text:3,progressingInstruction:7,comment:8,document:9},O6=function(){return typeof window>"u"?null:window},M6=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const a="data-tt-policy-suffix";t&&t.hasAttribute(a)&&(i=t.getAttribute(a));const l="dompurify"+(i?"#"+i:"");try{return e.createPolicy(l,{createHTML(c){return c},createScriptURL(c){return c}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},QS=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function W1(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O6();const e=ve=>W1(ve);if(e.version="3.3.1",e.removed=[],!r||!r.document||r.document.nodeType!==cc.document||!r.Element)return e.isSupported=!1,e;let{document:t}=r;const i=t,a=i.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:f,Element:g,NodeFilter:p,NamedNodeMap:_=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:v,DOMParser:S,trustedTypes:I}=r,V=g.prototype,U=uc(V,"cloneNode"),q=uc(V,"remove"),te=uc(V,"nextSibling"),X=uc(V,"childNodes"),re=uc(V,"parentNode");if(typeof c=="function"){const ve=t.createElement("template");ve.content&&ve.content.ownerDocument&&(t=ve.content.ownerDocument)}let ue,fe="";const{implementation:ce,createNodeIterator:C,createDocumentFragment:R,getElementsByTagName:w}=t,{importNode:O}=i;let N=QS();e.isSupported=typeof Q1=="function"&&typeof re=="function"&&ce&&ce.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:k,ERB_EXPR:D,TMPLIT_EXPR:De,DATA_ATTR:he,ARIA_ATTR:Q,IS_SCRIPT_OR_DATA:le,ATTR_WHITESPACE:Ee,CUSTOM_ELEMENT:Ne}=YS;let{IS_ALLOWED_URI:ze}=YS,P=null;const J=Ge({},[...HS,...Yp,...Qp,...$p,...qS]);let se=null;const me=Ge({},[...GS,...Xp,...KS,...Hd]);let ye=Object.seal(Py(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ae=null,ke=null;const Ze=Object.seal(Py(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ke=!0,Be=!0,Jn=!1,rn=!0,sn=!1,Ct=!0,an=!1,xn=!1,Pr=!1,Zn=!1,dt=!1,rt=!1,Gn=!0,Jr=!1;const zi="user-content-";let Kt=!0,er=!1,ur={},Ut=null;const pn=Ge({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Lr=null;const pi=Ge({},["audio","video","img","source","image","track"]);let On=null;const yi=Ge({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),An="http://www.w3.org/1998/Math/MathML",Vt="http://www.w3.org/2000/svg",wt="http://www.w3.org/1999/xhtml";let at=wt,_i=!1,Tr=null;const bs=Ge({},[An,Vt,wt],Gp);let Mn=Ge({},["mi","mo","mn","ms","mtext"]),cr=Ge({},["annotation-xml"]);const Fe=Ge({},["title","style","font","a","script"]);let ct=null;const It=["application/xhtml+xml","text/html"],Yt="text/html";let $e=null,Dt=null;const zt=t.createElement("form"),Vn=function(L){return L instanceof RegExp||L instanceof Function},Nt=function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Dt&&Dt===L)){if((!L||typeof L!="object")&&(L={}),L=Di(L),ct=It.indexOf(L.PARSER_MEDIA_TYPE)===-1?Yt:L.PARSER_MEDIA_TYPE,$e=ct==="application/xhtml+xml"?Gp:lf,P=oi(L,"ALLOWED_TAGS")?Ge({},L.ALLOWED_TAGS,$e):J,se=oi(L,"ALLOWED_ATTR")?Ge({},L.ALLOWED_ATTR,$e):me,Tr=oi(L,"ALLOWED_NAMESPACES")?Ge({},L.ALLOWED_NAMESPACES,Gp):bs,On=oi(L,"ADD_URI_SAFE_ATTR")?Ge(Di(yi),L.ADD_URI_SAFE_ATTR,$e):yi,Lr=oi(L,"ADD_DATA_URI_TAGS")?Ge(Di(pi),L.ADD_DATA_URI_TAGS,$e):pi,Ut=oi(L,"FORBID_CONTENTS")?Ge({},L.FORBID_CONTENTS,$e):pn,Ae=oi(L,"FORBID_TAGS")?Ge({},L.FORBID_TAGS,$e):Di({}),ke=oi(L,"FORBID_ATTR")?Ge({},L.FORBID_ATTR,$e):Di({}),ur=oi(L,"USE_PROFILES")?L.USE_PROFILES:!1,Ke=L.ALLOW_ARIA_ATTR!==!1,Be=L.ALLOW_DATA_ATTR!==!1,Jn=L.ALLOW_UNKNOWN_PROTOCOLS||!1,rn=L.ALLOW_SELF_CLOSE_IN_ATTR!==!1,sn=L.SAFE_FOR_TEMPLATES||!1,Ct=L.SAFE_FOR_XML!==!1,an=L.WHOLE_DOCUMENT||!1,Zn=L.RETURN_DOM||!1,dt=L.RETURN_DOM_FRAGMENT||!1,rt=L.RETURN_TRUSTED_TYPE||!1,Pr=L.FORCE_BODY||!1,Gn=L.SANITIZE_DOM!==!1,Jr=L.SANITIZE_NAMED_PROPS||!1,Kt=L.KEEP_CONTENT!==!1,er=L.IN_PLACE||!1,ze=L.ALLOWED_URI_REGEXP||$1,at=L.NAMESPACE||wt,Mn=L.MATHML_TEXT_INTEGRATION_POINTS||Mn,cr=L.HTML_INTEGRATION_POINTS||cr,ye=L.CUSTOM_ELEMENT_HANDLING||{},L.CUSTOM_ELEMENT_HANDLING&&Vn(L.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ye.tagNameCheck=L.CUSTOM_ELEMENT_HANDLING.tagNameCheck),L.CUSTOM_ELEMENT_HANDLING&&Vn(L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ye.attributeNameCheck=L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),L.CUSTOM_ELEMENT_HANDLING&&typeof L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ye.allowCustomizedBuiltInElements=L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),sn&&(Be=!1),dt&&(Zn=!0),ur&&(P=Ge({},qS),se=[],ur.html===!0&&(Ge(P,HS),Ge(se,GS)),ur.svg===!0&&(Ge(P,Yp),Ge(se,Xp),Ge(se,Hd)),ur.svgFilters===!0&&(Ge(P,Qp),Ge(se,Xp),Ge(se,Hd)),ur.mathMl===!0&&(Ge(P,$p),Ge(se,KS),Ge(se,Hd))),L.ADD_TAGS&&(typeof L.ADD_TAGS=="function"?Ze.tagCheck=L.ADD_TAGS:(P===J&&(P=Di(P)),Ge(P,L.ADD_TAGS,$e))),L.ADD_ATTR&&(typeof L.ADD_ATTR=="function"?Ze.attributeCheck=L.ADD_ATTR:(se===me&&(se=Di(se)),Ge(se,L.ADD_ATTR,$e))),L.ADD_URI_SAFE_ATTR&&Ge(On,L.ADD_URI_SAFE_ATTR,$e),L.FORBID_CONTENTS&&(Ut===pn&&(Ut=Di(Ut)),Ge(Ut,L.FORBID_CONTENTS,$e)),L.ADD_FORBID_CONTENTS&&(Ut===pn&&(Ut=Di(Ut)),Ge(Ut,L.ADD_FORBID_CONTENTS,$e)),Kt&&(P["#text"]=!0),an&&Ge(P,["html","head","body"]),P.table&&(Ge(P,["tbody"]),delete Ae.tbody),L.TRUSTED_TYPES_POLICY){if(typeof L.TRUSTED_TYPES_POLICY.createHTML!="function")throw lc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof L.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw lc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ue=L.TRUSTED_TYPES_POLICY,fe=ue.createHTML("")}else ue===void 0&&(ue=M6(I,a)),ue!==null&&typeof fe=="string"&&(fe=ue.createHTML(""));ar&&ar(L),Dt=L}},yn=Ge({},[...Yp,...Qp,...E6]),_n=Ge({},[...$p,...S6]),kn=function(L){let oe=re(L);(!oe||!oe.tagName)&&(oe={namespaceURI:at,tagName:"template"});const _e=lf(L.tagName),qe=lf(oe.tagName);return Tr[L.namespaceURI]?L.namespaceURI===Vt?oe.namespaceURI===wt?_e==="svg":oe.namespaceURI===An?_e==="svg"&&(qe==="annotation-xml"||Mn[qe]):!!yn[_e]:L.namespaceURI===An?oe.namespaceURI===wt?_e==="math":oe.namespaceURI===Vt?_e==="math"&&cr[qe]:!!_n[_e]:L.namespaceURI===wt?oe.namespaceURI===Vt&&!cr[qe]||oe.namespaceURI===An&&!Mn[qe]?!1:!_n[_e]&&(Fe[_e]||!yn[_e]):!!(ct==="application/xhtml+xml"&&Tr[L.namespaceURI]):!1},kt=function(L){ac(e.removed,{element:L});try{re(L).removeChild(L)}catch{q(L)}},Bt=function(L,oe){try{ac(e.removed,{attribute:oe.getAttributeNode(L),from:oe})}catch{ac(e.removed,{attribute:null,from:oe})}if(oe.removeAttribute(L),L==="is")if(Zn||dt)try{kt(oe)}catch{}else try{oe.setAttribute(L,"")}catch{}},Kn=function(L){let oe=null,_e=null;if(Pr)L="<remove></remove>"+L;else{const je=Kp(L,/^[\r\n\t ]+/);_e=je&&je[0]}ct==="application/xhtml+xml"&&at===wt&&(L='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+L+"</body></html>");const qe=ue?ue.createHTML(L):L;if(at===wt)try{oe=new S().parseFromString(qe,ct)}catch{}if(!oe||!oe.documentElement){oe=ce.createDocument(at,"template",null);try{oe.documentElement.innerHTML=_i?fe:qe}catch{}}const xt=oe.body||oe.documentElement;return L&&_e&&xt.insertBefore(t.createTextNode(_e),xt.childNodes[0]||null),at===wt?w.call(oe,an?"html":"body")[0]:an?oe.documentElement:xt},on=function(L){return C.call(L.ownerDocument||L,L,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},vn=function(L){return L instanceof v&&(typeof L.nodeName!="string"||typeof L.textContent!="string"||typeof L.removeChild!="function"||!(L.attributes instanceof _)||typeof L.removeAttribute!="function"||typeof L.setAttribute!="function"||typeof L.namespaceURI!="string"||typeof L.insertBefore!="function"||typeof L.hasChildNodes!="function")},Ft=function(L){return typeof f=="function"&&L instanceof f};function _t(ve,L,oe){Fd(ve,_e=>{_e.call(e,L,oe,Dt)})}const Er=function(L){let oe=null;if(_t(N.beforeSanitizeElements,L,null),vn(L))return kt(L),!0;const _e=$e(L.nodeName);if(_t(N.uponSanitizeElement,L,{tagName:_e,allowedTags:P}),Ct&&L.hasChildNodes()&&!Ft(L.firstElementChild)&&ir(/<[/\w!]/g,L.innerHTML)&&ir(/<[/\w!]/g,L.textContent)||L.nodeType===cc.progressingInstruction||Ct&&L.nodeType===cc.comment&&ir(/<[/\w]/g,L.data))return kt(L),!0;if(!(Ze.tagCheck instanceof Function&&Ze.tagCheck(_e))&&(!P[_e]||Ae[_e])){if(!Ae[_e]&&wo(_e)&&(ye.tagNameCheck instanceof RegExp&&ir(ye.tagNameCheck,_e)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(_e)))return!1;if(Kt&&!Ut[_e]){const qe=re(L)||L.parentNode,xt=X(L)||L.childNodes;if(xt&&qe){const je=xt.length;for(let ln=je-1;ln>=0;--ln){const tr=U(xt[ln],!0);tr.__removalCount=(L.__removalCount||0)+1,qe.insertBefore(tr,te(L))}}}return kt(L),!0}return L instanceof g&&!kn(L)||(_e==="noscript"||_e==="noembed"||_e==="noframes")&&ir(/<\/no(script|embed|frames)/i,L.innerHTML)?(kt(L),!0):(sn&&L.nodeType===cc.text&&(oe=L.textContent,Fd([k,D,De],qe=>{oe=oc(oe,qe," ")}),L.textContent!==oe&&(ac(e.removed,{element:L.cloneNode()}),L.textContent=oe)),_t(N.afterSanitizeElements,L,null),!1)},Bi=function(L,oe,_e){if(Gn&&(oe==="id"||oe==="name")&&(_e in t||_e in zt))return!1;if(!(Be&&!ke[oe]&&ir(he,oe))){if(!(Ke&&ir(Q,oe))){if(!(Ze.attributeCheck instanceof Function&&Ze.attributeCheck(oe,L))){if(!se[oe]||ke[oe]){if(!(wo(L)&&(ye.tagNameCheck instanceof RegExp&&ir(ye.tagNameCheck,L)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(L))&&(ye.attributeNameCheck instanceof RegExp&&ir(ye.attributeNameCheck,oe)||ye.attributeNameCheck instanceof Function&&ye.attributeNameCheck(oe,L))||oe==="is"&&ye.allowCustomizedBuiltInElements&&(ye.tagNameCheck instanceof RegExp&&ir(ye.tagNameCheck,_e)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(_e))))return!1}else if(!On[oe]){if(!ir(ze,oc(_e,Ee,""))){if(!((oe==="src"||oe==="xlink:href"||oe==="href")&&L!=="script"&&_6(_e,"data:")===0&&Lr[L])){if(!(Jn&&!ir(le,oc(_e,Ee,"")))){if(_e)return!1}}}}}}}return!0},wo=function(L){return L!=="annotation-xml"&&Kp(L,Ne)},Ca=function(L){_t(N.beforeSanitizeAttributes,L,null);const{attributes:oe}=L;if(!oe||vn(L))return;const _e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se,forceKeepAttr:void 0};let qe=oe.length;for(;qe--;){const xt=oe[qe],{name:je,namespaceURI:ln,value:tr}=xt,Pn=$e(je),hr=tr;let Ht=je==="value"?hr:v6(hr);if(_e.attrName=Pn,_e.attrValue=Ht,_e.keepAttr=!0,_e.forceKeepAttr=void 0,_t(N.uponSanitizeAttribute,L,_e),Ht=_e.attrValue,Jr&&(Pn==="id"||Pn==="name")&&(Bt(je,L),Ht=zi+Ht),Ct&&ir(/((--!?|])>)|<\/(style|title|textarea)/i,Ht)){Bt(je,L);continue}if(Pn==="attributename"&&Kp(Ht,"href")){Bt(je,L);continue}if(_e.forceKeepAttr)continue;if(!_e.keepAttr){Bt(je,L);continue}if(!rn&&ir(/\/>/i,Ht)){Bt(je,L);continue}sn&&Fd([k,D,De],Es=>{Ht=oc(Ht,Es," ")});const Ts=$e(L.nodeName);if(!Bi(Ts,Pn,Ht)){Bt(je,L);continue}if(ue&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!ln)switch(I.getAttributeType(Ts,Pn)){case"TrustedHTML":{Ht=ue.createHTML(Ht);break}case"TrustedScriptURL":{Ht=ue.createScriptURL(Ht);break}}if(Ht!==hr)try{ln?L.setAttributeNS(ln,je,Ht):L.setAttribute(je,Ht),vn(L)?kt(L):FS(e.removed)}catch{Bt(je,L)}}_t(N.afterSanitizeAttributes,L,null)},Io=function ve(L){let oe=null;const _e=on(L);for(_t(N.beforeSanitizeShadowDOM,L,null);oe=_e.nextNode();)_t(N.uponSanitizeShadowNode,oe,null),Er(oe),Ca(oe),oe.content instanceof l&&ve(oe.content);_t(N.afterSanitizeShadowDOM,L,null)};return e.sanitize=function(ve){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=null,_e=null,qe=null,xt=null;if(_i=!ve,_i&&(ve="<!-->"),typeof ve!="string"&&!Ft(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw lc("dirty is not a string, aborting")}else throw lc("toString is not a function");if(!e.isSupported)return ve;if(xn||Nt(L),e.removed=[],typeof ve=="string"&&(er=!1),er){if(ve.nodeName){const tr=$e(ve.nodeName);if(!P[tr]||Ae[tr])throw lc("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof f)oe=Kn("<!---->"),_e=oe.ownerDocument.importNode(ve,!0),_e.nodeType===cc.element&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?oe=_e:oe.appendChild(_e);else{if(!Zn&&!sn&&!an&&ve.indexOf("<")===-1)return ue&&rt?ue.createHTML(ve):ve;if(oe=Kn(ve),!oe)return Zn?null:rt?fe:""}oe&&Pr&&kt(oe.firstChild);const je=on(er?ve:oe);for(;qe=je.nextNode();)Er(qe),Ca(qe),qe.content instanceof l&&Io(qe.content);if(er)return ve;if(Zn){if(dt)for(xt=R.call(oe.ownerDocument);oe.firstChild;)xt.appendChild(oe.firstChild);else xt=oe;return(se.shadowroot||se.shadowrootmode)&&(xt=O.call(i,xt,!0)),xt}let ln=an?oe.outerHTML:oe.innerHTML;return an&&P["!doctype"]&&oe.ownerDocument&&oe.ownerDocument.doctype&&oe.ownerDocument.doctype.name&&ir(X1,oe.ownerDocument.doctype.name)&&(ln="<!DOCTYPE "+oe.ownerDocument.doctype.name+`>
`+ln),sn&&Fd([k,D,De],tr=>{ln=oc(ln,tr," ")}),ue&&rt?ue.createHTML(ln):ln},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Nt(ve),xn=!0},e.clearConfig=function(){Dt=null,xn=!1},e.isValidAttribute=function(ve,L,oe){Dt||Nt({});const _e=$e(ve),qe=$e(L);return Bi(_e,qe,oe)},e.addHook=function(ve,L){typeof L=="function"&&ac(N[ve],L)},e.removeHook=function(ve,L){if(L!==void 0){const oe=p6(N[ve],L);return oe===-1?void 0:y6(N[ve],oe,1)[0]}return FS(N[ve])},e.removeHooks=function(ve){N[ve]=[]},e.removeAllHooks=function(){N=QS()},e}var V6=W1();const k6={ALLOWED_TAGS:["b","i","u","br","strong","em","div","span"],ALLOWED_ATTR:[]};function J1(r){return V6.sanitize(r,k6)}function P6(r){return r?/<[a-z][\s\S]*>/i.test(r)?r:r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>"):""}function hc({value:r,onChange:e,placeholder:t,rows:i=2,className:a}){const l=z.useRef(null),c=z.useRef(!1);z.useEffect(()=>{if(c.current){c.current=!1;return}if(l.current){const _=P6(r);l.current.innerHTML!==_&&(l.current.innerHTML=_)}},[r]);const f=z.useCallback(()=>{if(l.current){c.current=!0;const _=J1(l.current.innerHTML);e(_)}},[e]),g=z.useCallback(_=>{document.execCommand(_,!1,null),l.current?.focus(),f()},[f]),p=`${i*1.5}rem`;return b.jsxs("div",{children:[b.jsxs("div",{className:"flex gap-1 mb-1",children:[b.jsx("button",{type:"button",onMouseDown:_=>_.preventDefault(),onClick:()=>g("bold"),className:"px-2 py-0.5 text-xs border border-gray-300 rounded hover:bg-gray-100 font-bold cursor-pointer",title:" (Ctrl+B)",children:"B"}),b.jsx("button",{type:"button",onMouseDown:_=>_.preventDefault(),onClick:()=>g("italic"),className:"px-2 py-0.5 text-xs border border-gray-300 rounded hover:bg-gray-100 italic cursor-pointer",title:" (Ctrl+I)",children:"I"}),b.jsx("button",{type:"button",onMouseDown:_=>_.preventDefault(),onClick:()=>g("underline"),className:"px-2 py-0.5 text-xs border border-gray-300 rounded hover:bg-gray-100 underline cursor-pointer",title:" (Ctrl+U)",children:"U"})]}),b.jsx("div",{ref:l,contentEditable:!0,onInput:f,"data-placeholder":t,className:`rich-text-editor ${a||""}`,style:{minHeight:p,overflowY:"auto"}})]})}function L6(r){return/<[a-z][\s\S]*>/i.test(r)}function to({content:r,className:e}){return r?L6(r)?b.jsx("span",{className:e,dangerouslySetInnerHTML:{__html:J1(r)}}):b.jsx("span",{className:e,children:r}):null}function j6({value:r}){return b.jsx("span",{className:"inline-flex items-center",title:`: ${r}/5`,children:[1,2,3,4,5].map(e=>b.jsx("span",{className:`text-xs ${e<=r?"text-yellow-400":"text-gray-300"}`,children:""},e))})}function U6({dueDate:r}){if(!r)return null;const e=new Date(r),t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0);const i=Math.ceil((e-t)/(1e3*60*60*24));let a="text-gray-500 bg-gray-100";i<0?a="text-red-700 bg-red-100":i===0?a="text-orange-700 bg-orange-100":i<=3&&(a="text-yellow-700 bg-yellow-100");const l=`${e.getMonth()+1}/${e.getDate()}`,c=i<0?`${l} (${Math.abs(i)})`:i===0?`${l} ()`:i<=7?`${l} (${i})`:l;return b.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${a} flex items-center gap-0.5`,children:[b.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c]})}function z6({task:r,onEdit:e,isDragEnabled:t}){const{attributes:i,listeners:a,setNodeRef:l,transform:c,transition:f,isDragging:g}=h6({id:r.id}),p={transform:xa.Translate.toString(c),transition:f};return b.jsxs("div",{ref:l,style:p,className:`relative ${g?"opacity-40 z-10":""}`,children:[t&&b.jsx("div",{...i,...a,className:"absolute top-2 left-2 z-10 p-1 rounded hover:bg-gray-100 cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500 transition",title:"",children:b.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[b.jsx("circle",{cx:"9",cy:"5",r:"1.5"}),b.jsx("circle",{cx:"15",cy:"5",r:"1.5"}),b.jsx("circle",{cx:"9",cy:"12",r:"1.5"}),b.jsx("circle",{cx:"15",cy:"12",r:"1.5"}),b.jsx("circle",{cx:"9",cy:"19",r:"1.5"}),b.jsx("circle",{cx:"15",cy:"19",r:"1.5"})]})}),b.jsx(Uy,{task:r,onEdit:e})]})}function Uy({task:r,onEdit:e}){const{deleteTask:t,archiveTask:i,updateTask:a,getProgressDelta:l}=Ui(),[c,f]=z.useState(!1),g=ps.find(V=>V.id===r.category),p=uh.find(V=>V.id===r.taskType),_=r.taskType==="routine",v=r.progress>=100,S=l(r),I=V=>V?V<1024?V+" B":V<1024*1024?(V/1024).toFixed(1)+" KB":(V/(1024*1024)).toFixed(1)+" MB":"";return b.jsx("div",{className:`bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition animate-fade-in ${c?"":"h-60"}`,children:b.jsxs("div",{className:"p-4 h-full flex flex-col",children:[b.jsxs("div",{className:"flex items-start justify-between mb-2",children:[b.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap flex-1 min-w-0",children:[b.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium whitespace-nowrap",style:{backgroundColor:g?.color||"#94a3b8"},children:g?.label||""}),p&&b.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded-full font-medium whitespace-nowrap",style:{backgroundColor:`${p.color}20`,color:p.color},children:[p.icon," ",p.label]})]}),b.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r.progress>=100&&b.jsx("button",{onClick:()=>{confirm("")&&i(r.id)},className:"p-1 text-gray-400 hover:text-emerald-600 transition cursor-pointer",title:"",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),b.jsx("button",{onClick:()=>e(r),className:"p-1 text-gray-400 hover:text-blue-600 transition cursor-pointer",title:"",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),b.jsx("button",{onClick:()=>{confirm("")&&t(r.id)},className:"p-1 text-gray-400 hover:text-red-600 transition cursor-pointer",title:"",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),b.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.priority&&b.jsx(j6,{value:r.priority}),b.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate flex-1",children:r.title||"()"}),b.jsx(U6,{dueDate:r.dueDate})]}),b.jsx("div",{className:"mb-3",children:_?b.jsxs("button",{type:"button",onClick:()=>a(r.id,{progress:v?0:100}),className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition cursor-pointer ${v?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[v?b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),v?"":""]}):b.jsx(Kc,{progress:r.progress,delta:S})}),b.jsxs("div",{className:"flex-1 min-h-0 overflow-hidden",children:[r.done&&b.jsxs("div",{className:"mb-2",children:[b.jsx("span",{className:"text-xs text-green-700 font-medium",children:":"}),b.jsx("p",{className:"text-xs text-gray-600 mt-0.5 line-clamp-2",children:b.jsx(to,{content:r.done})})]}),r.progress>=100&&r.completionNotes&&b.jsxs("div",{className:"mb-2 bg-emerald-50 rounded-lg px-2 py-1.5",children:[b.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:" :"}),b.jsx("p",{className:"text-xs text-emerald-600 mt-0.5",children:b.jsx(to,{content:r.completionNotes})})]}),b.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[r.issues&&b.jsx("span",{className:"text-xs text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded",children:" "}),r.consultation&&b.jsx("span",{className:"text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded",children:" "}),r.relatedUrls?.length>0&&b.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:[" ",r.relatedUrls.length,""]}),r.attachments?.length>0&&b.jsxs("span",{className:"text-xs text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded",children:[" ",r.attachments.length,""]})]})]}),b.jsx("button",{onClick:()=>f(!c),className:"text-xs text-blue-600 hover:text-blue-800 cursor-pointer mt-auto flex-shrink-0 pt-1",children:c?" ":" "}),c&&b.jsxs("div",{className:"mt-3 space-y-2.5 border-t border-gray-100 pt-3",children:[r.notDone&&b.jsxs("div",{children:[b.jsx("span",{className:"text-xs text-red-600 font-medium",children:":"}),b.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:b.jsx(to,{content:r.notDone})}),r.notDoneReason&&b.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 italic",children:[": ",b.jsx(to,{content:r.notDoneReason})]})]}),r.issues&&b.jsxs("div",{children:[b.jsx("span",{className:"text-xs text-orange-600 font-medium",children:":"}),b.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:b.jsx(to,{content:r.issues})})]}),r.consultation&&b.jsxs("div",{children:[b.jsx("span",{className:"text-xs text-purple-600 font-medium",children:":"}),b.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:b.jsx(to,{content:r.consultation})})]}),r.remarks&&b.jsxs("div",{children:[b.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),b.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:b.jsx(to,{content:r.remarks})})]}),r.relatedUrls?.length>0&&b.jsxs("div",{children:[b.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"URL:"}),b.jsx("div",{className:"mt-1 space-y-0.5",children:r.relatedUrls.map((V,U)=>b.jsxs("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1",children:[b.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),V.label||V.url]},U))})]}),r.attachments?.length>0&&b.jsxs("div",{children:[b.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),b.jsx("div",{className:"mt-1 space-y-1",children:r.attachments.map(V=>b.jsxs("a",{href:V.data,download:V.name,className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1 bg-gray-50 rounded px-2 py-1",children:[b.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),V.name,b.jsxs("span",{className:"text-gray-400 ml-1",children:["(",I(V.size),")"]})]},V.id))})]}),Object.keys(r.weeklyHistory||{}).length>0&&b.jsxs("div",{children:[b.jsx("span",{className:"text-xs text-gray-500 font-medium",children:":"}),b.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:Object.entries(r.weeklyHistory).sort().slice(-6).map(([V,U])=>b.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:[zR(V),": ",_?U.progress>=100?"":"":`${U.progress}%`]},V))})]})]})]})})}function B6({value:r,onChange:e}){const[t,i]=z.useState(0);return b.jsxs("div",{className:"flex items-center gap-0.5",children:[[1,2,3,4,5].map(a=>b.jsx("button",{type:"button",onClick:()=>e(a),onMouseEnter:()=>i(a),onMouseLeave:()=>i(0),className:"text-xl cursor-pointer transition-transform hover:scale-110",children:b.jsx("span",{className:a<=(t||r)?"text-yellow-400":"text-gray-300",children:""})},a)),b.jsx("span",{className:"text-xs text-gray-500 ml-2",children:_V.find(a=>a.value===(t||r))?.label||""})]})}function F6({urls:r,onChange:e}){const t=()=>e([...r,{label:"",url:""}]),i=l=>e(r.filter((c,f)=>f!==l)),a=(l,c,f)=>{const g=r.map((p,_)=>_===l?{...p,[c]:f}:p);e(g)};return b.jsxs("div",{className:"space-y-2",children:[r.map((l,c)=>b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsx("input",{type:"text",value:l.label,onChange:f=>a(c,"label",f.target.value),placeholder:"",className:"w-1/3 px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),b.jsx("input",{type:"url",value:l.url,onChange:f=>a(c,"url",f.target.value),placeholder:"https://...",className:"flex-1 px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),b.jsx("button",{type:"button",onClick:()=>i(c),className:"p-1 text-red-400 hover:text-red-600 cursor-pointer",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),b.jsxs("button",{type:"button",onClick:t,className:"text-xs text-blue-600 hover:text-blue-800 cursor-pointer flex items-center gap-1",children:[b.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"URL"]})]})}function H6({attachments:r,onChange:e}){const t=l=>{Array.from(l.target.files).forEach(f=>{if(f.size>2097152){alert(`${f.name} 2MB2MB`);return}const g=new FileReader;g.onload=()=>{const p={id:Date.now().toString(36)+Math.random().toString(36).substr(2,5),name:f.name,size:f.size,type:f.type,data:g.result,addedAt:new Date().toISOString()};e(_=>[..._,p])},g.readAsDataURL(f)}),l.target.value=""},i=l=>{e(c=>c.filter(f=>f.id!==l))},a=l=>l<1024?l+" B":l<1048576?(l/1024).toFixed(1)+" KB":(l/1048576).toFixed(1)+" MB";return b.jsxs("div",{className:"space-y-2",children:[r.map(l=>b.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2",children:[b.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),b.jsx("span",{className:"text-sm text-gray-700 truncate flex-1",children:l.name}),b.jsx("span",{className:"text-xs text-gray-400",children:a(l.size)}),b.jsx("button",{type:"button",onClick:()=>i(l.id),className:"p-0.5 text-red-400 hover:text-red-600 cursor-pointer",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},l.id)),b.jsxs("label",{className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 cursor-pointer",children:[b.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"2MB",b.jsx("input",{type:"file",multiple:!0,onChange:t,className:"hidden"})]})]})}function q6({task:r,defaultMemberId:e,onClose:t}){const{addTask:i,updateTask:a}=Ui(),l=!!r,[c,f]=z.useState({memberId:r?.memberId||e||di[0].id,category:r?.category||ps[0].id,taskType:r?.taskType||"project",title:r?.title||"",priority:r?.priority||3,dueDate:r?.dueDate||"",progress:r?.progress||0,done:r?.done||"",notDone:r?.notDone||"",notDoneReason:r?.notDoneReason||"",issues:r?.issues||"",consultation:r?.consultation||"",completionNotes:r?.completionNotes||"",remarks:r?.remarks||"",relatedUrls:r?.relatedUrls||[],attachments:r?.attachments||[]});z.useEffect(()=>{const _=v=>{v.key==="Escape"&&t()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[t]);const g=_=>{_.preventDefault(),l?a(r.id,c):i(c),t()},p=(_,v)=>f(S=>({...S,[_]:v}));return b.jsx("div",{className:"modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4",children:b.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto animate-fade-in",children:b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-center justify-between mb-6",children:[b.jsx("h2",{className:"text-lg font-bold text-gray-900",children:l?"":""}),b.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 cursor-pointer",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),b.jsxs("form",{onSubmit:g,className:"space-y-5",children:[b.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[b.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),b.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),b.jsx("select",{value:c.memberId,onChange:_=>p("memberId",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:di.map(_=>b.jsx("option",{value:_.id,children:_.nameJa},_.id))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),b.jsx("select",{value:c.category,onChange:_=>p("category",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:ps.map(_=>b.jsx("option",{value:_.id,children:_.label},_.id))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),b.jsx("div",{className:"flex gap-2",children:uh.map(_=>b.jsxs("button",{type:"button",onClick:()=>{p("taskType",_.id),_.id==="routine"&&f(v=>({...v,taskType:_.id,progress:v.progress>=50?100:0}))},className:`flex-1 px-3 py-2 text-sm rounded-lg border transition cursor-pointer ${c.taskType===_.id?"border-blue-500 bg-blue-50 text-blue-700 font-medium":"border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[_.icon," ",_.label]},_.id))})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),b.jsx("input",{type:"text",value:c.title,onChange:_=>p("title",_.target.value),placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),b.jsxs("div",{className:`grid ${c.taskType==="routine"?"grid-cols-1":"grid-cols-2"} gap-4`,children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),b.jsx(B6,{value:c.priority,onChange:_=>p("priority",_)})]}),c.taskType!=="routine"&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),b.jsx("input",{type:"date",value:c.dueDate,onChange:_=>p("dueDate",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),c.taskType==="routine"?b.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4",children:[b.jsx("label",{className:"block text-sm font-medium text-emerald-800 mb-2",children:""}),b.jsxs("div",{className:"flex gap-3",children:[b.jsxs("button",{type:"button",onClick:()=>p("progress",100),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition cursor-pointer ${c.progress>=100?"bg-emerald-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]}),b.jsxs("button",{type:"button",onClick:()=>p("progress",0),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition cursor-pointer ${c.progress<100?"bg-gray-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),""]})]})]}):b.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[b.jsxs("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:[": ",b.jsxs("span",{className:"text-blue-600 font-bold text-lg",children:[c.progress,"%"]})]}),b.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:c.progress,onChange:_=>p("progress",Number(_.target.value)),className:"w-full accent-blue-600"}),b.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[b.jsx("span",{children:"0%"}),b.jsx("span",{children:"25%"}),b.jsx("span",{children:"50%"}),b.jsx("span",{children:"75%"}),b.jsx("span",{children:"100%"})]})]}),b.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[b.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),""]})}),b.jsx(hc,{value:c.done,onChange:_=>p("done",_),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-red-600 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),""]})}),b.jsx(hc,{value:c.notDone,onChange:_=>p("notDone",_),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-red-400 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-300"}),""]})}),b.jsx(hc,{value:c.notDoneReason,onChange:_=>p("notDoneReason",_),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-red-400 focus:border-red-400"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-orange-600 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),""]})}),b.jsx(hc,{value:c.issues,onChange:_=>p("issues",_),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-purple-600 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),""]})}),b.jsx(hc,{value:c.consultation,onChange:_=>p("consultation",_),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),b.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[b.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:""}),c.progress>=100&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-emerald-700 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),""]})}),b.jsx("textarea",{value:c.completionNotes,onChange:_=>p("completionNotes",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-400"}),""]})}),b.jsx("textarea",{value:c.remarks,onChange:_=>p("remarks",_.target.value),rows:2,placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-400 focus:border-gray-400"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"URL"]})}),b.jsx(F6,{urls:c.relatedUrls,onChange:_=>p("relatedUrls",_)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),""]})}),b.jsx(H6,{attachments:c.attachments,onChange:_=>{typeof _=="function"?f(v=>({...v,attachments:_(v.attachments)})):p("attachments",_)}})]})]}),b.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[b.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition cursor-pointer",children:""}),b.jsx("button",{type:"submit",className:"px-6 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition cursor-pointer",children:l?"":""})]})]})]})})})}function G6({memberId:r}){const{getTasksByMember:e,reorderTasks:t}=Ui(),[i,a]=z.useState(!1),[l,c]=z.useState(null),[f,g]=z.useState("all"),[p,_]=z.useState("all"),[v,S]=z.useState("default"),[I,V]=z.useState(null),U=kV(VV($_,{activationConstraint:{distance:8}})),q=di.find(he=>he.id===r),te=e(r);let X=[...te];f!=="all"&&(X=X.filter(he=>he.category===f)),p!=="all"&&(X=X.filter(he=>he.taskType===p)),v==="priority"?X.sort((he,Q)=>(Q.priority||0)-(he.priority||0)):v==="dueDate"?X.sort((he,Q)=>he.dueDate?Q.dueDate?new Date(he.dueDate)-new Date(Q.dueDate):-1:1):v==="progress"&&X.sort((he,Q)=>Q.progress-he.progress);const re=v==="default",ue=X.map(he=>he.id),fe=I?X.find(he=>he.id===I):null,ce=te.length>0?Math.round(te.reduce((he,Q)=>he+Q.progress,0)/te.length):0,C=te.filter(he=>he.progress>=100).length,R=te.filter(he=>he.issues).length,w=he=>{c(he),a(!0)},O=()=>{a(!1),c(null)},N=he=>{V(he.active.id)},k=he=>{V(null);const{active:Q,over:le}=he;if(!le||Q.id===le.id)return;const Ee=ue.indexOf(Q.id),Ne=ue.indexOf(le.id);if(Ee===-1||Ne===-1)return;const ze=W_(ue,Ee,Ne);t(ze)},D=()=>{V(null)};if(!q)return b.jsx("div",{className:"p-6 text-gray-500",children:""});const De=()=>X.length===0?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),b.jsx("p",{className:"text-gray-500",children:""}),b.jsx("button",{onClick:()=>{c(null),a(!0)},className:"mt-3 text-blue-600 hover:text-blue-800 text-sm cursor-pointer",children:"+ "})]}):re?b.jsxs(kk,{sensors:U,collisionDetection:BV,onDragStart:N,onDragEnd:k,onDragCancel:D,children:[b.jsx(i6,{items:ue,strategy:J_,children:b.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:X.map(he=>b.jsx(z6,{task:he,onEdit:w,isDragEnabled:!0},he.id))})}),b.jsx(e6,{children:fe?b.jsx("div",{className:"opacity-90 rotate-2 shadow-2xl",children:b.jsx(Uy,{task:fe,onEdit:()=>{}})}):null})]}):b.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:X.map(he=>b.jsx(Uy,{task:he,onEdit:w},he.id))});return b.jsxs("div",{className:"p-6 animate-fade-in",children:[b.jsxs("div",{className:"flex items-center justify-between mb-6",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("div",{className:"shadow-lg rounded-full",children:b.jsx(H_,{member:q,size:"lg"})}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-xl font-bold text-gray-900",children:q.nameJa}),b.jsxs("p",{className:"text-sm text-gray-500",children:[q.nameEn," | ",te.length," |  ",C," |  ",ce,"%",R>0&&b.jsxs("span",{className:"text-orange-500 ml-1",children:["|  ",R,""]})]})]})]}),b.jsxs("button",{onClick:()=>{c(null),a(!0)},className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition flex items-center gap-1 cursor-pointer",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),""]})]}),b.jsxs("div",{className:"flex items-center gap-4 mb-4 flex-wrap",children:[b.jsxs("div",{className:"flex gap-1.5 flex-wrap flex-1",children:[b.jsxs("button",{onClick:()=>g("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${f==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",te.length,")"]}),ps.map(he=>{const Q=te.filter(le=>le.category===he.id).length;return Q===0?null:b.jsxs("button",{onClick:()=>g(he.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${f===he.id?"text-white":"text-gray-600 hover:opacity-80"}`,style:f===he.id?{backgroundColor:he.color}:{backgroundColor:`${he.color}20`,color:he.color},children:[he.label," (",Q,")"]},he.id)})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("select",{value:p,onChange:he=>_(he.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-lg",children:[b.jsx("option",{value:"all",children:""}),uh.map(he=>b.jsxs("option",{value:he.id,children:[he.icon," ",he.label]},he.id))]}),b.jsxs("select",{value:v,onChange:he=>S(he.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded-lg",children:[b.jsx("option",{value:"default",children:""}),b.jsx("option",{value:"priority",children:""}),b.jsx("option",{value:"dueDate",children:""}),b.jsx("option",{value:"progress",children:""})]})]})]}),re&&X.length>1&&b.jsxs("p",{className:"text-xs text-gray-400 mb-3 flex items-center gap-1",children:[b.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),""]}),De(),i&&b.jsx(q6,{task:l,defaultMemberId:r,onClose:O})]})}function K6({selectedMember:r}){const{deletedTasks:e,restoreFromTrash:t,permanentlyDelete:i,emptyTrash:a}=Ui(),[l,c]=z.useState("all"),g=di.find(I=>I.id===r)?.role==="manager",_=[...l==="all"?e:e.filter(I=>I.memberId===l)].sort((I,V)=>new Date(V.deletedAt)-new Date(I.deletedAt)),v=I=>{if(!I)return"";const V=new Date(I);return`${V.getFullYear()}/${V.getMonth()+1}/${V.getDate()} ${V.getHours()}:${String(V.getMinutes()).padStart(2,"0")}`},S=I=>{if(!I)return 0;const V=Date.now()-new Date(I).getTime();return Math.floor(V/(1e3*60*60*24))};return b.jsxs("div",{className:"p-6 animate-fade-in",children:[b.jsxs("div",{className:"flex items-center justify-between mb-6",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:b.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),b.jsxs("p",{className:"text-sm text-gray-500",children:[e.length,""]}),!g&&e.length>0&&b.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:" "})]})]}),e.length>0&&g&&b.jsx("button",{onClick:()=>{confirm(`
${e.length}`)&&a()},className:"px-3 py-1.5 text-xs text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition cursor-pointer",children:" "})]}),e.length>0&&b.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[b.jsxs("button",{onClick:()=>c("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${l==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" (",e.length,")"]}),di.map(I=>{const V=e.filter(U=>U.memberId===I.id).length;return V===0?null:b.jsxs("button",{onClick:()=>c(I.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${l===I.id?"text-white":"hover:opacity-80"}`,style:l===I.id?{backgroundColor:I.color}:{backgroundColor:`${I.color}20`,color:I.color},children:[I.nameJa," (",V,")"]},I.id)})]}),_.length>0?b.jsx("div",{className:"space-y-3",children:_.map(I=>{const V=di.find(X=>X.id===I.memberId),U=ps.find(X=>X.id===I.category),q=uh.find(X=>X.id===I.taskType),te=S(I.deletedAt);return b.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 opacity-75 hover:opacity-100 transition",children:b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 flex-wrap",children:[V&&b.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium",style:{backgroundColor:V.color},children:V.nameJa}),U&&b.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${U.color}20`,color:U.color},children:U.label}),q&&b.jsxs("span",{className:"text-xs text-gray-500",children:[q.icon," ",q.label]})]}),b.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:I.title||"()"}),b.jsx("div",{className:"mb-2 max-w-xs",children:b.jsx(Kc,{progress:I.progress,delta:null})}),b.jsxs("p",{className:"text-xs text-gray-400",children:[": ",v(I.deletedAt),te>0&&b.jsxs("span",{className:"ml-1",children:["(",te,")"]})]})]}),b.jsxs("div",{className:"flex flex-col gap-1.5 ml-3 flex-shrink-0",children:[b.jsxs("button",{onClick:()=>t(I.id),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition cursor-pointer flex items-center gap-1",children:[b.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),""]}),g&&b.jsx("button",{onClick:()=>{confirm("")&&i(I.id)},className:"px-3 py-1.5 text-xs text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition cursor-pointer",children:""})]})]})},I.id)})}):b.jsxs("div",{className:"text-center py-16",children:[b.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:b.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),b.jsx("p",{className:"text-gray-500 font-medium",children:""}),b.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]})]})}function Y6(){const{archivedTasks:r,restoreFromArchive:e}=Ui(),[t,i]=z.useState("all"),[a,l]=z.useState("all"),[c,f]=z.useState("");let g=r;if(t!=="all"&&(g=g.filter(v=>v.memberId===t)),a!=="all"&&(g=g.filter(v=>v.category===a)),c.trim()){const v=c.toLowerCase();g=g.filter(S=>(S.title||"").toLowerCase().includes(v)||(S.done||"").toLowerCase().includes(v)||(S.completionNotes||"").toLowerCase().includes(v))}const p=[...g].sort((v,S)=>new Date(S.archivedAt)-new Date(v.archivedAt)),_=v=>{if(!v)return"";const S=new Date(v);return`${S.getFullYear()}/${S.getMonth()+1}/${S.getDate()}`};return b.jsxs("div",{className:"p-6 animate-fade-in",children:[b.jsx("div",{className:"flex items-center justify-between mb-6",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:b.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-xl font-bold text-gray-900",children:""}),b.jsxs("p",{className:"text-sm text-gray-500",children:[r.length,""]})]})]})}),r.length>0&&b.jsxs("div",{className:"space-y-3 mb-4",children:[b.jsxs("div",{className:"relative",children:[b.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),b.jsx("input",{type:"text",value:c,onChange:v=>f(v.target.value),placeholder:"...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),b.jsxs("div",{className:"flex gap-2 flex-wrap",children:[b.jsx("button",{onClick:()=>i("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${t==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),di.map(v=>{const S=r.filter(I=>I.memberId===v.id).length;return S===0?null:b.jsxs("button",{onClick:()=>i(v.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${t===v.id?"text-white":"hover:opacity-80"}`,style:t===v.id?{backgroundColor:v.color}:{backgroundColor:`${v.color}20`,color:v.color},children:[v.nameJa," (",S,")"]},v.id)})]}),b.jsxs("div",{className:"flex gap-2 flex-wrap",children:[b.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${a==="all"?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),ps.map(v=>{const S=r.filter(I=>I.category===v.id).length;return S===0?null:b.jsxs("button",{onClick:()=>l(v.id),className:`px-3 py-1 text-xs rounded-full transition cursor-pointer ${a===v.id?"text-white":"hover:opacity-80"}`,style:a===v.id?{backgroundColor:v.color}:{backgroundColor:`${v.color}20`,color:v.color},children:[v.label," (",S,")"]},v.id)})]})]}),p.length>0?b.jsx("div",{className:"space-y-3",children:p.map(v=>{const S=di.find(U=>U.id===v.memberId),I=ps.find(U=>U.id===v.category),V=uh.find(U=>U.id===v.taskType);return b.jsx("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 hover:shadow-md transition",children:b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 flex-wrap",children:[S&&b.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full text-white font-medium",style:{backgroundColor:S.color},children:S.nameJa}),I&&b.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${I.color}20`,color:I.color},children:I.label}),V&&b.jsxs("span",{className:"text-xs text-gray-500",children:[V.icon," ",V.label]}),v.priority&&b.jsx("span",{className:"inline-flex items-center",children:[1,2,3,4,5].map(U=>b.jsx("span",{className:`text-xs ${U<=v.priority?"text-yellow-400":"text-gray-300"}`,children:""},U))})]}),b.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.jsx("span",{className:"text-emerald-500",children:""}),b.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:v.title||"()"})]}),b.jsx("div",{className:"mb-2 max-w-xs",children:b.jsx(Kc,{progress:v.progress,delta:null})}),v.completionNotes&&b.jsxs("div",{className:"bg-emerald-50 rounded-lg px-2 py-1.5 mb-2",children:[b.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:":"}),b.jsx("p",{className:"text-xs text-emerald-600 mt-0.5",children:v.completionNotes})]}),v.done&&b.jsxs("p",{className:"text-xs text-gray-500 mb-1 line-clamp-2",children:[b.jsx("span",{className:"font-medium text-gray-600",children:": "}),v.done]}),b.jsxs("p",{className:"text-xs text-gray-400",children:[": ",_(v.archivedAt),v.createdAt&&b.jsxs("span",{className:"ml-2",children:[": ",_(v.createdAt)]})]})]}),b.jsx("div",{className:"ml-3 flex-shrink-0",children:b.jsxs("button",{onClick:()=>e(v.id),className:"px-3 py-1.5 text-xs bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition cursor-pointer flex items-center gap-1",children:[b.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),""]})})]})},v.id)})}):b.jsxs("div",{className:"text-center py-16",children:[b.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:b.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),b.jsx("p",{className:"text-gray-500 font-medium",children:r.length>0?"":""}),b.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]})]})}function Q6(){const{tasks:r,exportData:e,importData:t}=Ui(),[i,a]=z.useState("idle"),[l,c]=z.useState(""),[f,g]=z.useState({instanceUrl:localStorage.getItem("sf-instance-url")||"",accessToken:localStorage.getItem("sf-access-token")||""}),[p,_]=z.useState(!1),v=()=>{localStorage.setItem("sf-instance-url",f.instanceUrl),localStorage.setItem("sf-access-token",f.accessToken),_(!1),c("")},S=async()=>{if(!f.instanceUrl||!f.accessToken){c("Salesforce"),_(!0);return}a("syncing"),c("Salesforce...");try{for(const V of r){const U={Name:V.title||"(Untitled)",Member_Id__c:V.memberId,Category__c:V.category,Progress__c:V.progress,Done__c:V.done||"",Not_Done__c:V.notDone||"",Not_Done_Reason__c:V.notDoneReason||"",Issues__c:V.issues||"",Consultation__c:V.consultation||"",External_Id__c:V.id},q=await fetch(`${f.instanceUrl}/services/data/v59.0/sobjects/Weekly_Task__c/External_Id__c/${V.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${f.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(U)});if(!q.ok&&q.status!==201&&q.status!==204)throw new Error(`Sync failed for task: ${V.title}`)}a("success"),c(`${r.length}Salesforce`)}catch(V){a("error"),c(`: ${V.message}`)}},I=async()=>{if(!f.instanceUrl||!f.accessToken){c("Salesforce"),_(!0);return}a("syncing"),c("Salesforce...");try{const V=encodeURIComponent("SELECT External_Id__c, Name, Member_Id__c, Category__c, Progress__c, Done__c, Not_Done__c, Not_Done_Reason__c, Issues__c, Consultation__c FROM Weekly_Task__c"),U=await fetch(`${f.instanceUrl}/services/data/v59.0/query/?q=${V}`,{headers:{Authorization:`Bearer ${f.accessToken}`}});if(!U.ok)throw new Error("Failed to fetch from Salesforce");const te=(await U.json()).records.map(X=>({id:X.External_Id__c,memberId:X.Member_Id__c,category:X.Category__c,title:X.Name,progress:X.Progress__c||0,done:X.Done__c||"",notDone:X.Not_Done__c||"",notDoneReason:X.Not_Done_Reason__c||"",issues:X.Issues__c||"",consultation:X.Consultation__c||"",weeklyHistory:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));t({tasks:te}),a("success"),c(`${te.length}`)}catch(V){a("error"),c(`: ${V.message}`)}};return b.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("svg",{className:"w-5 h-5 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:b.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),b.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Salesforce"})]}),b.jsx("button",{onClick:()=>_(!p),className:"text-xs text-gray-500 hover:text-gray-700 cursor-pointer",children:p?"":""})]}),p&&b.jsxs("div",{className:"mb-3 space-y-2 p-3 bg-gray-50 rounded-lg",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs text-gray-600",children:"Instance URL"}),b.jsx("input",{type:"text",value:f.instanceUrl,onChange:V=>g(U=>({...U,instanceUrl:V.target.value})),placeholder:"https://your-org.my.salesforce.com",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-0.5"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs text-gray-600",children:"Access Token"}),b.jsx("input",{type:"password",value:f.accessToken,onChange:V=>g(U=>({...U,accessToken:V.target.value})),placeholder:"Your Salesforce access token",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-0.5"})]}),b.jsx("button",{onClick:v,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:""})]}),l&&b.jsx("div",{className:`text-xs mb-3 p-2 rounded ${i==="error"?"bg-red-50 text-red-600":i==="success"?"bg-green-50 text-green-600":"bg-blue-50 text-blue-600"}`,children:l}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:S,disabled:i==="syncing",className:"flex-1 px-3 py-2 text-xs bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition disabled:opacity-50 cursor-pointer",children:i==="syncing"?"...":"SF "}),b.jsx("button",{onClick:I,disabled:i==="syncing",className:"flex-1 px-3 py-2 text-xs bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition disabled:opacity-50 cursor-pointer",children:i==="syncing"?"...":"SF "})]})]})}function $6(){const{exportData:r,importData:e,isLoading:t}=Ui(),[i,a]=z.useState(di[0].id),[l,c]=z.useState("dashboard");if(t)return b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),b.jsx("p",{className:"text-gray-500 text-sm",children:"..."})]})});const f=I=>{a(I),c("member")},g=()=>{c("dashboard")},p=I=>{c(I)},_=()=>{const I=r(),V=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),U=URL.createObjectURL(V),q=document.createElement("a");q.href=U,q.download=`weekly-tasks-${new Date().toISOString().slice(0,10)}.json`,q.click(),URL.revokeObjectURL(U)},v=I=>{const V=I.target.files?.[0];if(!V)return;const U=new FileReader;U.onload=q=>{try{const te=JSON.parse(q.target.result);confirm(`${te.tasks?.length||0}
`)&&e(te)}catch{alert("")}},U.readAsText(V),I.target.value=""},S=()=>{switch(l){case"dashboard":return b.jsx(IS,{onSelectMember:f});case"member":return b.jsx(G6,{memberId:i});case"trash":return b.jsx(K6,{selectedMember:i});case"archive":return b.jsx(Y6,{});default:return b.jsx(IS,{onSelectMember:f})}};return b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx(yV,{onExport:_,onImport:v}),b.jsxs("div",{className:"flex",children:[b.jsx(vV,{selectedMember:i,onSelectMember:f,showDashboard:l==="dashboard",onShowDashboard:g,activeView:l,onChangeView:p}),b.jsx("main",{className:"flex-1 min-h-[calc(100vh-57px)] overflow-y-auto",children:S()}),b.jsxs("aside",{className:"w-72 border-l border-gray-200 bg-white p-4 h-[calc(100vh-57px)] overflow-y-auto flex-shrink-0",children:[b.jsx(Q6,{}),b.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[b.jsx("h4",{className:"text-xs font-semibold text-gray-500 mb-2",children:""}),b.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[b.jsx("li",{children:" "}),b.jsx("li",{children:" "}),b.jsx("li",{children:" "}),b.jsx("li",{children:" "}),b.jsx("li",{children:" "}),b.jsx("li",{children:" "}),b.jsx("li",{children:" /"})]})]})]})]})]})}jR.createRoot(document.getElementById("root")).render(b.jsx(z.StrictMode,{children:b.jsx(pV,{children:b.jsx($6,{})})}));
